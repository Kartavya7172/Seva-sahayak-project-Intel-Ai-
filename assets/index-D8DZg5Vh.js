var J2=Object.defineProperty;var nC=n=>{throw TypeError(n)};var Z2=(n,e,t)=>e in n?J2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var V=(n,e,t)=>Z2(n,typeof e!="symbol"?e+"":e,t),zb=(n,e,t)=>e.has(n)||nC("Cannot "+t);var l=(n,e,t)=>(zb(n,e,"read from private field"),t?t.call(n):e.get(n)),S=(n,e,t)=>e.has(n)?nC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),x=(n,e,t,r)=>(zb(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),C=(n,e,t)=>(zb(n,e,"access private method"),t);var wt=(n,e,t,r)=>({set _(s){x(n,e,s,t)},get _(){return l(n,e,r)}});function eF(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function _P(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var SP={exports:{}},X0={},EP={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv=Symbol.for("react.element"),tF=Symbol.for("react.portal"),nF=Symbol.for("react.fragment"),rF=Symbol.for("react.strict_mode"),sF=Symbol.for("react.profiler"),iF=Symbol.for("react.provider"),oF=Symbol.for("react.context"),aF=Symbol.for("react.forward_ref"),lF=Symbol.for("react.suspense"),cF=Symbol.for("react.memo"),uF=Symbol.for("react.lazy"),rC=Symbol.iterator;function dF(n){return n===null||typeof n!="object"?null:(n=rC&&n[rC]||n["@@iterator"],typeof n=="function"?n:null)}var AP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},CP=Object.assign,TP={};function Vf(n,e,t){this.props=n,this.context=e,this.refs=TP,this.updater=t||AP}Vf.prototype.isReactComponent={};Vf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Vf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function kP(){}kP.prototype=Vf.prototype;function ZE(n,e,t){this.props=n,this.context=e,this.refs=TP,this.updater=t||AP}var eA=ZE.prototype=new kP;eA.constructor=ZE;CP(eA,Vf.prototype);eA.isPureReactComponent=!0;var sC=Array.isArray,PP=Object.prototype.hasOwnProperty,tA={current:null},RP={key:!0,ref:!0,__self:!0,__source:!0};function NP(n,e,t){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)PP.call(e,r)&&!RP.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Pv,type:n,key:i,ref:o,props:s,_owner:tA.current}}function hF(n,e){return{$$typeof:Pv,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function nA(n){return typeof n=="object"&&n!==null&&n.$$typeof===Pv}function fF(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var iC=/\/+/g;function Hb(n,e){return typeof n=="object"&&n!==null&&n.key!=null?fF(""+n.key):e.toString(36)}function Ly(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Pv:case tF:o=!0}}if(o)return o=n,s=s(o),n=r===""?"."+Hb(o,0):r,sC(s)?(t="",n!=null&&(t=n.replace(iC,"$&/")+"/"),Ly(s,e,t,"",function(u){return u})):s!=null&&(nA(s)&&(s=hF(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(iC,"$&/")+"/")+n)),e.push(s)),1;if(o=0,r=r===""?".":r+":",sC(n))for(var a=0;a<n.length;a++){i=n[a];var c=r+Hb(i,a);o+=Ly(i,e,t,c,s)}else if(c=dF(n),typeof c=="function")for(n=c.call(n),a=0;!(i=n.next()).done;)i=i.value,c=r+Hb(i,a++),o+=Ly(i,e,t,c,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qv(n,e,t){if(n==null)return n;var r=[],s=0;return Ly(n,r,"","",function(i){return e.call(t,i,s++)}),r}function pF(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Wn={current:null},Fy={transition:null},mF={ReactCurrentDispatcher:Wn,ReactCurrentBatchConfig:Fy,ReactCurrentOwner:tA};function IP(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Qv,forEach:function(n,e,t){Qv(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Qv(n,function(){e++}),e},toArray:function(n){return Qv(n,function(e){return e})||[]},only:function(n){if(!nA(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Se.Component=Vf;Se.Fragment=nF;Se.Profiler=sF;Se.PureComponent=ZE;Se.StrictMode=rF;Se.Suspense=lF;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mF;Se.act=IP;Se.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=CP({},n.props),s=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=tA.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(c in e)PP.call(e,c)&&!RP.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=t;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Pv,type:n.type,key:s,ref:i,props:r,_owner:o}};Se.createContext=function(n){return n={$$typeof:oF,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:iF,_context:n},n.Consumer=n};Se.createElement=NP;Se.createFactory=function(n){var e=NP.bind(null,n);return e.type=n,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(n){return{$$typeof:aF,render:n}};Se.isValidElement=nA;Se.lazy=function(n){return{$$typeof:uF,_payload:{_status:-1,_result:n},_init:pF}};Se.memo=function(n,e){return{$$typeof:cF,type:n,compare:e===void 0?null:e}};Se.startTransition=function(n){var e=Fy.transition;Fy.transition={};try{n()}finally{Fy.transition=e}};Se.unstable_act=IP;Se.useCallback=function(n,e){return Wn.current.useCallback(n,e)};Se.useContext=function(n){return Wn.current.useContext(n)};Se.useDebugValue=function(){};Se.useDeferredValue=function(n){return Wn.current.useDeferredValue(n)};Se.useEffect=function(n,e){return Wn.current.useEffect(n,e)};Se.useId=function(){return Wn.current.useId()};Se.useImperativeHandle=function(n,e,t){return Wn.current.useImperativeHandle(n,e,t)};Se.useInsertionEffect=function(n,e){return Wn.current.useInsertionEffect(n,e)};Se.useLayoutEffect=function(n,e){return Wn.current.useLayoutEffect(n,e)};Se.useMemo=function(n,e){return Wn.current.useMemo(n,e)};Se.useReducer=function(n,e,t){return Wn.current.useReducer(n,e,t)};Se.useRef=function(n){return Wn.current.useRef(n)};Se.useState=function(n){return Wn.current.useState(n)};Se.useSyncExternalStore=function(n,e,t){return Wn.current.useSyncExternalStore(n,e,t)};Se.useTransition=function(){return Wn.current.useTransition()};Se.version="18.3.1";EP.exports=Se;var A=EP.exports;const q=_P(A),rA=eF({__proto__:null,default:q},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gF=A,vF=Symbol.for("react.element"),yF=Symbol.for("react.fragment"),wF=Object.prototype.hasOwnProperty,bF=gF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xF={key:!0,ref:!0,__self:!0,__source:!0};function OP(n,e,t){var r,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)wF.call(e,r)&&!xF.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:vF,type:n,key:i,ref:o,props:s,_owner:bF.current}}X0.Fragment=yF;X0.jsx=OP;X0.jsxs=OP;SP.exports=X0;var _=SP.exports,MP={exports:{}},Wr={},DP={exports:{}},LP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,O){var H=D.length;D.push(O);e:for(;0<H;){var Y=H-1>>>1,W=D[Y];if(0<s(W,O))D[Y]=O,D[H]=W,H=Y;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var O=D[0],H=D.pop();if(H!==O){D[0]=H;e:for(var Y=0,W=D.length,X=W>>>1;Y<X;){var re=2*(Y+1)-1,we=D[re],xe=re+1,U=D[xe];if(0>s(we,H))xe<W&&0>s(U,we)?(D[Y]=U,D[xe]=H,Y=xe):(D[Y]=we,D[re]=H,Y=re);else if(xe<W&&0>s(U,H))D[Y]=U,D[xe]=H,Y=xe;else break e}}return O}function s(D,O){var H=D.sortIndex-O.sortIndex;return H!==0?H:D.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,h=null,f=3,p=!1,v=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(D){for(var O=t(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=D)r(u),O.sortIndex=O.expirationTime,e(c,O);else break;O=t(u)}}function E(D){if(m=!1,y(D),!v)if(t(c)!==null)v=!0,j(T);else{var O=t(u);O!==null&&$(E,O.startTime-D)}}function T(D,O){v=!1,m&&(m=!1,g(R),R=-1),p=!0;var H=f;try{for(y(O),h=t(c);h!==null&&(!(h.expirationTime>O)||D&&!M());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,f=h.priorityLevel;var W=Y(h.expirationTime<=O);O=n.unstable_now(),typeof W=="function"?h.callback=W:h===t(c)&&r(c),y(O)}else r(c);h=t(c)}if(h!==null)var X=!0;else{var re=t(u);re!==null&&$(E,re.startTime-O),X=!1}return X}finally{h=null,f=H,p=!1}}var P=!1,k=null,R=-1,N=5,I=-1;function M(){return!(n.unstable_now()-I<N)}function L(){if(k!==null){var D=n.unstable_now();I=D;var O=!0;try{O=k(!0,D)}finally{O?z():(P=!1,k=null)}}else P=!1}var z;if(typeof b=="function")z=function(){b(L)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,B=F.port2;F.port1.onmessage=L,z=function(){B.postMessage(null)}}else z=function(){w(L,0)};function j(D){k=D,P||(P=!0,z())}function $(D,O){R=w(function(){D(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){v||p||(v=!0,j(T))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(D){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var H=f;f=O;try{return D()}finally{f=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,O){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var H=f;f=D;try{return O()}finally{f=H}},n.unstable_scheduleCallback=function(D,O,H){var Y=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Y+H:Y):H=Y,D){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=H+W,D={id:d++,callback:O,priorityLevel:D,startTime:H,expirationTime:W,sortIndex:-1},H>Y?(D.sortIndex=H,e(u,D),t(c)===null&&D===t(u)&&(m?(g(R),R=-1):m=!0,$(E,H-Y))):(D.sortIndex=W,e(c,D),v||p||(v=!0,j(T))),D},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(D){var O=f;return function(){var H=f;f=O;try{return D.apply(this,arguments)}finally{f=H}}}})(LP);DP.exports=LP;var _F=DP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SF=A,Vr=_F;function G(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FP=new Set,rm={};function $u(n,e){Nf(n,e),Nf(n+"Capture",e)}function Nf(n,e){for(rm[n]=e,n=0;n<e.length;n++)FP.add(e[n])}var Ho=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kx=Object.prototype.hasOwnProperty,EF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oC={},aC={};function AF(n){return Kx.call(aC,n)?!0:Kx.call(oC,n)?!1:EF.test(n)?aC[n]=!0:(oC[n]=!0,!1)}function CF(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function TF(n,e,t,r){if(e===null||typeof e>"u"||CF(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gn(n,e,t,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){yn[n]=new Gn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];yn[e]=new Gn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){yn[n]=new Gn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){yn[n]=new Gn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){yn[n]=new Gn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){yn[n]=new Gn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){yn[n]=new Gn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){yn[n]=new Gn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){yn[n]=new Gn(n,5,!1,n.toLowerCase(),null,!1,!1)});var sA=/[\-:]([a-z])/g;function iA(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(sA,iA);yn[e]=new Gn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(sA,iA);yn[e]=new Gn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(sA,iA);yn[e]=new Gn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){yn[n]=new Gn(n,1,!1,n.toLowerCase(),null,!1,!1)});yn.xlinkHref=new Gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){yn[n]=new Gn(n,1,!1,n.toLowerCase(),null,!0,!0)});function oA(n,e,t,r){var s=yn.hasOwnProperty(e)?yn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TF(e,t,s,r)&&(t=null),r||s===null?AF(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Qo=SF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jv=Symbol.for("react.element"),bd=Symbol.for("react.portal"),xd=Symbol.for("react.fragment"),aA=Symbol.for("react.strict_mode"),Xx=Symbol.for("react.profiler"),jP=Symbol.for("react.provider"),BP=Symbol.for("react.context"),lA=Symbol.for("react.forward_ref"),Yx=Symbol.for("react.suspense"),Qx=Symbol.for("react.suspense_list"),cA=Symbol.for("react.memo"),ua=Symbol.for("react.lazy"),$P=Symbol.for("react.offscreen"),lC=Symbol.iterator;function tp(n){return n===null||typeof n!="object"?null:(n=lC&&n[lC]||n["@@iterator"],typeof n=="function"?n:null)}var yt=Object.assign,Vb;function gp(n){if(Vb===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Vb=e&&e[1]||""}return`
`+Vb+n}var Wb=!1;function Gb(n,e){if(!n||Wb)return"";Wb=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=a);break}}}finally{Wb=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?gp(n):""}function kF(n){switch(n.tag){case 5:return gp(n.type);case 16:return gp("Lazy");case 13:return gp("Suspense");case 19:return gp("SuspenseList");case 0:case 2:case 15:return n=Gb(n.type,!1),n;case 11:return n=Gb(n.type.render,!1),n;case 1:return n=Gb(n.type,!0),n;default:return""}}function Jx(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case xd:return"Fragment";case bd:return"Portal";case Xx:return"Profiler";case aA:return"StrictMode";case Yx:return"Suspense";case Qx:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case BP:return(n.displayName||"Context")+".Consumer";case jP:return(n._context.displayName||"Context")+".Provider";case lA:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case cA:return e=n.displayName||null,e!==null?e:Jx(n.type)||"Memo";case ua:e=n._payload,n=n._init;try{return Jx(n(e))}catch{}}return null}function PF(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jx(e);case 8:return e===aA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function El(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function UP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RF(n){var e=UP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Zv(n){n._valueTracker||(n._valueTracker=RF(n))}function zP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=UP(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Mw(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Zx(n,e){var t=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function cC(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=El(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function HP(n,e){e=e.checked,e!=null&&oA(n,"checked",e,!1)}function e_(n,e){HP(n,e);var t=El(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?t_(n,e.type,t):e.hasOwnProperty("defaultValue")&&t_(n,e.type,El(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function uC(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function t_(n,e,t){(e!=="number"||Mw(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var vp=Array.isArray;function Bd(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+El(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function n_(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function dC(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(G(92));if(vp(t)){if(1<t.length)throw Error(G(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:El(t)}}function VP(n,e){var t=El(e.value),r=El(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function hC(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function WP(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function r_(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?WP(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ey,GP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(ey=ey||document.createElement("div"),ey.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ey.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function sm(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Wp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NF=["Webkit","ms","Moz","O"];Object.keys(Wp).forEach(function(n){NF.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Wp[e]=Wp[n]})});function qP(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Wp.hasOwnProperty(n)&&Wp[n]?(""+e).trim():e+"px"}function KP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=qP(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var IF=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function s_(n,e){if(e){if(IF[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function i_(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var o_=null;function uA(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var a_=null,$d=null,Ud=null;function fC(n){if(n=Iv(n)){if(typeof a_!="function")throw Error(G(280));var e=n.stateNode;e&&(e=eb(e),a_(n.stateNode,n.type,e))}}function XP(n){$d?Ud?Ud.push(n):Ud=[n]:$d=n}function YP(){if($d){var n=$d,e=Ud;if(Ud=$d=null,fC(n),e)for(n=0;n<e.length;n++)fC(e[n])}}function QP(n,e){return n(e)}function JP(){}var qb=!1;function ZP(n,e,t){if(qb)return n(e,t);qb=!0;try{return QP(n,e,t)}finally{qb=!1,($d!==null||Ud!==null)&&(JP(),YP())}}function im(n,e){var t=n.stateNode;if(t===null)return null;var r=eb(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(G(231,e,typeof t));return t}var l_=!1;if(Ho)try{var np={};Object.defineProperty(np,"passive",{get:function(){l_=!0}}),window.addEventListener("test",np,np),window.removeEventListener("test",np,np)}catch{l_=!1}function OF(n,e,t,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var Gp=!1,Dw=null,Lw=!1,c_=null,MF={onError:function(n){Gp=!0,Dw=n}};function DF(n,e,t,r,s,i,o,a,c){Gp=!1,Dw=null,OF.apply(MF,arguments)}function LF(n,e,t,r,s,i,o,a,c){if(DF.apply(this,arguments),Gp){if(Gp){var u=Dw;Gp=!1,Dw=null}else throw Error(G(198));Lw||(Lw=!0,c_=u)}}function Uu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function eR(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function pC(n){if(Uu(n)!==n)throw Error(G(188))}function FF(n){var e=n.alternate;if(!e){if(e=Uu(n),e===null)throw Error(G(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return pC(s),n;if(i===r)return pC(s),e;i=i.sibling}throw Error(G(188))}if(t.return!==r.return)t=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o)throw Error(G(189))}}if(t.alternate!==r)throw Error(G(190))}if(t.tag!==3)throw Error(G(188));return t.stateNode.current===t?n:e}function tR(n){return n=FF(n),n!==null?nR(n):null}function nR(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=nR(n);if(e!==null)return e;n=n.sibling}return null}var rR=Vr.unstable_scheduleCallback,mC=Vr.unstable_cancelCallback,jF=Vr.unstable_shouldYield,BF=Vr.unstable_requestPaint,Nt=Vr.unstable_now,$F=Vr.unstable_getCurrentPriorityLevel,dA=Vr.unstable_ImmediatePriority,sR=Vr.unstable_UserBlockingPriority,Fw=Vr.unstable_NormalPriority,UF=Vr.unstable_LowPriority,iR=Vr.unstable_IdlePriority,Y0=null,Fi=null;function zF(n){if(Fi&&typeof Fi.onCommitFiberRoot=="function")try{Fi.onCommitFiberRoot(Y0,n,void 0,(n.current.flags&128)===128)}catch{}}var Xs=Math.clz32?Math.clz32:WF,HF=Math.log,VF=Math.LN2;function WF(n){return n>>>=0,n===0?32:31-(HF(n)/VF|0)|0}var ty=64,ny=4194304;function yp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function jw(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?r=yp(a):(i&=o,i!==0&&(r=yp(i)))}else o=t&~s,o!==0?r=yp(o):i!==0&&(r=yp(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Xs(e),s=1<<t,r|=n[t],e&=~s;return r}function GF(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qF(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-Xs(i),a=1<<o,c=s[o];c===-1?(!(a&t)||a&r)&&(s[o]=GF(a,e)):c<=e&&(n.expiredLanes|=a),i&=~a}}function u_(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function oR(){var n=ty;return ty<<=1,!(ty&4194240)&&(ty=64),n}function Kb(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Rv(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Xs(e),n[e]=t}function KF(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-Xs(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function hA(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Xs(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var je=0;function aR(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var lR,fA,cR,uR,dR,d_=!1,ry=[],gl=null,vl=null,yl=null,om=new Map,am=new Map,fa=[],XF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gC(n,e){switch(n){case"focusin":case"focusout":gl=null;break;case"dragenter":case"dragleave":vl=null;break;case"mouseover":case"mouseout":yl=null;break;case"pointerover":case"pointerout":om.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":am.delete(e.pointerId)}}function rp(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Iv(e),e!==null&&fA(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function YF(n,e,t,r,s){switch(e){case"focusin":return gl=rp(gl,n,e,t,r,s),!0;case"dragenter":return vl=rp(vl,n,e,t,r,s),!0;case"mouseover":return yl=rp(yl,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return om.set(i,rp(om.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,am.set(i,rp(am.get(i)||null,n,e,t,r,s)),!0}return!1}function hR(n){var e=ec(n.target);if(e!==null){var t=Uu(e);if(t!==null){if(e=t.tag,e===13){if(e=eR(t),e!==null){n.blockedOn=e,dR(n.priority,function(){cR(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function jy(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=h_(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);o_=r,t.target.dispatchEvent(r),o_=null}else return e=Iv(t),e!==null&&fA(e),n.blockedOn=t,!1;e.shift()}return!0}function vC(n,e,t){jy(n)&&t.delete(e)}function QF(){d_=!1,gl!==null&&jy(gl)&&(gl=null),vl!==null&&jy(vl)&&(vl=null),yl!==null&&jy(yl)&&(yl=null),om.forEach(vC),am.forEach(vC)}function sp(n,e){n.blockedOn===e&&(n.blockedOn=null,d_||(d_=!0,Vr.unstable_scheduleCallback(Vr.unstable_NormalPriority,QF)))}function lm(n){function e(s){return sp(s,n)}if(0<ry.length){sp(ry[0],n);for(var t=1;t<ry.length;t++){var r=ry[t];r.blockedOn===n&&(r.blockedOn=null)}}for(gl!==null&&sp(gl,n),vl!==null&&sp(vl,n),yl!==null&&sp(yl,n),om.forEach(e),am.forEach(e),t=0;t<fa.length;t++)r=fa[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<fa.length&&(t=fa[0],t.blockedOn===null);)hR(t),t.blockedOn===null&&fa.shift()}var zd=Qo.ReactCurrentBatchConfig,Bw=!0;function JF(n,e,t,r){var s=je,i=zd.transition;zd.transition=null;try{je=1,pA(n,e,t,r)}finally{je=s,zd.transition=i}}function ZF(n,e,t,r){var s=je,i=zd.transition;zd.transition=null;try{je=4,pA(n,e,t,r)}finally{je=s,zd.transition=i}}function pA(n,e,t,r){if(Bw){var s=h_(n,e,t,r);if(s===null)sx(n,e,r,$w,t),gC(n,r);else if(YF(s,n,e,t,r))r.stopPropagation();else if(gC(n,r),e&4&&-1<XF.indexOf(n)){for(;s!==null;){var i=Iv(s);if(i!==null&&lR(i),i=h_(n,e,t,r),i===null&&sx(n,e,r,$w,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else sx(n,e,r,null,t)}}var $w=null;function h_(n,e,t,r){if($w=null,n=uA(r),n=ec(n),n!==null)if(e=Uu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=eR(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return $w=n,null}function fR(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($F()){case dA:return 1;case sR:return 4;case Fw:case UF:return 16;case iR:return 536870912;default:return 16}default:return 16}}var fl=null,mA=null,By=null;function pR(){if(By)return By;var n,e=mA,t=e.length,r,s="value"in fl?fl.value:fl.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===s[i-r];r++);return By=s.slice(n,1<r?1-r:void 0)}function $y(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function sy(){return!0}function yC(){return!1}function Gr(n){function e(t,r,s,i,o){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?sy:yC,this.isPropagationStopped=yC,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=sy)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=sy)},persist:function(){},isPersistent:sy}),e}var Wf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gA=Gr(Wf),Nv=yt({},Wf,{view:0,detail:0}),ej=Gr(Nv),Xb,Yb,ip,Q0=yt({},Nv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vA,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ip&&(ip&&n.type==="mousemove"?(Xb=n.screenX-ip.screenX,Yb=n.screenY-ip.screenY):Yb=Xb=0,ip=n),Xb)},movementY:function(n){return"movementY"in n?n.movementY:Yb}}),wC=Gr(Q0),tj=yt({},Q0,{dataTransfer:0}),nj=Gr(tj),rj=yt({},Nv,{relatedTarget:0}),Qb=Gr(rj),sj=yt({},Wf,{animationName:0,elapsedTime:0,pseudoElement:0}),ij=Gr(sj),oj=yt({},Wf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),aj=Gr(oj),lj=yt({},Wf,{data:0}),bC=Gr(lj),cj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hj(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=dj[n])?!!e[n]:!1}function vA(){return hj}var fj=yt({},Nv,{key:function(n){if(n.key){var e=cj[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=$y(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?uj[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vA,charCode:function(n){return n.type==="keypress"?$y(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$y(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),pj=Gr(fj),mj=yt({},Q0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xC=Gr(mj),gj=yt({},Nv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vA}),vj=Gr(gj),yj=yt({},Wf,{propertyName:0,elapsedTime:0,pseudoElement:0}),wj=Gr(yj),bj=yt({},Q0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),xj=Gr(bj),_j=[9,13,27,32],yA=Ho&&"CompositionEvent"in window,qp=null;Ho&&"documentMode"in document&&(qp=document.documentMode);var Sj=Ho&&"TextEvent"in window&&!qp,mR=Ho&&(!yA||qp&&8<qp&&11>=qp),_C=" ",SC=!1;function gR(n,e){switch(n){case"keyup":return _j.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vR(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var _d=!1;function Ej(n,e){switch(n){case"compositionend":return vR(e);case"keypress":return e.which!==32?null:(SC=!0,_C);case"textInput":return n=e.data,n===_C&&SC?null:n;default:return null}}function Aj(n,e){if(_d)return n==="compositionend"||!yA&&gR(n,e)?(n=pR(),By=mA=fl=null,_d=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mR&&e.locale!=="ko"?null:e.data;default:return null}}var Cj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function EC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Cj[n.type]:e==="textarea"}function yR(n,e,t,r){XP(r),e=Uw(e,"onChange"),0<e.length&&(t=new gA("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Kp=null,cm=null;function Tj(n){PR(n,0)}function J0(n){var e=Ad(n);if(zP(e))return n}function kj(n,e){if(n==="change")return e}var wR=!1;if(Ho){var Jb;if(Ho){var Zb="oninput"in document;if(!Zb){var AC=document.createElement("div");AC.setAttribute("oninput","return;"),Zb=typeof AC.oninput=="function"}Jb=Zb}else Jb=!1;wR=Jb&&(!document.documentMode||9<document.documentMode)}function CC(){Kp&&(Kp.detachEvent("onpropertychange",bR),cm=Kp=null)}function bR(n){if(n.propertyName==="value"&&J0(cm)){var e=[];yR(e,cm,n,uA(n)),ZP(Tj,e)}}function Pj(n,e,t){n==="focusin"?(CC(),Kp=e,cm=t,Kp.attachEvent("onpropertychange",bR)):n==="focusout"&&CC()}function Rj(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return J0(cm)}function Nj(n,e){if(n==="click")return J0(e)}function Ij(n,e){if(n==="input"||n==="change")return J0(e)}function Oj(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Qs=typeof Object.is=="function"?Object.is:Oj;function um(n,e){if(Qs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!Kx.call(e,s)||!Qs(n[s],e[s]))return!1}return!0}function TC(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function kC(n,e){var t=TC(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=TC(t)}}function xR(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?xR(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function _R(){for(var n=window,e=Mw();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Mw(n.document)}return e}function wA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Mj(n){var e=_R(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&xR(t.ownerDocument.documentElement,t)){if(r!==null&&wA(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=kC(t,i);var o=kC(t,r);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Dj=Ho&&"documentMode"in document&&11>=document.documentMode,Sd=null,f_=null,Xp=null,p_=!1;function PC(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;p_||Sd==null||Sd!==Mw(r)||(r=Sd,"selectionStart"in r&&wA(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xp&&um(Xp,r)||(Xp=r,r=Uw(f_,"onSelect"),0<r.length&&(e=new gA("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Sd)))}function iy(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Ed={animationend:iy("Animation","AnimationEnd"),animationiteration:iy("Animation","AnimationIteration"),animationstart:iy("Animation","AnimationStart"),transitionend:iy("Transition","TransitionEnd")},ex={},SR={};Ho&&(SR=document.createElement("div").style,"AnimationEvent"in window||(delete Ed.animationend.animation,delete Ed.animationiteration.animation,delete Ed.animationstart.animation),"TransitionEvent"in window||delete Ed.transitionend.transition);function Z0(n){if(ex[n])return ex[n];if(!Ed[n])return n;var e=Ed[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in SR)return ex[n]=e[t];return n}var ER=Z0("animationend"),AR=Z0("animationiteration"),CR=Z0("animationstart"),TR=Z0("transitionend"),kR=new Map,RC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nl(n,e){kR.set(n,e),$u(e,[n])}for(var tx=0;tx<RC.length;tx++){var nx=RC[tx],Lj=nx.toLowerCase(),Fj=nx[0].toUpperCase()+nx.slice(1);Nl(Lj,"on"+Fj)}Nl(ER,"onAnimationEnd");Nl(AR,"onAnimationIteration");Nl(CR,"onAnimationStart");Nl("dblclick","onDoubleClick");Nl("focusin","onFocus");Nl("focusout","onBlur");Nl(TR,"onTransitionEnd");Nf("onMouseEnter",["mouseout","mouseover"]);Nf("onMouseLeave",["mouseout","mouseover"]);Nf("onPointerEnter",["pointerout","pointerover"]);Nf("onPointerLeave",["pointerout","pointerover"]);$u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$u("onBeforeInput",["compositionend","keypress","textInput","paste"]);$u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jj=new Set("cancel close invalid load scroll toggle".split(" ").concat(wp));function NC(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,LF(r,e,void 0,n),n.currentTarget=null}function PR(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;NC(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;NC(s,a,u),i=c}}}if(Lw)throw n=c_,Lw=!1,c_=null,n}function rt(n,e){var t=e[w_];t===void 0&&(t=e[w_]=new Set);var r=n+"__bubble";t.has(r)||(RR(e,n,2,!1),t.add(r))}function rx(n,e,t){var r=0;e&&(r|=4),RR(t,n,r,e)}var oy="_reactListening"+Math.random().toString(36).slice(2);function dm(n){if(!n[oy]){n[oy]=!0,FP.forEach(function(t){t!=="selectionchange"&&(jj.has(t)||rx(t,!1,n),rx(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[oy]||(e[oy]=!0,rx("selectionchange",!1,e))}}function RR(n,e,t,r){switch(fR(e)){case 1:var s=JF;break;case 4:s=ZF;break;default:s=pA}t=s.bind(null,e,t,n),s=void 0,!l_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function sx(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ec(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}ZP(function(){var u=i,d=uA(t),h=[];e:{var f=kR.get(n);if(f!==void 0){var p=gA,v=n;switch(n){case"keypress":if($y(t)===0)break e;case"keydown":case"keyup":p=pj;break;case"focusin":v="focus",p=Qb;break;case"focusout":v="blur",p=Qb;break;case"beforeblur":case"afterblur":p=Qb;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=wC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=nj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=vj;break;case ER:case AR:case CR:p=ij;break;case TR:p=wj;break;case"scroll":p=ej;break;case"wheel":p=xj;break;case"copy":case"cut":case"paste":p=aj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=xC}var m=(e&4)!==0,w=!m&&n==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var b=u,y;b!==null;){y=b;var E=y.stateNode;if(y.tag===5&&E!==null&&(y=E,g!==null&&(E=im(b,g),E!=null&&m.push(hm(b,E,y)))),w)break;b=b.return}0<m.length&&(f=new p(f,v,null,t,d),h.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==o_&&(v=t.relatedTarget||t.fromElement)&&(ec(v)||v[Vo]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=t.relatedTarget||t.toElement,p=u,v=v?ec(v):null,v!==null&&(w=Uu(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(m=wC,E="onMouseLeave",g="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(m=xC,E="onPointerLeave",g="onPointerEnter",b="pointer"),w=p==null?f:Ad(p),y=v==null?f:Ad(v),f=new m(E,b+"leave",p,t,d),f.target=w,f.relatedTarget=y,E=null,ec(d)===u&&(m=new m(g,b+"enter",v,t,d),m.target=y,m.relatedTarget=w,E=m),w=E,p&&v)t:{for(m=p,g=v,b=0,y=m;y;y=Ju(y))b++;for(y=0,E=g;E;E=Ju(E))y++;for(;0<b-y;)m=Ju(m),b--;for(;0<y-b;)g=Ju(g),y--;for(;b--;){if(m===g||g!==null&&m===g.alternate)break t;m=Ju(m),g=Ju(g)}m=null}else m=null;p!==null&&IC(h,f,p,m,!1),v!==null&&w!==null&&IC(h,w,v,m,!0)}}e:{if(f=u?Ad(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var T=kj;else if(EC(f))if(wR)T=Ij;else{T=Rj;var P=Pj}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=Nj);if(T&&(T=T(n,u))){yR(h,T,t,d);break e}P&&P(n,f,u),n==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&t_(f,"number",f.value)}switch(P=u?Ad(u):window,n){case"focusin":(EC(P)||P.contentEditable==="true")&&(Sd=P,f_=u,Xp=null);break;case"focusout":Xp=f_=Sd=null;break;case"mousedown":p_=!0;break;case"contextmenu":case"mouseup":case"dragend":p_=!1,PC(h,t,d);break;case"selectionchange":if(Dj)break;case"keydown":case"keyup":PC(h,t,d)}var k;if(yA)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else _d?gR(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(mR&&t.locale!=="ko"&&(_d||R!=="onCompositionStart"?R==="onCompositionEnd"&&_d&&(k=pR()):(fl=d,mA="value"in fl?fl.value:fl.textContent,_d=!0)),P=Uw(u,R),0<P.length&&(R=new bC(R,n,null,t,d),h.push({event:R,listeners:P}),k?R.data=k:(k=vR(t),k!==null&&(R.data=k)))),(k=Sj?Ej(n,t):Aj(n,t))&&(u=Uw(u,"onBeforeInput"),0<u.length&&(d=new bC("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:u}),d.data=k))}PR(h,e)})}function hm(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Uw(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=im(n,t),i!=null&&r.unshift(hm(n,i,s)),i=im(n,e),i!=null&&r.push(hm(n,i,s))),n=n.return}return r}function Ju(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function IC(n,e,t,r,s){for(var i=e._reactName,o=[];t!==null&&t!==r;){var a=t,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=im(t,i),c!=null&&o.unshift(hm(t,c,a))):s||(c=im(t,i),c!=null&&o.push(hm(t,c,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Bj=/\r\n?/g,$j=/\u0000|\uFFFD/g;function OC(n){return(typeof n=="string"?n:""+n).replace(Bj,`
`).replace($j,"")}function ay(n,e,t){if(e=OC(e),OC(n)!==e&&t)throw Error(G(425))}function zw(){}var m_=null,g_=null;function v_(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var y_=typeof setTimeout=="function"?setTimeout:void 0,Uj=typeof clearTimeout=="function"?clearTimeout:void 0,MC=typeof Promise=="function"?Promise:void 0,zj=typeof queueMicrotask=="function"?queueMicrotask:typeof MC<"u"?function(n){return MC.resolve(null).then(n).catch(Hj)}:y_;function Hj(n){setTimeout(function(){throw n})}function ix(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),lm(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);lm(e)}function wl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function DC(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Gf=Math.random().toString(36).slice(2),Ni="__reactFiber$"+Gf,fm="__reactProps$"+Gf,Vo="__reactContainer$"+Gf,w_="__reactEvents$"+Gf,Vj="__reactListeners$"+Gf,Wj="__reactHandles$"+Gf;function ec(n){var e=n[Ni];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Vo]||t[Ni]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=DC(n);n!==null;){if(t=n[Ni])return t;n=DC(n)}return e}n=t,t=n.parentNode}return null}function Iv(n){return n=n[Ni]||n[Vo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ad(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(G(33))}function eb(n){return n[fm]||null}var b_=[],Cd=-1;function Il(n){return{current:n}}function it(n){0>Cd||(n.current=b_[Cd],b_[Cd]=null,Cd--)}function et(n,e){Cd++,b_[Cd]=n.current,n.current=e}var Al={},Nn=Il(Al),lr=Il(!1),Pu=Al;function If(n,e){var t=n.type.contextTypes;if(!t)return Al;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function cr(n){return n=n.childContextTypes,n!=null}function Hw(){it(lr),it(Nn)}function LC(n,e,t){if(Nn.current!==Al)throw Error(G(168));et(Nn,e),et(lr,t)}function NR(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(G(108,PF(n)||"Unknown",s));return yt({},t,r)}function Vw(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Al,Pu=Nn.current,et(Nn,n),et(lr,lr.current),!0}function FC(n,e,t){var r=n.stateNode;if(!r)throw Error(G(169));t?(n=NR(n,e,Pu),r.__reactInternalMemoizedMergedChildContext=n,it(lr),it(Nn),et(Nn,n)):it(lr),et(lr,t)}var Zi=null,tb=!1,ox=!1;function IR(n){Zi===null?Zi=[n]:Zi.push(n)}function Gj(n){tb=!0,IR(n)}function Ol(){if(!ox&&Zi!==null){ox=!0;var n=0,e=je;try{var t=Zi;for(je=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Zi=null,tb=!1}catch(s){throw Zi!==null&&(Zi=Zi.slice(n+1)),rR(dA,Ol),s}finally{je=e,ox=!1}}return null}var Td=[],kd=0,Ww=null,Gw=0,cs=[],us=0,Ru=null,Fo=1,jo="";function Hl(n,e){Td[kd++]=Gw,Td[kd++]=Ww,Ww=n,Gw=e}function OR(n,e,t){cs[us++]=Fo,cs[us++]=jo,cs[us++]=Ru,Ru=n;var r=Fo;n=jo;var s=32-Xs(r)-1;r&=~(1<<s),t+=1;var i=32-Xs(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fo=1<<32-Xs(e)+s|t<<s|r,jo=i+n}else Fo=1<<i|t<<s|r,jo=n}function bA(n){n.return!==null&&(Hl(n,1),OR(n,1,0))}function xA(n){for(;n===Ww;)Ww=Td[--kd],Td[kd]=null,Gw=Td[--kd],Td[kd]=null;for(;n===Ru;)Ru=cs[--us],cs[us]=null,jo=cs[--us],cs[us]=null,Fo=cs[--us],cs[us]=null}var Ur=null,$r=null,dt=!1,qs=null;function MR(n,e){var t=hs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function jC(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ur=n,$r=wl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ur=n,$r=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ru!==null?{id:Fo,overflow:jo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=hs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ur=n,$r=null,!0):!1;default:return!1}}function x_(n){return(n.mode&1)!==0&&(n.flags&128)===0}function __(n){if(dt){var e=$r;if(e){var t=e;if(!jC(n,e)){if(x_(n))throw Error(G(418));e=wl(t.nextSibling);var r=Ur;e&&jC(n,e)?MR(r,t):(n.flags=n.flags&-4097|2,dt=!1,Ur=n)}}else{if(x_(n))throw Error(G(418));n.flags=n.flags&-4097|2,dt=!1,Ur=n}}}function BC(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ur=n}function ly(n){if(n!==Ur)return!1;if(!dt)return BC(n),dt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!v_(n.type,n.memoizedProps)),e&&(e=$r)){if(x_(n))throw DR(),Error(G(418));for(;e;)MR(n,e),e=wl(e.nextSibling)}if(BC(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(G(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){$r=wl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}$r=null}}else $r=Ur?wl(n.stateNode.nextSibling):null;return!0}function DR(){for(var n=$r;n;)n=wl(n.nextSibling)}function Of(){$r=Ur=null,dt=!1}function _A(n){qs===null?qs=[n]:qs.push(n)}var qj=Qo.ReactCurrentBatchConfig;function op(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(G(309));var r=t.stateNode}if(!r)throw Error(G(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(G(284));if(!t._owner)throw Error(G(290,n))}return n}function cy(n,e){throw n=Object.prototype.toString.call(e),Error(G(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function $C(n){var e=n._init;return e(n._payload)}function LR(n){function e(g,b){if(n){var y=g.deletions;y===null?(g.deletions=[b],g.flags|=16):y.push(b)}}function t(g,b){if(!n)return null;for(;b!==null;)e(g,b),b=b.sibling;return null}function r(g,b){for(g=new Map;b!==null;)b.key!==null?g.set(b.key,b):g.set(b.index,b),b=b.sibling;return g}function s(g,b){return g=Sl(g,b),g.index=0,g.sibling=null,g}function i(g,b,y){return g.index=y,n?(y=g.alternate,y!==null?(y=y.index,y<b?(g.flags|=2,b):y):(g.flags|=2,b)):(g.flags|=1048576,b)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,b,y,E){return b===null||b.tag!==6?(b=fx(y,g.mode,E),b.return=g,b):(b=s(b,y),b.return=g,b)}function c(g,b,y,E){var T=y.type;return T===xd?d(g,b,y.props.children,E,y.key):b!==null&&(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ua&&$C(T)===b.type)?(E=s(b,y.props),E.ref=op(g,b,y),E.return=g,E):(E=qy(y.type,y.key,y.props,null,g.mode,E),E.ref=op(g,b,y),E.return=g,E)}function u(g,b,y,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==y.containerInfo||b.stateNode.implementation!==y.implementation?(b=px(y,g.mode,E),b.return=g,b):(b=s(b,y.children||[]),b.return=g,b)}function d(g,b,y,E,T){return b===null||b.tag!==7?(b=ku(y,g.mode,E,T),b.return=g,b):(b=s(b,y),b.return=g,b)}function h(g,b,y){if(typeof b=="string"&&b!==""||typeof b=="number")return b=fx(""+b,g.mode,y),b.return=g,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Jv:return y=qy(b.type,b.key,b.props,null,g.mode,y),y.ref=op(g,null,b),y.return=g,y;case bd:return b=px(b,g.mode,y),b.return=g,b;case ua:var E=b._init;return h(g,E(b._payload),y)}if(vp(b)||tp(b))return b=ku(b,g.mode,y,null),b.return=g,b;cy(g,b)}return null}function f(g,b,y,E){var T=b!==null?b.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:a(g,b,""+y,E);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Jv:return y.key===T?c(g,b,y,E):null;case bd:return y.key===T?u(g,b,y,E):null;case ua:return T=y._init,f(g,b,T(y._payload),E)}if(vp(y)||tp(y))return T!==null?null:d(g,b,y,E,null);cy(g,y)}return null}function p(g,b,y,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(y)||null,a(b,g,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Jv:return g=g.get(E.key===null?y:E.key)||null,c(b,g,E,T);case bd:return g=g.get(E.key===null?y:E.key)||null,u(b,g,E,T);case ua:var P=E._init;return p(g,b,y,P(E._payload),T)}if(vp(E)||tp(E))return g=g.get(y)||null,d(b,g,E,T,null);cy(b,E)}return null}function v(g,b,y,E){for(var T=null,P=null,k=b,R=b=0,N=null;k!==null&&R<y.length;R++){k.index>R?(N=k,k=null):N=k.sibling;var I=f(g,k,y[R],E);if(I===null){k===null&&(k=N);break}n&&k&&I.alternate===null&&e(g,k),b=i(I,b,R),P===null?T=I:P.sibling=I,P=I,k=N}if(R===y.length)return t(g,k),dt&&Hl(g,R),T;if(k===null){for(;R<y.length;R++)k=h(g,y[R],E),k!==null&&(b=i(k,b,R),P===null?T=k:P.sibling=k,P=k);return dt&&Hl(g,R),T}for(k=r(g,k);R<y.length;R++)N=p(k,g,R,y[R],E),N!==null&&(n&&N.alternate!==null&&k.delete(N.key===null?R:N.key),b=i(N,b,R),P===null?T=N:P.sibling=N,P=N);return n&&k.forEach(function(M){return e(g,M)}),dt&&Hl(g,R),T}function m(g,b,y,E){var T=tp(y);if(typeof T!="function")throw Error(G(150));if(y=T.call(y),y==null)throw Error(G(151));for(var P=T=null,k=b,R=b=0,N=null,I=y.next();k!==null&&!I.done;R++,I=y.next()){k.index>R?(N=k,k=null):N=k.sibling;var M=f(g,k,I.value,E);if(M===null){k===null&&(k=N);break}n&&k&&M.alternate===null&&e(g,k),b=i(M,b,R),P===null?T=M:P.sibling=M,P=M,k=N}if(I.done)return t(g,k),dt&&Hl(g,R),T;if(k===null){for(;!I.done;R++,I=y.next())I=h(g,I.value,E),I!==null&&(b=i(I,b,R),P===null?T=I:P.sibling=I,P=I);return dt&&Hl(g,R),T}for(k=r(g,k);!I.done;R++,I=y.next())I=p(k,g,R,I.value,E),I!==null&&(n&&I.alternate!==null&&k.delete(I.key===null?R:I.key),b=i(I,b,R),P===null?T=I:P.sibling=I,P=I);return n&&k.forEach(function(L){return e(g,L)}),dt&&Hl(g,R),T}function w(g,b,y,E){if(typeof y=="object"&&y!==null&&y.type===xd&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Jv:e:{for(var T=y.key,P=b;P!==null;){if(P.key===T){if(T=y.type,T===xd){if(P.tag===7){t(g,P.sibling),b=s(P,y.props.children),b.return=g,g=b;break e}}else if(P.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ua&&$C(T)===P.type){t(g,P.sibling),b=s(P,y.props),b.ref=op(g,P,y),b.return=g,g=b;break e}t(g,P);break}else e(g,P);P=P.sibling}y.type===xd?(b=ku(y.props.children,g.mode,E,y.key),b.return=g,g=b):(E=qy(y.type,y.key,y.props,null,g.mode,E),E.ref=op(g,b,y),E.return=g,g=E)}return o(g);case bd:e:{for(P=y.key;b!==null;){if(b.key===P)if(b.tag===4&&b.stateNode.containerInfo===y.containerInfo&&b.stateNode.implementation===y.implementation){t(g,b.sibling),b=s(b,y.children||[]),b.return=g,g=b;break e}else{t(g,b);break}else e(g,b);b=b.sibling}b=px(y,g.mode,E),b.return=g,g=b}return o(g);case ua:return P=y._init,w(g,b,P(y._payload),E)}if(vp(y))return v(g,b,y,E);if(tp(y))return m(g,b,y,E);cy(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,b!==null&&b.tag===6?(t(g,b.sibling),b=s(b,y),b.return=g,g=b):(t(g,b),b=fx(y,g.mode,E),b.return=g,g=b),o(g)):t(g,b)}return w}var Mf=LR(!0),FR=LR(!1),qw=Il(null),Kw=null,Pd=null,SA=null;function EA(){SA=Pd=Kw=null}function AA(n){var e=qw.current;it(qw),n._currentValue=e}function S_(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Hd(n,e){Kw=n,SA=Pd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ar=!0),n.firstContext=null)}function gs(n){var e=n._currentValue;if(SA!==n)if(n={context:n,memoizedValue:e,next:null},Pd===null){if(Kw===null)throw Error(G(308));Pd=n,Kw.dependencies={lanes:0,firstContext:n}}else Pd=Pd.next=n;return e}var tc=null;function CA(n){tc===null?tc=[n]:tc.push(n)}function jR(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,CA(e)):(t.next=s.next,s.next=t),e.interleaved=t,Wo(n,r)}function Wo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var da=!1;function TA(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BR(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Bo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function bl(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Wo(n,t)}return s=r.interleaved,s===null?(e.next=e,CA(r)):(e.next=s.next,s.next=e),r.interleaved=e,Wo(n,t)}function Uy(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,hA(n,t)}}function UC(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Xw(n,e,t,r){var s=n.updateQueue;da=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,m=a;switch(f=e,p=t,m.tag){case 1:if(v=m.payload,typeof v=="function"){h=v.call(p,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,f=typeof v=="function"?v.call(p,h,f):v,f==null)break e;h=yt({},h,f);break e;case 2:da=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Iu|=o,n.lanes=o,n.memoizedState=h}}function zC(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var Ov={},ji=Il(Ov),pm=Il(Ov),mm=Il(Ov);function nc(n){if(n===Ov)throw Error(G(174));return n}function kA(n,e){switch(et(mm,e),et(pm,n),et(ji,Ov),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:r_(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=r_(e,n)}it(ji),et(ji,e)}function Df(){it(ji),it(pm),it(mm)}function $R(n){nc(mm.current);var e=nc(ji.current),t=r_(e,n.type);e!==t&&(et(pm,n),et(ji,t))}function PA(n){pm.current===n&&(it(ji),it(pm))}var mt=Il(0);function Yw(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ax=[];function RA(){for(var n=0;n<ax.length;n++)ax[n]._workInProgressVersionPrimary=null;ax.length=0}var zy=Qo.ReactCurrentDispatcher,lx=Qo.ReactCurrentBatchConfig,Nu=0,gt=null,Wt=null,tn=null,Qw=!1,Yp=!1,gm=0,Kj=0;function bn(){throw Error(G(321))}function NA(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Qs(n[t],e[t]))return!1;return!0}function IA(n,e,t,r,s,i){if(Nu=i,gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zy.current=n===null||n.memoizedState===null?Jj:Zj,n=t(r,s),Yp){i=0;do{if(Yp=!1,gm=0,25<=i)throw Error(G(301));i+=1,tn=Wt=null,e.updateQueue=null,zy.current=eB,n=t(r,s)}while(Yp)}if(zy.current=Jw,e=Wt!==null&&Wt.next!==null,Nu=0,tn=Wt=gt=null,Qw=!1,e)throw Error(G(300));return n}function OA(){var n=gm!==0;return gm=0,n}function ii(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?gt.memoizedState=tn=n:tn=tn.next=n,tn}function vs(){if(Wt===null){var n=gt.alternate;n=n!==null?n.memoizedState:null}else n=Wt.next;var e=tn===null?gt.memoizedState:tn.next;if(e!==null)tn=e,Wt=n;else{if(n===null)throw Error(G(310));Wt=n,n={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},tn===null?gt.memoizedState=tn=n:tn=tn.next=n}return tn}function vm(n,e){return typeof e=="function"?e(n):e}function cx(n){var e=vs(),t=e.queue;if(t===null)throw Error(G(311));t.lastRenderedReducer=n;var r=Wt,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((Nu&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=h,o=r):c=c.next=h,gt.lanes|=d,Iu|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,Qs(r,e.memoizedState)||(ar=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,gt.lanes|=i,Iu|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function ux(n){var e=vs(),t=e.queue;if(t===null)throw Error(G(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=n(i,o.action),o=o.next;while(o!==s);Qs(i,e.memoizedState)||(ar=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function UR(){}function zR(n,e){var t=gt,r=vs(),s=e(),i=!Qs(r.memoizedState,s);if(i&&(r.memoizedState=s,ar=!0),r=r.queue,MA(WR.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||tn!==null&&tn.memoizedState.tag&1){if(t.flags|=2048,ym(9,VR.bind(null,t,r,s,e),void 0,null),nn===null)throw Error(G(349));Nu&30||HR(t,e,s)}return s}function HR(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function VR(n,e,t,r){e.value=t,e.getSnapshot=r,GR(e)&&qR(n)}function WR(n,e,t){return t(function(){GR(e)&&qR(n)})}function GR(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Qs(n,t)}catch{return!0}}function qR(n){var e=Wo(n,1);e!==null&&Ys(e,n,1,-1)}function HC(n){var e=ii();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vm,lastRenderedState:n},e.queue=n,n=n.dispatch=Qj.bind(null,gt,n),[e.memoizedState,n]}function ym(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function KR(){return vs().memoizedState}function Hy(n,e,t,r){var s=ii();gt.flags|=n,s.memoizedState=ym(1|e,t,void 0,r===void 0?null:r)}function nb(n,e,t,r){var s=vs();r=r===void 0?null:r;var i=void 0;if(Wt!==null){var o=Wt.memoizedState;if(i=o.destroy,r!==null&&NA(r,o.deps)){s.memoizedState=ym(e,t,i,r);return}}gt.flags|=n,s.memoizedState=ym(1|e,t,i,r)}function VC(n,e){return Hy(8390656,8,n,e)}function MA(n,e){return nb(2048,8,n,e)}function XR(n,e){return nb(4,2,n,e)}function YR(n,e){return nb(4,4,n,e)}function QR(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function JR(n,e,t){return t=t!=null?t.concat([n]):null,nb(4,4,QR.bind(null,e,n),t)}function DA(){}function ZR(n,e){var t=vs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&NA(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function eN(n,e){var t=vs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&NA(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function tN(n,e,t){return Nu&21?(Qs(t,e)||(t=oR(),gt.lanes|=t,Iu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ar=!0),n.memoizedState=t)}function Xj(n,e){var t=je;je=t!==0&&4>t?t:4,n(!0);var r=lx.transition;lx.transition={};try{n(!1),e()}finally{je=t,lx.transition=r}}function nN(){return vs().memoizedState}function Yj(n,e,t){var r=_l(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},rN(n))sN(e,t);else if(t=jR(n,e,t,r),t!==null){var s=Hn();Ys(t,n,r,s),iN(t,e,r)}}function Qj(n,e,t){var r=_l(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(rN(n))sN(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(s.hasEagerState=!0,s.eagerState=a,Qs(a,o)){var c=e.interleaved;c===null?(s.next=s,CA(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}t=jR(n,e,s,r),t!==null&&(s=Hn(),Ys(t,n,r,s),iN(t,e,r))}}function rN(n){var e=n.alternate;return n===gt||e!==null&&e===gt}function sN(n,e){Yp=Qw=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function iN(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,hA(n,t)}}var Jw={readContext:gs,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useInsertionEffect:bn,useLayoutEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useMutableSource:bn,useSyncExternalStore:bn,useId:bn,unstable_isNewReconciler:!1},Jj={readContext:gs,useCallback:function(n,e){return ii().memoizedState=[n,e===void 0?null:e],n},useContext:gs,useEffect:VC,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Hy(4194308,4,QR.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Hy(4194308,4,n,e)},useInsertionEffect:function(n,e){return Hy(4,2,n,e)},useMemo:function(n,e){var t=ii();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=ii();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Yj.bind(null,gt,n),[r.memoizedState,n]},useRef:function(n){var e=ii();return n={current:n},e.memoizedState=n},useState:HC,useDebugValue:DA,useDeferredValue:function(n){return ii().memoizedState=n},useTransition:function(){var n=HC(!1),e=n[0];return n=Xj.bind(null,n[1]),ii().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=gt,s=ii();if(dt){if(t===void 0)throw Error(G(407));t=t()}else{if(t=e(),nn===null)throw Error(G(349));Nu&30||HR(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,VC(WR.bind(null,r,i,n),[n]),r.flags|=2048,ym(9,VR.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=ii(),e=nn.identifierPrefix;if(dt){var t=jo,r=Fo;t=(r&~(1<<32-Xs(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=gm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Kj++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Zj={readContext:gs,useCallback:ZR,useContext:gs,useEffect:MA,useImperativeHandle:JR,useInsertionEffect:XR,useLayoutEffect:YR,useMemo:eN,useReducer:cx,useRef:KR,useState:function(){return cx(vm)},useDebugValue:DA,useDeferredValue:function(n){var e=vs();return tN(e,Wt.memoizedState,n)},useTransition:function(){var n=cx(vm)[0],e=vs().memoizedState;return[n,e]},useMutableSource:UR,useSyncExternalStore:zR,useId:nN,unstable_isNewReconciler:!1},eB={readContext:gs,useCallback:ZR,useContext:gs,useEffect:MA,useImperativeHandle:JR,useInsertionEffect:XR,useLayoutEffect:YR,useMemo:eN,useReducer:ux,useRef:KR,useState:function(){return ux(vm)},useDebugValue:DA,useDeferredValue:function(n){var e=vs();return Wt===null?e.memoizedState=n:tN(e,Wt.memoizedState,n)},useTransition:function(){var n=ux(vm)[0],e=vs().memoizedState;return[n,e]},useMutableSource:UR,useSyncExternalStore:zR,useId:nN,unstable_isNewReconciler:!1};function ks(n,e){if(n&&n.defaultProps){e=yt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function E_(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:yt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var rb={isMounted:function(n){return(n=n._reactInternals)?Uu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Hn(),s=_l(n),i=Bo(r,s);i.payload=e,t!=null&&(i.callback=t),e=bl(n,i,s),e!==null&&(Ys(e,n,s,r),Uy(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Hn(),s=_l(n),i=Bo(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=bl(n,i,s),e!==null&&(Ys(e,n,s,r),Uy(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Hn(),r=_l(n),s=Bo(t,r);s.tag=2,e!=null&&(s.callback=e),e=bl(n,s,r),e!==null&&(Ys(e,n,r,t),Uy(e,n,r))}};function WC(n,e,t,r,s,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!um(t,r)||!um(s,i):!0}function oN(n,e,t){var r=!1,s=Al,i=e.contextType;return typeof i=="object"&&i!==null?i=gs(i):(s=cr(e)?Pu:Nn.current,r=e.contextTypes,i=(r=r!=null)?If(n,s):Al),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rb,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function GC(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&rb.enqueueReplaceState(e,e.state,null)}function A_(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},TA(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=gs(i):(i=cr(e)?Pu:Nn.current,s.context=If(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(E_(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rb.enqueueReplaceState(s,s.state,null),Xw(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Lf(n,e){try{var t="",r=e;do t+=kF(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function dx(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function C_(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var tB=typeof WeakMap=="function"?WeakMap:Map;function aN(n,e,t){t=Bo(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){e0||(e0=!0,L_=r),C_(n,e)},t}function lN(n,e,t){t=Bo(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){C_(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){C_(n,e),typeof r!="function"&&(xl===null?xl=new Set([this]):xl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function qC(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new tB;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=mB.bind(null,n,e,t),e.then(n,n))}function KC(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function XC(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Bo(-1,1),e.tag=2,bl(t,e,1))),t.lanes|=1),n)}var nB=Qo.ReactCurrentOwner,ar=!1;function $n(n,e,t,r){e.child=n===null?FR(e,null,t,r):Mf(e,n.child,t,r)}function YC(n,e,t,r,s){t=t.render;var i=e.ref;return Hd(e,s),r=IA(n,e,t,r,i,s),t=OA(),n!==null&&!ar?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Go(n,e,s)):(dt&&t&&bA(e),e.flags|=1,$n(n,e,r,s),e.child)}function QC(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!HA(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,cN(n,e,i,r,s)):(n=qy(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:um,t(o,r)&&n.ref===e.ref)return Go(n,e,s)}return e.flags|=1,n=Sl(i,r),n.ref=e.ref,n.return=e,e.child=n}function cN(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(um(i,r)&&n.ref===e.ref)if(ar=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(ar=!0);else return e.lanes=n.lanes,Go(n,e,s)}return T_(n,e,t,r,s)}function uN(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Nd,Mr),Mr|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,et(Nd,Mr),Mr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,et(Nd,Mr),Mr|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,et(Nd,Mr),Mr|=r;return $n(n,e,s,t),e.child}function dN(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function T_(n,e,t,r,s){var i=cr(t)?Pu:Nn.current;return i=If(e,i),Hd(e,s),t=IA(n,e,t,r,i,s),r=OA(),n!==null&&!ar?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Go(n,e,s)):(dt&&r&&bA(e),e.flags|=1,$n(n,e,t,s),e.child)}function JC(n,e,t,r,s){if(cr(t)){var i=!0;Vw(e)}else i=!1;if(Hd(e,s),e.stateNode===null)Vy(n,e),oN(e,t,r),A_(e,t,r,s),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=gs(u):(u=cr(t)?Pu:Nn.current,u=If(e,u));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&GC(e,o,r,u),da=!1;var f=e.memoizedState;o.state=f,Xw(e,r,o,s),c=e.memoizedState,a!==r||f!==c||lr.current||da?(typeof d=="function"&&(E_(e,t,d,r),c=e.memoizedState),(a=da||WC(e,t,a,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,BR(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:ks(e.type,a),o.props=u,h=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=gs(c):(c=cr(t)?Pu:Nn.current,c=If(e,c));var p=t.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==c)&&GC(e,o,r,c),da=!1,f=e.memoizedState,o.state=f,Xw(e,r,o,s);var v=e.memoizedState;a!==h||f!==v||lr.current||da?(typeof p=="function"&&(E_(e,t,p,r),v=e.memoizedState),(u=da||WC(e,t,u,r,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return k_(n,e,t,r,i,s)}function k_(n,e,t,r,s,i){dN(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&FC(e,t,!1),Go(n,e,i);r=e.stateNode,nB.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Mf(e,n.child,null,i),e.child=Mf(e,null,a,i)):$n(n,e,a,i),e.memoizedState=r.state,s&&FC(e,t,!0),e.child}function hN(n){var e=n.stateNode;e.pendingContext?LC(n,e.pendingContext,e.pendingContext!==e.context):e.context&&LC(n,e.context,!1),kA(n,e.containerInfo)}function ZC(n,e,t,r,s){return Of(),_A(s),e.flags|=256,$n(n,e,t,r),e.child}var P_={dehydrated:null,treeContext:null,retryLane:0};function R_(n){return{baseLanes:n,cachePool:null,transitions:null}}function fN(n,e,t){var r=e.pendingProps,s=mt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),et(mt,s&1),n===null)return __(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ob(o,r,0,null),n=ku(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=R_(t),e.memoizedState=P_,n):LA(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return rB(n,e,o,r,a,s,t);if(i){i=r.fallback,o=e.mode,s=n.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Sl(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Sl(a,i):(i=ku(i,o,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=n.child.memoizedState,o=o===null?R_(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=P_,r}return i=n.child,n=i.sibling,r=Sl(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function LA(n,e){return e=ob({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function uy(n,e,t,r){return r!==null&&_A(r),Mf(e,n.child,null,t),n=LA(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function rB(n,e,t,r,s,i,o){if(t)return e.flags&256?(e.flags&=-257,r=dx(Error(G(422))),uy(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ob({mode:"visible",children:r.children},s,0,null),i=ku(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Mf(e,n.child,null,o),e.child.memoizedState=R_(o),e.memoizedState=P_,i);if(!(e.mode&1))return uy(n,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(G(419)),r=dx(i,r,void 0),uy(n,e,o,r)}if(a=(o&n.childLanes)!==0,ar||a){if(r=nn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Wo(n,s),Ys(r,n,s,-1))}return zA(),r=dx(Error(G(421))),uy(n,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=gB.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,$r=wl(s.nextSibling),Ur=e,dt=!0,qs=null,n!==null&&(cs[us++]=Fo,cs[us++]=jo,cs[us++]=Ru,Fo=n.id,jo=n.overflow,Ru=e),e=LA(e,r.children),e.flags|=4096,e)}function eT(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),S_(n.return,e,t)}function hx(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function pN(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if($n(n,e,r.children,t),r=mt.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&eT(n,t,e);else if(n.tag===19)eT(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(et(mt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Yw(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),hx(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Yw(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}hx(e,!0,t,null,i);break;case"together":hx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vy(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Go(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Iu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(G(153));if(e.child!==null){for(n=e.child,t=Sl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Sl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function sB(n,e,t){switch(e.tag){case 3:hN(e),Of();break;case 5:$R(e);break;case 1:cr(e.type)&&Vw(e);break;case 4:kA(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;et(qw,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(et(mt,mt.current&1),e.flags|=128,null):t&e.child.childLanes?fN(n,e,t):(et(mt,mt.current&1),n=Go(n,e,t),n!==null?n.sibling:null);et(mt,mt.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return pN(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),et(mt,mt.current),r)break;return null;case 22:case 23:return e.lanes=0,uN(n,e,t)}return Go(n,e,t)}var mN,N_,gN,vN;mN=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};N_=function(){};gN=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,nc(ji.current);var i=null;switch(t){case"input":s=Zx(n,s),r=Zx(n,r),i=[];break;case"select":s=yt({},s,{value:void 0}),r=yt({},r,{value:void 0}),i=[];break;case"textarea":s=n_(n,s),r=n_(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=zw)}s_(t,r);var o;t=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(rm.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(i||(i=[]),i.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(rm.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&rt("scroll",n),i||a===c||(i=[])):(i=i||[]).push(u,c))}t&&(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};vN=function(n,e,t,r){t!==r&&(e.flags|=4)};function ap(n,e){if(!dt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function xn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function iB(n,e,t){var r=e.pendingProps;switch(xA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(e),null;case 1:return cr(e.type)&&Hw(),xn(e),null;case 3:return r=e.stateNode,Df(),it(lr),it(Nn),RA(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(ly(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qs!==null&&(B_(qs),qs=null))),N_(n,e),xn(e),null;case 5:PA(e);var s=nc(mm.current);if(t=e.type,n!==null&&e.stateNode!=null)gN(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return xn(e),null}if(n=nc(ji.current),ly(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Ni]=e,r[fm]=i,n=(e.mode&1)!==0,t){case"dialog":rt("cancel",r),rt("close",r);break;case"iframe":case"object":case"embed":rt("load",r);break;case"video":case"audio":for(s=0;s<wp.length;s++)rt(wp[s],r);break;case"source":rt("error",r);break;case"img":case"image":case"link":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"input":cC(r,i),rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},rt("invalid",r);break;case"textarea":dC(r,i),rt("invalid",r)}s_(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ay(r.textContent,a,n),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ay(r.textContent,a,n),s=["children",""+a]):rm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&rt("scroll",r)}switch(t){case"input":Zv(r),uC(r,i,!0);break;case"textarea":Zv(r),hC(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zw)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=WP(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Ni]=e,n[fm]=r,mN(n,e,!1,!1),e.stateNode=n;e:{switch(o=i_(t,r),t){case"dialog":rt("cancel",n),rt("close",n),s=r;break;case"iframe":case"object":case"embed":rt("load",n),s=r;break;case"video":case"audio":for(s=0;s<wp.length;s++)rt(wp[s],n);s=r;break;case"source":rt("error",n),s=r;break;case"img":case"image":case"link":rt("error",n),rt("load",n),s=r;break;case"details":rt("toggle",n),s=r;break;case"input":cC(n,r),s=Zx(n,r),rt("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=yt({},r,{value:void 0}),rt("invalid",n);break;case"textarea":dC(n,r),s=n_(n,r),rt("invalid",n);break;default:s=r}s_(t,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?KP(n,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&GP(n,c)):i==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&sm(n,c):typeof c=="number"&&sm(n,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(rm.hasOwnProperty(i)?c!=null&&i==="onScroll"&&rt("scroll",n):c!=null&&oA(n,i,c,o))}switch(t){case"input":Zv(n),uC(n,r,!1);break;case"textarea":Zv(n),hC(n);break;case"option":r.value!=null&&n.setAttribute("value",""+El(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?Bd(n,!!r.multiple,i,!1):r.defaultValue!=null&&Bd(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=zw)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xn(e),null;case 6:if(n&&e.stateNode!=null)vN(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(t=nc(mm.current),nc(ji.current),ly(e)){if(r=e.stateNode,t=e.memoizedProps,r[Ni]=e,(i=r.nodeValue!==t)&&(n=Ur,n!==null))switch(n.tag){case 3:ay(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ay(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Ni]=e,e.stateNode=r}return xn(e),null;case 13:if(it(mt),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(dt&&$r!==null&&e.mode&1&&!(e.flags&128))DR(),Of(),e.flags|=98560,i=!1;else if(i=ly(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(G(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[Ni]=e}else Of(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xn(e),i=!1}else qs!==null&&(B_(qs),qs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||mt.current&1?Gt===0&&(Gt=3):zA())),e.updateQueue!==null&&(e.flags|=4),xn(e),null);case 4:return Df(),N_(n,e),n===null&&dm(e.stateNode.containerInfo),xn(e),null;case 10:return AA(e.type._context),xn(e),null;case 17:return cr(e.type)&&Hw(),xn(e),null;case 19:if(it(mt),i=e.memoizedState,i===null)return xn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ap(i,!1);else{if(Gt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Yw(n),o!==null){for(e.flags|=128,ap(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return et(mt,mt.current&1|2),e.child}n=n.sibling}i.tail!==null&&Nt()>Ff&&(e.flags|=128,r=!0,ap(i,!1),e.lanes=4194304)}else{if(!r)if(n=Yw(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ap(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!dt)return xn(e),null}else 2*Nt()-i.renderingStartTime>Ff&&t!==1073741824&&(e.flags|=128,r=!0,ap(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Nt(),e.sibling=null,t=mt.current,et(mt,r?t&1|2:t&1),e):(xn(e),null);case 22:case 23:return UA(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mr&1073741824&&(xn(e),e.subtreeFlags&6&&(e.flags|=8192)):xn(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function oB(n,e){switch(xA(e),e.tag){case 1:return cr(e.type)&&Hw(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Df(),it(lr),it(Nn),RA(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return PA(e),null;case 13:if(it(mt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Of()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return it(mt),null;case 4:return Df(),null;case 10:return AA(e.type._context),null;case 22:case 23:return UA(),null;case 24:return null;default:return null}}var dy=!1,Rn=!1,aB=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Rd(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Tt(n,e,r)}else t.current=null}function I_(n,e,t){try{t()}catch(r){Tt(n,e,r)}}var tT=!1;function lB(n,e){if(m_=Bw,n=_R(),wA(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,c=-1,u=0,d=0,h=n,f=null;t:for(;;){for(var p;h!==t||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===n)break t;if(f===t&&++u===s&&(a=o),f===i&&++d===r&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}t=a===-1||c===-1?null:{start:a,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(g_={focusedElem:n,selectionRange:t},Bw=!1,ee=e;ee!==null;)if(e=ee,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ee=n;else for(;ee!==null;){e=ee;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,w=v.memoizedState,g=e.stateNode,b=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:ks(e.type,m),w);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(E){Tt(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}return v=tT,tT=!1,v}function Qp(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&I_(e,t,i)}s=s.next}while(s!==r)}}function sb(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function O_(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function yN(n){var e=n.alternate;e!==null&&(n.alternate=null,yN(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ni],delete e[fm],delete e[w_],delete e[Vj],delete e[Wj])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function wN(n){return n.tag===5||n.tag===3||n.tag===4}function nT(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||wN(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function M_(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=zw));else if(r!==4&&(n=n.child,n!==null))for(M_(n,e,t),n=n.sibling;n!==null;)M_(n,e,t),n=n.sibling}function D_(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(D_(n,e,t),n=n.sibling;n!==null;)D_(n,e,t),n=n.sibling}var hn=null,Ws=!1;function sa(n,e,t){for(t=t.child;t!==null;)bN(n,e,t),t=t.sibling}function bN(n,e,t){if(Fi&&typeof Fi.onCommitFiberUnmount=="function")try{Fi.onCommitFiberUnmount(Y0,t)}catch{}switch(t.tag){case 5:Rn||Rd(t,e);case 6:var r=hn,s=Ws;hn=null,sa(n,e,t),hn=r,Ws=s,hn!==null&&(Ws?(n=hn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):hn.removeChild(t.stateNode));break;case 18:hn!==null&&(Ws?(n=hn,t=t.stateNode,n.nodeType===8?ix(n.parentNode,t):n.nodeType===1&&ix(n,t),lm(n)):ix(hn,t.stateNode));break;case 4:r=hn,s=Ws,hn=t.stateNode.containerInfo,Ws=!0,sa(n,e,t),hn=r,Ws=s;break;case 0:case 11:case 14:case 15:if(!Rn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&I_(t,e,o),s=s.next}while(s!==r)}sa(n,e,t);break;case 1:if(!Rn&&(Rd(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Tt(t,e,a)}sa(n,e,t);break;case 21:sa(n,e,t);break;case 22:t.mode&1?(Rn=(r=Rn)||t.memoizedState!==null,sa(n,e,t),Rn=r):sa(n,e,t);break;default:sa(n,e,t)}}function rT(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new aB),e.forEach(function(r){var s=vB.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function _s(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:hn=a.stateNode,Ws=!1;break e;case 3:hn=a.stateNode.containerInfo,Ws=!0;break e;case 4:hn=a.stateNode.containerInfo,Ws=!0;break e}a=a.return}if(hn===null)throw Error(G(160));bN(i,o,s),hn=null,Ws=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Tt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xN(e,n),e=e.sibling}function xN(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(_s(e,n),ti(n),r&4){try{Qp(3,n,n.return),sb(3,n)}catch(m){Tt(n,n.return,m)}try{Qp(5,n,n.return)}catch(m){Tt(n,n.return,m)}}break;case 1:_s(e,n),ti(n),r&512&&t!==null&&Rd(t,t.return);break;case 5:if(_s(e,n),ti(n),r&512&&t!==null&&Rd(t,t.return),n.flags&32){var s=n.stateNode;try{sm(s,"")}catch(m){Tt(n,n.return,m)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&HP(s,i),i_(a,o);var u=i_(a,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?KP(s,h):d==="dangerouslySetInnerHTML"?GP(s,h):d==="children"?sm(s,h):oA(s,d,h,u)}switch(a){case"input":e_(s,i);break;case"textarea":VP(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Bd(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Bd(s,!!i.multiple,i.defaultValue,!0):Bd(s,!!i.multiple,i.multiple?[]:"",!1))}s[fm]=i}catch(m){Tt(n,n.return,m)}}break;case 6:if(_s(e,n),ti(n),r&4){if(n.stateNode===null)throw Error(G(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(m){Tt(n,n.return,m)}}break;case 3:if(_s(e,n),ti(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{lm(e.containerInfo)}catch(m){Tt(n,n.return,m)}break;case 4:_s(e,n),ti(n);break;case 13:_s(e,n),ti(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(BA=Nt())),r&4&&rT(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Rn=(u=Rn)||d,_s(e,n),Rn=u):_s(e,n),ti(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(ee=n,d=n.child;d!==null;){for(h=ee=d;ee!==null;){switch(f=ee,p=f.child,f.tag){case 0:case 11:case 14:case 15:Qp(4,f,f.return);break;case 1:Rd(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(m){Tt(r,t,m)}}break;case 5:Rd(f,f.return);break;case 22:if(f.memoizedState!==null){iT(h);continue}}p!==null?(p.return=f,ee=p):iT(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=qP("display",o))}catch(m){Tt(n,n.return,m)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Tt(n,n.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_s(e,n),ti(n),r&4&&rT(n);break;case 21:break;default:_s(e,n),ti(n)}}function ti(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(wN(t)){var r=t;break e}t=t.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(sm(s,""),r.flags&=-33);var i=nT(n);D_(n,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=nT(n);M_(n,a,o);break;default:throw Error(G(161))}}catch(c){Tt(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function cB(n,e,t){ee=n,_N(n)}function _N(n,e,t){for(var r=(n.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||dy;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Rn;a=dy;var u=Rn;if(dy=o,(Rn=c)&&!u)for(ee=s;ee!==null;)o=ee,c=o.child,o.tag===22&&o.memoizedState!==null?oT(s):c!==null?(c.return=o,ee=c):oT(s);for(;i!==null;)ee=i,_N(i),i=i.sibling;ee=s,dy=a,Rn=u}sT(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):sT(n)}}function sT(n){for(;ee!==null;){var e=ee;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rn||sb(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Rn)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:ks(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&zC(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}zC(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&lm(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Rn||e.flags&512&&O_(e)}catch(f){Tt(e,e.return,f)}}if(e===n){ee=null;break}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}}function iT(n){for(;ee!==null;){var e=ee;if(e===n){ee=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ee=t;break}ee=e.return}}function oT(n){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{sb(4,e)}catch(c){Tt(e,t,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Tt(e,s,c)}}var i=e.return;try{O_(e)}catch(c){Tt(e,i,c)}break;case 5:var o=e.return;try{O_(e)}catch(c){Tt(e,o,c)}}}catch(c){Tt(e,e.return,c)}if(e===n){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var uB=Math.ceil,Zw=Qo.ReactCurrentDispatcher,FA=Qo.ReactCurrentOwner,fs=Qo.ReactCurrentBatchConfig,Ne=0,nn=null,Ft=null,gn=0,Mr=0,Nd=Il(0),Gt=0,wm=null,Iu=0,ib=0,jA=0,Jp=null,or=null,BA=0,Ff=1/0,Xi=null,e0=!1,L_=null,xl=null,hy=!1,pl=null,t0=0,Zp=0,F_=null,Wy=-1,Gy=0;function Hn(){return Ne&6?Nt():Wy!==-1?Wy:Wy=Nt()}function _l(n){return n.mode&1?Ne&2&&gn!==0?gn&-gn:qj.transition!==null?(Gy===0&&(Gy=oR()),Gy):(n=je,n!==0||(n=window.event,n=n===void 0?16:fR(n.type)),n):1}function Ys(n,e,t,r){if(50<Zp)throw Zp=0,F_=null,Error(G(185));Rv(n,t,r),(!(Ne&2)||n!==nn)&&(n===nn&&(!(Ne&2)&&(ib|=t),Gt===4&&pa(n,gn)),ur(n,r),t===1&&Ne===0&&!(e.mode&1)&&(Ff=Nt()+500,tb&&Ol()))}function ur(n,e){var t=n.callbackNode;qF(n,e);var r=jw(n,n===nn?gn:0);if(r===0)t!==null&&mC(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&mC(t),e===1)n.tag===0?Gj(aT.bind(null,n)):IR(aT.bind(null,n)),zj(function(){!(Ne&6)&&Ol()}),t=null;else{switch(aR(r)){case 1:t=dA;break;case 4:t=sR;break;case 16:t=Fw;break;case 536870912:t=iR;break;default:t=Fw}t=RN(t,SN.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function SN(n,e){if(Wy=-1,Gy=0,Ne&6)throw Error(G(327));var t=n.callbackNode;if(Vd()&&n.callbackNode!==t)return null;var r=jw(n,n===nn?gn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=n0(n,r);else{e=r;var s=Ne;Ne|=2;var i=AN();(nn!==n||gn!==e)&&(Xi=null,Ff=Nt()+500,Tu(n,e));do try{fB();break}catch(a){EN(n,a)}while(!0);EA(),Zw.current=i,Ne=s,Ft!==null?e=0:(nn=null,gn=0,e=Gt)}if(e!==0){if(e===2&&(s=u_(n),s!==0&&(r=s,e=j_(n,s))),e===1)throw t=wm,Tu(n,0),pa(n,r),ur(n,Nt()),t;if(e===6)pa(n,r);else{if(s=n.current.alternate,!(r&30)&&!dB(s)&&(e=n0(n,r),e===2&&(i=u_(n),i!==0&&(r=i,e=j_(n,i))),e===1))throw t=wm,Tu(n,0),pa(n,r),ur(n,Nt()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Vl(n,or,Xi);break;case 3:if(pa(n,r),(r&130023424)===r&&(e=BA+500-Nt(),10<e)){if(jw(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){Hn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=y_(Vl.bind(null,n,or,Xi),e);break}Vl(n,or,Xi);break;case 4:if(pa(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var o=31-Xs(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uB(r/1960))-r,10<r){n.timeoutHandle=y_(Vl.bind(null,n,or,Xi),r);break}Vl(n,or,Xi);break;case 5:Vl(n,or,Xi);break;default:throw Error(G(329))}}}return ur(n,Nt()),n.callbackNode===t?SN.bind(null,n):null}function j_(n,e){var t=Jp;return n.current.memoizedState.isDehydrated&&(Tu(n,e).flags|=256),n=n0(n,e),n!==2&&(e=or,or=t,e!==null&&B_(e)),n}function B_(n){or===null?or=n:or.push.apply(or,n)}function dB(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!Qs(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pa(n,e){for(e&=~jA,e&=~ib,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Xs(e),r=1<<t;n[t]=-1,e&=~r}}function aT(n){if(Ne&6)throw Error(G(327));Vd();var e=jw(n,0);if(!(e&1))return ur(n,Nt()),null;var t=n0(n,e);if(n.tag!==0&&t===2){var r=u_(n);r!==0&&(e=r,t=j_(n,r))}if(t===1)throw t=wm,Tu(n,0),pa(n,e),ur(n,Nt()),t;if(t===6)throw Error(G(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Vl(n,or,Xi),ur(n,Nt()),null}function $A(n,e){var t=Ne;Ne|=1;try{return n(e)}finally{Ne=t,Ne===0&&(Ff=Nt()+500,tb&&Ol())}}function Ou(n){pl!==null&&pl.tag===0&&!(Ne&6)&&Vd();var e=Ne;Ne|=1;var t=fs.transition,r=je;try{if(fs.transition=null,je=1,n)return n()}finally{je=r,fs.transition=t,Ne=e,!(Ne&6)&&Ol()}}function UA(){Mr=Nd.current,it(Nd)}function Tu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Uj(t)),Ft!==null)for(t=Ft.return;t!==null;){var r=t;switch(xA(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hw();break;case 3:Df(),it(lr),it(Nn),RA();break;case 5:PA(r);break;case 4:Df();break;case 13:it(mt);break;case 19:it(mt);break;case 10:AA(r.type._context);break;case 22:case 23:UA()}t=t.return}if(nn=n,Ft=n=Sl(n.current,null),gn=Mr=e,Gt=0,wm=null,jA=ib=Iu=0,or=Jp=null,tc!==null){for(e=0;e<tc.length;e++)if(t=tc[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}t.pending=r}tc=null}return n}function EN(n,e){do{var t=Ft;try{if(EA(),zy.current=Jw,Qw){for(var r=gt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qw=!1}if(Nu=0,tn=Wt=gt=null,Yp=!1,gm=0,FA.current=null,t===null||t.return===null){Gt=1,wm=e,Ft=null;break}e:{var i=n,o=t.return,a=t,c=e;if(e=gn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=KC(o);if(p!==null){p.flags&=-257,XC(p,o,a,i,e),p.mode&1&&qC(i,u,e),e=p,c=u;var v=e.updateQueue;if(v===null){var m=new Set;m.add(c),e.updateQueue=m}else v.add(c);break e}else{if(!(e&1)){qC(i,u,e),zA();break e}c=Error(G(426))}}else if(dt&&a.mode&1){var w=KC(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),XC(w,o,a,i,e),_A(Lf(c,a));break e}}i=c=Lf(c,a),Gt!==4&&(Gt=2),Jp===null?Jp=[i]:Jp.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=aN(i,c,e);UC(i,g);break e;case 1:a=c;var b=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(xl===null||!xl.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=lN(i,a,e);UC(i,E);break e}}i=i.return}while(i!==null)}TN(t)}catch(T){e=T,Ft===t&&t!==null&&(Ft=t=t.return);continue}break}while(!0)}function AN(){var n=Zw.current;return Zw.current=Jw,n===null?Jw:n}function zA(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),nn===null||!(Iu&268435455)&&!(ib&268435455)||pa(nn,gn)}function n0(n,e){var t=Ne;Ne|=2;var r=AN();(nn!==n||gn!==e)&&(Xi=null,Tu(n,e));do try{hB();break}catch(s){EN(n,s)}while(!0);if(EA(),Ne=t,Zw.current=r,Ft!==null)throw Error(G(261));return nn=null,gn=0,Gt}function hB(){for(;Ft!==null;)CN(Ft)}function fB(){for(;Ft!==null&&!jF();)CN(Ft)}function CN(n){var e=PN(n.alternate,n,Mr);n.memoizedProps=n.pendingProps,e===null?TN(n):Ft=e,FA.current=null}function TN(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=oB(t,e),t!==null){t.flags&=32767,Ft=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Gt=6,Ft=null;return}}else if(t=iB(t,e,Mr),t!==null){Ft=t;return}if(e=e.sibling,e!==null){Ft=e;return}Ft=e=n}while(e!==null);Gt===0&&(Gt=5)}function Vl(n,e,t){var r=je,s=fs.transition;try{fs.transition=null,je=1,pB(n,e,t,r)}finally{fs.transition=s,je=r}return null}function pB(n,e,t,r){do Vd();while(pl!==null);if(Ne&6)throw Error(G(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(G(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(KF(n,i),n===nn&&(Ft=nn=null,gn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||hy||(hy=!0,RN(Fw,function(){return Vd(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=fs.transition,fs.transition=null;var o=je;je=1;var a=Ne;Ne|=4,FA.current=null,lB(n,t),xN(t,n),Mj(g_),Bw=!!m_,g_=m_=null,n.current=t,cB(t),BF(),Ne=a,je=o,fs.transition=i}else n.current=t;if(hy&&(hy=!1,pl=n,t0=s),i=n.pendingLanes,i===0&&(xl=null),zF(t.stateNode),ur(n,Nt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(e0)throw e0=!1,n=L_,L_=null,n;return t0&1&&n.tag!==0&&Vd(),i=n.pendingLanes,i&1?n===F_?Zp++:(Zp=0,F_=n):Zp=0,Ol(),null}function Vd(){if(pl!==null){var n=aR(t0),e=fs.transition,t=je;try{if(fs.transition=null,je=16>n?16:n,pl===null)var r=!1;else{if(n=pl,pl=null,t0=0,Ne&6)throw Error(G(331));var s=Ne;for(Ne|=4,ee=n.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(ee=u;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:Qp(8,d,i)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var f=d.sibling,p=d.return;if(yN(d),d===u){ee=null;break}if(f!==null){f.return=p,ee=f;break}ee=p}}}var v=i.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qp(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ee=g;break e}ee=i.return}}var b=n.current;for(ee=b;ee!==null;){o=ee;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,ee=y;else e:for(o=b;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sb(9,a)}}catch(T){Tt(a,a.return,T)}if(a===o){ee=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,ee=E;break e}ee=a.return}}if(Ne=s,Ol(),Fi&&typeof Fi.onPostCommitFiberRoot=="function")try{Fi.onPostCommitFiberRoot(Y0,n)}catch{}r=!0}return r}finally{je=t,fs.transition=e}}return!1}function lT(n,e,t){e=Lf(t,e),e=aN(n,e,1),n=bl(n,e,1),e=Hn(),n!==null&&(Rv(n,1,e),ur(n,e))}function Tt(n,e,t){if(n.tag===3)lT(n,n,t);else for(;e!==null;){if(e.tag===3){lT(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xl===null||!xl.has(r))){n=Lf(t,n),n=lN(e,n,1),e=bl(e,n,1),n=Hn(),e!==null&&(Rv(e,1,n),ur(e,n));break}}e=e.return}}function mB(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Hn(),n.pingedLanes|=n.suspendedLanes&t,nn===n&&(gn&t)===t&&(Gt===4||Gt===3&&(gn&130023424)===gn&&500>Nt()-BA?Tu(n,0):jA|=t),ur(n,e)}function kN(n,e){e===0&&(n.mode&1?(e=ny,ny<<=1,!(ny&130023424)&&(ny=4194304)):e=1);var t=Hn();n=Wo(n,e),n!==null&&(Rv(n,e,t),ur(n,t))}function gB(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),kN(n,t)}function vB(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),kN(n,t)}var PN;PN=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||lr.current)ar=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ar=!1,sB(n,e,t);ar=!!(n.flags&131072)}else ar=!1,dt&&e.flags&1048576&&OR(e,Gw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vy(n,e),n=e.pendingProps;var s=If(e,Nn.current);Hd(e,t),s=IA(null,e,r,n,s,t);var i=OA();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cr(r)?(i=!0,Vw(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,TA(e),s.updater=rb,e.stateNode=s,s._reactInternals=e,A_(e,r,n,t),e=k_(null,e,r,!0,i,t)):(e.tag=0,dt&&i&&bA(e),$n(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Vy(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=wB(r),n=ks(r,n),s){case 0:e=T_(null,e,r,n,t);break e;case 1:e=JC(null,e,r,n,t);break e;case 11:e=YC(null,e,r,n,t);break e;case 14:e=QC(null,e,r,ks(r.type,n),t);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ks(r,s),T_(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ks(r,s),JC(n,e,r,s,t);case 3:e:{if(hN(e),n===null)throw Error(G(387));r=e.pendingProps,i=e.memoizedState,s=i.element,BR(n,e),Xw(e,r,null,t);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Lf(Error(G(423)),e),e=ZC(n,e,r,t,s);break e}else if(r!==s){s=Lf(Error(G(424)),e),e=ZC(n,e,r,t,s);break e}else for($r=wl(e.stateNode.containerInfo.firstChild),Ur=e,dt=!0,qs=null,t=FR(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Of(),r===s){e=Go(n,e,t);break e}$n(n,e,r,t)}e=e.child}return e;case 5:return $R(e),n===null&&__(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,o=s.children,v_(r,s)?o=null:i!==null&&v_(r,i)&&(e.flags|=32),dN(n,e),$n(n,e,o,t),e.child;case 6:return n===null&&__(e),null;case 13:return fN(n,e,t);case 4:return kA(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Mf(e,null,r,t):$n(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ks(r,s),YC(n,e,r,s,t);case 7:return $n(n,e,e.pendingProps,t),e.child;case 8:return $n(n,e,e.pendingProps.children,t),e.child;case 12:return $n(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,et(qw,r._currentValue),r._currentValue=o,i!==null)if(Qs(i.value,o)){if(i.children===s.children&&!lr.current){e=Go(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Bo(-1,t&-t),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=t,c=i.alternate,c!==null&&(c.lanes|=t),S_(i.return,t,e),a.lanes|=t;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(G(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),S_(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}$n(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Hd(e,t),s=gs(s),r=r(s),e.flags|=1,$n(n,e,r,t),e.child;case 14:return r=e.type,s=ks(r,e.pendingProps),s=ks(r.type,s),QC(n,e,r,s,t);case 15:return cN(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ks(r,s),Vy(n,e),e.tag=1,cr(r)?(n=!0,Vw(e)):n=!1,Hd(e,t),oN(e,r,s),A_(e,r,s,t),k_(null,e,r,!0,n,t);case 19:return pN(n,e,t);case 22:return uN(n,e,t)}throw Error(G(156,e.tag))};function RN(n,e){return rR(n,e)}function yB(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(n,e,t,r){return new yB(n,e,t,r)}function HA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wB(n){if(typeof n=="function")return HA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===lA)return 11;if(n===cA)return 14}return 2}function Sl(n,e){var t=n.alternate;return t===null?(t=hs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function qy(n,e,t,r,s,i){var o=2;if(r=n,typeof n=="function")HA(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case xd:return ku(t.children,s,i,e);case aA:o=8,s|=8;break;case Xx:return n=hs(12,t,e,s|2),n.elementType=Xx,n.lanes=i,n;case Yx:return n=hs(13,t,e,s),n.elementType=Yx,n.lanes=i,n;case Qx:return n=hs(19,t,e,s),n.elementType=Qx,n.lanes=i,n;case $P:return ob(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case jP:o=10;break e;case BP:o=9;break e;case lA:o=11;break e;case cA:o=14;break e;case ua:o=16,r=null;break e}throw Error(G(130,n==null?n:typeof n,""))}return e=hs(o,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function ku(n,e,t,r){return n=hs(7,n,r,e),n.lanes=t,n}function ob(n,e,t,r){return n=hs(22,n,r,e),n.elementType=$P,n.lanes=t,n.stateNode={isHidden:!1},n}function fx(n,e,t){return n=hs(6,n,null,e),n.lanes=t,n}function px(n,e,t){return e=hs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function bB(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kb(0),this.expirationTimes=Kb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kb(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function VA(n,e,t,r,s,i,o,a,c){return n=new bB(n,e,t,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=hs(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},TA(i),n}function xB(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bd,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function NN(n){if(!n)return Al;n=n._reactInternals;e:{if(Uu(n)!==n||n.tag!==1)throw Error(G(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(n.tag===1){var t=n.type;if(cr(t))return NR(n,t,e)}return e}function IN(n,e,t,r,s,i,o,a,c){return n=VA(t,r,!0,n,s,i,o,a,c),n.context=NN(null),t=n.current,r=Hn(),s=_l(t),i=Bo(r,s),i.callback=e??null,bl(t,i,s),n.current.lanes=s,Rv(n,s,r),ur(n,r),n}function ab(n,e,t,r){var s=e.current,i=Hn(),o=_l(s);return t=NN(t),e.context===null?e.context=t:e.pendingContext=t,e=Bo(i,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=bl(s,e,o),n!==null&&(Ys(n,s,o,i),Uy(n,s,o)),o}function r0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function cT(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function WA(n,e){cT(n,e),(n=n.alternate)&&cT(n,e)}function _B(){return null}var ON=typeof reportError=="function"?reportError:function(n){console.error(n)};function GA(n){this._internalRoot=n}lb.prototype.render=GA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(G(409));ab(n,e,null,null)};lb.prototype.unmount=GA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ou(function(){ab(null,n,null,null)}),e[Vo]=null}};function lb(n){this._internalRoot=n}lb.prototype.unstable_scheduleHydration=function(n){if(n){var e=uR();n={blockedOn:null,target:n,priority:e};for(var t=0;t<fa.length&&e!==0&&e<fa[t].priority;t++);fa.splice(t,0,n),t===0&&hR(n)}};function qA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function cb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function uT(){}function SB(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=r0(o);i.call(u)}}var o=IN(e,r,n,0,null,!1,!1,"",uT);return n._reactRootContainer=o,n[Vo]=o.current,dm(n.nodeType===8?n.parentNode:n),Ou(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=r0(c);a.call(u)}}var c=VA(n,0,!1,null,null,!1,!1,"",uT);return n._reactRootContainer=c,n[Vo]=c.current,dm(n.nodeType===8?n.parentNode:n),Ou(function(){ab(e,c,t,r)}),c}function ub(n,e,t,r,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=r0(o);a.call(c)}}ab(e,o,n,s)}else o=SB(t,e,n,s,r);return r0(o)}lR=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=yp(e.pendingLanes);t!==0&&(hA(e,t|1),ur(e,Nt()),!(Ne&6)&&(Ff=Nt()+500,Ol()))}break;case 13:Ou(function(){var r=Wo(n,1);if(r!==null){var s=Hn();Ys(r,n,1,s)}}),WA(n,1)}};fA=function(n){if(n.tag===13){var e=Wo(n,134217728);if(e!==null){var t=Hn();Ys(e,n,134217728,t)}WA(n,134217728)}};cR=function(n){if(n.tag===13){var e=_l(n),t=Wo(n,e);if(t!==null){var r=Hn();Ys(t,n,e,r)}WA(n,e)}};uR=function(){return je};dR=function(n,e){var t=je;try{return je=n,e()}finally{je=t}};a_=function(n,e,t){switch(e){case"input":if(e_(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=eb(r);if(!s)throw Error(G(90));zP(r),e_(r,s)}}}break;case"textarea":VP(n,t);break;case"select":e=t.value,e!=null&&Bd(n,!!t.multiple,e,!1)}};QP=$A;JP=Ou;var EB={usingClientEntryPoint:!1,Events:[Iv,Ad,eb,XP,YP,$A]},lp={findFiberByHostInstance:ec,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AB={bundleType:lp.bundleType,version:lp.version,rendererPackageName:lp.rendererPackageName,rendererConfig:lp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=tR(n),n===null?null:n.stateNode},findFiberByHostInstance:lp.findFiberByHostInstance||_B,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fy.isDisabled&&fy.supportsFiber)try{Y0=fy.inject(AB),Fi=fy}catch{}}Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EB;Wr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qA(e))throw Error(G(200));return xB(n,e,null,t)};Wr.createRoot=function(n,e){if(!qA(n))throw Error(G(299));var t=!1,r="",s=ON;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=VA(n,1,!1,null,null,t,!1,r,s),n[Vo]=e.current,dm(n.nodeType===8?n.parentNode:n),new GA(e)};Wr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(G(188)):(n=Object.keys(n).join(","),Error(G(268,n)));return n=tR(e),n=n===null?null:n.stateNode,n};Wr.flushSync=function(n){return Ou(n)};Wr.hydrate=function(n,e,t){if(!cb(e))throw Error(G(200));return ub(null,n,e,!0,t)};Wr.hydrateRoot=function(n,e,t){if(!qA(n))throw Error(G(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",o=ON;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=IN(e,null,n,1,t??null,s,!1,i,o),n[Vo]=e.current,dm(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new lb(e)};Wr.render=function(n,e,t){if(!cb(e))throw Error(G(200));return ub(null,n,e,!1,t)};Wr.unmountComponentAtNode=function(n){if(!cb(n))throw Error(G(40));return n._reactRootContainer?(Ou(function(){ub(null,null,n,!1,function(){n._reactRootContainer=null,n[Vo]=null})}),!0):!1};Wr.unstable_batchedUpdates=$A;Wr.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!cb(t))throw Error(G(200));if(n==null||n._reactInternals===void 0)throw Error(G(38));return ub(n,e,t,!1,r)};Wr.version="18.3.1-next-f1338f8080-20240426";function MN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MN)}catch(n){console.error(n)}}MN(),MP.exports=Wr;var zu=MP.exports;const DN=_P(zu);var LN,dT=zu;LN=dT.createRoot,dT.hydrateRoot;const CB=1,TB=1e6;let mx=0;function kB(){return mx=(mx+1)%Number.MAX_SAFE_INTEGER,mx.toString()}const gx=new Map,hT=n=>{if(gx.has(n))return;const e=setTimeout(()=>{gx.delete(n),em({type:"REMOVE_TOAST",toastId:n})},TB);gx.set(n,e)},PB=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,CB)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?hT(t):n.toasts.forEach(r=>{hT(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Ky=[];let Xy={toasts:[]};function em(n){Xy=PB(Xy,n),Ky.forEach(e=>{e(Xy)})}function RB({...n}){const e=kB(),t=s=>em({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>em({type:"DISMISS_TOAST",toastId:e});return em({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function FN(){const[n,e]=A.useState(Xy);return A.useEffect(()=>(Ky.push(e),()=>{const t=Ky.indexOf(e);t>-1&&Ky.splice(t,1)}),[n]),{...n,toast:RB,dismiss:t=>em({type:"DISMISS_TOAST",toastId:t})}}function Z(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function fT(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function db(...n){return e=>{let t=!1;const r=n.map(s=>{const i=fT(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():fT(n[s],null)}}}}function Ge(...n){return A.useCallback(db(...n),n)}function Ml(n,e=[]){let t=[];function r(i,o){const a=A.createContext(o),c=t.length;t=[...t,o];const u=h=>{var g;const{scope:f,children:p,...v}=h,m=((g=f==null?void 0:f[n])==null?void 0:g[c])||a,w=A.useMemo(()=>v,Object.values(v));return _.jsx(m.Provider,{value:w,children:p})};u.displayName=i+"Provider";function d(h,f){var m;const p=((m=f==null?void 0:f[n])==null?void 0:m[c])||a,v=A.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=t.map(o=>A.createContext(o));return function(a){const c=(a==null?void 0:a[n])||i;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return s.scopeName=n,[r,NB(s,...e)]}function NB(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...a,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function jf(n){const e=OB(n),t=A.forwardRef((r,s)=>{const{children:i,...o}=r,a=A.Children.toArray(i),c=a.find(DB);if(c){const u=c.props.children,d=a.map(h=>h===c?A.Children.count(u)>1?A.Children.only(null):A.isValidElement(u)?u.props.children:null:h);return _.jsx(e,{...o,ref:s,children:A.isValidElement(u)?A.cloneElement(u,void 0,d):null})}return _.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var IB=jf("Slot");function OB(n){const e=A.forwardRef((t,r)=>{const{children:s,...i}=t;if(A.isValidElement(s)){const o=FB(s),a=LB(i,s.props);return s.type!==A.Fragment&&(a.ref=r?db(r,o):o),A.cloneElement(s,a)}return A.Children.count(s)>1?A.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var jN=Symbol("radix.slottable");function MB(n){const e=({children:t})=>_.jsx(_.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=jN,e}function DB(n){return A.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===jN}function LB(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function FB(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function hb(n){const e=n+"CollectionProvider",[t,r]=Ml(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:w,children:g}=m,b=q.useRef(null),y=q.useRef(new Map).current;return _.jsx(s,{scope:w,itemMap:y,collectionRef:b,children:g})};o.displayName=e;const a=n+"CollectionSlot",c=jf(a),u=q.forwardRef((m,w)=>{const{scope:g,children:b}=m,y=i(a,g),E=Ge(w,y.collectionRef);return _.jsx(c,{ref:E,children:b})});u.displayName=a;const d=n+"CollectionItemSlot",h="data-radix-collection-item",f=jf(d),p=q.forwardRef((m,w)=>{const{scope:g,children:b,...y}=m,E=q.useRef(null),T=Ge(w,E),P=i(d,g);return q.useEffect(()=>(P.itemMap.set(E,{ref:E,...y}),()=>void P.itemMap.delete(E))),_.jsx(f,{[h]:"",ref:T,children:b})});p.displayName=d;function v(m){const w=i(n+"CollectionConsumer",m);return q.useCallback(()=>{const b=w.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((P,k)=>y.indexOf(P.ref.current)-y.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},v,r]}var jB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ee=jB.reduce((n,e)=>{const t=jf(`Primitive.${e}`),r=A.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function KA(n,e){n&&zu.flushSync(()=>n.dispatchEvent(e))}function dr(n){const e=A.useRef(n);return A.useEffect(()=>{e.current=n}),A.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function BB(n,e=globalThis==null?void 0:globalThis.document){const t=dr(n);A.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var $B="DismissableLayer",$_="dismissableLayer.update",UB="dismissableLayer.pointerDownOutside",zB="dismissableLayer.focusOutside",pT,BN=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mv=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=n,u=A.useContext(BN),[d,h]=A.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=A.useState({}),v=Ge(e,k=>h(k)),m=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),g=m.indexOf(w),b=d?m.indexOf(d):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,E=b>=g,T=VB(k=>{const R=k.target,N=[...u.branches].some(I=>I.contains(R));!E||N||(s==null||s(k),o==null||o(k),k.defaultPrevented||a==null||a())},f),P=WB(k=>{const R=k.target;[...u.branches].some(I=>I.contains(R))||(i==null||i(k),o==null||o(k),k.defaultPrevented||a==null||a())},f);return BB(k=>{b===u.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},f),A.useEffect(()=>{if(d)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(pT=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),mT(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=pT)}},[d,f,t,u]),A.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),mT())},[d,u]),A.useEffect(()=>{const k=()=>p({});return document.addEventListener($_,k),()=>document.removeEventListener($_,k)},[]),_.jsx(Ee.div,{...c,ref:v,style:{pointerEvents:y?E?"auto":"none":void 0,...n.style},onFocusCapture:Z(n.onFocusCapture,P.onFocusCapture),onBlurCapture:Z(n.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Z(n.onPointerDownCapture,T.onPointerDownCapture)})});Mv.displayName=$B;var HB="DismissableLayerBranch",$N=A.forwardRef((n,e)=>{const t=A.useContext(BN),r=A.useRef(null),s=Ge(e,r);return A.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),_.jsx(Ee.div,{...n,ref:s})});$N.displayName=HB;function VB(n,e=globalThis==null?void 0:globalThis.document){const t=dr(n),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){UN(UB,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function WB(n,e=globalThis==null?void 0:globalThis.document){const t=dr(n),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&UN(zB,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function mT(){const n=new CustomEvent($_);document.dispatchEvent(n)}function UN(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?KA(s,i):s.dispatchEvent(i)}var GB=Mv,qB=$N,wn=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},KB="Portal",fb=A.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[s,i]=A.useState(!1);wn(()=>i(!0),[]);const o=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?DN.createPortal(_.jsx(Ee.div,{...r,ref:e}),o):null});fb.displayName=KB;function XB(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var Hu=n=>{const{present:e,children:t}=n,r=YB(e),s=typeof t=="function"?t({present:r.isPresent}):A.Children.only(t),i=Ge(r.ref,QB(s));return typeof t=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};Hu.displayName="Presence";function YB(n){const[e,t]=A.useState(),r=A.useRef(null),s=A.useRef(n),i=A.useRef("none"),o=n?"mounted":"unmounted",[a,c]=XB(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const u=py(r.current);i.current=a==="mounted"?u:"none"},[a]),wn(()=>{const u=r.current,d=s.current;if(d!==n){const f=i.current,p=py(u);n?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,c]),wn(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const m=py(r.current).includes(p.animationName);if(p.target===e&&m&&(c("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=p=>{p.target===e&&(i.current=py(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(u=>{r.current=u?getComputedStyle(u):null,t(u)},[])}}function py(n){return(n==null?void 0:n.animationName)||"none"}function QB(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var JB=rA[" useInsertionEffect ".trim().toString()]||wn;function bm({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,i,o]=ZB({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:s;{const d=A.useRef(n!==void 0);A.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const u=A.useCallback(d=>{var h;if(a){const f=e$(d)?d(n):d;f!==n&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,n,i,o]);return[c,u]}function ZB({defaultProp:n,onChange:e}){const[t,r]=A.useState(n),s=A.useRef(t),i=A.useRef(e);return JB(()=>{i.current=e},[e]),A.useEffect(()=>{var o;s.current!==t&&((o=i.current)==null||o.call(i,t),s.current=t)},[t,s]),[t,r,i]}function e$(n){return typeof n=="function"}var zN=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),t$="VisuallyHidden",pb=A.forwardRef((n,e)=>_.jsx(Ee.span,{...n,ref:e,style:{...zN,...n.style}}));pb.displayName=t$;var n$=pb,XA="ToastProvider",[YA,r$,s$]=hb("Toast"),[HN,rK]=Ml("Toast",[s$]),[i$,mb]=HN(XA),VN=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=n,[a,c]=A.useState(null),[u,d]=A.useState(0),h=A.useRef(!1),f=A.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${XA}\`. Expected non-empty \`string\`.`),_.jsx(YA.Provider,{scope:e,children:_.jsx(i$,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:A.useCallback(()=>d(p=>p+1),[]),onToastRemove:A.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};VN.displayName=XA;var WN="ToastViewport",o$=["F8"],U_="toast.viewportPause",z_="toast.viewportResume",GN=A.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=o$,label:s="Notifications ({hotkey})",...i}=n,o=mb(WN,t),a=r$(t),c=A.useRef(null),u=A.useRef(null),d=A.useRef(null),h=A.useRef(null),f=Ge(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;A.useEffect(()=>{const w=g=>{var y;r.length!==0&&r.every(E=>g[E]||g.code===E)&&((y=h.current)==null||y.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),A.useEffect(()=>{const w=c.current,g=h.current;if(v&&w&&g){const b=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(U_);g.dispatchEvent(P),o.isClosePausedRef.current=!0}},y=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(z_);g.dispatchEvent(P),o.isClosePausedRef.current=!1}},E=P=>{!w.contains(P.relatedTarget)&&y()},T=()=>{w.contains(document.activeElement)||y()};return w.addEventListener("focusin",b),w.addEventListener("focusout",E),w.addEventListener("pointermove",b),w.addEventListener("pointerleave",T),window.addEventListener("blur",b),window.addEventListener("focus",y),()=>{w.removeEventListener("focusin",b),w.removeEventListener("focusout",E),w.removeEventListener("pointermove",b),w.removeEventListener("pointerleave",T),window.removeEventListener("blur",b),window.removeEventListener("focus",y)}}},[v,o.isClosePausedRef]);const m=A.useCallback(({tabbingDirection:w})=>{const b=a().map(y=>{const E=y.ref.current,T=[E,...w$(E)];return w==="forwards"?T:T.reverse()});return(w==="forwards"?b.reverse():b).flat()},[a]);return A.useEffect(()=>{const w=h.current;if(w){const g=b=>{var T,P,k;const y=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!y){const R=document.activeElement,N=b.shiftKey;if(b.target===w&&N){(T=u.current)==null||T.focus();return}const L=m({tabbingDirection:N?"backwards":"forwards"}),z=L.findIndex(F=>F===R);vx(L.slice(z+1))?b.preventDefault():N?(P=u.current)==null||P.focus():(k=d.current)==null||k.focus()}};return w.addEventListener("keydown",g),()=>w.removeEventListener("keydown",g)}},[a,m]),_.jsxs(qB,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&_.jsx(H_,{ref:u,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"forwards"});vx(w)}}),_.jsx(YA.Slot,{scope:t,children:_.jsx(Ee.ol,{tabIndex:-1,...i,ref:f})}),v&&_.jsx(H_,{ref:d,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"backwards"});vx(w)}})]})});GN.displayName=WN;var qN="ToastFocusProxy",H_=A.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,i=mb(qN,t);return _.jsx(pb,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&r()}})});H_.displayName=qN;var Dv="Toast",a$="toast.swipeStart",l$="toast.swipeMove",c$="toast.swipeCancel",u$="toast.swipeEnd",KN=A.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:i,...o}=n,[a,c]=bm({prop:r,defaultProp:s??!0,onChange:i,caller:Dv});return _.jsx(Hu,{present:t||a,children:_.jsx(f$,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:dr(n.onPause),onResume:dr(n.onResume),onSwipeStart:Z(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Z(n.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Z(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Z(n.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});KN.displayName=Dv;var[d$,h$]=HN(Dv,{onClose(){}}),f$=A.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...v}=n,m=mb(Dv,t),[w,g]=A.useState(null),b=Ge(e,F=>g(F)),y=A.useRef(null),E=A.useRef(null),T=s||m.duration,P=A.useRef(0),k=A.useRef(T),R=A.useRef(0),{onToastAdd:N,onToastRemove:I}=m,M=dr(()=>{var B;(w==null?void 0:w.contains(document.activeElement))&&((B=m.viewport)==null||B.focus()),o()}),L=A.useCallback(F=>{!F||F===1/0||(window.clearTimeout(R.current),P.current=new Date().getTime(),R.current=window.setTimeout(M,F))},[M]);A.useEffect(()=>{const F=m.viewport;if(F){const B=()=>{L(k.current),u==null||u()},j=()=>{const $=new Date().getTime()-P.current;k.current=k.current-$,window.clearTimeout(R.current),c==null||c()};return F.addEventListener(U_,j),F.addEventListener(z_,B),()=>{F.removeEventListener(U_,j),F.removeEventListener(z_,B)}}},[m.viewport,T,c,u,L]),A.useEffect(()=>{i&&!m.isClosePausedRef.current&&L(T)},[i,T,m.isClosePausedRef,L]),A.useEffect(()=>(N(),()=>I()),[N,I]);const z=A.useMemo(()=>w?tI(w):null,[w]);return m.viewport?_.jsxs(_.Fragment,{children:[z&&_.jsx(p$,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),_.jsx(d$,{scope:t,onClose:M,children:zu.createPortal(_.jsx(YA.ItemSlot,{scope:t,children:_.jsx(GB,{asChild:!0,onEscapeKeyDown:Z(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||M(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:_.jsx(Ee.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":m.swipeDirection,...v,ref:b,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Z(n.onKeyDown,F=>{F.key==="Escape"&&(a==null||a(F.nativeEvent),F.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:Z(n.onPointerDown,F=>{F.button===0&&(y.current={x:F.clientX,y:F.clientY})}),onPointerMove:Z(n.onPointerMove,F=>{if(!y.current)return;const B=F.clientX-y.current.x,j=F.clientY-y.current.y,$=!!E.current,D=["left","right"].includes(m.swipeDirection),O=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,H=D?O(0,B):0,Y=D?0:O(0,j),W=F.pointerType==="touch"?10:2,X={x:H,y:Y},re={originalEvent:F,delta:X};$?(E.current=X,my(l$,h,re,{discrete:!1})):gT(X,m.swipeDirection,W)?(E.current=X,my(a$,d,re,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(B)>W||Math.abs(j)>W)&&(y.current=null)}),onPointerUp:Z(n.onPointerUp,F=>{const B=E.current,j=F.target;if(j.hasPointerCapture(F.pointerId)&&j.releasePointerCapture(F.pointerId),E.current=null,y.current=null,B){const $=F.currentTarget,D={originalEvent:F,delta:B};gT(B,m.swipeDirection,m.swipeThreshold)?my(u$,p,D,{discrete:!0}):my(c$,f,D,{discrete:!0}),$.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),p$=n=>{const{__scopeToast:e,children:t,...r}=n,s=mb(Dv,e),[i,o]=A.useState(!1),[a,c]=A.useState(!1);return v$(()=>o(!0)),A.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:_.jsx(fb,{asChild:!0,children:_.jsx(pb,{...r,children:i&&_.jsxs(_.Fragment,{children:[s.label," ",t]})})})},m$="ToastTitle",XN=A.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return _.jsx(Ee.div,{...r,ref:e})});XN.displayName=m$;var g$="ToastDescription",YN=A.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return _.jsx(Ee.div,{...r,ref:e})});YN.displayName=g$;var QN="ToastAction",JN=A.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?_.jsx(eI,{altText:t,asChild:!0,children:_.jsx(QA,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${QN}\`. Expected non-empty \`string\`.`),null)});JN.displayName=QN;var ZN="ToastClose",QA=A.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=h$(ZN,t);return _.jsx(eI,{asChild:!0,children:_.jsx(Ee.button,{type:"button",...r,ref:e,onClick:Z(n.onClick,s.onClose)})})});QA.displayName=ZN;var eI=A.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return _.jsx(Ee.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function tI(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),y$(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...tI(r))}}),e}function my(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?KA(s,i):s.dispatchEvent(i)}var gT=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),i=r>s;return e==="left"||e==="right"?i&&r>t:!i&&s>t};function v$(n=()=>{}){const e=dr(n);wn(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function y$(n){return n.nodeType===n.ELEMENT_NODE}function w$(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function vx(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var b$=VN,nI=GN,rI=KN,sI=XN,iI=YN,oI=JN,aI=QA;function lI(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=lI(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function cI(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=lI(n))&&(r&&(r+=" "),r+=e);return r}const vT=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,yT=cI,JA=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return yT(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=t==null?void 0:t[u],h=i==null?void 0:i[u];if(d===null)return null;const f=vT(d)||vT(h);return s[u][f]}),a=t&&Object.entries(t).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(v=>{let[m,w]=v;return Array.isArray(w)?w.includes({...i,...a}[m]):{...i,...a}[m]===w})?[...u,h,f]:u},[]);return yT(n,o,c,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uI=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=A.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>A.createElement("svg",{ref:c,..._$,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:uI("lucide",s),...a},[...o.map(([u,d])=>A.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(n,e)=>{const t=A.forwardRef(({className:r,...s},i)=>A.createElement(S$,{ref:i,iconNode:e,className:uI(`lucide-${x$(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=ot("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A$=ot("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=ot("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=ot("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=ot("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=ot("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=ot("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=ot("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=ot("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=ot("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=ot("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=ot("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=ot("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=ot("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=ot("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=ot("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=ot("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=ot("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=ot("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=ot("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=ot("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=ot("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$=ot("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=ot("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),e1="-",U$=n=>{const e=H$(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(e1);return a[0]===""&&a.length!==1&&a.shift(),mI(a,e)||z$(o)},getConflictingClassGroupIds:(o,a)=>{const c=t[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},mI=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?mI(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(e1);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},wT=/^\[(.+)\]$/,z$=n=>{if(wT.test(n)){const e=wT.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},H$=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return W$(Object.entries(n.classGroups),t).forEach(([i,o])=>{V_(o,r,i,e)}),r},V_=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:bT(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(V$(s)){V_(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,o])=>{V_(o,bT(e,i),t,r)})})},bT=(n,e)=>{let t=n;return e.split(e1).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},V$=n=>n.isThemeGetter,W$=(n,e)=>e?n.map(([t,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,s]}):n,G$=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,o)=>{t.set(i,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){t.has(i)?t.set(i,o):s(i,o)}}},gI="!",q$=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],i=e.length,o=a=>{const c=[];let u=0,d=0,h;for(let w=0;w<a.length;w++){let g=a[w];if(u===0){if(g===s&&(r||a.slice(w,w+i)===e)){c.push(a.slice(d,w)),d=w+i;continue}if(g==="/"){h=w;continue}}g==="["?u++:g==="]"&&u--}const f=c.length===0?a:a.substring(d),p=f.startsWith(gI),v=p?f.substring(1):f,m=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:m}};return t?a=>t({className:a,parseClassName:o}):o},K$=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},X$=n=>({cache:G$(n.cacheSize),parseClassName:q$(n),...U$(n)}),Y$=/\s+/,Q$=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=n.trim().split(Y$);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=t(u);let v=!!p,m=r(v?f.substring(0,p):f);if(!m){if(!v){a=u+(a.length>0?" "+a:a);continue}if(m=r(f),!m){a=u+(a.length>0?" "+a:a);continue}v=!1}const w=K$(d).join(":"),g=h?w+gI:w,b=g+m;if(i.includes(b))continue;i.push(b);const y=s(m,v);for(let E=0;E<y.length;++E){const T=y[E];i.push(g+T)}a=u+(a.length>0?" "+a:a)}return a};function J$(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=vI(e))&&(r&&(r+=" "),r+=t);return r}const vI=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=vI(n[r]))&&(t&&(t+=" "),t+=e);return t};function Z$(n,...e){let t,r,s,i=o;function o(c){const u=e.reduce((d,h)=>h(d),n());return t=X$(u),r=t.cache.get,s=t.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const d=Q$(c,t);return s(c,d),d}return function(){return i(J$.apply(null,arguments))}}const nt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},yI=/^\[(?:([a-z-]+):)?(.+)\]$/i,eU=/^\d+\/\d+$/,tU=new Set(["px","full","screen"]),nU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vi=n=>Wd(n)||tU.has(n)||eU.test(n),ia=n=>qf(n,"length",pU),Wd=n=>!!n&&!Number.isNaN(Number(n)),yx=n=>qf(n,"number",Wd),cp=n=>!!n&&Number.isInteger(Number(n)),aU=n=>n.endsWith("%")&&Wd(n.slice(0,-1)),ge=n=>yI.test(n),oa=n=>nU.test(n),lU=new Set(["length","size","percentage"]),cU=n=>qf(n,lU,wI),uU=n=>qf(n,"position",wI),dU=new Set(["image","url"]),hU=n=>qf(n,dU,gU),fU=n=>qf(n,"",mU),up=()=>!0,qf=(n,e,t)=>{const r=yI.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},pU=n=>rU.test(n)&&!sU.test(n),wI=()=>!1,mU=n=>iU.test(n),gU=n=>oU.test(n),vU=()=>{const n=nt("colors"),e=nt("spacing"),t=nt("blur"),r=nt("brightness"),s=nt("borderColor"),i=nt("borderRadius"),o=nt("borderSpacing"),a=nt("borderWidth"),c=nt("contrast"),u=nt("grayscale"),d=nt("hueRotate"),h=nt("invert"),f=nt("gap"),p=nt("gradientColorStops"),v=nt("gradientColorStopPositions"),m=nt("inset"),w=nt("margin"),g=nt("opacity"),b=nt("padding"),y=nt("saturate"),E=nt("scale"),T=nt("sepia"),P=nt("skew"),k=nt("space"),R=nt("translate"),N=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",ge,e],L=()=>[ge,e],z=()=>["",Vi,ia],F=()=>["auto",Wd,ge],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],j=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",ge],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>[Wd,ge];return{cacheSize:500,separator:":",theme:{colors:[up],spacing:[Vi,ia],blur:["none","",oa,ge],brightness:Y(),borderColor:[n],borderRadius:["none","","full",oa,ge],borderSpacing:L(),borderWidth:z(),contrast:Y(),grayscale:O(),hueRotate:Y(),invert:O(),gap:L(),gradientColorStops:[n],gradientColorStopPositions:[aU,ia],inset:M(),margin:M(),opacity:Y(),padding:L(),saturate:Y(),scale:Y(),sepia:O(),skew:Y(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",ge]}],container:["container"],columns:[{columns:[oa]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),ge]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",cp,ge]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ge]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",cp,ge]}],"grid-cols":[{"grid-cols":[up]}],"col-start-end":[{col:["auto",{span:["full",cp,ge]},ge]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[up]}],"row-start-end":[{row:["auto",{span:[cp,ge]},ge]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ge]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ge]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ge,e]}],"min-w":[{"min-w":[ge,e,"min","max","fit"]}],"max-w":[{"max-w":[ge,e,"none","full","min","max","fit","prose",{screen:[oa]},oa]}],h:[{h:[ge,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ge,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ge,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ge,e,"auto","min","max","fit"]}],"font-size":[{text:["base",oa,ia]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",yx]}],"font-family":[{font:[up]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ge]}],"line-clamp":[{"line-clamp":["none",Wd,yx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Vi,ge]}],"list-image":[{"list-image":["none",ge]}],"list-style-type":[{list:["none","disc","decimal",ge]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...j(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Vi,ia]}],"underline-offset":[{"underline-offset":["auto",Vi,ge]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),uU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},hU]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...j(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:j()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...j()]}],"outline-offset":[{"outline-offset":[Vi,ge]}],"outline-w":[{outline:[Vi,ia]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Vi,ia]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",oa,fU]}],"shadow-color":[{shadow:[up]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",oa,ge]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[y]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ge]}],duration:[{duration:Y()}],ease:[{ease:["linear","in","out","in-out",ge]}],delay:[{delay:Y()}],animate:[{animate:["none","spin","ping","pulse","bounce",ge]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[cp,ge]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ge]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ge]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ge]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Vi,ia,yx]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},yU=Z$(vU);function ue(...n){return yU(cI(n))}const wU=b$,bI=A.forwardRef(({className:n,...e},t)=>_.jsx(nI,{ref:t,className:ue("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));bI.displayName=nI.displayName;const bU=JA("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),xI=A.forwardRef(({className:n,variant:e,...t},r)=>_.jsx(rI,{ref:r,className:ue(bU({variant:e}),n),...t}));xI.displayName=rI.displayName;const xU=A.forwardRef(({className:n,...e},t)=>_.jsx(oI,{ref:t,className:ue("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",n),...e}));xU.displayName=oI.displayName;const _I=A.forwardRef(({className:n,...e},t)=>_.jsx(aI,{ref:t,className:ue("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:_.jsx(fI,{className:"h-4 w-4"})}));_I.displayName=aI.displayName;const SI=A.forwardRef(({className:n,...e},t)=>_.jsx(sI,{ref:t,className:ue("text-sm font-semibold",n),...e}));SI.displayName=sI.displayName;const EI=A.forwardRef(({className:n,...e},t)=>_.jsx(iI,{ref:t,className:ue("text-sm opacity-90",n),...e}));EI.displayName=iI.displayName;function _U(){const{toasts:n}=FN();return _.jsxs(wU,{children:[n.map(function({id:e,title:t,description:r,action:s,...i}){return _.jsxs(xI,{...i,children:[_.jsxs("div",{className:"grid gap-1",children:[t&&_.jsx(SI,{children:t}),r&&_.jsx(EI,{children:r})]}),s,_.jsx(_I,{})]},e)}),_.jsx(bI,{})]})}var xT=["light","dark"],SU="(prefers-color-scheme: dark)",EU=A.createContext(void 0),AU={setTheme:n=>{},themes:[]},CU=()=>{var n;return(n=A.useContext(EU))!=null?n:AU};A.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:c})=>{let u=i==="system",d=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,h=s?xT.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(v,m=!1,w=!0)=>{let g=o?o[v]:v,b=m?v+"|| ''":`'${g}'`,y="";return s&&w&&!m&&xT.includes(v)&&(y+=`d.style.colorScheme = '${v}';`),t==="class"?m||g?y+=`c.add(${b})`:y+="null":g&&(y+=`d[s](n,${b})`),y},p=n?`!function(){${d}${f(n)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${SU}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return A.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var TU=n=>{switch(n){case"success":return RU;case"info":return IU;case"warning":return NU;case"error":return OU;default:return null}},kU=Array(12).fill(0),PU=({visible:n,className:e})=>q.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},q.createElement("div",{className:"sonner-spinner"},kU.map((t,r)=>q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),RU=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),NU=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),IU=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),OU=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),MU=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),DU=()=>{let[n,e]=q.useState(document.hidden);return q.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},W_=1,LU=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...r}=n,s=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:W_++,i=this.toasts.find(a=>a.id===s),o=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...n,id:s,title:t}),{...a,...n,id:s,dismissible:o,title:t}):a):this.addToast({title:t,...r,dismissible:o,id:s}),s},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=n instanceof Promise?n:n(),s=t!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],q.isValidElement(c))s=!1,this.create({id:t,type:"default",message:c});else if(jU(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:t,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(t),t=void 0),(c=e.finally)==null||c.call(e)}),a=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof t!="string"&&typeof t!="number"?{unwrap:a}:Object.assign(t,{unwrap:a})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||W_++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},sr=new LU,FU=(n,e)=>{let t=(e==null?void 0:e.id)||W_++;return sr.addToast({title:n,...e,id:t}),t},jU=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",BU=FU,$U=()=>sr.toasts,UU=()=>sr.getActiveToasts();Object.assign(BU,{success:sr.success,info:sr.info,warning:sr.warning,error:sr.error,custom:sr.custom,message:sr.message,promise:sr.promise,dismiss:sr.dismiss,loading:sr.loading},{getHistory:$U,getToasts:UU});function zU(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}zU(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function gy(n){return n.label!==void 0}var HU=3,VU="32px",WU="16px",_T=4e3,GU=356,qU=14,KU=20,XU=200;function Ss(...n){return n.filter(Boolean).join(" ")}function YU(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var QU=n=>{var e,t,r,s,i,o,a,c,u,d,h;let{invert:f,toast:p,unstyled:v,interacting:m,setHeights:w,visibleToasts:g,heights:b,index:y,toasts:E,expanded:T,removeToast:P,defaultRichColors:k,closeButton:R,style:N,cancelButtonStyle:I,actionButtonStyle:M,className:L="",descriptionClassName:z="",duration:F,position:B,gap:j,loadingIcon:$,expandByDefault:D,classNames:O,icons:H,closeButtonAriaLabel:Y="Close toast",pauseWhenPageIsHidden:W}=n,[X,re]=q.useState(null),[we,xe]=q.useState(null),[U,Ae]=q.useState(!1),[Ce,be]=q.useState(!1),[pe,Te]=q.useState(!1),[Bt,Kn]=q.useState(!1),[Fl,ea]=q.useState(!1),[jl,Zf]=q.useState(0),[Ku,Y1]=q.useState(0),ep=q.useRef(p.duration||F||_T),Q1=q.useRef(null),Bl=q.useRef(null),H2=y===0,V2=y+1<=g,qr=p.type,Xu=p.dismissible!==!1,W2=p.className||"",G2=p.descriptionClassName||"",Yv=q.useMemo(()=>b.findIndex(de=>de.toastId===p.id)||0,[b,p.id]),q2=q.useMemo(()=>{var de;return(de=p.closeButton)!=null?de:R},[p.closeButton,R]),J1=q.useMemo(()=>p.duration||F||_T,[p.duration,F]),$b=q.useRef(0),Yu=q.useRef(0),Z1=q.useRef(0),Qu=q.useRef(null),[K2,X2]=B.split("-"),eC=q.useMemo(()=>b.reduce((de,Be,at)=>at>=Yv?de:de+Be.height,0),[b,Yv]),tC=DU(),Y2=p.invert||f,Ub=qr==="loading";Yu.current=q.useMemo(()=>Yv*j+eC,[Yv,eC]),q.useEffect(()=>{ep.current=J1},[J1]),q.useEffect(()=>{Ae(!0)},[]),q.useEffect(()=>{let de=Bl.current;if(de){let Be=de.getBoundingClientRect().height;return Y1(Be),w(at=>[{toastId:p.id,height:Be,position:p.position},...at]),()=>w(at=>at.filter(ws=>ws.toastId!==p.id))}},[w,p.id]),q.useLayoutEffect(()=>{if(!U)return;let de=Bl.current,Be=de.style.height;de.style.height="auto";let at=de.getBoundingClientRect().height;de.style.height=Be,Y1(at),w(ws=>ws.find(bs=>bs.toastId===p.id)?ws.map(bs=>bs.toastId===p.id?{...bs,height:at}:bs):[{toastId:p.id,height:at,position:p.position},...ws])},[U,p.title,p.description,w,p.id]);let ta=q.useCallback(()=>{be(!0),Zf(Yu.current),w(de=>de.filter(Be=>Be.toastId!==p.id)),setTimeout(()=>{P(p)},XU)},[p,P,w,Yu]);q.useEffect(()=>{if(p.promise&&qr==="loading"||p.duration===1/0||p.type==="loading")return;let de;return T||m||W&&tC?(()=>{if(Z1.current<$b.current){let Be=new Date().getTime()-$b.current;ep.current=ep.current-Be}Z1.current=new Date().getTime()})():ep.current!==1/0&&($b.current=new Date().getTime(),de=setTimeout(()=>{var Be;(Be=p.onAutoClose)==null||Be.call(p,p),ta()},ep.current)),()=>clearTimeout(de)},[T,m,p,qr,W,tC,ta]),q.useEffect(()=>{p.delete&&ta()},[ta,p.delete]);function Q2(){var de,Be,at;return H!=null&&H.loading?q.createElement("div",{className:Ss(O==null?void 0:O.loader,(de=p==null?void 0:p.classNames)==null?void 0:de.loader,"sonner-loader"),"data-visible":qr==="loading"},H.loading):$?q.createElement("div",{className:Ss(O==null?void 0:O.loader,(Be=p==null?void 0:p.classNames)==null?void 0:Be.loader,"sonner-loader"),"data-visible":qr==="loading"},$):q.createElement(PU,{className:Ss(O==null?void 0:O.loader,(at=p==null?void 0:p.classNames)==null?void 0:at.loader),visible:qr==="loading"})}return q.createElement("li",{tabIndex:0,ref:Bl,className:Ss(L,W2,O==null?void 0:O.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,O==null?void 0:O.default,O==null?void 0:O[qr],(t=p==null?void 0:p.classNames)==null?void 0:t[qr]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:k,"data-styled":!(p.jsx||p.unstyled||v),"data-mounted":U,"data-promise":!!p.promise,"data-swiped":Fl,"data-removed":Ce,"data-visible":V2,"data-y-position":K2,"data-x-position":X2,"data-index":y,"data-front":H2,"data-swiping":pe,"data-dismissible":Xu,"data-type":qr,"data-invert":Y2,"data-swipe-out":Bt,"data-swipe-direction":we,"data-expanded":!!(T||D&&U),style:{"--index":y,"--toasts-before":y,"--z-index":E.length-y,"--offset":`${Ce?jl:Yu.current}px`,"--initial-height":D?"auto":`${Ku}px`,...N,...p.style},onDragEnd:()=>{Te(!1),re(null),Qu.current=null},onPointerDown:de=>{Ub||!Xu||(Q1.current=new Date,Zf(Yu.current),de.target.setPointerCapture(de.pointerId),de.target.tagName!=="BUTTON"&&(Te(!0),Qu.current={x:de.clientX,y:de.clientY}))},onPointerUp:()=>{var de,Be,at,ws;if(Bt||!Xu)return;Qu.current=null;let bs=Number(((de=Bl.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),na=Number(((Be=Bl.current)==null?void 0:Be.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),$l=new Date().getTime()-((at=Q1.current)==null?void 0:at.getTime()),xs=X==="x"?bs:na,ra=Math.abs(xs)/$l;if(Math.abs(xs)>=KU||ra>.11){Zf(Yu.current),(ws=p.onDismiss)==null||ws.call(p,p),xe(X==="x"?bs>0?"right":"left":na>0?"down":"up"),ta(),Kn(!0),ea(!1);return}Te(!1),re(null)},onPointerMove:de=>{var Be,at,ws,bs;if(!Qu.current||!Xu||((Be=window.getSelection())==null?void 0:Be.toString().length)>0)return;let na=de.clientY-Qu.current.y,$l=de.clientX-Qu.current.x,xs=(at=n.swipeDirections)!=null?at:YU(B);!X&&(Math.abs($l)>1||Math.abs(na)>1)&&re(Math.abs($l)>Math.abs(na)?"x":"y");let ra={x:0,y:0};X==="y"?(xs.includes("top")||xs.includes("bottom"))&&(xs.includes("top")&&na<0||xs.includes("bottom")&&na>0)&&(ra.y=na):X==="x"&&(xs.includes("left")||xs.includes("right"))&&(xs.includes("left")&&$l<0||xs.includes("right")&&$l>0)&&(ra.x=$l),(Math.abs(ra.x)>0||Math.abs(ra.y)>0)&&ea(!0),(ws=Bl.current)==null||ws.style.setProperty("--swipe-amount-x",`${ra.x}px`),(bs=Bl.current)==null||bs.style.setProperty("--swipe-amount-y",`${ra.y}px`)}},q2&&!p.jsx?q.createElement("button",{"aria-label":Y,"data-disabled":Ub,"data-close-button":!0,onClick:Ub||!Xu?()=>{}:()=>{var de;ta(),(de=p.onDismiss)==null||de.call(p,p)},className:Ss(O==null?void 0:O.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=H==null?void 0:H.close)!=null?i:MU):null,p.jsx||A.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:q.createElement(q.Fragment,null,qr||p.icon||p.promise?q.createElement("div",{"data-icon":"",className:Ss(O==null?void 0:O.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Q2():null,p.type!=="loading"?p.icon||(H==null?void 0:H[qr])||TU(qr):null):null,q.createElement("div",{"data-content":"",className:Ss(O==null?void 0:O.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},q.createElement("div",{"data-title":"",className:Ss(O==null?void 0:O.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?q.createElement("div",{"data-description":"",className:Ss(z,G2,O==null?void 0:O.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),A.isValidElement(p.cancel)?p.cancel:p.cancel&&gy(p.cancel)?q.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||I,onClick:de=>{var Be,at;gy(p.cancel)&&Xu&&((at=(Be=p.cancel).onClick)==null||at.call(Be,de),ta())},className:Ss(O==null?void 0:O.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,A.isValidElement(p.action)?p.action:p.action&&gy(p.action)?q.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||M,onClick:de=>{var Be,at;gy(p.action)&&((at=(Be=p.action).onClick)==null||at.call(Be,de),!de.defaultPrevented&&ta())},className:Ss(O==null?void 0:O.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function ST(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function JU(n,e){let t={};return[n,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?WU:VU;function c(u){["top","right","bottom","left"].forEach(d=>{t[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?t[`${o}-${u}`]=a:t[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(a)}),t}var ZU=A.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:v=HU,toastOptions:m,dir:w=ST(),gap:g=qU,loadingIcon:b,icons:y,containerAriaLabel:E="Notifications",pauseWhenPageIsHidden:T}=n,[P,k]=q.useState([]),R=q.useMemo(()=>Array.from(new Set([r].concat(P.filter(W=>W.position).map(W=>W.position)))),[P,r]),[N,I]=q.useState([]),[M,L]=q.useState(!1),[z,F]=q.useState(!1),[B,j]=q.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=q.useRef(null),D=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=q.useRef(null),H=q.useRef(!1),Y=q.useCallback(W=>{k(X=>{var re;return(re=X.find(we=>we.id===W.id))!=null&&re.delete||sr.dismiss(W.id),X.filter(({id:we})=>we!==W.id)})},[]);return q.useEffect(()=>sr.subscribe(W=>{if(W.dismiss){k(X=>X.map(re=>re.id===W.id?{...re,delete:!0}:re));return}setTimeout(()=>{DN.flushSync(()=>{k(X=>{let re=X.findIndex(we=>we.id===W.id);return re!==-1?[...X.slice(0,re),{...X[re],...W},...X.slice(re+1)]:[W,...X]})})})}),[]),q.useEffect(()=>{if(d!=="system"){j(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?j("dark"):j("light")),typeof window>"u")return;let W=window.matchMedia("(prefers-color-scheme: dark)");try{W.addEventListener("change",({matches:X})=>{j(X?"dark":"light")})}catch{W.addListener(({matches:re})=>{try{j(re?"dark":"light")}catch(we){console.error(we)}})}},[d]),q.useEffect(()=>{P.length<=1&&L(!1)},[P]),q.useEffect(()=>{let W=X=>{var re,we;s.every(xe=>X[xe]||X.code===xe)&&(L(!0),(re=$.current)==null||re.focus()),X.code==="Escape"&&(document.activeElement===$.current||(we=$.current)!=null&&we.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[s]),q.useEffect(()=>{if($.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,H.current=!1)}},[$.current]),q.createElement("section",{ref:e,"aria-label":`${E} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((W,X)=>{var re;let[we,xe]=W.split("-");return P.length?q.createElement("ol",{key:W,dir:w==="auto"?ST():w,tabIndex:-1,ref:$,className:a,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":we,"data-lifted":M&&P.length>1&&!i,"data-x-position":xe,style:{"--front-toast-height":`${((re=N[0])==null?void 0:re.height)||0}px`,"--width":`${GU}px`,"--gap":`${g}px`,...p,...JU(c,u)},onBlur:U=>{H.current&&!U.currentTarget.contains(U.relatedTarget)&&(H.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||H.current||(H.current=!0,O.current=U.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{z||L(!1)},onDragEnd:()=>L(!1),onPointerDown:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},P.filter(U=>!U.position&&X===0||U.position===W).map((U,Ae)=>{var Ce,be;return q.createElement(QU,{key:U.id,icons:y,index:Ae,toast:U,defaultRichColors:h,duration:(Ce=m==null?void 0:m.duration)!=null?Ce:f,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:t,visibleToasts:v,closeButton:(be=m==null?void 0:m.closeButton)!=null?be:o,interacting:z,position:W,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:Y,toasts:P.filter(pe=>pe.position==U.position),heights:N.filter(pe=>pe.position==U.position),setHeights:I,expandByDefault:i,gap:g,loadingIcon:b,expanded:M,pauseWhenPageIsHidden:T,swipeDirections:n.swipeDirections})})):null}))});const e3=({...n})=>{const{theme:e="system"}=CU();return _.jsx(ZU,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var t3=rA[" useId ".trim().toString()]||(()=>{}),n3=0;function Uf(n){const[e,t]=A.useState(t3());return wn(()=>{t(r=>r??String(n3++))},[n]),e?`radix-${e}`:""}const r3=["top","right","bottom","left"],Cl=Math.min,Lr=Math.max,s0=Math.round,vy=Math.floor,Bi=n=>({x:n,y:n}),s3={left:"right",right:"left",bottom:"top",top:"bottom"},i3={start:"end",end:"start"};function G_(n,e,t){return Lr(n,Cl(e,t))}function qo(n,e){return typeof n=="function"?n(e):n}function Ko(n){return n.split("-")[0]}function Kf(n){return n.split("-")[1]}function t1(n){return n==="x"?"y":"x"}function n1(n){return n==="y"?"height":"width"}const o3=new Set(["top","bottom"]);function Mi(n){return o3.has(Ko(n))?"y":"x"}function r1(n){return t1(Mi(n))}function a3(n,e,t){t===void 0&&(t=!1);const r=Kf(n),s=r1(n),i=n1(s);let o=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=i0(o)),[o,i0(o)]}function l3(n){const e=i0(n);return[q_(n),e,q_(e)]}function q_(n){return n.replace(/start|end/g,e=>i3[e])}const ET=["left","right"],AT=["right","left"],c3=["top","bottom"],u3=["bottom","top"];function d3(n,e,t){switch(n){case"top":case"bottom":return t?e?AT:ET:e?ET:AT;case"left":case"right":return e?c3:u3;default:return[]}}function h3(n,e,t,r){const s=Kf(n);let i=d3(Ko(n),t==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(q_)))),i}function i0(n){return n.replace(/left|right|bottom|top/g,e=>s3[e])}function f3(n){return{top:0,right:0,bottom:0,left:0,...n}}function AI(n){return typeof n!="number"?f3(n):{top:n,right:n,bottom:n,left:n}}function o0(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function CT(n,e,t){let{reference:r,floating:s}=n;const i=Mi(e),o=r1(e),a=n1(o),c=Ko(e),u=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(c){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Kf(e)){case"start":p[o]-=f*(t&&u?-1:1);break;case"end":p[o]+=f*(t&&u?-1:1);break}return p}const p3=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:d,y:h}=CT(u,r,c),f=r,p={},v=0;for(let m=0;m<a.length;m++){const{name:w,fn:g}=a[m],{x:b,y,data:E,reset:T}=await g({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:u,platform:o,elements:{reference:n,floating:e}});d=b??d,h=y??h,p={...p,[w]:{...p[w],...E}},T&&v<=50&&(v++,typeof T=="object"&&(T.placement&&(f=T.placement),T.rects&&(u=T.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):T.rects),{x:d,y:h}=CT(u,f,c)),m=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function xm(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=n,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=qo(e,n),v=AI(p),w=a[f?h==="floating"?"reference":"floating":h],g=o0(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(w)))==null||t?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:c})),b=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,y=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),E=await(i.isElement==null?void 0:i.isElement(y))?await(i.getScale==null?void 0:i.getScale(y))||{x:1,y:1}:{x:1,y:1},T=o0(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:y,strategy:c}):b);return{top:(g.top-T.top+v.top)/E.y,bottom:(T.bottom-g.bottom+v.bottom)/E.y,left:(g.left-T.left+v.left)/E.x,right:(T.right-g.right+v.right)/E.x}}const m3=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:u,padding:d=0}=qo(n,e)||{};if(u==null)return{};const h=AI(d),f={x:t,y:r},p=r1(s),v=n1(p),m=await o.getDimensions(u),w=p==="y",g=w?"top":"left",b=w?"bottom":"right",y=w?"clientHeight":"clientWidth",E=i.reference[v]+i.reference[p]-f[p]-i.floating[v],T=f[p]-i.reference[p],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let k=P?P[y]:0;(!k||!await(o.isElement==null?void 0:o.isElement(P)))&&(k=a.floating[y]||i.floating[v]);const R=E/2-T/2,N=k/2-m[v]/2-1,I=Cl(h[g],N),M=Cl(h[b],N),L=I,z=k-m[v]-M,F=k/2-m[v]/2+R,B=G_(L,F,z),j=!c.arrow&&Kf(s)!=null&&F!==B&&i.reference[v]/2-(F<L?I:M)-m[v]/2<0,$=j?F<L?F-L:F-z:0;return{[p]:f[p]+$,data:{[p]:B,centerOffset:F-B-$,...j&&{alignmentOffset:$}},reset:j}}}),g3=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:m=!0,...w}=qo(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const g=Ko(s),b=Mi(a),y=Ko(a)===a,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),T=f||(y||!m?[i0(a)]:l3(a)),P=v!=="none";!f&&P&&T.push(...h3(a,m,v,E));const k=[a,...T],R=await xm(e,w),N=[];let I=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&N.push(R[g]),h){const F=a3(s,o,E);N.push(R[F[0]],R[F[1]])}if(I=[...I,{placement:s,overflows:N}],!N.every(F=>F<=0)){var M,L;const F=(((M=i.flip)==null?void 0:M.index)||0)+1,B=k[F];if(B&&(!(h==="alignment"?b!==Mi(B):!1)||I.every(D=>D.overflows[0]>0&&Mi(D.placement)===b)))return{data:{index:F,overflows:I},reset:{placement:B}};let j=(L=I.filter($=>$.overflows[0]<=0).sort(($,D)=>$.overflows[1]-D.overflows[1])[0])==null?void 0:L.placement;if(!j)switch(p){case"bestFit":{var z;const $=(z=I.filter(D=>{if(P){const O=Mi(D.placement);return O===b||O==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(O=>O>0).reduce((O,H)=>O+H,0)]).sort((D,O)=>D[1]-O[1])[0])==null?void 0:z[0];$&&(j=$);break}case"initialPlacement":j=a;break}if(s!==j)return{reset:{placement:j}}}return{}}}};function TT(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function kT(n){return r3.some(e=>n[e]>=0)}const v3=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=qo(n,e);switch(r){case"referenceHidden":{const i=await xm(e,{...s,elementContext:"reference"}),o=TT(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:kT(o)}}}case"escaped":{const i=await xm(e,{...s,altBoundary:!0}),o=TT(i,t.floating);return{data:{escapedOffsets:o,escaped:kT(o)}}}default:return{}}}}},CI=new Set(["left","top"]);async function y3(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ko(t),a=Kf(t),c=Mi(t)==="y",u=CI.has(o)?-1:1,d=i&&c?-1:1,h=qo(e,n);let{mainAxis:f,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof v=="number"&&(p=a==="end"?v*-1:v),c?{x:p*d,y:f*u}:{x:f*u,y:p*d}}const w3=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:o,middlewareData:a}=e,c=await y3(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},b3=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:g,y:b}=w;return{x:g,y:b}}},...c}=qo(n,e),u={x:t,y:r},d=await xm(e,c),h=Mi(Ko(s)),f=t1(h);let p=u[f],v=u[h];if(i){const w=f==="y"?"top":"left",g=f==="y"?"bottom":"right",b=p+d[w],y=p-d[g];p=G_(b,p,y)}if(o){const w=h==="y"?"top":"left",g=h==="y"?"bottom":"right",b=v+d[w],y=v-d[g];v=G_(b,v,y)}const m=a.fn({...e,[f]:p,[h]:v});return{...m,data:{x:m.x-t,y:m.y-r,enabled:{[f]:i,[h]:o}}}}}},x3=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=qo(n,e),d={x:t,y:r},h=Mi(s),f=t1(h);let p=d[f],v=d[h];const m=qo(a,e),w=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const y=f==="y"?"height":"width",E=i.reference[f]-i.floating[y]+w.mainAxis,T=i.reference[f]+i.reference[y]-w.mainAxis;p<E?p=E:p>T&&(p=T)}if(u){var g,b;const y=f==="y"?"width":"height",E=CI.has(Ko(s)),T=i.reference[h]-i.floating[y]+(E&&((g=o.offset)==null?void 0:g[h])||0)+(E?0:w.crossAxis),P=i.reference[h]+i.reference[y]+(E?0:((b=o.offset)==null?void 0:b[h])||0)-(E?w.crossAxis:0);v<T?v=T:v>P&&(v=P)}return{[f]:p,[h]:v}}}},_3=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:c=()=>{},...u}=qo(n,e),d=await xm(e,u),h=Ko(s),f=Kf(s),p=Mi(s)==="y",{width:v,height:m}=i.floating;let w,g;h==="top"||h==="bottom"?(w=h,g=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=h,w=f==="end"?"top":"bottom");const b=m-d.top-d.bottom,y=v-d.left-d.right,E=Cl(m-d[w],b),T=Cl(v-d[g],y),P=!e.middlewareData.shift;let k=E,R=T;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(R=y),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=b),P&&!f){const I=Lr(d.left,0),M=Lr(d.right,0),L=Lr(d.top,0),z=Lr(d.bottom,0);p?R=v-2*(I!==0||M!==0?I+M:Lr(d.left,d.right)):k=m-2*(L!==0||z!==0?L+z:Lr(d.top,d.bottom))}await c({...e,availableWidth:R,availableHeight:k});const N=await o.getDimensions(a.floating);return v!==N.width||m!==N.height?{reset:{rects:!0}}:{}}}};function gb(){return typeof window<"u"}function Xf(n){return TI(n)?(n.nodeName||"").toLowerCase():"#document"}function zr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Hi(n){var e;return(e=(TI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function TI(n){return gb()?n instanceof Node||n instanceof zr(n).Node:!1}function Js(n){return gb()?n instanceof Element||n instanceof zr(n).Element:!1}function $i(n){return gb()?n instanceof HTMLElement||n instanceof zr(n).HTMLElement:!1}function PT(n){return!gb()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof zr(n).ShadowRoot}const S3=new Set(["inline","contents"]);function Fv(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Zs(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!S3.has(s)}const E3=new Set(["table","td","th"]);function A3(n){return E3.has(Xf(n))}const C3=[":popover-open",":modal"];function vb(n){return C3.some(e=>{try{return n.matches(e)}catch{return!1}})}const T3=["transform","translate","scale","rotate","perspective"],k3=["transform","translate","scale","rotate","perspective","filter"],P3=["paint","layout","strict","content"];function s1(n){const e=i1(),t=Js(n)?Zs(n):n;return T3.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||k3.some(r=>(t.willChange||"").includes(r))||P3.some(r=>(t.contain||"").includes(r))}function R3(n){let e=Tl(n);for(;$i(e)&&!zf(e);){if(s1(e))return e;if(vb(e))return null;e=Tl(e)}return null}function i1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const N3=new Set(["html","body","#document"]);function zf(n){return N3.has(Xf(n))}function Zs(n){return zr(n).getComputedStyle(n)}function yb(n){return Js(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Tl(n){if(Xf(n)==="html")return n;const e=n.assignedSlot||n.parentNode||PT(n)&&n.host||Hi(n);return PT(e)?e.host:e}function kI(n){const e=Tl(n);return zf(e)?n.ownerDocument?n.ownerDocument.body:n.body:$i(e)&&Fv(e)?e:kI(e)}function _m(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=kI(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),o=zr(s);if(i){const a=K_(o);return e.concat(o,o.visualViewport||[],Fv(s)?s:[],a&&t?_m(a):[])}return e.concat(s,_m(s,[],t))}function K_(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function PI(n){const e=Zs(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=$i(n),i=s?n.offsetWidth:t,o=s?n.offsetHeight:r,a=s0(t)!==i||s0(r)!==o;return a&&(t=i,r=o),{width:t,height:r,$:a}}function o1(n){return Js(n)?n:n.contextElement}function Gd(n){const e=o1(n);if(!$i(e))return Bi(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=PI(e);let o=(i?s0(t.width):t.width)/r,a=(i?s0(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const I3=Bi(0);function RI(n){const e=zr(n);return!i1()||!e.visualViewport?I3:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function O3(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==zr(n)?!1:e}function Mu(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=o1(n);let o=Bi(1);e&&(r?Js(r)&&(o=Gd(r)):o=Gd(n));const a=O3(i,t,r)?RI(i):Bi(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=zr(i),p=r&&Js(r)?zr(r):r;let v=f,m=K_(v);for(;m&&r&&p!==v;){const w=Gd(m),g=m.getBoundingClientRect(),b=Zs(m),y=g.left+(m.clientLeft+parseFloat(b.paddingLeft))*w.x,E=g.top+(m.clientTop+parseFloat(b.paddingTop))*w.y;c*=w.x,u*=w.y,d*=w.x,h*=w.y,c+=y,u+=E,v=zr(m),m=K_(v)}}return o0({width:d,height:h,x:c,y:u})}function a1(n,e){const t=yb(n).scrollLeft;return e?e.left+t:Mu(Hi(n)).left+t}function NI(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:a1(n,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function M3(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",o=Hi(r),a=e?vb(e.floating):!1;if(r===o||a&&i)return t;let c={scrollLeft:0,scrollTop:0},u=Bi(1);const d=Bi(0),h=$i(r);if((h||!h&&!i)&&((Xf(r)!=="body"||Fv(o))&&(c=yb(r)),$i(r))){const p=Mu(r);u=Gd(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?NI(o,c,!0):Bi(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:t.y*u.y-c.scrollTop*u.y+d.y+f.y}}function D3(n){return Array.from(n.getClientRects())}function L3(n){const e=Hi(n),t=yb(n),r=n.ownerDocument.body,s=Lr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Lr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+a1(n);const a=-t.scrollTop;return Zs(r).direction==="rtl"&&(o+=Lr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function F3(n,e){const t=zr(n),r=Hi(n),s=t.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const u=i1();(!u||u&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}const j3=new Set(["absolute","fixed"]);function B3(n,e){const t=Mu(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=$i(n)?Gd(n):Bi(1),o=n.clientWidth*i.x,a=n.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:a,x:c,y:u}}function RT(n,e,t){let r;if(e==="viewport")r=F3(n,t);else if(e==="document")r=L3(Hi(n));else if(Js(e))r=B3(e,t);else{const s=RI(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return o0(r)}function II(n,e){const t=Tl(n);return t===e||!Js(t)||zf(t)?!1:Zs(t).position==="fixed"||II(t,e)}function $3(n,e){const t=e.get(n);if(t)return t;let r=_m(n,[],!1).filter(a=>Js(a)&&Xf(a)!=="body"),s=null;const i=Zs(n).position==="fixed";let o=i?Tl(n):n;for(;Js(o)&&!zf(o);){const a=Zs(o),c=s1(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&j3.has(s.position)||Fv(o)&&!c&&II(n,o))?r=r.filter(d=>d!==o):s=a,o=Tl(o)}return e.set(n,r),r}function U3(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const o=[...t==="clippingAncestors"?vb(e)?[]:$3(e,this._c):[].concat(t),r],a=o[0],c=o.reduce((u,d)=>{const h=RT(e,d,s);return u.top=Lr(h.top,u.top),u.right=Cl(h.right,u.right),u.bottom=Cl(h.bottom,u.bottom),u.left=Lr(h.left,u.left),u},RT(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function z3(n){const{width:e,height:t}=PI(n);return{width:e,height:t}}function H3(n,e,t){const r=$i(e),s=Hi(e),i=t==="fixed",o=Mu(n,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=Bi(0);function u(){c.x=a1(s)}if(r||!r&&!i)if((Xf(e)!=="body"||Fv(s))&&(a=yb(e)),r){const p=Mu(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&u();i&&!r&&s&&u();const d=s&&!r&&!i?NI(s,a):Bi(0),h=o.left+a.scrollLeft-c.x-d.x,f=o.top+a.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function wx(n){return Zs(n).position==="static"}function NT(n,e){if(!$i(n)||Zs(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Hi(n)===t&&(t=t.ownerDocument.body),t}function OI(n,e){const t=zr(n);if(vb(n))return t;if(!$i(n)){let s=Tl(n);for(;s&&!zf(s);){if(Js(s)&&!wx(s))return s;s=Tl(s)}return t}let r=NT(n,e);for(;r&&A3(r)&&wx(r);)r=NT(r,e);return r&&zf(r)&&wx(r)&&!s1(r)?t:r||R3(n)||t}const V3=async function(n){const e=this.getOffsetParent||OI,t=this.getDimensions,r=await t(n.floating);return{reference:H3(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function W3(n){return Zs(n).direction==="rtl"}const G3={convertOffsetParentRelativeRectToViewportRelativeRect:M3,getDocumentElement:Hi,getClippingRect:U3,getOffsetParent:OI,getElementRects:V3,getClientRects:D3,getDimensions:z3,getScale:Gd,isElement:Js,isRTL:W3};function MI(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function q3(n,e){let t=null,r;const s=Hi(n);function i(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const u=n.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(a||e(),!f||!p)return;const v=vy(h),m=vy(s.clientWidth-(d+f)),w=vy(s.clientHeight-(h+p)),g=vy(d),y={rootMargin:-v+"px "+-m+"px "+-w+"px "+-g+"px",threshold:Lr(0,Cl(1,c))||1};let E=!0;function T(P){const k=P[0].intersectionRatio;if(k!==c){if(!E)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!MI(u,n.getBoundingClientRect())&&o(),E=!1}try{t=new IntersectionObserver(T,{...y,root:s.ownerDocument})}catch{t=new IntersectionObserver(T,y)}t.observe(n)}return o(!0),i}function K3(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=o1(n),d=s||i?[...u?_m(u):[],..._m(e)]:[];d.forEach(g=>{s&&g.addEventListener("scroll",t,{passive:!0}),i&&g.addEventListener("resize",t)});const h=u&&a?q3(u,t):null;let f=-1,p=null;o&&(p=new ResizeObserver(g=>{let[b]=g;b&&b.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var y;(y=p)==null||y.observe(e)})),t()}),u&&!c&&p.observe(u),p.observe(e));let v,m=c?Mu(n):null;c&&w();function w(){const g=Mu(n);m&&!MI(m,g)&&t(),m=g,v=requestAnimationFrame(w)}return t(),()=>{var g;d.forEach(b=>{s&&b.removeEventListener("scroll",t),i&&b.removeEventListener("resize",t)}),h==null||h(),(g=p)==null||g.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const X3=w3,Y3=b3,Q3=g3,J3=_3,Z3=v3,IT=m3,e4=x3,t4=(n,e,t)=>{const r=new Map,s={platform:G3,...t},i={...s.platform,_c:r};return p3(n,e,{...s,platform:i})};var n4=typeof document<"u",r4=function(){},Yy=n4?A.useLayoutEffect:r4;function a0(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!a0(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!a0(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function DI(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function OT(n,e){const t=DI(n);return Math.round(e*t)/t}function bx(n){const e=A.useRef(n);return Yy(()=>{e.current=n}),e}function s4(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=n,[d,h]=A.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=A.useState(r);a0(f,r)||p(r);const[v,m]=A.useState(null),[w,g]=A.useState(null),b=A.useCallback(D=>{D!==P.current&&(P.current=D,m(D))},[]),y=A.useCallback(D=>{D!==k.current&&(k.current=D,g(D))},[]),E=i||v,T=o||w,P=A.useRef(null),k=A.useRef(null),R=A.useRef(d),N=c!=null,I=bx(c),M=bx(s),L=bx(u),z=A.useCallback(()=>{if(!P.current||!k.current)return;const D={placement:e,strategy:t,middleware:f};M.current&&(D.platform=M.current),t4(P.current,k.current,D).then(O=>{const H={...O,isPositioned:L.current!==!1};F.current&&!a0(R.current,H)&&(R.current=H,zu.flushSync(()=>{h(H)}))})},[f,e,t,M,L]);Yy(()=>{u===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,h(D=>({...D,isPositioned:!1})))},[u]);const F=A.useRef(!1);Yy(()=>(F.current=!0,()=>{F.current=!1}),[]),Yy(()=>{if(E&&(P.current=E),T&&(k.current=T),E&&T){if(I.current)return I.current(E,T,z);z()}},[E,T,z,I,N]);const B=A.useMemo(()=>({reference:P,floating:k,setReference:b,setFloating:y}),[b,y]),j=A.useMemo(()=>({reference:E,floating:T}),[E,T]),$=A.useMemo(()=>{const D={position:t,left:0,top:0};if(!j.floating)return D;const O=OT(j.floating,d.x),H=OT(j.floating,d.y);return a?{...D,transform:"translate("+O+"px, "+H+"px)",...DI(j.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:O,top:H}},[t,a,j.floating,d.x,d.y]);return A.useMemo(()=>({...d,update:z,refs:B,elements:j,floatingStyles:$}),[d,z,B,j,$])}const i4=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?IT({element:r.current,padding:s}).fn(t):{}:r?IT({element:r,padding:s}).fn(t):{}}}},o4=(n,e)=>({...X3(n),options:[n,e]}),a4=(n,e)=>({...Y3(n),options:[n,e]}),l4=(n,e)=>({...e4(n),options:[n,e]}),c4=(n,e)=>({...Q3(n),options:[n,e]}),u4=(n,e)=>({...J3(n),options:[n,e]}),d4=(n,e)=>({...Z3(n),options:[n,e]}),h4=(n,e)=>({...i4(n),options:[n,e]});var f4="Arrow",LI=A.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return _.jsx(Ee.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:_.jsx("polygon",{points:"0,0 30,0 15,10"})})});LI.displayName=f4;var p4=LI;function m4(n){const[e,t]=A.useState(void 0);return wn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var l1="Popper",[FI,Yf]=Ml(l1),[g4,jI]=FI(l1),BI=n=>{const{__scopePopper:e,children:t}=n,[r,s]=A.useState(null);return _.jsx(g4,{scope:e,anchor:r,onAnchorChange:s,children:t})};BI.displayName=l1;var $I="PopperAnchor",UI=A.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=jI($I,t),o=A.useRef(null),a=Ge(e,o);return A.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:_.jsx(Ee.div,{...s,ref:a})});UI.displayName=$I;var c1="PopperContent",[v4,y4]=FI(c1),zI=A.forwardRef((n,e)=>{var U,Ae,Ce,be,pe,Te;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:v,...m}=n,w=jI(c1,t),[g,b]=A.useState(null),y=Ge(e,Bt=>b(Bt)),[E,T]=A.useState(null),P=m4(E),k=(P==null?void 0:P.width)??0,R=(P==null?void 0:P.height)??0,N=r+(i!=="center"?"-"+i:""),I=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},M=Array.isArray(u)?u:[u],L=M.length>0,z={padding:I,boundary:M.filter(b4),altBoundary:L},{refs:F,floatingStyles:B,placement:j,isPositioned:$,middlewareData:D}=s4({strategy:"fixed",placement:N,whileElementsMounted:(...Bt)=>K3(...Bt,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[o4({mainAxis:s+R,alignmentAxis:o}),c&&a4({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?l4():void 0,...z}),c&&c4({...z}),u4({...z,apply:({elements:Bt,rects:Kn,availableWidth:Fl,availableHeight:ea})=>{const{width:jl,height:Zf}=Kn.reference,Ku=Bt.floating.style;Ku.setProperty("--radix-popper-available-width",`${Fl}px`),Ku.setProperty("--radix-popper-available-height",`${ea}px`),Ku.setProperty("--radix-popper-anchor-width",`${jl}px`),Ku.setProperty("--radix-popper-anchor-height",`${Zf}px`)}}),E&&h4({element:E,padding:a}),x4({arrowWidth:k,arrowHeight:R}),f&&d4({strategy:"referenceHidden",...z})]}),[O,H]=WI(j),Y=dr(v);wn(()=>{$&&(Y==null||Y())},[$,Y]);const W=(U=D.arrow)==null?void 0:U.x,X=(Ae=D.arrow)==null?void 0:Ae.y,re=((Ce=D.arrow)==null?void 0:Ce.centerOffset)!==0,[we,xe]=A.useState();return wn(()=>{g&&xe(window.getComputedStyle(g).zIndex)},[g]),_.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:$?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[(be=D.transformOrigin)==null?void 0:be.x,(pe=D.transformOrigin)==null?void 0:pe.y].join(" "),...((Te=D.hide)==null?void 0:Te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:_.jsx(v4,{scope:t,placedSide:O,onArrowChange:T,arrowX:W,arrowY:X,shouldHideArrow:re,children:_.jsx(Ee.div,{"data-side":O,"data-align":H,...m,ref:y,style:{...m.style,animation:$?void 0:"none"}})})})});zI.displayName=c1;var HI="PopperArrow",w4={top:"bottom",right:"left",bottom:"top",left:"right"},VI=A.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=y4(HI,r),o=w4[i.placedSide];return _.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:_.jsx(p4,{...s,ref:t,style:{...s.style,display:"block"}})})});VI.displayName=HI;function b4(n){return n!==null}var x4=n=>({name:"transformOrigin",options:n,fn(e){var w,g,b;const{placement:t,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:n.arrowWidth,c=o?0:n.arrowHeight,[u,d]=WI(t),h={start:"0%",center:"50%",end:"100%"}[d],f=(((g=s.arrow)==null?void 0:g.x)??0)+a/2,p=(((b=s.arrow)==null?void 0:b.y)??0)+c/2;let v="",m="";return u==="bottom"?(v=o?h:`${f}px`,m=`${-c}px`):u==="top"?(v=o?h:`${f}px`,m=`${r.floating.height+c}px`):u==="right"?(v=`${-c}px`,m=o?h:`${p}px`):u==="left"&&(v=`${r.floating.width+c}px`,m=o?h:`${p}px`),{data:{x:v,y:m}}}});function WI(n){const[e,t="center"]=n.split("-");return[e,t]}var GI=BI,u1=UI,d1=zI,h1=VI,[wb,sK]=Ml("Tooltip",[Yf]),f1=Yf(),qI="TooltipProvider",_4=700,MT="tooltip.open",[S4,KI]=wb(qI),XI=n=>{const{__scopeTooltip:e,delayDuration:t=_4,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=n,o=A.useRef(!0),a=A.useRef(!1),c=A.useRef(0);return A.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),_.jsx(S4,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:A.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:A.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:A.useCallback(u=>{a.current=u},[]),disableHoverableContent:s,children:i})};XI.displayName=qI;var YI="Tooltip",[iK,bb]=wb(YI),X_="TooltipTrigger",E4=A.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=bb(X_,t),i=KI(X_,t),o=f1(t),a=A.useRef(null),c=Ge(e,a,s.onTriggerChange),u=A.useRef(!1),d=A.useRef(!1),h=A.useCallback(()=>u.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),_.jsx(u1,{asChild:!0,...o,children:_.jsx(Ee.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Z(n.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Z(n.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Z(n.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Z(n.onFocus,()=>{u.current||s.onOpen()}),onBlur:Z(n.onBlur,s.onClose),onClick:Z(n.onClick,s.onClose)})})});E4.displayName=X_;var A4="TooltipPortal",[oK,C4]=wb(A4,{forceMount:void 0}),Hf="TooltipContent",QI=A.forwardRef((n,e)=>{const t=C4(Hf,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...i}=n,o=bb(Hf,n.__scopeTooltip);return _.jsx(Hu,{present:r||o.open,children:o.disableHoverableContent?_.jsx(JI,{side:s,...i,ref:e}):_.jsx(T4,{side:s,...i,ref:e})})}),T4=A.forwardRef((n,e)=>{const t=bb(Hf,n.__scopeTooltip),r=KI(Hf,n.__scopeTooltip),s=A.useRef(null),i=Ge(e,s),[o,a]=A.useState(null),{trigger:c,onClose:u}=t,d=s.current,{onPointerInTransitChange:h}=r,f=A.useCallback(()=>{a(null),h(!1)},[h]),p=A.useCallback((v,m)=>{const w=v.currentTarget,g={x:v.clientX,y:v.clientY},b=I4(g,w.getBoundingClientRect()),y=O4(g,b),E=M4(m.getBoundingClientRect()),T=L4([...y,...E]);a(T),h(!0)},[h]);return A.useEffect(()=>()=>f(),[f]),A.useEffect(()=>{if(c&&d){const v=w=>p(w,d),m=w=>p(w,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",m),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",m)}}},[c,d,p,f]),A.useEffect(()=>{if(o){const v=m=>{const w=m.target,g={x:m.clientX,y:m.clientY},b=(c==null?void 0:c.contains(w))||(d==null?void 0:d.contains(w)),y=!D4(g,o);b?f():y&&(f(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,o,u,f]),_.jsx(JI,{...n,ref:i})}),[k4,P4]=wb(YI,{isInside:!1}),R4=MB("TooltipContent"),JI=A.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=n,c=bb(Hf,t),u=f1(t),{onClose:d}=c;return A.useEffect(()=>(document.addEventListener(MT,d),()=>document.removeEventListener(MT,d)),[d]),A.useEffect(()=>{if(c.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),_.jsx(Mv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:_.jsxs(d1,{"data-state":c.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[_.jsx(R4,{children:r}),_.jsx(k4,{scope:t,isInside:!0,children:_.jsx(n$,{id:c.contentId,role:"tooltip",children:s||r})})]})})});QI.displayName=Hf;var ZI="TooltipArrow",N4=A.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=f1(t);return P4(ZI,t).isInside?null:_.jsx(h1,{...s,...r,ref:e})});N4.displayName=ZI;function I4(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,s,i)){case i:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function O4(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function M4(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function D4(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],c=e[o],u=a.x,d=a.y,h=c.x,f=c.y;d>r!=f>r&&t<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function L4(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),F4(e)}function F4(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var j4=XI,eO=QI;const B4=j4,$4=A.forwardRef(({className:n,sideOffset:e=4,...t},r)=>_.jsx(eO,{ref:r,sideOffset:e,className:ue("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));$4.displayName=eO.displayName;var xb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_b=typeof window>"u"||"Deno"in globalThis;function Ps(){}function U4(n,e){return typeof n=="function"?n(e):n}function z4(n){return typeof n=="number"&&n>=0&&n!==1/0}function H4(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Y_(n,e){return typeof n=="function"?n(e):n}function V4(n,e){return typeof n=="function"?n(e):n}function DT(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==p1(o,e.options))return!1}else if(!Em(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function LT(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Sm(e.options.mutationKey)!==Sm(i))return!1}else if(!Em(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function p1(n,e){return((e==null?void 0:e.queryKeyHashFn)||Sm)(n)}function Sm(n){return JSON.stringify(n,(e,t)=>Q_(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function Em(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Em(n[t],e[t])):!1}function tO(n,e){if(n===e)return n;const t=FT(n)&&FT(e);if(t||Q_(n)&&Q_(e)){const r=t?n:Object.keys(n),s=r.length,i=t?e:Object.keys(e),o=i.length,a=t?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=t?d:i[d];(!t&&c.has(h)||t)&&n[h]===void 0&&e[h]===void 0?(a[h]=void 0,u++):(a[h]=tO(n[h],e[h]),a[h]===n[h]&&n[h]!==void 0&&u++)}return s===o&&u===s?n:a}return e}function FT(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Q_(n){if(!jT(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!jT(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function jT(n){return Object.prototype.toString.call(n)==="[object Object]"}function W4(n){return new Promise(e=>{setTimeout(e,n)})}function G4(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?tO(n,e):e}function q4(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function K4(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var m1=Symbol();function nO(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===m1?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var oc,va,Qd,fP,X4=(fP=class extends xb{constructor(){super();S(this,oc);S(this,va);S(this,Qd);x(this,Qd,e=>{if(!_b&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){l(this,va)||this.setEventListener(l(this,Qd))}onUnsubscribe(){var e;this.hasListeners()||((e=l(this,va))==null||e.call(this),x(this,va,void 0))}setEventListener(e){var t;x(this,Qd,e),(t=l(this,va))==null||t.call(this),x(this,va,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){l(this,oc)!==e&&(x(this,oc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof l(this,oc)=="boolean"?l(this,oc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},oc=new WeakMap,va=new WeakMap,Qd=new WeakMap,fP),rO=new X4,Jd,ya,Zd,pP,Y4=(pP=class extends xb{constructor(){super();S(this,Jd,!0);S(this,ya);S(this,Zd);x(this,Zd,e=>{if(!_b&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){l(this,ya)||this.setEventListener(l(this,Zd))}onUnsubscribe(){var e;this.hasListeners()||((e=l(this,ya))==null||e.call(this),x(this,ya,void 0))}setEventListener(e){var t;x(this,Zd,e),(t=l(this,ya))==null||t.call(this),x(this,ya,e(this.setOnline.bind(this)))}setOnline(e){l(this,Jd)!==e&&(x(this,Jd,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return l(this,Jd)}},Jd=new WeakMap,ya=new WeakMap,Zd=new WeakMap,pP),l0=new Y4;function Q4(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function J4(n){return Math.min(1e3*2**n,3e4)}function sO(n){return(n??"online")==="online"?l0.isOnline():!0}var iO=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function xx(n){return n instanceof iO}function oO(n){let e=!1,t=0,r=!1,s;const i=Q4(),o=m=>{var w;r||(f(new iO(m)),(w=n.abort)==null||w.call(n))},a=()=>{e=!0},c=()=>{e=!1},u=()=>rO.isFocused()&&(n.networkMode==="always"||l0.isOnline())&&n.canRun(),d=()=>sO(n.networkMode)&&n.canRun(),h=m=>{var w;r||(r=!0,(w=n.onSuccess)==null||w.call(n,m),s==null||s(),i.resolve(m))},f=m=>{var w;r||(r=!0,(w=n.onError)==null||w.call(n,m),s==null||s(),i.reject(m))},p=()=>new Promise(m=>{var w;s=g=>{(r||u())&&m(g)},(w=n.onPause)==null||w.call(n)}).then(()=>{var m;s=void 0,r||(m=n.onContinue)==null||m.call(n)}),v=()=>{if(r)return;let m;const w=t===0?n.initialPromise:void 0;try{m=w??n.fn()}catch(g){m=Promise.reject(g)}Promise.resolve(m).then(h).catch(g=>{var P;if(r)return;const b=n.retry??(_b?0:3),y=n.retryDelay??J4,E=typeof y=="function"?y(t,g):y,T=b===!0||typeof b=="number"&&t<b||typeof b=="function"&&b(t,g);if(e||!T){f(g);return}t++,(P=n.onFail)==null||P.call(n,t,g),W4(E).then(()=>u()?void 0:p()).then(()=>{e?f(g):v()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:d,start:()=>(d()?v():p().then(v),i)}}var Z4=n=>setTimeout(n,0);function ez(){let n=[],e=0,t=a=>{a()},r=a=>{a()},s=Z4;const i=a=>{e?n.push(a):s(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{t(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Un=ez(),ac,mP,aO=(mP=class{constructor(){S(this,ac)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),z4(this.gcTime)&&x(this,ac,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(_b?1/0:5*60*1e3))}clearGcTimeout(){l(this,ac)&&(clearTimeout(l(this,ac)),x(this,ac,void 0))}},ac=new WeakMap,mP),eh,lc,Yr,cc,En,jm,uc,Ns,Wi,gP,tz=(gP=class extends aO{constructor(e){super();S(this,Ns);S(this,eh);S(this,lc);S(this,Yr);S(this,cc);S(this,En);S(this,jm);S(this,uc);x(this,uc,!1),x(this,jm,e.defaultOptions),this.setOptions(e.options),this.observers=[],x(this,cc,e.client),x(this,Yr,l(this,cc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,x(this,eh,rz(this.options)),this.state=e.state??l(this,eh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=l(this,En))==null?void 0:e.promise}setOptions(e){this.options={...l(this,jm),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&l(this,Yr).remove(this)}setData(e,t){const r=G4(this.state.data,e,this.options);return C(this,Ns,Wi).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){C(this,Ns,Wi).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,s;const t=(r=l(this,En))==null?void 0:r.promise;return(s=l(this,En))==null||s.cancel(e),t?t.then(Ps).catch(Ps):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(l(this,eh))}isActive(){return this.observers.some(e=>V4(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===m1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Y_(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!H4(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=l(this,En))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=l(this,En))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),l(this,Yr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(l(this,En)&&(l(this,uc)?l(this,En).cancel({revert:!0}):l(this,En).cancelRetry()),this.scheduleGc()),l(this,Yr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||C(this,Ns,Wi).call(this,{type:"invalidate"})}fetch(e,t){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(l(this,En))return l(this,En).continueRetry(),l(this,En).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(x(this,uc,!0),r.signal)})},i=()=>{const f=nO(this.options,t),v=(()=>{const m={client:l(this,cc),queryKey:this.queryKey,meta:this.meta};return s(m),m})();return x(this,uc,!1),this.options.persister?this.options.persister(f,v,this):f(v)},a=(()=>{const f={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:l(this,cc),state:this.state,fetchFn:i};return s(f),f})();(u=this.options.behavior)==null||u.onFetch(a,this),x(this,lc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&C(this,Ns,Wi).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta});const c=f=>{var p,v,m,w;xx(f)&&f.silent||C(this,Ns,Wi).call(this,{type:"error",error:f}),xx(f)||((v=(p=l(this,Yr).config).onError)==null||v.call(p,f,this),(w=(m=l(this,Yr).config).onSettled)==null||w.call(m,this.state.data,f,this)),this.scheduleGc()};return x(this,En,oO({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var p,v,m,w;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(g){c(g);return}(v=(p=l(this,Yr).config).onSuccess)==null||v.call(p,f,this),(w=(m=l(this,Yr).config).onSettled)==null||w.call(m,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,p)=>{C(this,Ns,Wi).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{C(this,Ns,Wi).call(this,{type:"pause"})},onContinue:()=>{C(this,Ns,Wi).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),l(this,En).start()}},eh=new WeakMap,lc=new WeakMap,Yr=new WeakMap,cc=new WeakMap,En=new WeakMap,jm=new WeakMap,uc=new WeakMap,Ns=new WeakSet,Wi=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...nz(r.data,this.options),fetchMeta:e.meta??null};case"success":return x(this,lc,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return xx(s)&&s.revert&&l(this,lc)?{...l(this,lc),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Un.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),l(this,Yr).notify({query:this,type:"updated",action:e})})},gP);function nz(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sO(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function rz(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var oi,vP,sz=(vP=class extends xb{constructor(e={}){super();S(this,oi);this.config=e,x(this,oi,new Map)}build(e,t,r){const s=t.queryKey,i=t.queryHash??p1(s,t);let o=this.get(i);return o||(o=new tz({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){l(this,oi).has(e.queryHash)||(l(this,oi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=l(this,oi).get(e.queryHash);t&&(e.destroy(),t===e&&l(this,oi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Un.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return l(this,oi).get(e)}getAll(){return[...l(this,oi).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>DT(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>DT(e,r)):t}notify(e){Un.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Un.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Un.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},oi=new WeakMap,vP),ai,Mn,dc,li,aa,yP,iz=(yP=class extends aO{constructor(e){super();S(this,li);S(this,ai);S(this,Mn);S(this,dc);this.mutationId=e.mutationId,x(this,Mn,e.mutationCache),x(this,ai,[]),this.state=e.state||oz(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){l(this,ai).includes(e)||(l(this,ai).push(e),this.clearGcTimeout(),l(this,Mn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){x(this,ai,l(this,ai).filter(t=>t!==e)),this.scheduleGc(),l(this,Mn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){l(this,ai).length||(this.state.status==="pending"?this.scheduleGc():l(this,Mn).remove(this))}continue(){var e;return((e=l(this,dc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,u,d,h,f,p,v,m,w,g,b,y,E,T,P,k,R;const t=()=>{C(this,li,aa).call(this,{type:"continue"})};x(this,dc,oO({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,I)=>{C(this,li,aa).call(this,{type:"failed",failureCount:N,error:I})},onPause:()=>{C(this,li,aa).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>l(this,Mn).canRun(this)}));const r=this.state.status==="pending",s=!l(this,dc).canStart();try{if(r)t();else{C(this,li,aa).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=l(this,Mn).config).onMutate)==null?void 0:o.call(i,e,this));const I=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));I!==this.state.context&&C(this,li,aa).call(this,{type:"pending",context:I,variables:e,isPaused:s})}const N=await l(this,dc).start();return await((d=(u=l(this,Mn).config).onSuccess)==null?void 0:d.call(u,N,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,N,e,this.state.context)),await((v=(p=l(this,Mn).config).onSettled)==null?void 0:v.call(p,N,null,this.state.variables,this.state.context,this)),await((w=(m=this.options).onSettled)==null?void 0:w.call(m,N,null,e,this.state.context)),C(this,li,aa).call(this,{type:"success",data:N}),N}catch(N){try{throw await((b=(g=l(this,Mn).config).onError)==null?void 0:b.call(g,N,e,this.state.context,this)),await((E=(y=this.options).onError)==null?void 0:E.call(y,N,e,this.state.context)),await((P=(T=l(this,Mn).config).onSettled)==null?void 0:P.call(T,void 0,N,this.state.variables,this.state.context,this)),await((R=(k=this.options).onSettled)==null?void 0:R.call(k,void 0,N,e,this.state.context)),N}finally{C(this,li,aa).call(this,{type:"error",error:N})}}finally{l(this,Mn).runNext(this)}}},ai=new WeakMap,Mn=new WeakMap,dc=new WeakMap,li=new WeakSet,aa=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Un.batch(()=>{l(this,ai).forEach(r=>{r.onMutationUpdate(e)}),l(this,Mn).notify({mutation:this,type:"updated",action:e})})},yP);function oz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var eo,Is,Bm,wP,az=(wP=class extends xb{constructor(e={}){super();S(this,eo);S(this,Is);S(this,Bm);this.config=e,x(this,eo,new Set),x(this,Is,new Map),x(this,Bm,0)}build(e,t,r){const s=new iz({mutationCache:this,mutationId:++wt(this,Bm)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){l(this,eo).add(e);const t=yy(e);if(typeof t=="string"){const r=l(this,Is).get(t);r?r.push(e):l(this,Is).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(l(this,eo).delete(e)){const t=yy(e);if(typeof t=="string"){const r=l(this,Is).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&l(this,Is).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=yy(e);if(typeof t=="string"){const r=l(this,Is).get(t),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=yy(e);if(typeof t=="string"){const s=(r=l(this,Is).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Un.batch(()=>{l(this,eo).forEach(e=>{this.notify({type:"removed",mutation:e})}),l(this,eo).clear(),l(this,Is).clear()})}getAll(){return Array.from(l(this,eo))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>LT(t,r))}findAll(e={}){return this.getAll().filter(t=>LT(e,t))}notify(e){Un.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Un.batch(()=>Promise.all(e.map(t=>t.continue().catch(Ps))))}},eo=new WeakMap,Is=new WeakMap,Bm=new WeakMap,wP);function yy(n){var e;return(e=n.options.scope)==null?void 0:e.id}function BT(n){return{onFetch:(e,t)=>{var d,h,f,p,v;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let m=!1;const w=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},g=nO(e.options,e.fetchOptions),b=async(y,E,T)=>{if(m)return Promise.reject();if(E==null&&y.pages.length)return Promise.resolve(y);const k=(()=>{const M={client:e.client,queryKey:e.queryKey,pageParam:E,direction:T?"backward":"forward",meta:e.options.meta};return w(M),M})(),R=await g(k),{maxPages:N}=e.options,I=T?K4:q4;return{pages:I(y.pages,R,N),pageParams:I(y.pageParams,E,N)}};if(s&&i.length){const y=s==="backward",E=y?lz:$T,T={pages:i,pageParams:o},P=E(r,T);a=await b(T,P,y)}else{const y=n??i.length;do{const E=c===0?o[0]??r.initialPageParam:$T(r,a);if(c>0&&E==null)break;a=await b(a,E),c++}while(c<y)}return a};e.options.persister?e.fetchFn=()=>{var m,w;return(w=(m=e.options).persister)==null?void 0:w.call(m,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function $T(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function lz(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var bt,wa,ba,th,nh,xa,rh,sh,bP,cz=(bP=class{constructor(n={}){S(this,bt);S(this,wa);S(this,ba);S(this,th);S(this,nh);S(this,xa);S(this,rh);S(this,sh);x(this,bt,n.queryCache||new sz),x(this,wa,n.mutationCache||new az),x(this,ba,n.defaultOptions||{}),x(this,th,new Map),x(this,nh,new Map),x(this,xa,0)}mount(){wt(this,xa)._++,l(this,xa)===1&&(x(this,rh,rO.subscribe(async n=>{n&&(await this.resumePausedMutations(),l(this,bt).onFocus())})),x(this,sh,l0.subscribe(async n=>{n&&(await this.resumePausedMutations(),l(this,bt).onOnline())})))}unmount(){var n,e;wt(this,xa)._--,l(this,xa)===0&&((n=l(this,rh))==null||n.call(this),x(this,rh,void 0),(e=l(this,sh))==null||e.call(this),x(this,sh,void 0))}isFetching(n){return l(this,bt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return l(this,wa).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=l(this,bt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=l(this,bt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Y_(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return l(this,bt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=l(this,bt).get(r.queryHash),i=s==null?void 0:s.state.data,o=U4(e,i);if(o!==void 0)return l(this,bt).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Un.batch(()=>l(this,bt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=l(this,bt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=l(this,bt);Un.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=l(this,bt);return Un.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Un.batch(()=>l(this,bt).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(Ps).catch(Ps)}invalidateQueries(n,e={}){return Un.batch(()=>(l(this,bt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Un.batch(()=>l(this,bt).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(Ps)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ps)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=l(this,bt).build(this,e);return t.isStaleByTime(Y_(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Ps).catch(Ps)}fetchInfiniteQuery(n){return n.behavior=BT(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Ps).catch(Ps)}ensureInfiniteQueryData(n){return n.behavior=BT(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return l0.isOnline()?l(this,wa).resumePausedMutations():Promise.resolve()}getQueryCache(){return l(this,bt)}getMutationCache(){return l(this,wa)}getDefaultOptions(){return l(this,ba)}setDefaultOptions(n){x(this,ba,n)}setQueryDefaults(n,e){l(this,th).set(Sm(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...l(this,th).values()],t={};return e.forEach(r=>{Em(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){l(this,nh).set(Sm(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...l(this,nh).values()],t={};return e.forEach(r=>{Em(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...l(this,ba).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=p1(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===m1&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...l(this,ba).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){l(this,bt).clear(),l(this,wa).clear()}},bt=new WeakMap,wa=new WeakMap,ba=new WeakMap,th=new WeakMap,nh=new WeakMap,xa=new WeakMap,rh=new WeakMap,sh=new WeakMap,bP),uz=A.createContext(void 0),dz=({client:n,children:e})=>(A.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),_.jsx(uz.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function c0(){return c0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},c0.apply(this,arguments)}var ml;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ml||(ml={}));const UT="popstate";function hz(n){n===void 0&&(n={});function e(s,i){let{pathname:o="/",search:a="",hash:c=""}=jv(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),J_("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");a=u===-1?c:c.slice(0,u)}return a+"#"+(typeof i=="string"?i:lO(i))}function r(s,i){g1(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return pz(e,t,r,n)}function hr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function g1(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fz(){return Math.random().toString(36).substr(2,8)}function zT(n,e){return{usr:n.state,key:n.key,idx:e}}function J_(n,e,t,r){return t===void 0&&(t=null),c0({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?jv(e):e,{state:t,key:e&&e.key||r||fz()})}function lO(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function jv(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function pz(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ml.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(c0({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=ml.Pop;let w=d(),g=w==null?null:w-u;u=w,c&&c({action:a,location:m.location,delta:g})}function f(w,g){a=ml.Push;let b=J_(m.location,w,g);t&&t(b,w),u=d()+1;let y=zT(b,u),E=m.createHref(b);try{o.pushState(y,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(E)}i&&c&&c({action:a,location:m.location,delta:1})}function p(w,g){a=ml.Replace;let b=J_(m.location,w,g);t&&t(b,w),u=d();let y=zT(b,u),E=m.createHref(b);o.replaceState(y,"",E),i&&c&&c({action:a,location:m.location,delta:0})}function v(w){let g=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:lO(w);return b=b.replace(/ $/,"%20"),hr(g,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,g)}let m={get action(){return a},get location(){return n(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(UT,h),c=w,()=>{s.removeEventListener(UT,h),c=null}},createHref(w){return e(s,w)},createURL:v,encodeLocation(w){let g=v(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(w){return o.go(w)}};return m}var HT;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(HT||(HT={}));function mz(n,e,t){return t===void 0&&(t="/"),gz(n,e,t,!1)}function gz(n,e,t,r){let s=typeof e=="string"?jv(e):e,i=dO(s.pathname||"/",t);if(i==null)return null;let o=cO(n);vz(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=kz(i);a=Cz(o[c],u,r)}return a}function cO(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(hr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=qd([r,c.relativePath]),d=t.concat(c);i.children&&i.children.length>0&&(hr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),cO(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:Ez(u,i.index),routesMeta:d})};return n.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of uO(i.path))s(i,o,c)}),e}function uO(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=uO(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>n.startsWith("/")&&c===""?"/":c)}function vz(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Az(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const yz=/^:[\w-]+$/,wz=3,bz=2,xz=1,_z=10,Sz=-2,VT=n=>n==="*";function Ez(n,e){let t=n.split("/"),r=t.length;return t.some(VT)&&(r+=Sz),e&&(r+=bz),t.filter(s=>!VT(s)).reduce((s,i)=>s+(yz.test(i)?wz:i===""?xz:_z),r)}function Az(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function Cz(n,e,t){let{routesMeta:r}=n,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=WT({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&t&&!r[r.length-1].route.index&&(h=WT({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:qd([i,h.pathname]),pathnameBase:Pz(qd([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=qd([i,h.pathnameBase]))}return o}function WT(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Tz(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let m=a[h]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const v=a[h];return p&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:n}}function Tz(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),g1(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function kz(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return g1(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function dO(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const qd=n=>n.join("/").replace(/\/\/+/g,"/"),Pz=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/");function Rz(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const hO=["post","put","patch","delete"];new Set(hO);const Nz=["get",...hO];new Set(Nz);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function u0(){return u0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u0.apply(this,arguments)}const Iz=A.createContext(null),Oz=A.createContext(null),fO=A.createContext(null),Sb=A.createContext(null),Eb=A.createContext({outlet:null,matches:[],isDataRoute:!1}),pO=A.createContext(null);function v1(){return A.useContext(Sb)!=null}function mO(){return v1()||hr(!1),A.useContext(Sb).location}function Mz(n,e){return Dz(n,e)}function Dz(n,e,t,r){v1()||hr(!1);let{navigator:s}=A.useContext(fO),{matches:i}=A.useContext(Eb),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=mO(),d;if(e){var h;let w=typeof e=="string"?jv(e):e;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||hr(!1),d=w}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=mz(n,{pathname:p}),m=$z(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:qd([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:qd([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,t,r);return e&&m?A.createElement(Sb.Provider,{value:{location:u0({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ml.Pop}},m):m}function Lz(){let n=Vz(),e=Rz(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:s},t):null,null)}const Fz=A.createElement(Lz,null);class jz extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(Eb.Provider,{value:this.props.routeContext},A.createElement(pO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Bz(n){let{routeContext:e,match:t,children:r}=n,s=A.useContext(Iz);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(Eb.Provider,{value:e},r)}function $z(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(s=t)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||hr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=t,v=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,v=!1,m=null,w=null;t&&(p=a&&h.route.id?a[h.route.id]:void 0,m=h.route.errorElement||Fz,c&&(u<0&&f===0?(v=!0,w=null):u===f&&(v=!0,w=h.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,f+1)),b=()=>{let y;return p?y=m:v?y=w:h.route.Component?y=A.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=d,A.createElement(Bz,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:t!=null},children:y})};return t&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?A.createElement(jz,{location:t.location,revalidation:t.revalidation,component:m,error:p,children:b(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):b()},null)}var Z_=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Z_||{});function Uz(n){let e=A.useContext(Oz);return e||hr(!1),e}function zz(n){let e=A.useContext(Eb);return e||hr(!1),e}function Hz(n){let e=zz(),t=e.matches[e.matches.length-1];return t.route.id||hr(!1),t.route.id}function Vz(){var n;let e=A.useContext(pO),t=Uz(Z_.UseRouteError),r=Hz(Z_.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Wz(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function eS(n){hr(!1)}function Gz(n){let{basename:e="/",children:t=null,location:r,navigationType:s=ml.Pop,navigator:i,static:o=!1,future:a}=n;v1()&&hr(!1);let c=e.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:c,navigator:i,static:o,future:u0({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=jv(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:v="default"}=r,m=A.useMemo(()=>{let w=dO(d,c);return w==null?null:{location:{pathname:w,search:h,hash:f,state:p,key:v},navigationType:s}},[c,d,h,f,p,v,s]);return m==null?null:A.createElement(fO.Provider,{value:u},A.createElement(Sb.Provider,{children:t,value:m}))}function qz(n){let{children:e,location:t}=n;return Mz(tS(e),t)}new Promise(()=>{});function tS(n,e){e===void 0&&(e=[]);let t=[];return A.Children.forEach(n,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){t.push.apply(t,tS(r.props.children,i));return}r.type!==eS&&hr(!1),!r.props.index||!r.props.children||hr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=tS(r.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Kz="6";try{window.__reactRouterVersion=Kz}catch{}const Xz="startTransition",GT=rA[Xz];function Yz(n){let{basename:e,children:t,future:r,window:s}=n,i=A.useRef();i.current==null&&(i.current=hz({window:s,v5Compat:!0}));let o=i.current,[a,c]=A.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=A.useCallback(h=>{u&&GT?GT(()=>c(h)):c(h)},[c,u]);return A.useLayoutEffect(()=>o.listen(d),[o,d]),A.useEffect(()=>Wz(r),[r]),A.createElement(Gz,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}var qT;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(qT||(qT={}));var KT;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(KT||(KT={}));const XT={en:{appName:"Seva Sahayak",appTagline:"AI-Powered Form Filling Assistant",appDescription:"Auto-fill government forms using your ID documents. Fast, secure, and accurate.",dashboard:"Dashboard",upload:"Upload Documents",fillForm:"Fill Form",review:"Review & Export",step1:"Upload",step2:"Extract",step3:"Fill",step4:"Export",uploadTitle:"Upload Your Documents",uploadDescription:"Upload Aadhaar, PAN Card, Voter ID, or other government-issued documents",dragDrop:"Drag and drop files here",or:"or",browseFiles:"Browse Files",supportedFormats:"Supported formats: PDF, JPG, PNG (Max 10MB)",aadhaar:"Aadhaar Card",panCard:"PAN Card",voterId:"Voter ID",passport:"Passport",drivingLicense:"Driving License",processing:"Processing...",extracting:"Extracting information...",analyzing:"Analyzing document...",completed:"Completed",extractedData:"Extracted Information",name:"Full Name",fatherName:"Father's Name",dateOfBirth:"Date of Birth",gender:"Gender",address:"Address",pincode:"PIN Code",state:"State",district:"District",idNumber:"ID Number",aadhaarNumber:"Aadhaar Number",panNumber:"PAN Number",voterIdNumber:"Voter ID Number",drivingLicenseNumber:"Driving License Number",smartForm:"Smart Form",formDescription:"Review and edit the auto-filled information",personalDetails:"Personal Details",addressDetails:"Address Details",documentDetails:"Document Details",male:"Male",female:"Female",other:"Other",submit:"Submit",save:"Save",download:"Download PDF",downloadForm:"Download Form",edit:"Edit",clear:"Clear",reset:"Reset",next:"Next",previous:"Previous",cancel:"Cancel",copy:"Copy",copied:"Copied!",copyAll:"Copy All",copyForForms:"Copy for Other Forms",copyPersonal:"Personal Details",copyAddress:"Address",copyIds:"ID Numbers",copyEverything:"Everything",confirm:"Confirm",voiceInput:"Voice Input",speakNow:"Speak now...",listening:"Listening...",tapToSpeak:"Tap to speak",reviewTitle:"Review Your Information",reviewDescription:"Compare extracted data with your original document",originalDocument:"Original Document",extractedInfo:"Extracted Information",sideBySize:"Side by Side View",uploadSuccess:"Document uploaded successfully!",extractionComplete:"Data extraction complete!",formSaved:"Form saved successfully!",downloadReady:"Your PDF is ready for download",uploadError:"Error uploading document",extractionError:"Error extracting data",invalidFormat:"Invalid file format",fileTooLarge:"File size exceeds 10MB",language:"Language",english:"English",hindi:"",poweredBy:"Powered by AI",secureProcessing:"Secure & Private Processing",copyright:""},hi:{appName:" ",appTagline:"AI-    ",appDescription:"            ,   ",dashboard:"",upload:"  ",fillForm:" ",review:"  ",step1:"",step2:"",step3:"",step4:"",uploadTitle:"   ",uploadDescription:",  ,  ,      ",dragDrop:"    ",or:"",browseFiles:"  ",supportedFormats:" : PDF, JPG, PNG ( 10MB)",aadhaar:" ",panCard:" ",voterId:" ",passport:"",drivingLicense:" ",processing:"...",extracting:"   ...",analyzing:"     ...",completed:"",extractedData:"  ",name:" ",fatherName:"  ",dateOfBirth:" ",gender:"",address:"",pincode:" ",state:"",district:"",idNumber:" ",aadhaarNumber:" ",panNumber:" ",voterIdNumber:"  ",drivingLicenseNumber:"  ",smartForm:" ",formDescription:"           ",personalDetails:" ",addressDetails:" ",documentDetails:" ",male:"",female:"",other:"",submit:" ",save:"",download:"PDF  ",downloadForm:"  ",edit:" ",clear:" ",reset:"",next:"",previous:"",cancel:" ",confirm:" ",copy:"",copied:"  !",copyAll:"  ",copyForForms:"     ",copyPersonal:" ",copyAddress:"",copyIds:" ",copyEverything:" ",voiceInput:" ",speakNow:" ...",listening:"  ...",tapToSpeak:"    ",reviewTitle:"    ",reviewDescription:"         ",originalDocument:" ",extractedInfo:"  ",sideBySize:"- ",uploadSuccess:"   !",extractionComplete:"  !",formSaved:"   !",downloadReady:" PDF     ",uploadError:"    ",extractionError:"   ",invalidFormat:"  ",fileTooLarge:"   10MB   ",language:"",english:"English",hindi:"",poweredBy:"AI  ",secureProcessing:"   ",copyright:""},mr:{appName:" ",appTagline:"AI-   ",appDescription:"       . ,   .",dashboard:"",upload:"  ",fillForm:" ",review:"  ",step1:"",step2:"",step3:"",step4:"",uploadTitle:"   ",uploadDescription:",  ,        ",dragDrop:"     ",or:"",browseFiles:"  ",supportedFormats:" : PDF, JPG, PNG ( 10MB)",aadhaar:" ",panCard:" ",voterId:" ",passport:"",drivingLicense:"  ",processing:" ...",extracting:"  ...",analyzing:"   ...",completed:"",extractedData:" ",name:" ",fatherName:" ",dateOfBirth:"",gender:"",address:"",pincode:" ",state:"",district:"",idNumber:" ",aadhaarNumber:" ",panNumber:" ",voterIdNumber:"  ",drivingLicenseNumber:"   ",smartForm:" ",formDescription:"      ",personalDetails:" ",addressDetails:" ",documentDetails:" ",male:"",female:"",other:"",submit:" ",save:" ",download:"PDF  ",downloadForm:"  ",edit:" ",clear:" ",reset:"",next:"",previous:"",cancel:" ",confirm:" ",copy:"",copied:" !",copyAll:"  ",copyForForms:"   ",copyPersonal:" ",copyAddress:"",copyIds:" ",copyEverything:" ",voiceInput:" ",speakNow:" ...",listening:" ...",tapToSpeak:"  ",reviewTitle:"   ",reviewDescription:"      ",originalDocument:" ",extractedInfo:" ",sideBySize:"  ",uploadSuccess:"   !",extractionComplete:"  !",formSaved:"   !",downloadReady:" PDF   ",uploadError:"   ",extractionError:"  ",invalidFormat:"  ",fileTooLarge:"  10MB   ",language:"",english:"English",hindi:"",poweredBy:"AI  ",secureProcessing:"   ",copyright:""}};function Qz(n,e){return XT[n][e]||XT.en[e]}const gO=A.createContext(void 0);function Jz({children:n}){const[e,t]=A.useState("en"),r=A.useCallback(s=>Qz(e,s),[e]);return _.jsx(gO.Provider,{value:{language:e,setLanguage:t,t:r},children:n})}function Jo(){const n=A.useContext(gO);if(!n)throw new Error("useLanguage must be used within a LanguageProvider");return n}const Zz=JA("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow-md active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input bg-background hover:bg-secondary hover:text-secondary-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-secondary hover:text-secondary-foreground",link:"text-primary underline-offset-4 hover:underline",accent:"bg-accent text-accent-foreground hover:bg-accent/90 shadow-sm hover:shadow-accent-glow active:scale-[0.98]",success:"bg-success text-success-foreground hover:bg-success/90 shadow-sm",voice:"bg-accent/10 text-accent border border-accent/20 hover:bg-accent hover:text-accent-foreground rounded-full",hero:"bg-gradient-primary text-primary-foreground shadow-md hover:shadow-glow hover:-translate-y-0.5 active:scale-[0.98]"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",lg:"h-12 rounded-lg px-8 text-base",icon:"h-10 w-10","icon-sm":"h-8 w-8",xl:"h-14 rounded-xl px-10 text-lg"}},defaultVariants:{variant:"default",size:"default"}}),Lt=A.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const o=r?IB:"button";return _.jsx(o,{className:ue(Zz({variant:e,size:t,className:n})),ref:i,...s})});Lt.displayName="Button";var e5=A.createContext(void 0);function y1(n){const e=A.useContext(e5);return n||e||"ltr"}var _x=0;function vO(){A.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??YT()),document.body.insertAdjacentElement("beforeend",n[1]??YT()),_x++,()=>{_x===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),_x--}},[])}function YT(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Sx="focusScope.autoFocusOnMount",Ex="focusScope.autoFocusOnUnmount",QT={bubbles:!1,cancelable:!0},t5="FocusScope",w1=A.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=n,[a,c]=A.useState(null),u=dr(s),d=dr(i),h=A.useRef(null),f=Ge(e,m=>c(m)),p=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let m=function(y){if(p.paused||!a)return;const E=y.target;a.contains(E)?h.current=E:la(h.current,{select:!0})},w=function(y){if(p.paused||!a)return;const E=y.relatedTarget;E!==null&&(a.contains(E)||la(h.current,{select:!0}))},g=function(y){if(document.activeElement===document.body)for(const T of y)T.removedNodes.length>0&&la(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",w);const b=new MutationObserver(g);return a&&b.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",w),b.disconnect()}}},[r,a,p.paused]),A.useEffect(()=>{if(a){ZT.add(p);const m=document.activeElement;if(!a.contains(m)){const g=new CustomEvent(Sx,QT);a.addEventListener(Sx,u),a.dispatchEvent(g),g.defaultPrevented||(n5(a5(yO(a)),{select:!0}),document.activeElement===m&&la(a))}return()=>{a.removeEventListener(Sx,u),setTimeout(()=>{const g=new CustomEvent(Ex,QT);a.addEventListener(Ex,d),a.dispatchEvent(g),g.defaultPrevented||la(m??document.body,{select:!0}),a.removeEventListener(Ex,d),ZT.remove(p)},0)}}},[a,u,d,p]);const v=A.useCallback(m=>{if(!t&&!r||p.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,g=document.activeElement;if(w&&g){const b=m.currentTarget,[y,E]=r5(b);y&&E?!m.shiftKey&&g===E?(m.preventDefault(),t&&la(y,{select:!0})):m.shiftKey&&g===y&&(m.preventDefault(),t&&la(E,{select:!0})):g===b&&m.preventDefault()}},[t,r,p.paused]);return _.jsx(Ee.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});w1.displayName=t5;function n5(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(la(r,{select:e}),document.activeElement!==t)return}function r5(n){const e=yO(n),t=JT(e,n),r=JT(e.reverse(),n);return[t,r]}function yO(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function JT(n,e){for(const t of n)if(!s5(t,{upTo:e}))return t}function s5(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function i5(n){return n instanceof HTMLInputElement&&"select"in n}function la(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&i5(n)&&e&&n.select()}}var ZT=o5();function o5(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=ek(n,e),n.unshift(e)},remove(e){var t;n=ek(n,e),(t=n[0])==null||t.resume()}}}function ek(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function a5(n){return n.filter(e=>e.tagName!=="A")}var Ax="rovingFocusGroup.onEntryFocus",l5={bubbles:!1,cancelable:!0},Bv="RovingFocusGroup",[nS,wO,c5]=hb(Bv),[u5,bO]=Ml(Bv,[c5]),[d5,h5]=u5(Bv),xO=A.forwardRef((n,e)=>_.jsx(nS.Provider,{scope:n.__scopeRovingFocusGroup,children:_.jsx(nS.Slot,{scope:n.__scopeRovingFocusGroup,children:_.jsx(f5,{...n,ref:e})})}));xO.displayName=Bv;var f5=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=n,f=A.useRef(null),p=Ge(e,f),v=y1(i),[m,w]=bm({prop:o,defaultProp:a??null,onChange:c,caller:Bv}),[g,b]=A.useState(!1),y=dr(u),E=wO(t),T=A.useRef(!1),[P,k]=A.useState(0);return A.useEffect(()=>{const R=f.current;if(R)return R.addEventListener(Ax,y),()=>R.removeEventListener(Ax,y)},[y]),_.jsx(d5,{scope:t,orientation:r,dir:v,loop:s,currentTabStopId:m,onItemFocus:A.useCallback(R=>w(R),[w]),onItemShiftTab:A.useCallback(()=>b(!0),[]),onFocusableItemAdd:A.useCallback(()=>k(R=>R+1),[]),onFocusableItemRemove:A.useCallback(()=>k(R=>R-1),[]),children:_.jsx(Ee.div,{tabIndex:g||P===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...n.style},onMouseDown:Z(n.onMouseDown,()=>{T.current=!0}),onFocus:Z(n.onFocus,R=>{const N=!T.current;if(R.target===R.currentTarget&&N&&!g){const I=new CustomEvent(Ax,l5);if(R.currentTarget.dispatchEvent(I),!I.defaultPrevented){const M=E().filter(j=>j.focusable),L=M.find(j=>j.active),z=M.find(j=>j.id===m),B=[L,z,...M].filter(Boolean).map(j=>j.ref.current);EO(B,d)}}T.current=!1}),onBlur:Z(n.onBlur,()=>b(!1))})})}),_O="RovingFocusGroupItem",SO=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=n,c=Uf(),u=i||c,d=h5(_O,t),h=d.currentTabStopId===u,f=wO(t),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:m}=d;return A.useEffect(()=>{if(r)return p(),()=>v()},[r,p,v]),_.jsx(nS.ItemSlot,{scope:t,id:u,focusable:r,active:s,children:_.jsx(Ee.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:Z(n.onMouseDown,w=>{r?d.onItemFocus(u):w.preventDefault()}),onFocus:Z(n.onFocus,()=>d.onItemFocus(u)),onKeyDown:Z(n.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const g=g5(w,d.orientation,d.dir);if(g!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let y=f().filter(E=>E.focusable).map(E=>E.ref.current);if(g==="last")y.reverse();else if(g==="prev"||g==="next"){g==="prev"&&y.reverse();const E=y.indexOf(w.currentTarget);y=d.loop?v5(y,E+1):y.slice(E+1)}setTimeout(()=>EO(y))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:m!=null}):o})})});SO.displayName=_O;var p5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function m5(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function g5(n,e,t){const r=m5(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return p5[r]}function EO(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function v5(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var y5=xO,w5=SO,b5=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Zu=new WeakMap,wy=new WeakMap,by={},Cx=0,AO=function(n){return n&&(n.host||AO(n.parentNode))},x5=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=AO(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},_5=function(n,e,t,r){var s=x5(e,Array.isArray(n)?n:[n]);by[t]||(by[t]=new WeakMap);var i=by[t],o=[],a=new Set,c=new Set(s),u=function(h){!h||a.has(h)||(a.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(r),v=p!==null&&p!=="false",m=(Zu.get(f)||0)+1,w=(i.get(f)||0)+1;Zu.set(f,m),i.set(f,w),o.push(f),m===1&&v&&wy.set(f,!0),w===1&&f.setAttribute(t,"true"),v||f.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",f,g)}})};return d(e),a.clear(),Cx++,function(){o.forEach(function(h){var f=Zu.get(h)-1,p=i.get(h)-1;Zu.set(h,f),i.set(h,p),f||(wy.has(h)||h.removeAttribute(r),wy.delete(h)),p||h.removeAttribute(t)}),Cx--,Cx||(Zu=new WeakMap,Zu=new WeakMap,wy=new WeakMap,by={})}},CO=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=b5(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),_5(r,s,t,"aria-hidden")):function(){return null}},Ii=function(){return Ii=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ii.apply(this,arguments)};function Qf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function S5(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function E5(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var Qy="right-scroll-bar-position",Jy="width-before-scroll-bar",A5="with-scroll-bars-hidden",C5="--removed-body-scroll-bar-size";function Tx(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function T5(n,e){var t=A.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var k5=typeof window<"u"?A.useLayoutEffect:A.useEffect,tk=new WeakMap;function P5(n,e){var t=T5(null,function(r){return n.forEach(function(s){return Tx(s,r)})});return k5(function(){var r=tk.get(t);if(r){var s=new Set(r),i=new Set(n),o=t.current;s.forEach(function(a){i.has(a)||Tx(a,null)}),i.forEach(function(a){s.has(a)||Tx(a,o)})}tk.set(t,n)},[n]),t}function R5(n){return n}function N5(n,e){e===void 0&&(e=R5);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var o=e(i,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(a){return i(a)},filter:function(){return t}}},assignMedium:function(i){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(i),o=t}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),t={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),t}}}};return s}function I5(n){n===void 0&&(n={});var e=N5(null);return e.options=Ii({async:!0,ssr:!1},n),e}var TO=function(n){var e=n.sideCar,t=Qf(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,Ii({},t))};TO.isSideCarExport=!0;function O5(n,e){return n.useMedium(e),TO}var kO=I5(),kx=function(){},Ab=A.forwardRef(function(n,e){var t=A.useRef(null),r=A.useState({onScrollCapture:kx,onWheelCapture:kx,onTouchMoveCapture:kx}),s=r[0],i=r[1],o=n.forwardProps,a=n.children,c=n.className,u=n.removeScrollBar,d=n.enabled,h=n.shards,f=n.sideCar,p=n.noRelative,v=n.noIsolation,m=n.inert,w=n.allowPinchZoom,g=n.as,b=g===void 0?"div":g,y=n.gapMode,E=Qf(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=f,P=P5([t,e]),k=Ii(Ii({},E),s);return A.createElement(A.Fragment,null,d&&A.createElement(T,{sideCar:kO,removeScrollBar:u,shards:h,noRelative:p,noIsolation:v,inert:m,setCallbacks:i,allowPinchZoom:!!w,lockRef:t,gapMode:y}),o?A.cloneElement(A.Children.only(a),Ii(Ii({},k),{ref:P})):A.createElement(b,Ii({},k,{className:c,ref:P}),a))});Ab.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ab.classNames={fullWidth:Jy,zeroRight:Qy};var M5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function D5(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=M5();return e&&n.setAttribute("nonce",e),n}function L5(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function F5(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var j5=function(){var n=0,e=null;return{add:function(t){n==0&&(e=D5())&&(L5(e,t),F5(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},B5=function(){var n=j5();return function(e,t){A.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},PO=function(){var n=B5(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},$5={left:0,top:0,right:0,gap:0},Px=function(n){return parseInt(n||"",10)||0},U5=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Px(t),Px(r),Px(s)]},z5=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return $5;var e=U5(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},H5=PO(),Kd="data-scroll-locked",V5=function(n,e,t,r){var s=n.left,i=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(A5,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Kd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qy,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Jy,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Qy," .").concat(Qy,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Jy," .").concat(Jy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Kd,`] {
    `).concat(C5,": ").concat(a,`px;
  }
`)},nk=function(){var n=parseInt(document.body.getAttribute(Kd)||"0",10);return isFinite(n)?n:0},W5=function(){A.useEffect(function(){return document.body.setAttribute(Kd,(nk()+1).toString()),function(){var n=nk()-1;n<=0?document.body.removeAttribute(Kd):document.body.setAttribute(Kd,n.toString())}},[])},G5=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;W5();var i=A.useMemo(function(){return z5(s)},[s]);return A.createElement(H5,{styles:V5(i,!e,s,t?"":"!important")})},rS=!1;if(typeof window<"u")try{var xy=Object.defineProperty({},"passive",{get:function(){return rS=!0,!0}});window.addEventListener("test",xy,xy),window.removeEventListener("test",xy,xy)}catch{rS=!1}var ed=rS?{passive:!1}:!1,q5=function(n){return n.tagName==="TEXTAREA"},RO=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!q5(n)&&t[e]==="visible")},K5=function(n){return RO(n,"overflowY")},X5=function(n){return RO(n,"overflowX")},rk=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=NO(n,r);if(s){var i=IO(n,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},Y5=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},Q5=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},NO=function(n,e){return n==="v"?K5(e):X5(e)},IO=function(n,e){return n==="v"?Y5(e):Q5(e)},J5=function(n,e){return n==="h"&&e==="rtl"?-1:1},Z5=function(n,e,t,r,s){var i=J5(n,window.getComputedStyle(e).direction),o=i*r,a=t.target,c=e.contains(a),u=!1,d=o>0,h=0,f=0;do{if(!a)break;var p=IO(n,a),v=p[0],m=p[1],w=p[2],g=m-w-i*v;(v||g)&&NO(n,a)&&(h+=g,f+=v);var b=a.parentNode;a=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(u=!0),u},_y=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},sk=function(n){return[n.deltaX,n.deltaY]},ik=function(n){return n&&"current"in n?n.current:n},eH=function(n,e){return n[0]===e[0]&&n[1]===e[1]},tH=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},nH=0,td=[];function rH(n){var e=A.useRef([]),t=A.useRef([0,0]),r=A.useRef(),s=A.useState(nH++)[0],i=A.useState(PO)[0],o=A.useRef(n);A.useEffect(function(){o.current=n},[n]),A.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var m=E5([n.lockRef.current],(n.shards||[]).map(ik),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var a=A.useCallback(function(m,w){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var g=_y(m),b=t.current,y="deltaX"in m?m.deltaX:b[0]-g[0],E="deltaY"in m?m.deltaY:b[1]-g[1],T,P=m.target,k=Math.abs(y)>Math.abs(E)?"h":"v";if("touches"in m&&k==="h"&&P.type==="range")return!1;var R=rk(k,P);if(!R)return!0;if(R?T=k:(T=k==="v"?"h":"v",R=rk(k,P)),!R)return!1;if(!r.current&&"changedTouches"in m&&(y||E)&&(r.current=T),!T)return!0;var N=r.current||T;return Z5(N,w,m,N==="h"?y:E,!0)},[]),c=A.useCallback(function(m){var w=m;if(!(!td.length||td[td.length-1]!==i)){var g="deltaY"in w?sk(w):_y(w),b=e.current.filter(function(T){return T.name===w.type&&(T.target===w.target||w.target===T.shadowParent)&&eH(T.delta,g)})[0];if(b&&b.should){w.cancelable&&w.preventDefault();return}if(!b){var y=(o.current.shards||[]).map(ik).filter(Boolean).filter(function(T){return T.contains(w.target)}),E=y.length>0?a(w,y[0]):!o.current.noIsolation;E&&w.cancelable&&w.preventDefault()}}},[]),u=A.useCallback(function(m,w,g,b){var y={name:m,delta:w,target:g,should:b,shadowParent:sH(g)};e.current.push(y),setTimeout(function(){e.current=e.current.filter(function(E){return E!==y})},1)},[]),d=A.useCallback(function(m){t.current=_y(m),r.current=void 0},[]),h=A.useCallback(function(m){u(m.type,sk(m),m.target,a(m,n.lockRef.current))},[]),f=A.useCallback(function(m){u(m.type,_y(m),m.target,a(m,n.lockRef.current))},[]);A.useEffect(function(){return td.push(i),n.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,ed),document.addEventListener("touchmove",c,ed),document.addEventListener("touchstart",d,ed),function(){td=td.filter(function(m){return m!==i}),document.removeEventListener("wheel",c,ed),document.removeEventListener("touchmove",c,ed),document.removeEventListener("touchstart",d,ed)}},[]);var p=n.removeScrollBar,v=n.inert;return A.createElement(A.Fragment,null,v?A.createElement(i,{styles:tH(s)}):null,p?A.createElement(G5,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function sH(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const iH=O5(kO,rH);var b1=A.forwardRef(function(n,e){return A.createElement(Ab,Ii({},n,{ref:e,sideCar:iH}))});b1.classNames=Ab.classNames;var sS=["Enter"," "],oH=["ArrowDown","PageUp","Home"],OO=["ArrowUp","PageDown","End"],aH=[...oH,...OO],lH={ltr:[...sS,"ArrowRight"],rtl:[...sS,"ArrowLeft"]},cH={ltr:["ArrowLeft"],rtl:["ArrowRight"]},$v="Menu",[Am,uH,dH]=hb($v),[Vu,MO]=Ml($v,[dH,Yf,bO]),Cb=Yf(),DO=bO(),[hH,Wu]=Vu($v),[fH,Uv]=Vu($v),LO=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=n,a=Cb(e),[c,u]=A.useState(null),d=A.useRef(!1),h=dr(i),f=y1(s);return A.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),_.jsx(GI,{...a,children:_.jsx(hH,{scope:e,open:t,onOpenChange:h,content:c,onContentChange:u,children:_.jsx(fH,{scope:e,onClose:A.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:r})})})};LO.displayName=$v;var pH="MenuAnchor",x1=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Cb(t);return _.jsx(u1,{...s,...r,ref:e})});x1.displayName=pH;var _1="MenuPortal",[mH,FO]=Vu(_1,{forceMount:void 0}),jO=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,i=Wu(_1,e);return _.jsx(mH,{scope:e,forceMount:t,children:_.jsx(Hu,{present:t||i.open,children:_.jsx(fb,{asChild:!0,container:s,children:r})})})};jO.displayName=_1;var ps="MenuContent",[gH,S1]=Vu(ps),BO=A.forwardRef((n,e)=>{const t=FO(ps,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Wu(ps,n.__scopeMenu),o=Uv(ps,n.__scopeMenu);return _.jsx(Am.Provider,{scope:n.__scopeMenu,children:_.jsx(Hu,{present:r||i.open,children:_.jsx(Am.Slot,{scope:n.__scopeMenu,children:o.modal?_.jsx(vH,{...s,ref:e}):_.jsx(yH,{...s,ref:e})})})})}),vH=A.forwardRef((n,e)=>{const t=Wu(ps,n.__scopeMenu),r=A.useRef(null),s=Ge(e,r);return A.useEffect(()=>{const i=r.current;if(i)return CO(i)},[]),_.jsx(E1,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Z(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),yH=A.forwardRef((n,e)=>{const t=Wu(ps,n.__scopeMenu);return _.jsx(E1,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),wH=jf("MenuContent.ScrollLock"),E1=A.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:p,disableOutsideScroll:v,...m}=n,w=Wu(ps,t),g=Uv(ps,t),b=Cb(t),y=DO(t),E=uH(t),[T,P]=A.useState(null),k=A.useRef(null),R=Ge(e,k,w.onContentChange),N=A.useRef(0),I=A.useRef(""),M=A.useRef(0),L=A.useRef(null),z=A.useRef("right"),F=A.useRef(0),B=v?b1:A.Fragment,j=v?{as:wH,allowPinchZoom:!0}:void 0,$=O=>{var U,Ae;const H=I.current+O,Y=E().filter(Ce=>!Ce.disabled),W=document.activeElement,X=(U=Y.find(Ce=>Ce.ref.current===W))==null?void 0:U.textValue,re=Y.map(Ce=>Ce.textValue),we=NH(re,H,X),xe=(Ae=Y.find(Ce=>Ce.textValue===we))==null?void 0:Ae.ref.current;(function Ce(be){I.current=be,window.clearTimeout(N.current),be!==""&&(N.current=window.setTimeout(()=>Ce(""),1e3))})(H),xe&&setTimeout(()=>xe.focus())};A.useEffect(()=>()=>window.clearTimeout(N.current),[]),vO();const D=A.useCallback(O=>{var Y,W;return z.current===((Y=L.current)==null?void 0:Y.side)&&OH(O,(W=L.current)==null?void 0:W.area)},[]);return _.jsx(gH,{scope:t,searchRef:I,onItemEnter:A.useCallback(O=>{D(O)&&O.preventDefault()},[D]),onItemLeave:A.useCallback(O=>{var H;D(O)||((H=k.current)==null||H.focus(),P(null))},[D]),onTriggerLeave:A.useCallback(O=>{D(O)&&O.preventDefault()},[D]),pointerGraceTimerRef:M,onPointerGraceIntentChange:A.useCallback(O=>{L.current=O},[]),children:_.jsx(B,{...j,children:_.jsx(w1,{asChild:!0,trapped:s,onMountAutoFocus:Z(i,O=>{var H;O.preventDefault(),(H=k.current)==null||H.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:_.jsx(Mv,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:p,children:_.jsx(y5,{asChild:!0,...y,dir:g.dir,orientation:"vertical",loop:r,currentTabStopId:T,onCurrentTabStopIdChange:P,onEntryFocus:Z(c,O=>{g.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:_.jsx(d1,{role:"menu","aria-orientation":"vertical","data-state":tM(w.open),"data-radix-menu-content":"",dir:g.dir,...b,...m,ref:R,style:{outline:"none",...m.style},onKeyDown:Z(m.onKeyDown,O=>{const Y=O.target.closest("[data-radix-menu-content]")===O.currentTarget,W=O.ctrlKey||O.altKey||O.metaKey,X=O.key.length===1;Y&&(O.key==="Tab"&&O.preventDefault(),!W&&X&&$(O.key));const re=k.current;if(O.target!==re||!aH.includes(O.key))return;O.preventDefault();const xe=E().filter(U=>!U.disabled).map(U=>U.ref.current);OO.includes(O.key)&&xe.reverse(),PH(xe)}),onBlur:Z(n.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(N.current),I.current="")}),onPointerMove:Z(n.onPointerMove,Cm(O=>{const H=O.target,Y=F.current!==O.clientX;if(O.currentTarget.contains(H)&&Y){const W=O.clientX>F.current?"right":"left";z.current=W,F.current=O.clientX}}))})})})})})})});BO.displayName=ps;var bH="MenuGroup",A1=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return _.jsx(Ee.div,{role:"group",...r,ref:e})});A1.displayName=bH;var xH="MenuLabel",$O=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return _.jsx(Ee.div,{...r,ref:e})});$O.displayName=xH;var d0="MenuItem",ok="menu.itemSelect",Tb=A.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,i=A.useRef(null),o=Uv(d0,n.__scopeMenu),a=S1(d0,n.__scopeMenu),c=Ge(e,i),u=A.useRef(!1),d=()=>{const h=i.current;if(!t&&h){const f=new CustomEvent(ok,{bubbles:!0,cancelable:!0});h.addEventListener(ok,p=>r==null?void 0:r(p),{once:!0}),KA(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return _.jsx(UO,{...s,ref:c,disabled:t,onClick:Z(n.onClick,d),onPointerDown:h=>{var f;(f=n.onPointerDown)==null||f.call(n,h),u.current=!0},onPointerUp:Z(n.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:Z(n.onKeyDown,h=>{const f=a.searchRef.current!=="";t||f&&h.key===" "||sS.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Tb.displayName=d0;var UO=A.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...i}=n,o=S1(d0,t),a=DO(t),c=A.useRef(null),u=Ge(e,c),[d,h]=A.useState(!1),[f,p]=A.useState("");return A.useEffect(()=>{const v=c.current;v&&p((v.textContent??"").trim())},[i.children]),_.jsx(Am.ItemSlot,{scope:t,disabled:r,textValue:s??f,children:_.jsx(w5,{asChild:!0,...a,focusable:!r,children:_.jsx(Ee.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:Z(n.onPointerMove,Cm(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Z(n.onPointerLeave,Cm(v=>o.onItemLeave(v))),onFocus:Z(n.onFocus,()=>h(!0)),onBlur:Z(n.onBlur,()=>h(!1))})})})}),_H="MenuCheckboxItem",zO=A.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return _.jsx(qO,{scope:n.__scopeMenu,checked:t,children:_.jsx(Tb,{role:"menuitemcheckbox","aria-checked":h0(t)?"mixed":t,...s,ref:e,"data-state":T1(t),onSelect:Z(s.onSelect,()=>r==null?void 0:r(h0(t)?!0:!t),{checkForDefaultPrevented:!1})})})});zO.displayName=_H;var HO="MenuRadioGroup",[SH,EH]=Vu(HO,{value:void 0,onValueChange:()=>{}}),VO=A.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,i=dr(r);return _.jsx(SH,{scope:n.__scopeMenu,value:t,onValueChange:i,children:_.jsx(A1,{...s,ref:e})})});VO.displayName=HO;var WO="MenuRadioItem",GO=A.forwardRef((n,e)=>{const{value:t,...r}=n,s=EH(WO,n.__scopeMenu),i=t===s.value;return _.jsx(qO,{scope:n.__scopeMenu,checked:i,children:_.jsx(Tb,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":T1(i),onSelect:Z(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,t)},{checkForDefaultPrevented:!1})})})});GO.displayName=WO;var C1="MenuItemIndicator",[qO,AH]=Vu(C1,{checked:!1}),KO=A.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,i=AH(C1,t);return _.jsx(Hu,{present:r||h0(i.checked)||i.checked===!0,children:_.jsx(Ee.span,{...s,ref:e,"data-state":T1(i.checked)})})});KO.displayName=C1;var CH="MenuSeparator",XO=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return _.jsx(Ee.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});XO.displayName=CH;var TH="MenuArrow",YO=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Cb(t);return _.jsx(h1,{...s,...r,ref:e})});YO.displayName=TH;var kH="MenuSub",[aK,QO]=Vu(kH),bp="MenuSubTrigger",JO=A.forwardRef((n,e)=>{const t=Wu(bp,n.__scopeMenu),r=Uv(bp,n.__scopeMenu),s=QO(bp,n.__scopeMenu),i=S1(bp,n.__scopeMenu),o=A.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=i,u={__scopeMenu:n.__scopeMenu},d=A.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return A.useEffect(()=>d,[d]),A.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),c(null)}},[a,c]),_.jsx(x1,{asChild:!0,...u,children:_.jsx(UO,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":tM(t.open),...n,ref:db(e,s.onTriggerChange),onClick:h=>{var f;(f=n.onClick)==null||f.call(n,h),!(n.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Z(n.onPointerMove,Cm(h=>{i.onItemEnter(h),!h.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),d()},100))})),onPointerLeave:Z(n.onPointerLeave,Cm(h=>{var p,v;d();const f=(p=t.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(v=t.content)==null?void 0:v.dataset.side,w=m==="right",g=w?-5:5,b=f[w?"left":"right"],y=f[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+g,y:h.clientY},{x:b,y:f.top},{x:y,y:f.top},{x:y,y:f.bottom},{x:b,y:f.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Z(n.onKeyDown,h=>{var p;const f=i.searchRef.current!=="";n.disabled||f&&h.key===" "||lH[r.dir].includes(h.key)&&(t.onOpenChange(!0),(p=t.content)==null||p.focus(),h.preventDefault())})})})});JO.displayName=bp;var ZO="MenuSubContent",eM=A.forwardRef((n,e)=>{const t=FO(ps,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Wu(ps,n.__scopeMenu),o=Uv(ps,n.__scopeMenu),a=QO(ZO,n.__scopeMenu),c=A.useRef(null),u=Ge(e,c);return _.jsx(Am.Provider,{scope:n.__scopeMenu,children:_.jsx(Hu,{present:r||i.open,children:_.jsx(Am.Slot,{scope:n.__scopeMenu,children:_.jsx(E1,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Z(n.onFocusOutside,d=>{d.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Z(n.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Z(n.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),f=cH[o.dir].includes(d.key);h&&f&&(i.onOpenChange(!1),(p=a.trigger)==null||p.focus(),d.preventDefault())})})})})})});eM.displayName=ZO;function tM(n){return n?"open":"closed"}function h0(n){return n==="indeterminate"}function T1(n){return h0(n)?"indeterminate":n?"checked":"unchecked"}function PH(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function RH(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function NH(n,e,t){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=RH(n,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==t));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==t?c:void 0}function IH(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],c=e[o],u=a.x,d=a.y,h=c.x,f=c.y;d>r!=f>r&&t<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function OH(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return IH(t,e)}function Cm(n){return e=>e.pointerType==="mouse"?n(e):void 0}var MH=LO,DH=x1,LH=jO,FH=BO,jH=A1,BH=$O,$H=Tb,UH=zO,zH=VO,HH=GO,VH=KO,WH=XO,GH=YO,qH=JO,KH=eM,kb="DropdownMenu",[XH,lK]=Ml(kb,[MO]),qn=MO(),[YH,nM]=XH(kb),rM=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=n,c=qn(e),u=A.useRef(null),[d,h]=bm({prop:s,defaultProp:i??!1,onChange:o,caller:kb});return _.jsx(YH,{scope:e,triggerId:Uf(),triggerRef:u,contentId:Uf(),open:d,onOpenChange:h,onOpenToggle:A.useCallback(()=>h(f=>!f),[h]),modal:a,children:_.jsx(MH,{...c,open:d,onOpenChange:h,dir:r,modal:a,children:t})})};rM.displayName=kb;var sM="DropdownMenuTrigger",iM=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,i=nM(sM,t),o=qn(t);return _.jsx(DH,{asChild:!0,...o,children:_.jsx(Ee.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:db(e,i.triggerRef),onPointerDown:Z(n.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:Z(n.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});iM.displayName=sM;var QH="DropdownMenuPortal",oM=n=>{const{__scopeDropdownMenu:e,...t}=n,r=qn(e);return _.jsx(LH,{...r,...t})};oM.displayName=QH;var aM="DropdownMenuContent",lM=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=nM(aM,t),i=qn(t),o=A.useRef(!1);return _.jsx(FH,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Z(n.onCloseAutoFocus,a=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Z(n.onInteractOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lM.displayName=aM;var JH="DropdownMenuGroup",ZH=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qn(t);return _.jsx(jH,{...s,...r,ref:e})});ZH.displayName=JH;var eV="DropdownMenuLabel",cM=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qn(t);return _.jsx(BH,{...s,...r,ref:e})});cM.displayName=eV;var tV="DropdownMenuItem",uM=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qn(t);return _.jsx($H,{...s,...r,ref:e})});uM.displayName=tV;var nV="DropdownMenuCheckboxItem",dM=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qn(t);return _.jsx(UH,{...s,...r,ref:e})});dM.displayName=nV;var rV="DropdownMenuRadioGroup",sV=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qn(t);return _.jsx(zH,{...s,...r,ref:e})});sV.displayName=rV;var iV="DropdownMenuRadioItem",hM=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qn(t);return _.jsx(HH,{...s,...r,ref:e})});hM.displayName=iV;var oV="DropdownMenuItemIndicator",fM=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qn(t);return _.jsx(VH,{...s,...r,ref:e})});fM.displayName=oV;var aV="DropdownMenuSeparator",pM=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qn(t);return _.jsx(WH,{...s,...r,ref:e})});pM.displayName=aV;var lV="DropdownMenuArrow",cV=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qn(t);return _.jsx(GH,{...s,...r,ref:e})});cV.displayName=lV;var uV="DropdownMenuSubTrigger",mM=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qn(t);return _.jsx(qH,{...s,...r,ref:e})});mM.displayName=uV;var dV="DropdownMenuSubContent",gM=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qn(t);return _.jsx(KH,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gM.displayName=dV;var hV=rM,fV=iM,pV=oM,vM=lM,yM=cM,wM=uM,bM=dM,xM=hM,_M=fM,SM=pM,EM=mM,AM=gM;const mV=hV,gV=fV,vV=A.forwardRef(({className:n,inset:e,children:t,...r},s)=>_.jsxs(EM,{ref:s,className:ue("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",n),...r,children:[t,_.jsx(C$,{className:"ml-auto h-4 w-4"})]}));vV.displayName=EM.displayName;const yV=A.forwardRef(({className:n,...e},t)=>_.jsx(AM,{ref:t,className:ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));yV.displayName=AM.displayName;const CM=A.forwardRef(({className:n,sideOffset:e=4,...t},r)=>_.jsx(pV,{children:_.jsx(vM,{ref:r,sideOffset:e,className:ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));CM.displayName=vM.displayName;const TM=A.forwardRef(({className:n,inset:e,...t},r)=>_.jsx(wM,{ref:r,className:ue("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",n),...t}));TM.displayName=wM.displayName;const wV=A.forwardRef(({className:n,children:e,checked:t,...r},s)=>_.jsxs(bM,{ref:s,className:ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",n),checked:t,...r,children:[_.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:_.jsx(_M,{children:_.jsx(Bf,{className:"h-4 w-4"})})}),e]}));wV.displayName=bM.displayName;const bV=A.forwardRef(({className:n,children:e,...t},r)=>_.jsxs(xM,{ref:r,className:ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",n),...t,children:[_.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:_.jsx(_M,{children:_.jsx(P$,{className:"h-2 w-2 fill-current"})})}),e]}));bV.displayName=xM.displayName;const xV=A.forwardRef(({className:n,inset:e,...t},r)=>_.jsx(yM,{ref:r,className:ue("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));xV.displayName=yM.displayName;const _V=A.forwardRef(({className:n,...e},t)=>_.jsx(SM,{ref:t,className:ue("-mx-1 my-1 h-px bg-muted",n),...e}));_V.displayName=SM.displayName;const ak=[{code:"en",label:"English",nativeLabel:"English"},{code:"hi",label:"Hindi",nativeLabel:""},{code:"mr",label:"Marathi",nativeLabel:""}];function SV(){const{language:n,setLanguage:e,t}=Jo(),r=ak.find(s=>s.code===n);return _.jsxs(mV,{children:[_.jsx(gV,{asChild:!0,children:_.jsxs(Lt,{variant:"outline",size:"sm",className:"gap-2",children:[_.jsx(M$,{className:"h-4 w-4"}),_.jsx("span",{className:"hidden sm:inline",children:r==null?void 0:r.nativeLabel})]})}),_.jsx(CM,{align:"end",children:ak.map(s=>_.jsxs(TM,{onClick:()=>e(s.code),className:n===s.code?"bg-secondary":"",children:[_.jsx("span",{className:"font-medium",children:s.nativeLabel}),_.jsxs("span",{className:"ml-2 text-muted-foreground text-sm",children:["(",s.label,")"]})]},s.code))})]})}function EV(){const{t:n}=Jo();return _.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60 tricolor-border",children:_.jsxs("div",{className:"container flex h-16 items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl bg-gradient-primary shadow-glow",children:_.jsx(Lv,{className:"h-5 w-5 text-primary-foreground"})}),_.jsxs("div",{children:[_.jsx("h1",{className:"text-xl font-bold text-foreground",children:n("appName")}),_.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:n("appTagline")})]})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsxs("div",{className:"hidden md:flex items-center gap-6 text-sm text-muted-foreground",children:[_.jsxs("div",{className:"flex items-center gap-1.5",children:[_.jsx(hI,{className:"h-4 w-4 text-success"}),_.jsx("span",{children:n("secureProcessing")})]}),_.jsxs("div",{className:"flex items-center gap-1.5",children:[_.jsx(pI,{className:"h-4 w-4 text-accent"}),_.jsx("span",{children:n("poweredBy")})]})]}),_.jsx(SV,{})]})]})})}function AV({currentStep:n}){const{t:e}=Jo(),t=[{key:"step1",label:e("step1")},{key:"step2",label:e("step2")},{key:"step3",label:e("step3")},{key:"step4",label:e("step4")}];return _.jsx("div",{className:"flex items-center justify-center gap-2 md:gap-4",children:t.map((r,s)=>{const i=s+1,o=i===n,a=i<n;return _.jsxs("div",{className:"flex items-center",children:[_.jsxs("div",{className:"flex flex-col items-center",children:[_.jsx("div",{className:ue("step-indicator",o&&"step-indicator-active",a&&"step-indicator-complete",!o&&!a&&"step-indicator-pending"),children:a?_.jsx(ZA,{className:"h-5 w-5"}):_.jsx("span",{children:i})}),_.jsx("span",{className:ue("text-xs mt-1.5 font-medium",o&&"text-primary",a&&"text-success",!o&&!a&&"text-muted-foreground"),children:r.label})]}),s<t.length-1&&_.jsx("div",{className:ue("w-8 md:w-16 h-0.5 mx-2 rounded-full transition-colors",i<n?"bg-success":"bg-border")})]},r.key)})})}const CV={aadhaar:_.jsx("span",{className:"text-lg",children:""}),pan:_.jsx("span",{className:"text-lg",children:""}),voterId:_.jsx("span",{className:"text-lg",children:""}),drivingLicense:_.jsx("span",{className:"text-lg",children:""}),other:_.jsx(Lv,{className:"h-5 w-5"})};function TV({documents:n,onUpload:e,onRemove:t}){const{t:r}=Jo(),[s,i]=A.useState(!1),o=A.useCallback(d=>{d.preventDefault(),i(!0)},[]),a=A.useCallback(d=>{d.preventDefault(),i(!1)},[]),c=A.useCallback(d=>{d.preventDefault(),i(!1);const h=Array.from(d.dataTransfer.files);e(h)},[e]),u=A.useCallback(d=>{if(d.target.files){const h=Array.from(d.target.files);e(h)}},[e]);return _.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:ue("upload-zone cursor-pointer",s&&"upload-zone-active"),onDragOver:o,onDragLeave:a,onDrop:c,onClick:()=>{var d;return(d=document.getElementById("file-input"))==null?void 0:d.click()},children:[_.jsx("input",{id:"file-input",type:"file",className:"hidden",accept:".pdf,.jpg,.jpeg,.png",multiple:!0,onChange:u}),_.jsxs("div",{className:"flex flex-col items-center gap-4",children:[_.jsx("div",{className:ue("w-16 h-16 rounded-full flex items-center justify-center transition-all",s?"bg-primary text-primary-foreground scale-110":"bg-primary/10 text-primary"),children:_.jsx(B$,{className:"h-8 w-8"})}),_.jsxs("div",{children:[_.jsx("p",{className:"text-lg font-medium text-foreground",children:r("dragDrop")}),_.jsx("p",{className:"text-muted-foreground",children:r("or")})]}),_.jsx(Lt,{variant:"outline",size:"lg",className:"pointer-events-none",children:r("browseFiles")}),_.jsx("p",{className:"text-sm text-muted-foreground",children:r("supportedFormats")})]})]}),n.length>0&&_.jsxs("div",{className:"space-y-3",children:[_.jsx("h3",{className:"font-medium text-foreground",children:"Uploaded Documents"}),_.jsx("div",{className:"grid gap-3",children:n.map(d=>_.jsxs("div",{className:ue("floating-card p-4 flex items-center gap-4",d.status==="error"&&"border-destructive"),children:[_.jsx("div",{className:"relative w-14 h-14 rounded-lg overflow-hidden bg-muted flex-shrink-0",children:d.file.type.startsWith("image/")?_.jsx("img",{src:d.preview,alt:d.file.name,className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full flex items-center justify-center",children:_.jsx(Lv,{className:"h-6 w-6 text-muted-foreground"})})}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[CV[d.type],_.jsx("p",{className:"font-medium text-foreground truncate",children:d.file.name})]}),_.jsxs("p",{className:"text-sm text-muted-foreground",children:[(d.file.size/1024/1024).toFixed(2)," MB"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[d.status==="uploading"&&_.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin"}),d.status==="processing"&&_.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[_.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin"}),_.jsx("span",{className:"text-sm",children:r("processing")})]}),d.status==="completed"&&_.jsxs("div",{className:"flex items-center gap-1 text-success",children:[_.jsx(ZA,{className:"h-5 w-5"}),_.jsx("span",{className:"text-sm",children:r("completed")})]}),_.jsx(Lt,{variant:"ghost",size:"icon-sm",onClick:h=>{h.stopPropagation(),t(d.id)},className:"text-muted-foreground hover:text-destructive",children:_.jsx(fI,{className:"h-4 w-4"})})]})]},d.id))})]}),_.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:[{key:"aadhaar",icon:""},{key:"panCard",icon:""},{key:"voterId",icon:""},{key:"drivingLicense",icon:""}].map(d=>_.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-secondary text-secondary-foreground text-sm",children:[_.jsx("span",{children:d.icon}),_.jsx("span",{children:r(d.key)})]},d.key))})]})}function k1({value:n,label:e,variant:t="icon",size:r="sm",className:s}){const[i,o]=A.useState(!1),a=async()=>{if(n)try{await navigator.clipboard.writeText(n),o(!0),setTimeout(()=>o(!1),2e3)}catch(c){console.error("Failed to copy:",c)}};return t==="icon"?_.jsx("button",{type:"button",onClick:a,className:ue("p-1 rounded hover:bg-muted transition-colors",i&&"text-success",s),title:i?"Copied!":"Copy",children:i?_.jsx(Bf,{className:"h-3.5 w-3.5"}):_.jsx($f,{className:"h-3.5 w-3.5 text-muted-foreground hover:text-foreground"})}):_.jsx(Lt,{type:"button",variant:"outline",size:r,onClick:a,className:ue("gap-2",s),children:i?_.jsxs(_.Fragment,{children:[_.jsx(Bf,{className:"h-4 w-4 text-success"}),e?"Copied!":null]}):_.jsxs(_.Fragment,{children:[_.jsx($f,{className:"h-4 w-4"}),e]})})}function kV({data:n,labels:e={},className:t}){const[r,s]=A.useState(!1),i=async()=>{const o=Object.entries(n).filter(([a,c])=>c).map(([a,c])=>`${e[a]||a}: ${c}`).join(`
`);if(o)try{await navigator.clipboard.writeText(o),s(!0),setTimeout(()=>s(!1),2e3)}catch(a){console.error("Failed to copy:",a)}};return _.jsx(Lt,{type:"button",variant:"outline",size:"sm",onClick:i,className:ue("gap-2",t),children:r?_.jsxs(_.Fragment,{children:[_.jsx(Bf,{className:"h-4 w-4 text-success"}),"Copied All!"]}):_.jsxs(_.Fragment,{children:[_.jsx($f,{className:"h-4 w-4"}),"Copy All"]})})}function lk({data:n,isLoading:e}){const{t}=Jo(),[r,s]=A.useState(!1),i=()=>{n&&(navigator.clipboard.writeText(JSON.stringify(n,null,2)),s(!0),setTimeout(()=>s(!1),2e3))};if(e)return _.jsxs("div",{className:"space-y-4",children:[_.jsx("div",{className:"flex items-center justify-between",children:_.jsx("h3",{className:"font-semibold text-foreground",children:t("extractedData")})}),_.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(u=>_.jsxs("div",{className:"space-y-2",children:[_.jsx("div",{className:"h-4 w-24 shimmer rounded"}),_.jsx("div",{className:"h-8 shimmer rounded"})]},u))})]});if(!n)return _.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[_.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:_.jsx("span",{className:"text-3xl",children:""})}),_.jsx("p",{className:"text-muted-foreground",children:"Upload a document to extract information"})]});const o=[{key:"name",label:t("name"),value:n.name},{key:"fatherName",label:t("fatherName"),value:n.fatherName},{key:"dateOfBirth",label:t("dateOfBirth"),value:n.dateOfBirth},{key:"gender",label:t("gender"),value:n.gender?t(n.gender):void 0},{key:"address",label:t("address"),value:n.address},{key:"district",label:t("district"),value:n.district},{key:"state",label:t("state"),value:n.state},{key:"pincode",label:t("pincode"),value:n.pincode},{key:"aadhaarNumber",label:t("aadhaarNumber"),value:n.aadhaarNumber},{key:"panNumber",label:t("panNumber"),value:n.panNumber},{key:"voterIdNumber",label:t("voterIdNumber"),value:n.voterIdNumber},{key:"drivingLicenseNumber",label:t("drivingLicenseNumber"),value:n.drivingLicenseNumber}].filter(u=>u.value),a={name:t("name"),fatherName:t("fatherName"),dateOfBirth:t("dateOfBirth"),gender:t("gender"),address:t("address"),district:t("district"),state:t("state"),pincode:t("pincode"),aadhaarNumber:t("aadhaarNumber"),panNumber:t("panNumber"),voterIdNumber:t("voterIdNumber"),drivingLicenseNumber:t("drivingLicenseNumber")},c={name:n.name,fatherName:n.fatherName,dateOfBirth:n.dateOfBirth,gender:n.gender?t(n.gender):void 0,address:n.address,district:n.district,state:n.state,pincode:n.pincode,aadhaarNumber:n.aadhaarNumber,panNumber:n.panNumber,voterIdNumber:n.voterIdNumber,drivingLicenseNumber:n.drivingLicenseNumber};return _.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[_.jsx("h3",{className:"font-semibold text-foreground",children:t("extractedData")}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(kV,{data:c,labels:a}),_.jsx(Lt,{variant:"outline",size:"sm",onClick:i,className:"gap-2",children:r?_.jsxs(_.Fragment,{children:[_.jsx(Bf,{className:"h-4 w-4 text-success"}),"Copied"]}):_.jsxs(_.Fragment,{children:[_.jsx($f,{className:"h-4 w-4"}),"JSON"]})})]})]}),n.confidence&&_.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-success/10 border border-success/20",children:[_.jsx("div",{className:"w-2 h-2 rounded-full bg-success animate-pulse"}),_.jsxs("span",{className:"text-sm text-success font-medium",children:[Math.round(n.confidence*100),"% Confidence"]})]}),_.jsx("div",{className:"space-y-3",children:o.map((u,d)=>_.jsx("div",{className:ue("p-3 rounded-lg bg-secondary/50 border border-border/50 animate-fade-in"),style:{animationDelay:`${d*50}ms`},children:_.jsxs("div",{className:"flex items-center justify-between gap-2",children:[_.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[_.jsxs("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:[u.label,":"]}),_.jsx("span",{className:"font-medium text-foreground truncate",title:u.value,children:u.value})]}),_.jsx(k1,{value:u.value||""})]})},u.key))}),_.jsxs("details",{className:"group",children:[_.jsx("summary",{className:"cursor-pointer text-sm text-muted-foreground hover:text-foreground",children:"View raw JSON"}),_.jsx("pre",{className:"mt-2 p-3 rounded-lg bg-muted text-xs overflow-x-auto",children:JSON.stringify(n,null,2)})]})]})}const kM=A.forwardRef(({className:n,type:e,...t},r)=>_.jsx("input",{type:e,className:ue("flex h-10 w-full rounded-lg border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm transition-all duration-200 hover:border-primary/50",n),ref:r,...t}));kM.displayName="Input";var PV="Label",PM=A.forwardRef((n,e)=>_.jsx(Ee.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));PM.displayName=PV;var RM=PM;const RV=JA("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Zy=A.forwardRef(({className:n,...e},t)=>_.jsx(RM,{ref:t,className:ue(RV(),n),...e}));Zy.displayName=RM.displayName;const NM=A.forwardRef(({className:n,...e},t)=>_.jsx("textarea",{className:ue("flex min-h-[80px] w-full rounded-lg border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 hover:border-primary/50",n),ref:t,...e}));NM.displayName="Textarea";function ck(n,[e,t]){return Math.min(t,Math.max(e,n))}function NV(n){const e=A.useRef({value:n,previous:n});return A.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var IV=[" ","Enter","ArrowUp","ArrowDown"],OV=[" ","Enter"],Du="Select",[Pb,Rb,MV]=hb(Du),[Jf,cK]=Ml(Du,[MV,Yf]),Nb=Yf(),[DV,Dl]=Jf(Du),[LV,FV]=Jf(Du),IM=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:p,form:v}=n,m=Nb(e),[w,g]=A.useState(null),[b,y]=A.useState(null),[E,T]=A.useState(!1),P=y1(u),[k,R]=bm({prop:r,defaultProp:s??!1,onChange:i,caller:Du}),[N,I]=bm({prop:o,defaultProp:a,onChange:c,caller:Du}),M=A.useRef(null),L=w?v||!!w.closest("form"):!0,[z,F]=A.useState(new Set),B=Array.from(z).map(j=>j.props.value).join(";");return _.jsx(GI,{...m,children:_.jsxs(DV,{required:p,scope:e,trigger:w,onTriggerChange:g,valueNode:b,onValueNodeChange:y,valueNodeHasChildren:E,onValueNodeHasChildrenChange:T,contentId:Uf(),value:N,onValueChange:I,open:k,onOpenChange:R,dir:P,triggerPointerDownPosRef:M,disabled:f,children:[_.jsx(Pb.Provider,{scope:e,children:_.jsx(LV,{scope:n.__scopeSelect,onNativeOptionAdd:A.useCallback(j=>{F($=>new Set($).add(j))},[]),onNativeOptionRemove:A.useCallback(j=>{F($=>{const D=new Set($);return D.delete(j),D})},[]),children:t})}),L?_.jsxs(nD,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:N,onChange:j=>I(j.target.value),disabled:f,form:v,children:[N===void 0?_.jsx("option",{value:""}):null,Array.from(z)]},B):null]})})};IM.displayName=Du;var OM="SelectTrigger",MM=A.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,i=Nb(t),o=Dl(OM,t),a=o.disabled||r,c=Ge(e,o.onTriggerChange),u=Rb(t),d=A.useRef("touch"),[h,f,p]=sD(m=>{const w=u().filter(y=>!y.disabled),g=w.find(y=>y.value===o.value),b=iD(w,m,g);b!==void 0&&o.onValueChange(b.value)}),v=m=>{a||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return _.jsx(u1,{asChild:!0,...i,children:_.jsx(Ee.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":rD(o.value)?"":void 0,...s,ref:c,onClick:Z(s.onClick,m=>{m.currentTarget.focus(),d.current!=="mouse"&&v(m)}),onPointerDown:Z(s.onPointerDown,m=>{d.current=m.pointerType;const w=m.target;w.hasPointerCapture(m.pointerId)&&w.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(v(m),m.preventDefault())}),onKeyDown:Z(s.onKeyDown,m=>{const w=h.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(w&&m.key===" ")&&IV.includes(m.key)&&(v(),m.preventDefault())})})})});MM.displayName=OM;var DM="SelectValue",LM=A.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:i,placeholder:o="",...a}=n,c=Dl(DM,t),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=Ge(e,c.onValueNodeChange);return wn(()=>{u(d)},[u,d]),_.jsx(Ee.span,{...a,ref:h,style:{pointerEvents:"none"},children:rD(c.value)?_.jsx(_.Fragment,{children:o}):i})});LM.displayName=DM;var jV="SelectIcon",FM=A.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return _.jsx(Ee.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});FM.displayName=jV;var BV="SelectPortal",jM=n=>_.jsx(fb,{asChild:!0,...n});jM.displayName=BV;var Lu="SelectContent",BM=A.forwardRef((n,e)=>{const t=Dl(Lu,n.__scopeSelect),[r,s]=A.useState();if(wn(()=>{s(new DocumentFragment)},[]),!t.open){const i=r;return i?zu.createPortal(_.jsx($M,{scope:n.__scopeSelect,children:_.jsx(Pb.Slot,{scope:n.__scopeSelect,children:_.jsx("div",{children:n.children})})}),i):null}return _.jsx(UM,{...n,ref:e})});BM.displayName=Lu;var Cs=10,[$M,Ll]=Jf(Lu),$V="SelectContentImpl",UV=jf("SelectContent.RemoveScroll"),UM=A.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:v,hideWhenDetached:m,avoidCollisions:w,...g}=n,b=Dl(Lu,t),[y,E]=A.useState(null),[T,P]=A.useState(null),k=Ge(e,U=>E(U)),[R,N]=A.useState(null),[I,M]=A.useState(null),L=Rb(t),[z,F]=A.useState(!1),B=A.useRef(!1);A.useEffect(()=>{if(y)return CO(y)},[y]),vO();const j=A.useCallback(U=>{const[Ae,...Ce]=L().map(Te=>Te.ref.current),[be]=Ce.slice(-1),pe=document.activeElement;for(const Te of U)if(Te===pe||(Te==null||Te.scrollIntoView({block:"nearest"}),Te===Ae&&T&&(T.scrollTop=0),Te===be&&T&&(T.scrollTop=T.scrollHeight),Te==null||Te.focus(),document.activeElement!==pe))return},[L,T]),$=A.useCallback(()=>j([R,y]),[j,R,y]);A.useEffect(()=>{z&&$()},[z,$]);const{onOpenChange:D,triggerPointerDownPosRef:O}=b;A.useEffect(()=>{if(y){let U={x:0,y:0};const Ae=be=>{var pe,Te;U={x:Math.abs(Math.round(be.pageX)-(((pe=O.current)==null?void 0:pe.x)??0)),y:Math.abs(Math.round(be.pageY)-(((Te=O.current)==null?void 0:Te.y)??0))}},Ce=be=>{U.x<=10&&U.y<=10?be.preventDefault():y.contains(be.target)||D(!1),document.removeEventListener("pointermove",Ae),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",Ae),document.addEventListener("pointerup",Ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ae),document.removeEventListener("pointerup",Ce,{capture:!0})}}},[y,D,O]),A.useEffect(()=>{const U=()=>D(!1);return window.addEventListener("blur",U),window.addEventListener("resize",U),()=>{window.removeEventListener("blur",U),window.removeEventListener("resize",U)}},[D]);const[H,Y]=sD(U=>{const Ae=L().filter(pe=>!pe.disabled),Ce=Ae.find(pe=>pe.ref.current===document.activeElement),be=iD(Ae,U,Ce);be&&setTimeout(()=>be.ref.current.focus())}),W=A.useCallback((U,Ae,Ce)=>{const be=!B.current&&!Ce;(b.value!==void 0&&b.value===Ae||be)&&(N(U),be&&(B.current=!0))},[b.value]),X=A.useCallback(()=>y==null?void 0:y.focus(),[y]),re=A.useCallback((U,Ae,Ce)=>{const be=!B.current&&!Ce;(b.value!==void 0&&b.value===Ae||be)&&M(U)},[b.value]),we=r==="popper"?iS:zM,xe=we===iS?{side:a,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:v,hideWhenDetached:m,avoidCollisions:w}:{};return _.jsx($M,{scope:t,content:y,viewport:T,onViewportChange:P,itemRefCallback:W,selectedItem:R,onItemLeave:X,itemTextRefCallback:re,focusSelectedItem:$,selectedItemText:I,position:r,isPositioned:z,searchRef:H,children:_.jsx(b1,{as:UV,allowPinchZoom:!0,children:_.jsx(w1,{asChild:!0,trapped:b.open,onMountAutoFocus:U=>{U.preventDefault()},onUnmountAutoFocus:Z(s,U=>{var Ae;(Ae=b.trigger)==null||Ae.focus({preventScroll:!0}),U.preventDefault()}),children:_.jsx(Mv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:U=>U.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:_.jsx(we,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:U=>U.preventDefault(),...g,...xe,onPlaced:()=>F(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:Z(g.onKeyDown,U=>{const Ae=U.ctrlKey||U.altKey||U.metaKey;if(U.key==="Tab"&&U.preventDefault(),!Ae&&U.key.length===1&&Y(U.key),["ArrowUp","ArrowDown","Home","End"].includes(U.key)){let be=L().filter(pe=>!pe.disabled).map(pe=>pe.ref.current);if(["ArrowUp","End"].includes(U.key)&&(be=be.slice().reverse()),["ArrowUp","ArrowDown"].includes(U.key)){const pe=U.target,Te=be.indexOf(pe);be=be.slice(Te+1)}setTimeout(()=>j(be)),U.preventDefault()}})})})})})})});UM.displayName=$V;var zV="SelectItemAlignedPosition",zM=A.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,i=Dl(Lu,t),o=Ll(Lu,t),[a,c]=A.useState(null),[u,d]=A.useState(null),h=Ge(e,k=>d(k)),f=Rb(t),p=A.useRef(!1),v=A.useRef(!0),{viewport:m,selectedItem:w,selectedItemText:g,focusSelectedItem:b}=o,y=A.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&u&&m&&w&&g){const k=i.trigger.getBoundingClientRect(),R=u.getBoundingClientRect(),N=i.valueNode.getBoundingClientRect(),I=g.getBoundingClientRect();if(i.dir!=="rtl"){const pe=I.left-R.left,Te=N.left-pe,Bt=k.left-Te,Kn=k.width+Bt,Fl=Math.max(Kn,R.width),ea=window.innerWidth-Cs,jl=ck(Te,[Cs,Math.max(Cs,ea-Fl)]);a.style.minWidth=Kn+"px",a.style.left=jl+"px"}else{const pe=R.right-I.right,Te=window.innerWidth-N.right-pe,Bt=window.innerWidth-k.right-Te,Kn=k.width+Bt,Fl=Math.max(Kn,R.width),ea=window.innerWidth-Cs,jl=ck(Te,[Cs,Math.max(Cs,ea-Fl)]);a.style.minWidth=Kn+"px",a.style.right=jl+"px"}const M=f(),L=window.innerHeight-Cs*2,z=m.scrollHeight,F=window.getComputedStyle(u),B=parseInt(F.borderTopWidth,10),j=parseInt(F.paddingTop,10),$=parseInt(F.borderBottomWidth,10),D=parseInt(F.paddingBottom,10),O=B+j+z+D+$,H=Math.min(w.offsetHeight*5,O),Y=window.getComputedStyle(m),W=parseInt(Y.paddingTop,10),X=parseInt(Y.paddingBottom,10),re=k.top+k.height/2-Cs,we=L-re,xe=w.offsetHeight/2,U=w.offsetTop+xe,Ae=B+j+U,Ce=O-Ae;if(Ae<=re){const pe=M.length>0&&w===M[M.length-1].ref.current;a.style.bottom="0px";const Te=u.clientHeight-m.offsetTop-m.offsetHeight,Bt=Math.max(we,xe+(pe?X:0)+Te+$),Kn=Ae+Bt;a.style.height=Kn+"px"}else{const pe=M.length>0&&w===M[0].ref.current;a.style.top="0px";const Bt=Math.max(re,B+m.offsetTop+(pe?W:0)+xe)+Ce;a.style.height=Bt+"px",m.scrollTop=Ae-re+m.offsetTop}a.style.margin=`${Cs}px 0`,a.style.minHeight=H+"px",a.style.maxHeight=L+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,a,u,m,w,g,i.dir,r]);wn(()=>y(),[y]);const[E,T]=A.useState();wn(()=>{u&&T(window.getComputedStyle(u).zIndex)},[u]);const P=A.useCallback(k=>{k&&v.current===!0&&(y(),b==null||b(),v.current=!1)},[y,b]);return _.jsx(VV,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:P,children:_.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:_.jsx(Ee.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});zM.displayName=zV;var HV="SelectPopperPosition",iS=A.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=Cs,...i}=n,o=Nb(t);return _.jsx(d1,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});iS.displayName=HV;var[VV,P1]=Jf(Lu,{}),oS="SelectViewport",HM=A.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,i=Ll(oS,t),o=P1(oS,t),a=Ge(e,i.onViewportChange),c=A.useRef(0);return _.jsxs(_.Fragment,{children:[_.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),_.jsx(Pb.Slot,{scope:t,children:_.jsx(Ee.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Z(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const v=window.innerHeight-Cs*2,m=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),g=Math.max(m,w);if(g<v){const b=g+p,y=Math.min(v,b),E=b-y;h.style.height=y+"px",h.style.bottom==="0px"&&(d.scrollTop=E>0?E:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});HM.displayName=oS;var VM="SelectGroup",[WV,GV]=Jf(VM),qV=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Uf();return _.jsx(WV,{scope:t,id:s,children:_.jsx(Ee.div,{role:"group","aria-labelledby":s,...r,ref:e})})});qV.displayName=VM;var WM="SelectLabel",GM=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=GV(WM,t);return _.jsx(Ee.div,{id:s.id,...r,ref:e})});GM.displayName=WM;var f0="SelectItem",[KV,qM]=Jf(f0),KM=A.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:i,...o}=n,a=Dl(f0,t),c=Ll(f0,t),u=a.value===r,[d,h]=A.useState(i??""),[f,p]=A.useState(!1),v=Ge(e,b=>{var y;return(y=c.itemRefCallback)==null?void 0:y.call(c,b,r,s)}),m=Uf(),w=A.useRef("touch"),g=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return _.jsx(KV,{scope:t,value:r,disabled:s,textId:m,isSelected:u,onItemTextChange:A.useCallback(b=>{h(y=>y||((b==null?void 0:b.textContent)??"").trim())},[]),children:_.jsx(Pb.ItemSlot,{scope:t,value:r,disabled:s,textValue:d,children:_.jsx(Ee.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:v,onFocus:Z(o.onFocus,()=>p(!0)),onBlur:Z(o.onBlur,()=>p(!1)),onClick:Z(o.onClick,()=>{w.current!=="mouse"&&g()}),onPointerUp:Z(o.onPointerUp,()=>{w.current==="mouse"&&g()}),onPointerDown:Z(o.onPointerDown,b=>{w.current=b.pointerType}),onPointerMove:Z(o.onPointerMove,b=>{var y;w.current=b.pointerType,s?(y=c.onItemLeave)==null||y.call(c):w.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Z(o.onPointerLeave,b=>{var y;b.currentTarget===document.activeElement&&((y=c.onItemLeave)==null||y.call(c))}),onKeyDown:Z(o.onKeyDown,b=>{var E;((E=c.searchRef)==null?void 0:E.current)!==""&&b.key===" "||(OV.includes(b.key)&&g(),b.key===" "&&b.preventDefault())})})})})});KM.displayName=f0;var xp="SelectItemText",XM=A.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...i}=n,o=Dl(xp,t),a=Ll(xp,t),c=qM(xp,t),u=FV(xp,t),[d,h]=A.useState(null),f=Ge(e,g=>h(g),c.onItemTextChange,g=>{var b;return(b=a.itemTextRefCallback)==null?void 0:b.call(a,g,c.value,c.disabled)}),p=d==null?void 0:d.textContent,v=A.useMemo(()=>_.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:w}=u;return wn(()=>(m(v),()=>w(v)),[m,w,v]),_.jsxs(_.Fragment,{children:[_.jsx(Ee.span,{id:c.textId,...i,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?zu.createPortal(i.children,o.valueNode):null]})});XM.displayName=xp;var YM="SelectItemIndicator",QM=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return qM(YM,t).isSelected?_.jsx(Ee.span,{"aria-hidden":!0,...r,ref:e}):null});QM.displayName=YM;var aS="SelectScrollUpButton",JM=A.forwardRef((n,e)=>{const t=Ll(aS,n.__scopeSelect),r=P1(aS,n.__scopeSelect),[s,i]=A.useState(!1),o=Ge(e,r.onScrollButtonChange);return wn(()=>{if(t.viewport&&t.isPositioned){let a=function(){const u=c.scrollTop>0;i(u)};const c=t.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?_.jsx(eD,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=t;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});JM.displayName=aS;var lS="SelectScrollDownButton",ZM=A.forwardRef((n,e)=>{const t=Ll(lS,n.__scopeSelect),r=P1(lS,n.__scopeSelect),[s,i]=A.useState(!1),o=Ge(e,r.onScrollButtonChange);return wn(()=>{if(t.viewport&&t.isPositioned){let a=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=t.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?_.jsx(eD,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=t;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});ZM.displayName=lS;var eD=A.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,i=Ll("SelectScrollButton",t),o=A.useRef(null),a=Rb(t),c=A.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return A.useEffect(()=>()=>c(),[c]),wn(()=>{var d;const u=a().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),_.jsx(Ee.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Z(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Z(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Z(s.onPointerLeave,()=>{c()})})}),XV="SelectSeparator",tD=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return _.jsx(Ee.div,{"aria-hidden":!0,...r,ref:e})});tD.displayName=XV;var cS="SelectArrow",YV=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Nb(t),i=Dl(cS,t),o=Ll(cS,t);return i.open&&o.position==="popper"?_.jsx(h1,{...s,...r,ref:e}):null});YV.displayName=cS;var QV="SelectBubbleInput",nD=A.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const s=A.useRef(null),i=Ge(r,s),o=NV(e);return A.useEffect(()=>{const a=s.current;if(!a)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(a,e),a.dispatchEvent(h)}},[o,e]),_.jsx(Ee.select,{...t,style:{...zN,...t.style},ref:i,defaultValue:e})});nD.displayName=QV;function rD(n){return n===""||n===void 0}function sD(n){const e=dr(n),t=A.useRef(""),r=A.useRef(0),s=A.useCallback(o=>{const a=t.current+o;e(a),function c(u){t.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(a)},[e]),i=A.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,i]}function iD(n,e,t){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=JV(n,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==t));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==t?c:void 0}function JV(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var ZV=IM,oD=MM,eW=LM,tW=FM,nW=jM,aD=BM,rW=HM,lD=GM,cD=KM,sW=XM,iW=QM,uD=JM,dD=ZM,hD=tD;const uk=ZV,dk=eW,uS=A.forwardRef(({className:n,children:e,...t},r)=>_.jsxs(oD,{ref:r,className:ue("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,_.jsx(tW,{asChild:!0,children:_.jsx(dI,{className:"h-4 w-4 opacity-50"})})]}));uS.displayName=oD.displayName;const fD=A.forwardRef(({className:n,...e},t)=>_.jsx(uD,{ref:t,className:ue("flex cursor-default items-center justify-center py-1",n),...e,children:_.jsx(T$,{className:"h-4 w-4"})}));fD.displayName=uD.displayName;const pD=A.forwardRef(({className:n,...e},t)=>_.jsx(dD,{ref:t,className:ue("flex cursor-default items-center justify-center py-1",n),...e,children:_.jsx(dI,{className:"h-4 w-4"})}));pD.displayName=dD.displayName;const dS=A.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>_.jsx(nW,{children:_.jsxs(aD,{ref:s,className:ue("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[_.jsx(fD,{}),_.jsx(rW,{className:ue("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),_.jsx(pD,{})]})}));dS.displayName=aD.displayName;const oW=A.forwardRef(({className:n,...e},t)=>_.jsx(lD,{ref:t,className:ue("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));oW.displayName=lD.displayName;const _p=A.forwardRef(({className:n,children:e,...t},r)=>_.jsxs(cD,{ref:r,className:ue("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",n),...t,children:[_.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:_.jsx(iW,{children:_.jsx(Bf,{className:"h-4 w-4"})})}),_.jsx(sW,{children:e})]}));_p.displayName=cD.displayName;const aW=A.forwardRef(({className:n,...e},t)=>_.jsx(hD,{ref:t,className:ue("-mx-1 my-1 h-px bg-muted",n),...e}));aW.displayName=hD.displayName;function lW({onTranscript:n,disabled:e,className:t}){const{t:r}=Jo(),[s,i]=A.useState(!1),o=()=>{if(s)i(!1);else{i(!0);const a=window.SpeechRecognition||window.webkitSpeechRecognition;if(a){const c=new a;c.lang="en-IN",c.interimResults=!1,c.maxAlternatives=1,c.onresult=u=>{const d=u.results[0][0].transcript;n(d),i(!1)},c.onerror=()=>{i(!1)},c.onend=()=>{i(!1)},c.start()}else setTimeout(()=>{i(!1)},2e3)}};return _.jsx(Lt,{type:"button",variant:"voice",size:"icon-sm",onClick:o,disabled:e,className:ue("relative transition-all",s&&"bg-accent text-accent-foreground",t),title:r("tapToSpeak"),children:s?_.jsxs(_.Fragment,{children:[_.jsx(L$,{className:"h-4 w-4"}),_.jsx("span",{className:"absolute inset-0 rounded-full bg-accent/30 animate-ping"})]}):_.jsx(F$,{className:"h-4 w-4"})})}const Di=A.forwardRef(({className:n,...e},t)=>_.jsx("div",{ref:t,className:ue("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Di.displayName="Card";const rc=A.forwardRef(({className:n,...e},t)=>_.jsx("div",{ref:t,className:ue("flex flex-col space-y-1.5 p-6",n),...e}));rc.displayName="CardHeader";const sc=A.forwardRef(({className:n,...e},t)=>_.jsx("h3",{ref:t,className:ue("text-2xl font-semibold leading-none tracking-tight",n),...e}));sc.displayName="CardTitle";const hS=A.forwardRef(({className:n,...e},t)=>_.jsx("p",{ref:t,className:ue("text-sm text-muted-foreground",n),...e}));hS.displayName="CardDescription";const Li=A.forwardRef(({className:n,...e},t)=>_.jsx("div",{ref:t,className:ue("p-6 pt-0",n),...e}));Li.displayName="CardContent";const cW=A.forwardRef(({className:n,...e},t)=>_.jsx("div",{ref:t,className:ue("flex items-center p-6 pt-0",n),...e}));cW.displayName="CardFooter";const uW=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class R1 extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class dW extends R1{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class hk extends R1{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class fk extends R1{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var fS;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(fS||(fS={}));class hW{constructor(e,{headers:t={},customFetch:r,region:s=fS.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=uW(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return S5(this,arguments,void 0,function*(t,r={}){var s;let i,o;try{const{headers:a,method:c,body:u,signal:d,timeout:h}=r;let f={},{region:p}=r;p||(p=this.region);const v=new URL(`${this.url}/${t}`);p&&p!=="any"&&(f["x-region"]=p,v.searchParams.set("forceFunctionRegion",p));let m;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(f["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(f["Content-Type"]="application/json",m=JSON.stringify(u)):m=u;let w=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(w=o.signal,d.addEventListener("abort",()=>o.abort())):w=o.signal);const g=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:m,signal:w}).catch(T=>{throw new dW(T)}),b=g.headers.get("x-relay-error");if(b&&b==="true")throw new hk(g);if(!g.ok)throw new fk(g);let y=((s=g.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),E;return y==="application/json"?E=yield g.json():y==="application/octet-stream"||y==="application/pdf"?E=yield g.blob():y==="text/event-stream"?E=g:y==="multipart/form-data"?E=yield g.formData():E=yield g.text(),{data:E,error:null,response:g}}catch(a){return{data:null,error:a,response:a instanceof fk||a instanceof hk?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var fW=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},pW=class{constructor(n){var e,t;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(t=n.isMaybeSingle)!==null&&t!==void 0?t:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,c=null,u=i.status,d=i.statusText;if(i.ok){var h,f;if(t.method!=="HEAD"){var p;const g=await i.text();g===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((p=t.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=g:a=JSON.parse(g))}const m=(h=t.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),w=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");m&&w&&w.length>1&&(c=parseInt(w[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,u=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var v;const m=await i.text();try{o=JSON.parse(m),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,d="OK")}catch{i.status===404&&m===""?(u=204,d="No Content"):o={message:m}}if(o&&t.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&t.shouldThrowOnError)throw new fW(o)}return{error:o,data:a,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const c=i==null?void 0:i.cause;if(c){var u,d,h,f;const v=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",m=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";a=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${v}`,m&&(a+=` (${m})`),c!=null&&c.stack&&(a+=`
${c.stack}`)}else{var p;a=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(n,e)}returns(){return this}overrideTypes(){return this}},mW=class extends pW{select(n){let e=!1;const t=(n??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:t,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${n}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:t=e}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${n}`),this}range(n,e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${n}`),this.url.searchParams.set(i,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:t=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const a=[n?"analyze":null,e?"verbose":null,t?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const pk=new RegExp("[,()]");var cd=class extends mW{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&pk.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`in.(${t})`),this}notIn(n,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&pk.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`not.in.(${t})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:t,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=t===void 0?"":`(${t})`;return this.url.searchParams.append(n,`${s}fts${i}.${e}`),this}match(n){return Object.entries(n).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(n,e,t){return this.url.searchParams.append(n,`not.${e}.${t}`),this}or(n,{foreignTable:e,referencedTable:t=e}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${n})`),this}filter(n,e,t){return this.url.searchParams.append(n,`${e}.${t}`),this}},gW=class{constructor(n,{headers:e={},schema:t,fetch:r}){this.url=n,this.headers=new Headers(e),this.schema=t,this.fetch=r}select(n,e){const{head:t=!1,count:r}=e??{},s=t?"HEAD":"GET";let i=!1;const o=(n??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new cd({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:e,defaultToNull:t=!0}={}){var r;const s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),t||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const i=n.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(i.length>0){const o=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new cd({method:s,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(n,{onConflict:e,ignoreDuplicates:t=!1,count:r,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const a=n.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){const c=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new cd({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(n,{count:e}={}){var t;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new cd({method:r,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:n}={}){var e;const t="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new cd({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},vW=class mD{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new gW(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new mD(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const c=new URL(`${this.url}/rpc/${e}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(t).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(a="POST",u=t);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new cd({method:a,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class yW{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const wW="2.89.0",bW=`realtime-js/${wW}`,gD="1.0.0",xW="2.0.0",mk=gD,pS=1e4,_W=1e3,SW=100;var ha;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ha||(ha={}));var $t;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})($t||($t={}));var Gs;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Gs||(Gs={}));var mS;(function(n){n.websocket="websocket"})(mS||(mS={}));var Xl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Xl||(Xl={}));class EW{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const s=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var t,r;const s=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,t,r){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",c=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+o.length+u.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let v=new DataView(p),m=0;v.setUint8(m++,this.KINDS.userBroadcastPush),v.setUint8(m++,c.length),v.setUint8(m++,a.length),v.setUint8(m++,o.length),v.setUint8(m++,u.length),v.setUint8(m++,h.length),v.setUint8(m++,t),Array.from(c,g=>v.setUint8(m++,g.charCodeAt(0))),Array.from(a,g=>v.setUint8(m++,g.charCodeAt(0))),Array.from(o,g=>v.setUint8(m++,g.charCodeAt(0))),Array.from(u,g=>v.setUint8(m++,g.charCodeAt(0))),Array.from(h,g=>v.setUint8(m++,g.charCodeAt(0)));var w=new Uint8Array(p.byteLength+r.byteLength);return w.set(new Uint8Array(p),0),w.set(new Uint8Array(r),p.byteLength),w.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,c]=r;return t({join_ref:s,ref:i,topic:o,event:a,payload:c})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,s)}}_decodeUserBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2),o=t.getUint8(3),a=t.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(e.slice(c,c+s));c=c+s;const d=r.decode(e.slice(c,c+i));c=c+i;const h=r.decode(e.slice(c,c+o));c=c+o;const f=e.slice(c,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,v={type:this.BROADCAST_EVENT,event:d,payload:p};return o>0&&(v.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>t.includes(r)))}}class vD{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qe;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Qe||(Qe={}));const gk=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=AW(o,n,e,s),i),{}):{}},AW=(n,e,t,r)=>{const s=e.find(a=>a.name===n),i=s==null?void 0:s.type,o=t[n];return i&&!r.includes(i)?yD(i,o):gS(o)},yD=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return PW(e,t)}switch(n){case Qe.bool:return CW(e);case Qe.float4:case Qe.float8:case Qe.int2:case Qe.int4:case Qe.int8:case Qe.numeric:case Qe.oid:return TW(e);case Qe.json:case Qe.jsonb:return kW(e);case Qe.timestamp:return RW(e);case Qe.abstime:case Qe.date:case Qe.daterange:case Qe.int4range:case Qe.int8range:case Qe.money:case Qe.reltime:case Qe.text:case Qe.time:case Qe.timestamptz:case Qe.timetz:case Qe.tsrange:case Qe.tstzrange:return gS(e);default:return gS(e)}},gS=n=>n,CW=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},TW=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},kW=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},PW=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>yD(e,a))}return n},RW=n=>typeof n=="string"?n.replace(" ","T"):n,wD=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Rx{constructor(e,t,r={},s=pS){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var vk;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(vk||(vk={}));class tm{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tm.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=tm.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=tm.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(w=>w.presence_ref),p=h.map(w=>w.presence_ref),v=d.filter(w=>p.indexOf(w.presence_ref)<0),m=h.filter(w=>f.indexOf(w.presence_ref)<0);v.length>0&&(a[u]=v),m.length>0&&(c[u]=m)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),d.length>0){const h=e[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,d,c)}),this.map(o,(a,c)=>{let u=e[a];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,s(a,u,c),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yk;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(yk||(yk={}));var nm;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(nm||(nm={}));var Yi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Yi||(Yi={}));class Id{constructor(e,t={config:{}},r){var s,i;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=$t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Rx(this,Gs.join,this.params,this.timeout),this.rejoinTimer=new vD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=$t.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gs.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new tm(this),this.broadcastEndpointURL=wD(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==$t.closed){const{config:{broadcast:o,presence:a,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[nm.PRESENCE]&&this.bindings[nm.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Yi.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Yi.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(Yi.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,w=(v=m==null?void 0:m.length)!==null&&v!==void 0?v:0,g=[];for(let b=0;b<w;b++){const y=m[b],{filter:{event:E,schema:T,table:P,filter:k}}=y,R=p&&p[b];if(R&&R.event===E&&Id.isFilterValueEqual(R.schema,T)&&Id.isFilterValueEqual(R.table,P)&&Id.isFilterValueEqual(R.filter,k))g.push(Object.assign(Object.assign({},y),{id:R.id}));else{this.unsubscribe(),this.state=$t.errored,e==null||e(Yi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Yi.SUBSCRIBED);return}}).receive("error",p=>{this.state=$t.errored,e==null||e(Yi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Yi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===$t.joined&&e===nm.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var s;if(t==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{const u=await a.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=$t.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Rx(this,Gs.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=$t.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Rx(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>SW){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:d}=Gs;if(r&&[a,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,t,r);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var v,m,w;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(m=p.filter)===null||m===void 0?void 0:m.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,m,w,g,b,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const E=p.id,T=(v=p.filter)===null||v===void 0?void 0:v.event;return E&&((m=t.ids)===null||m===void 0?void 0:m.includes(E))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const E=(b=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return E==="*"||E===((y=t==null?void 0:t.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:m,table:w,commit_timestamp:g,type:b,errors:y}=v;f=Object.assign(Object.assign({},{schema:m,table:w,commit_timestamp:g,eventType:b,new:{},old:{},errors:y}),this._getPayloadRecords(v))}p.callback(f,r)})}_isClosed(){return this.state===$t.closed}_isJoined(){return this.state===$t.joined}_isJoining(){return this.state===$t.joining}_isLeaving(){return this.state===$t.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Id.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Gs.close,{},e)}_onError(e){this._on(Gs.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$t.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=gk(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=gk(e.columns,e.old_record)),t}}const Nx=()=>{},Sy={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},NW=[1e3,2e3,5e3,1e4],IW=1e4,OW=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class MW{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pS,this.transport=null,this.heartbeatIntervalMs=Sy.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Nx,this.ref=0,this.reconnectTimer=null,this.vsn=mk,this.logger=Nx,this.conn=null,this.sendBuffer=[],this.serializer=new EW,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${mS.websocket}`,this.httpEndpoint=wD(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=yW.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ha.connecting:return Xl.Connecting;case ha.open:return Xl.Open;case ha.closing:return Xl.Closing;default:return Xl.Closed}}isConnected(){return this.connectionState()===Xl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Id(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(_W,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Sy.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=t,a=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===ha.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ha.open||this.conn.readyState===ha.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Gs.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([OW],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,r=!1;if(e)t=e,r=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const i={access_token:t,version:bW};t&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Gs.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new vD(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Sy.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,i,o,a,c,u,d,h,f,p;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:pS,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Sy.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Nx,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:mk,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:v=>NW[v-1]||IW,this.vsn){case gD:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(v,m)=>m(JSON.stringify(v)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(v,m)=>m(JSON.parse(v));break;case xW:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Tm=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function DW(n,e,t){const r=new URL(e,n);if(t)for(const[s,i]of Object.entries(t))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function LW(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function FW(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:r,query:s,body:i,headers:o}){const a=DW(n.baseUrl,r,s),c=await LW(n.auth),u=await e(a,{method:t,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const p=h?f:void 0,v=p==null?void 0:p.error;throw new Tm((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:p})}return{status:u.status,headers:u.headers,data:f}}}}function Ey(n){return n.join("")}var jW=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:Ey(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ey(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ey(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ey(n.namespace)}`}),!0}catch(e){if(e instanceof Tm&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof Tm&&t.status===409)return;throw t}}};function nd(n){return n.join("")}var BW=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nd(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${nd(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${nd(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${nd(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nd(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${nd(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof Tm&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof Tm&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},$W=class{constructor(n){var r;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=FW({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(r=n.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new jW(this.client,e),this.tableOps=new BW(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}},Ib=class extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}};function pt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var UW=class extends Ib{constructor(n,e,t){super(n),this.name="StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},vS=class extends Ib{constructor(n,e){super(n),this.name="StorageUnknownError",this.originalError=e}};const N1=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),zW=()=>Response,yS=n=>{if(Array.isArray(n))return n.map(t=>yS(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=yS(r)}),e},HW=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},VW=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function km(n){"@babel/helpers - typeof";return km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},km(n)}function WW(n,e){if(km(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function GW(n){var e=WW(n,"string");return km(e)=="symbol"?e:e+""}function qW(n,e,t){return(e=GW(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function ae(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wk(Object(t),!0).forEach(function(r){qW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const Ix=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},KW=async(n,e,t)=>{n instanceof await zW()&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{const s=n.status||500,i=(r==null?void 0:r.statusCode)||s+"";e(new UW(Ix(r),s,i))}).catch(r=>{e(new vS(Ix(r),r))}):e(new vS(Ix(n),n))},XW=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?s:(HW(r)?(s.headers=ae({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),ae(ae({},s),t))};async function zv(n,e,t,r,s,i){return new Promise((o,a)=>{n(t,XW(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>KW(c,a,r))})}async function Pm(n,e,t,r){return zv(n,"GET",e,t,r)}async function Rs(n,e,t,r,s){return zv(n,"POST",e,r,s,t)}async function wS(n,e,t,r,s){return zv(n,"PUT",e,r,s,t)}async function YW(n,e,t,r){return zv(n,"HEAD",e,ae(ae({},t),{},{noResolveJson:!0}),r)}async function I1(n,e,t,r,s){return zv(n,"DELETE",e,r,s,t)}var QW=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(pt(e))return{data:null,error:e};throw e}}};let bD;bD=Symbol.toStringTag;var JW=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[bD]="BlobDownloadBuilder",this.promise=null}asStream(){return new QW(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(pt(e))return{data:null,error:e};throw e}}};const ZW={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bk={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var e6=class{constructor(n,e={},t,r){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.bucketId=t,this.fetch=N1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,e,t,r){var s=this;try{let i;const o=ae(ae({},bk),r);let a=ae(ae({},s.headers),n==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&t instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",t)):typeof FormData<"u"&&t instanceof FormData?(i=t,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=t,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=ae(ae({},a),r.headers));const u=s._removeEmptyFolders(e),d=s._getFinalPath(u),h=await(n=="PUT"?wS:Rs)(s.fetch,`${s.url}/object/${d}`,i,ae({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(pt(i))return{data:null,error:i};throw i}}async upload(n,e,t){return this.uploadOrUpdate("POST",n,e,t)}async uploadToSignedUrl(n,e,t,r){var s=this;const i=s._removeEmptyFolders(n),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let c;const u=ae({upsert:bk.upsert},r),d=ae(ae({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&t instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",t)):typeof FormData<"u"&&t instanceof FormData?(c=t,c.append("cacheControl",u.cacheControl)):(c=t,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await wS(s.fetch,a.toString(),c,{headers:d})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(pt(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(n,e){var t=this;try{let r=t._getFinalPath(n);const s=ae({},t.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await Rs(t.fetch,`${t.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(t.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ib("No token returned by API");return{data:{signedUrl:o.toString(),path:n,token:a},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async update(n,e,t){return this.uploadOrUpdate("PUT",n,e,t)}async move(n,e,t){var r=this;try{return{data:await Rs(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(pt(s))return{data:null,error:s};throw s}}async copy(n,e,t){var r=this;try{return{data:{path:(await Rs(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(pt(s))return{data:null,error:s};throw s}}async createSignedUrl(n,e,t){var r=this;try{let s=r._getFinalPath(n),i=await Rs(r.fetch,`${r.url}/object/sign/${s}`,ae({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:r.headers});const o=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(pt(s))return{data:null,error:s};throw s}}async createSignedUrls(n,e,t){var r=this;try{const s=await Rs(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:n},{headers:r.headers}),i=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{data:s.map(o=>ae(ae({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(pt(s))return{data:null,error:s};throw s}}download(n,e){const t=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(n),o=()=>Pm(this.fetch,`${this.url}/${t}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new JW(o,this.shouldThrowOnError)}async info(n){var e=this;const t=e._getFinalPath(n);try{return{data:yS(await Pm(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async exists(n){var e=this;const t=e._getFinalPath(n);try{return await YW(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(pt(r)&&r instanceof vS){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(n,e){const t=this._getFinalPath(n),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${t}${a}`)}}}async remove(n){var e=this;try{return{data:await I1(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}}async list(n,e,t){var r=this;try{const s=ae(ae(ae({},ZW),e),{},{prefix:n||""});return{data:await Rs(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},t),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(pt(s))return{data:null,error:s};throw s}}async listV2(n,e){var t=this;try{const r=ae({},n);return{data:await Rs(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,r,{headers:t.headers},e),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}};const xD="2.89.0",_D={"X-Client-Info":`storage-js/${xD}`};var t6=class{constructor(n,e={},t,r){this.shouldThrowOnError=!1;const s=new URL(n);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=ae(ae({},_D),e),this.fetch=N1(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var e=this;try{const t=e.listBucketOptionsToQueryString(n);return{data:await Pm(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}}async getBucket(n){var e=this;try{return{data:await Pm(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}}async createBucket(n,e={public:!1}){var t=this;try{return{data:await Rs(t.fetch,`${t.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async updateBucket(n,e){var t=this;try{return{data:await wS(t.fetch,`${t.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async emptyBucket(n){var e=this;try{return{data:await Rs(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await I1(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},n6=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ae(ae({},_D),e),this.fetch=N1(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await Rs(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}}async listBuckets(n){var e=this;try{const t=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&t.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&t.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&t.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&t.set("sortOrder",n.sortOrder),n!=null&&n.search&&t.set("search",n.search);const r=t.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await Pm(e.fetch,s,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await I1(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}}from(n){var e=this;if(!VW(n))throw new Ib("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new $W({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(t,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}};const O1={"X-Client-Info":`storage-js/${xD}`,"Content-Type":"application/json"};var SD=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function jr(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var Ox=class extends SD{constructor(n,e,t){super(n),this.name="StorageVectorsApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},r6=class extends SD{constructor(n,e){super(n),this.name="StorageVectorsUnknownError",this.originalError=e}};const M1=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),s6=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},xk=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),i6=async(n,e,t)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const r=n.status||500,s=n;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";e(new Ox(xk(i),r,o))}).catch(()=>{const i=r+"";e(new Ox(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";e(new Ox(s.statusText||`HTTP ${r} error`,r,i))}}else e(new r6(xk(n),n))},o6=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return r?(s6(r)?(s.headers=ae({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,ae(ae({},s),t)):s};async function a6(n,e,t,r,s,i){return new Promise((o,a)=>{n(t,o6(e,r,s,i)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>i6(c,a,r))})}async function Br(n,e,t,r,s){return a6(n,"POST",e,r,s,t)}var l6=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ae(ae({},O1),e),this.fetch=M1(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var e=this;try{return{data:await Br(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}}async getIndex(n,e){var t=this;try{return{data:await Br(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jr(r))return{data:null,error:r};throw r}}async listIndexes(n){var e=this;try{return{data:await Br(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}}async deleteIndex(n,e){var t=this;try{return{data:await Br(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jr(r))return{data:null,error:r};throw r}}},c6=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ae(ae({},O1),e),this.fetch=M1(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var e=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Br(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}}async getVectors(n){var e=this;try{return{data:await Br(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}}async listVectors(n){var e=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await Br(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}}async queryVectors(n){var e=this;try{return{data:await Br(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}}async deleteVectors(n){var e=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Br(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}}},u6=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ae(ae({},O1),e),this.fetch=M1(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await Br(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}}async getBucket(n){var e=this;try{return{data:await Br(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}}async listBuckets(n={}){var e=this;try{return{data:await Br(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await Br(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jr(t))return{data:null,error:t};throw t}}},d6=class extends u6{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new h6(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,t=this;return e().call(t,n)}async getBucket(n){var e=()=>super.getBucket,t=this;return e().call(t,n)}async listBuckets(n={}){var e=()=>super.listBuckets,t=this;return e().call(t,n)}async deleteBucket(n){var e=()=>super.deleteBucket,t=this;return e().call(t,n)}},h6=class extends l6{constructor(n,e,t,r){super(n,e,r),this.vectorBucketName=t}async createIndex(n){var e=()=>super.createIndex,t=this;return e().call(t,ae(ae({},n),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,t=this;return e().call(t,ae(ae({},n),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,n)}index(n){return new f6(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},f6=class extends c6{constructor(n,e,t,r,s){super(n,e,s),this.vectorBucketName=t,this.indexName=r}async putVectors(n){var e=()=>super.putVectors,t=this;return e().call(t,ae(ae({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(n){var e=()=>super.getVectors,t=this;return e().call(t,ae(ae({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,t=this;return e().call(t,ae(ae({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,t=this;return e().call(t,ae(ae({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,t=this;return e().call(t,ae(ae({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},p6=class extends t6{constructor(n,e={},t,r){super(n,e,t,r)}from(n){return new e6(this.url,this.headers,n,this.fetch)}get vectors(){return new d6(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new n6(this.url+"/iceberg",this.headers,this.fetch)}};const ED="2.89.0",ud=30*1e3,bS=3,Mx=bS*ud,m6="http://localhost:9999",g6="supabase.auth.token",v6={"X-Client-Info":`gotrue-js/${ED}`},xS="X-Supabase-Api-Version",AD={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},y6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,w6=10*60*1e3;class Rm extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function se(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class b6 extends Rm{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function x6(n){return se(n)&&n.name==="AuthApiError"}class Yl extends Rm{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Zo extends Rm{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class fr extends Zo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _6(n){return se(n)&&n.name==="AuthSessionMissingError"}class rd extends Zo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ay extends Zo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Cy extends Zo{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function S6(n){return se(n)&&n.name==="AuthImplicitGrantRedirectError"}class _k extends Zo{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class E6 extends Zo{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class _S extends Zo{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Dx(n){return se(n)&&n.name==="AuthRetryableFetchError"}class Sk extends Zo{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class SS extends Zo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const p0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ek=` 	
\r=`.split(""),A6=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Ek.length;e+=1)n[Ek[e].charCodeAt(0)]=-2;for(let e=0;e<p0.length;e+=1)n[p0[e].charCodeAt(0)]=e;return n})();function Ak(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(p0[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(p0[r]),e.queuedBits-=6}}function CD(n,e,t){const r=A6[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Ck(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{k6(o,r,t)};for(let o=0;o<n.length;o+=1)CD(n.charCodeAt(o),s,i);return e.join("")}function C6(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function T6(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}C6(r,e)}}function k6(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Xd(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)CD(n.charCodeAt(s),t,r);return new Uint8Array(e)}function P6(n){const e=[];return T6(n,t=>e.push(t)),new Uint8Array(e)}function ic(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>Ak(s,t,r)),Ak(null,t,r),e.join("")}function R6(n){return Math.round(Date.now()/1e3)+n}function N6(){return Symbol("auth-callback")}const on=()=>typeof window<"u"&&typeof document<"u",Ul={tested:!1,writable:!1},TD=()=>{if(!on())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ul.tested)return Ul.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ul.tested=!0,Ul.writable=!0}catch{Ul.tested=!0,Ul.writable=!1}return Ul.writable};function I6(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const kD=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),O6=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",dd=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},zl=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},rn=async(n,e)=>{await n.removeItem(e)};class Ob{constructor(){this.promise=new Ob.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ob.promiseConstructor=Promise;function Lx(n){const e=n.split(".");if(e.length!==3)throw new SS("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!y6.test(e[r]))throw new SS("JWT not in base64url format");return{header:JSON.parse(Ck(e[0])),payload:JSON.parse(Ck(e[1])),signature:Xd(e[2]),raw:{header:e[0],payload:e[1]}}}async function M6(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function D6(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function L6(n){return("0"+n.toString(16)).substr(-2)}function F6(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,L6).join("")}async function j6(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function B6(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await j6(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function sd(n,e,t=!1){const r=F6();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await dd(n,`${e}-code-verifier`,s);const i=await B6(r);return[i,r===i?"plain":"s256"]}const $6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function U6(n){const e=n.headers.get(xS);if(!e||!e.match($6))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function z6(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function H6(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const V6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function id(n){if(!V6.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Fx(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function W6(n,e){return new Proxy(n,{get:(t,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,s)}})}function Tk(n){return JSON.parse(JSON.stringify(n))}const Wl=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),G6=[502,503,504];async function kk(n){var e;if(!O6(n))throw new _S(Wl(n),0);if(G6.includes(n.status))throw new _S(Wl(n),n.status);let t;try{t=await n.json()}catch(i){throw new Yl(Wl(i),i)}let r;const s=U6(n);if(s&&s.getTime()>=AD["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Sk(Wl(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new fr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Sk(Wl(t),n.status,t.weak_password.reasons);throw new b6(Wl(t),n.status||500,r)}const q6=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function oe(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[xS]||(i[xS]=AD["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await K6(n,e,t+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function K6(n,e,t,r,s,i){const o=q6(e,r,s,i);let a;try{a=await n(t,Object.assign({},o))}catch(c){throw console.error(c),new _S(Wl(c),0)}if(a.ok||await kk(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await kk(c)}}function Es(n){var e;let t=null;Q6(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=R6(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Pk(n){const e=Es(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ma(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function X6(n){return{data:n,error:null}}function Y6(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,o=Qf(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function Rk(n){return n}function Q6(n){return n.access_token&&n.refresh_token&&n.expires_in}const jx=["global","local","others"];class J6{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=kD(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=jx[0]){if(jx.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jx.join(", ")}`);try{return await oe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ma})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Qf(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Y6,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(se(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ma})}catch(t){if(se(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},d=await oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Rk});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(se(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){id(e);try{return await oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ma})}catch(t){if(se(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){id(e);try{return await oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ma})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){id(e);try{return await oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ma})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){id(e.userId);try{const{data:t,error:r}=await oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(se(t))return{data:null,error:t};throw t}}async _deleteFactor(e){id(e.userId),id(e.id);try{return{data:await oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,s,i,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},d=await oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Rk});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(se(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(se(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(se(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(se(t))return{data:null,error:t};throw t}}}function Nk(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const od={debug:!!(globalThis&&TD()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class PD extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Z6 extends PD{}async function e8(n,e,t){od.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),od.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){od.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{od.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw od.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Z6(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(od.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function t8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function RD(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function n8(n){return parseInt(n,16)}function r8(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function s8(n){var e;const{chainId:t,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:c,resources:u,scheme:d,uri:h,version:f}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const p=RD(n.address),v=d?`${d}://${r}`:r,m=n.statement?`${n.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${p}

${m}`;let g=`URI: ${h}
Version: ${f}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),c&&(g+=`
Request ID: ${c}`),u){let b=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);b+=`
- ${y}`}g+=b}return`${w}
${g}`}class Dt extends Error{constructor({message:e,code:t,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=t}}class m0 extends Dt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function i8({error:n,options:e}){var t,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Dt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=i.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Dt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Dt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Dt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Dt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Dt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Dt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Dt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(ND(o)){if(i.rp.id!==o)return new Dt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Dt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Dt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Dt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Dt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function o8({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Dt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Dt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(ND(r)){if(t.rpId!==r)return new Dt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Dt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Dt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Dt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class a8{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const l8=new a8;function c8(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,s=Qf(n,["challenge","user","excludeCredentials"]),i=Xd(e).buffer,o=Object.assign(Object.assign({},t),{id:Xd(t.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Xd(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function u8(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=Qf(n,["challenge","allowCredentials"]),s=Xd(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(t&&t.length>0){i.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const a=t[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Xd(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function d8(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:ic(new Uint8Array(n.response.attestationObject)),clientDataJSON:ic(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function h8(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),s=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:ic(new Uint8Array(s.authenticatorData)),clientDataJSON:ic(new Uint8Array(s.clientDataJSON)),signature:ic(new Uint8Array(s.signature)),userHandle:s.userHandle?ic(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ND(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Ik(){var n,e;return!!(on()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function f8(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new m0("Browser returned unexpected credential type",e)}:{data:null,error:new m0("Empty credential response",e)}}catch(e){return{data:null,error:i8({error:e,options:n})}}}async function p8(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new m0("Browser returned unexpected credential type",e)}:{data:null,error:new m0("Empty credential response",e)}}catch(e){return{data:null,error:o8({error:e,options:n})}}}const m8={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},g8={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function g0(...n){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),t=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of n)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(t(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=g0(a,o):r[i]=g0(o)}else r[i]=o}return r}function v8(n,e){return g0(m8,n,e||{})}function y8(n,e){return g0(g8,n,e||{})}class w8{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:a};const c=s??l8.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=v8(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await f8({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=y8(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await p8(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return se(o)?{data:null,error:o}:{data:null,error:new Yl("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!t)return{data:null,error:new Rm("rpId is required for WebAuthn authentication")};try{if(!Ik())return{data:null,error:new Yl("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:t,rpOrigins:r,credential_response:c.credential_response}})}catch(o){return se(o)?{data:null,error:o}:{data:null,error:new Yl("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!t)return{data:null,error:new Rm("rpId is required for WebAuthn registration")};try{if(!Ik())return{data:null,error:new Yl("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:t,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return se(o)?{data:null,error:o}:{data:null,error:new Yl("Unexpected error in register",o)}}}}t8();const b8={url:m6,storageKey:g6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:v6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Ok(n,e,t){return await t()}const ad={};class Nm{get jwks(){var e,t;return(t=(e=ad[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){ad[this.storageKey]=Object.assign(Object.assign({},ad[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=ad[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ad[this.storageKey]=Object.assign(Object.assign({},ad[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},b8),e);if(this.storageKey=i.storageKey,this.instanceID=(t=Nm.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Nm.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&on()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new J6({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=kD(i.fetch),this.lock=i.lock||Ok,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&on()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=e8:this.lock=Ok,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new w8(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:TD()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Nk(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Nk(this.memoryStorage)),on()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ED}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(on()&&(t=I6(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),on()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),S6(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return se(t)?this._returnResult({error:t}):this._returnResult({error:new Yl("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Es}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await sd(this.storage,this.storageKey)),i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},xform:Es})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Es})}else throw new Ay("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await rn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await rn(this.storage,`${this.storageKey}-code-verifier`),se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Pk})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Pk})}else throw new Ay("You must provide either an email or phone number and a password");const{data:r,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new rd;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(se(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,s,i,o,a,c,u,d,h,f;let p,v;if("message"in e)p=e.message,v=e.signature;else{const{chain:m,wallet:w,statement:g,options:b}=e;let y;if(on())if(typeof w=="object")y=w;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")y=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=w}const E=new URL((t=b==null?void 0:b.url)!==null&&t!==void 0?t:window.location.href),T=await y.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=RD(T[0]);let k=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!k){const N=await y.request({method:"eth_chainId"});k=n8(N)}const R={domain:E.host,address:P,statement:g,uri:E.href,version:"1",chainId:k,nonce:(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=s8(R),v=await y.request({method:"personal_sign",params:[r8(p),P]})}try{const{data:m,error:w}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:v},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Es});if(w)throw w;if(!m||!m.session||!m.user){const g=new rd;return this._returnResult({data:{user:null,session:null},error:g})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:w})}catch(m){if(se(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(e){var t,r,s,i,o,a,c,u,d,h,f,p;let v,m;if("message"in e)v=e.message,m=e.signature;else{const{chain:w,wallet:g,statement:b,options:y}=e;let E;if(on())if(typeof g=="object")E=g;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))E=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=g}const T=new URL((t=y==null?void 0:y.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in E&&E.signIn){const P=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),b?{statement:b}:null));let k;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")k=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)k=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)v=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),m=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${T.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const P=await E.signMessage(new TextEncoder().encode(v),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=P}}try{const{data:w,error:g}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:ic(m)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Es});if(g)throw g;if(!w||!w.session||!w.user){const b=new rd;return this._returnResult({data:{user:null,session:null},error:b})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:g})}catch(w){if(se(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const t=await zl(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{if(!r&&this.flowType==="pkce")throw new E6;const{data:i,error:o}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Es});if(await rn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new rd;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await rn(this.storage,`${this.storageKey}-code-verifier`),se(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:o}=e,a=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Es}),{data:c,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new rd;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(t){if(se(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await sd(this.storage,this.storageKey));const{error:h}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:d}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Ay("You must provide either an email or phone number.")}catch(a){if(await rn(this.storage,`${this.storageKey}-code-verifier`),se(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Es});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var t,r,s,i,o;try{let a=null,c=null;this.flowType==="pkce"&&([a,c]=await sd(this.storage,this.storageKey));const u=await oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:c}),headers:this.headers,xform:X6});return!((i=u.data)===null||i===void 0)&&i.url&&on()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await rn(this.storage,`${this.storageKey}-code-verifier`),se(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new fr;const{error:s}=await oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(se(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await oe(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await oe(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Ay("You must provide either an email or phone number and a type")}catch(t){if(se(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await zl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Mx:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await zl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Fx()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=W6(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ma}):await this._useSession(async t=>{var r,s,i;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fr}:await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ma})})}catch(t){if(se(t))return _6(t)&&(await this._removeSession(),await rn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new fr;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await sd(this.storage,this.storageKey));const{data:u,error:d}=await oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:ma});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await rn(this.storage,`${this.storageKey}-code-verifier`),se(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new fr;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:o}=Lx(e.access_token);if(o.exp&&(r=o.exp,s=r<=t),s){const{data:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(t){if(se(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new fr;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(se(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!on())throw new Cy("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Cy(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new _k("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Cy("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _k("No code detected.");const{data:b,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:u}=e;if(!i||!a||!o||!u)throw new Cy("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=ud&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:m,error:w}=await this._getUser(i);if(w)throw w;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(r){if(se(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await zl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(x6(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await rn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=N6(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await sd(this.storage,this.storageKey,!0));try{return await oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(await rn(this.storage,`${this.storageKey}-code-verifier`),se(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await oe(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return on()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(se(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:s,data:{session:i}}=t;if(s)throw s;const{options:o,provider:a,token:c,access_token:u,nonce:d}=e,h=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Es}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new rd}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(s){if(await rn(this.storage,`${this.storageKey}-code-verifier`),se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)throw o;return await oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await D6(async s=>(s>0&&await M6(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Es})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Dx(i)&&Date.now()+o-r<ud})}catch(r){if(this._debug(t,"error",r),se(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),on()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await zl(this.storage,this.storageKey);if(s&&this.userStorage){let o=await zl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await dd(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Fx()}else if(s&&!s.user&&!s.user){const o=await zl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await rn(this.storage,this.storageKey+"-user"),await dd(this.storage,this.storageKey,s)):s.user=Fx()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Mx;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Mx}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Dx(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new fr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ob;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new fr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),se(i)){const o={data:null,error:i};return Dx(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await rn(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await dd(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const i=Tk(s);await dd(this.storage,this.storageKey,i)}else{const s=Tk(t);await dd(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await rn(this.storage,this.storageKey),await rn(this.storage,this.storageKey+"-code-verifier"),await rn(this.storage,this.storageKey+"-user"),this.userStorage&&await rn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&on()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ud);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/ud);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ud}ms, refresh threshold is ${bS} ticks`),s<=bS&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof PD)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!on()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await sd(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?this._returnResult({data:null,error:i}):await oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await oe(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?d8(e.webauthn.credential_response):h8(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:c}=await oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:c}))})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=await oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c8(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u8(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Lx(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new fr})})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new fr});const o=await oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&on()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new fr});const o=await oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&on()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new fr})})}catch(e){if(se(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?(await oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new fr})})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+w6>s)return r;const{data:i,error:o}=await oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:p,error:v}=await this.getSession();if(v||!p.session)return this._returnResult({data:null,error:v});r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=Lx(r);t!=null&&t.allowExpired||z6(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const d=H6(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,P6(`${a}.${c}`)))throw new SS("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}}Nm.nextInstanceID={};const x8=Nm,_8="2.89.0";let Sp="";typeof Deno<"u"?Sp="deno":typeof document<"u"?Sp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Sp="react-native":Sp="node";const S8={"X-Client-Info":`supabase-js-${Sp}/${_8}`},E8={headers:S8},A8={schema:"public"},C8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},T8={};function Im(n){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Im(n)}function k8(n,e){if(Im(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function P8(n){var e=k8(n,"string");return Im(e)=="symbol"?e:e+""}function R8(n,e,t){return(e=P8(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function At(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mk(Object(t),!0).forEach(function(r){R8(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Mk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const N8=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),I8=()=>Headers,O8=(n,e,t)=>{const r=N8(t),s=I8();return async(i,o)=>{var a;const c=(a=await e())!==null&&a!==void 0?a:n;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,At(At({},o),{},{headers:u}))}};function M8(n){return n.endsWith("/")?n:n+"/"}function D8(n,e){var t,r;const{db:s,auth:i,realtime:o,global:a}=n,{db:c,auth:u,realtime:d,global:h}=e,f={db:At(At({},c),s),auth:At(At({},u),i),realtime:At(At({},d),o),storage:{},global:At(At(At({},h),a),{},{headers:At(At({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?f.accessToken=n.accessToken:delete f.accessToken,f}function L8(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(M8(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var F8=class extends x8{constructor(n){super(n)}},j8=class{constructor(n,e,t){var r,s;this.supabaseUrl=n,this.supabaseKey=e;const i=L8(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:A8,realtime:T8,auth:At(At({},C8),{},{storageKey:o}),global:E8},c=D8(t??{},a);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=O8(e,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(At({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new vW(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new p6(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new hW(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,t)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,t;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:s,storageKey:i,flowType:o,lock:a,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new F8({url:this.authUrl.href,headers:At(At({},f),d),storageKey:i,autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:s,flowType:o,lock:a,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new MW(this.realtimeUrl.href,At(At({},n),{},{params:At(At({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(n,e,t){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const B8=(n,e,t)=>new j8(n,e,t);function $8(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}$8()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const U8="https://vhypunalinjlrgjxuvxz.supabase.co",z8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZoeXB1bmFsaW5qbHJnanh1dnh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY1NTgyMDQsImV4cCI6MjA4MjEzNDIwNH0.8BXZUHD3TzyZZ7xD1dOIUFngCdO_my-rPSL7U8ZPxzg",H8=B8(U8,z8,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});async function Dk(n,e,t,r="full"){try{const{data:s,error:i}=await H8.functions.invoke("extract-document",{body:{imageBase64:n,documentType:e,mimeType:t,extractionMode:r}});return i?(console.error("Edge function error:",i),{success:!1,error:i.message}):s}catch(s){return console.error("Extraction error:",s),{success:!1,error:s instanceof Error?s.message:"Failed to extract document"}}}function V8(n,e){if(e)return"full";switch(n){case"pan":return"pan_only";case"voterId":return"voter_only";case"drivingLicense":return"dl_only";default:return"full"}}function Lk(n){return new Promise((e,t)=>{const r=new FileReader;r.readAsDataURL(n),r.onload=()=>{const i=r.result.split(",")[1];e(i)},r.onerror=s=>t(s)})}function ES(n){if(!n)return{isValid:!1,error:"Aadhaar number is required"};if(/[a-zA-Z]/.test(n))return{isValid:!1,error:"Aadhaar number should only contain digits"};const e=n.replace(/\D/g,"");return e.length!==12?{isValid:!1,error:`Aadhaar number must be exactly 12 digits (found ${e.length} digits)`}:{isValid:!0,cleanedNumber:`${e.slice(0,4)} ${e.slice(4,8)} ${e.slice(8,12)}`}}function W8(n){return n.replace(/[a-zA-Z]/g,"")}function Fk(n){if(!n)return{isValid:!1,error:"PAN number is required"};const e=n.toUpperCase().replace(/\s/g,"");return/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(e)?{isValid:!0,cleanedNumber:e}:{isValid:!1,error:"PAN must be 5 letters, 4 digits, 1 letter (e.g., ABCDE1234F)"}}function G8(n){return n.toUpperCase().replace(/\s/g,"")}function jk(n){if(!n)return{isValid:!1,error:"Driving License number is required"};const e=n.toUpperCase().replace(/\s/g,"");return/^[A-Z]{2}[0-9]{13}$/.test(e)?{isValid:!0,cleanedNumber:e}:{isValid:!1,error:"DL must be 2 letters + 13 digits (e.g., MH1234567890123)"}}function q8(n){return n.toUpperCase().replace(/\s/g,"")}function Bk(n){if(!n)return{isValid:!1,error:"Pincode is required"};const e=n.replace(/\D/g,"");return e.length!==6?{isValid:!1,error:`Pincode must be exactly 6 digits (found ${e.length} digits)`}:e.startsWith("0")?{isValid:!1,error:"Pincode cannot start with 0"}:{isValid:!0,cleanedNumber:e}}function K8(n){return n.replace(/\D/g,"").slice(0,6)}function $k(n){if(!n)return{isValid:!1,error:"Voter ID number is required"};const e=n.toUpperCase().replace(/\s/g,"");return/^[A-Z]{3}[0-9]{7}$/.test(e)?{isValid:!0,cleanedNumber:e}:{isValid:!1,error:"Voter ID must be 3 letters + 7 digits (e.g., ABC1234567)"}}function X8(n){return n.toUpperCase().replace(/\s/g,"")}const jn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),AS=[.001,0,0,.001,0,0],Bx=1.35,Or={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ga={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Om="pdfjs_internal_editor_",fe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Pe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Y8={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},CS={TRIANGLES:1,LATTICE:2,PATCH:3},sn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ew={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ot={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},hd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Mb={ERRORS:0,WARNINGS:1,INFOS:5},Mm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},dp={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Q8={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Db=Mb.WARNINGS;function J8(n){Number.isInteger(n)&&(Db=n)}function Z8(){return Db}function Lb(n){Db>=Mb.INFOS&&console.info(`Info: ${n}`)}function le(n){Db>=Mb.WARNINGS&&console.warn(`Warning: ${n}`)}function Ye(n){throw new Error(n)}function Re(n,e){n||Ye(e)}function eG(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ID(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=iG(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return eG(r)?r:null}function OD(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&ID(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function ce(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const Gu=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class Uk extends Gu{constructor(e,t){super(e,"PasswordException"),this.code=t}}class $x extends Gu{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class TS extends Gu{constructor(e){super(e,"InvalidPDFException")}}class v0 extends Gu{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class tG extends Gu{constructor(e){super(e,"FormatError")}}class kl extends Gu{constructor(e){super(e,"AbortException")}}function MD(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Ye("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),o=n.subarray(s,i);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function Hv(n){typeof n!="string"&&Ye("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function nG(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function rG(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function sG(){try{return new Function(""),!0}catch{return!1}}class vn{static get isLittleEndian(){return ce(this,"isLittleEndian",rG())}static get isEvalSupported(){return ce(this,"isEvalSupported",sG())}static get isOffscreenCanvasSupported(){return ce(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ce(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return ce(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return ce(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return ce(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return ce(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Ux=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var $o,tw,kS;class te{static makeHexColor(e,t,r){return`#${Ux[e]}${Ux[t]}${Ux[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,r=0){const s=e[r],i=e[r+1];e[r]=s*t[0]+i*t[2]+t[4],e[r+1]=s*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const s=t[0],i=t[1],o=t[2],a=t[3],c=t[4],u=t[5];for(let d=0;d<6;d+=2){const h=e[r+d],f=e[r+d+1];e[r+d]=h*s+f*o+c,e[r+d+1]=h*i+f*a+u}}static applyInverseTransform(e,t){const r=e[0],s=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-r*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,r){const s=t[0],i=t[1],o=t[2],a=t[3],c=t[4],u=t[5],d=e[0],h=e[1],f=e[2],p=e[3];let v=s*d+c,m=v,w=s*f+c,g=w,b=a*h+u,y=b,E=a*p+u,T=E;if(i!==0||o!==0){const P=i*d,k=i*f,R=o*h,N=o*p;v+=R,g+=R,w+=N,m+=N,b+=P,T+=P,E+=k,y+=k}r[0]=Math.min(r[0],v,w,m,g),r[1]=Math.min(r[1],b,E,y,T),r[2]=Math.max(r[2],v,w,m,g),r[3]=Math.max(r[3],b,E,y,T)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],s=e[1],i=e[2],o=e[3],a=r**2+s**2,c=r*i+s*o,u=i**2+o**2,d=(a+u)/2,h=Math.sqrt(d**2-(a*u-c**2));t[0]=Math.sqrt(d+h||1),t[1]=Math.sqrt(d-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[r,i,s,o]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,s,i){i[0]=Math.min(i[0],e,r),i[1]=Math.min(i[1],t,s),i[2]=Math.max(i[2],e,r),i[3]=Math.max(i[3],t,s)}static bezierBoundingBox(e,t,r,s,i,o,a,c,u){u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,c),C(this,$o,kS).call(this,e,r,i,a,t,s,o,c,3*(-e+3*(r-i)+a),6*(e-2*r+i),3*(r-e),u),C(this,$o,kS).call(this,e,r,i,a,t,s,o,c,3*(-t+3*(s-o)+c),6*(t-2*s+o),3*(s-t),u)}}$o=new WeakSet,tw=function(e,t,r,s,i,o,a,c,u,d){if(u<=0||u>=1)return;const h=1-u,f=u*u,p=f*u,v=h*(h*(h*e+3*u*t)+3*f*r)+p*s,m=h*(h*(h*i+3*u*o)+3*f*a)+p*c;d[0]=Math.min(d[0],v),d[1]=Math.min(d[1],m),d[2]=Math.max(d[2],v),d[3]=Math.max(d[3],m)},kS=function(e,t,r,s,i,o,a,c,u,d,h,f){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&C(this,$o,tw).call(this,e,t,r,s,i,o,a,c,-h/d,f);return}const p=d**2-4*h*u;if(p<0)return;const v=Math.sqrt(p),m=2*u;C(this,$o,tw).call(this,e,t,r,s,i,o,a,c,(-d+v)/m,f),C(this,$o,tw).call(this,e,t,r,s,i,o,a,c,(-d-v)/m,f)},S(te,$o);function iG(n){return decodeURIComponent(escape(n))}let zx=null,zk=null;function oG(n){return zx||(zx=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,zk=new Map([["","t"]])),n.replaceAll(zx,(e,t,r)=>t?t.normalize("NFKC"):zk.get(r))}function DD(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),MD(n)}const Od="pdfjs_internal_id_";function aG(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,s,...i]=t;if(!n(r)&&!Number.isInteger(r)||!e(s))return!1;const o=i.length;let a=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const c of i)if(!(typeof c=="number"||a&&c===null))return!1;return!0}function Bn(n,e,t){return Math.min(Math.max(n,e),t)}function LD(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(MD(n))}function lG(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Hv(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class Dm{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){var c;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if(Dm.shouldBuildText(a))(c=i==null?void 0:i.attributes)!=null&&c.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const u of i.children)s(u)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class FD{static setupStorage(e,t,r,s,i){const o=s.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{s.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}a&&i.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){var h,f;const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:i,linkService:r});const a=i!=="richText",c=e.div;if(c.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}a&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);o.append(p),a&&Dm.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const d=[[s,-1,o]];for(;d.length>0;){const[p,v,m]=d.at(-1);if(v+1===p.children.length){d.pop();continue}const w=p.children[++d.at(-1)[1]];if(w===null)continue;const{name:g}=w;if(g==="#text"){const y=document.createTextNode(w.value);u.push(y),m.append(y);continue}const b=(h=w==null?void 0:w.attributes)!=null&&h.xmlns?document.createElementNS(w.attributes.xmlns,g):document.createElement(g);if(m.append(b),w.attributes&&this.setAttributes({html:b,element:w,storage:t,intent:i,linkService:r}),((f=w.children)==null?void 0:f.length)>0)d.push([w,-1,b]);else if(w.value){const y=document.createTextNode(w.value);a&&Dm.shouldBuildText(g)&&u.push(y),b.append(y)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Gi="http://www.w3.org/2000/svg",Ql=class Ql{};V(Ql,"CSS",96),V(Ql,"PDF",72),V(Ql,"PDF_TO_CSS_UNITS",Ql.CSS/Ql.PDF);let Pl=Ql;async function Vv(n,e="text"){if(Ep(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class Wv{constructor({viewBox:e,userUnit:t,scale:r,rotation:s,offsetX:i=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=s,this.offsetX=i,this.offsetY=o,r*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let d,h,f,p;switch(s%=360,s<0&&(s+=360),s){case 180:d=-1,h=0,f=0,p=1;break;case 90:d=0,h=1,f=1,p=0;break;case 270:d=0,h=-1,f=-1,p=0;break;case 0:d=1,h=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,p=-p);let v,m,w,g;d===0?(v=Math.abs(u-e[1])*r+i,m=Math.abs(c-e[0])*r+o,w=(e[3]-e[1])*r,g=(e[2]-e[0])*r):(v=Math.abs(c-e[0])*r+i,m=Math.abs(u-e[1])*r+o,w=(e[2]-e[0])*r,g=(e[3]-e[1])*r),this.transform=[d*r,h*r,f*r,p*r,v-d*r*c-f*r*u,m-h*r*c-p*r*u],this.width=w,this.height=g}get rawDims(){const e=this.viewBox;return ce(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new Wv({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){const r=[e,t];return te.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];te.applyTransform(t,this.transform);const r=[e[2],e[3]];return te.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return te.applyInverseTransform(r,this.transform),r}}class D1 extends Gu{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Fb(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function L1(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function cG(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function uG(n,e="document.pdf"){if(typeof n!="string")return e;if(Fb(n))return le('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const s=a=>{try{let c=decodeURIComponent(a);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:a):c}catch{return a}},i=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(i.test(o))return s(o);if(r.searchParams.size>0){const a=Array.from(r.searchParams.values()).reverse();for(const u of a)if(i.test(u))return s(u);const c=Array.from(r.searchParams.keys()).reverse();for(const u of c)if(i.test(u))return s(u)}if(r.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(c)return s(c[0])}return e}class Hk{constructor(){V(this,"started",Object.create(null));V(this,"times",[])}time(e){e in this.started&&le(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||le(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function Ep(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function ys(n){n.preventDefault()}function kt(n){n.preventDefault(),n.stopPropagation()}function dG(n){console.log("Deprecated API usage: "+n)}var $m;class y0{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;l(this,$m)||x(this,$m,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,$m).exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(o+=d,a+=h):u==="+"&&(o-=d,a-=h),new Date(Date.UTC(r,s,i,o,a,c))}}$m=new WeakMap,S(y0,$m);function hG(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new Wv({viewBox:i,userUnit:1,scale:e,rotation:t})}function Gv(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(le(`Not a valid color format: "${n}"`),[0,0,0])}function fG(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,Gv(r))}e.remove()}function ft(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform();return[e,t,r,s,i,o]}function ni(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform().invertSelf();return[e,t,r,s,i,o]}function Fu(n,e,t=!1,r=!0){if(e instanceof Wv){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:o}=n,a=vn.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${i}px`,d=a?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=a?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=d,o.height=h):(o.width=h,o.height=d)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Ui{constructor(){const{pixelRatio:e}=Ui;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,s,i=-1){let o=1/0,a=1/0,c=1/0;r=Ui.capPixels(r,i),r>0&&(o=Math.sqrt(r/(e*t))),s!==-1&&(a=s/e,c=s/t);const u=Math.min(o,a,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const PS=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class pG{static get isDarkMode(){var e;return ce(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class mG{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),ce(this,"commentForegroundColor",Gv(r))}}function gG(n,e,t,r){r=Math.min(Math.max(r??1,0),1);const s=255*(1-r);return n=Math.round(n*r+s),e=Math.round(e*r+s),t=Math.round(t*r+s),[n,e,t]}function Vk(n,e){const t=n[0]/255,r=n[1]/255,s=n[2]/255,i=Math.max(t,r,s),o=Math.min(t,r,s),a=(i+o)/2;if(i===o)e[0]=e[1]=0;else{const c=i-o;switch(e[1]=a<.5?c/(i+o):c/(2-i-o),i){case t:e[0]=((r-s)/c+(r<s?6:0))*60;break;case r:e[0]=((s-t)/c+2)*60;break;case s:e[0]=((t-r)/c+4)*60;break}}e[2]=a}function RS(n,e){const t=n[0],r=n[1],s=n[2],i=(1-Math.abs(2*s-1))*r,o=i*(1-Math.abs(t/60%2-1)),a=s-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+a,e[1]=o+a,e[2]=a;break;case 1:e[0]=o+a,e[1]=i+a,e[2]=a;break;case 2:e[0]=a,e[1]=i+a,e[2]=o+a;break;case 3:e[0]=a,e[1]=o+a,e[2]=i+a;break;case 4:e[0]=o+a,e[1]=a,e[2]=i+a;break;case 5:case 6:e[0]=i+a,e[1]=a,e[2]=o+a;break}}function Wk(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function Gk(n,e,t){RS(n,t),t.map(Wk);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];RS(e,t),t.map(Wk);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];return r>s?(r+.05)/(s+.05):(s+.05)/(r+.05)}const qk=new Map;function vG(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=qk.get(t);if(r)return r;const s=new Float32Array(9),i=s.subarray(0,3),o=s.subarray(3,6);Vk(n,o);const a=s.subarray(6,9);Vk(e,a);const c=a[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),Gk(o,a,i)<u){let d,h;c?(d=o[2],h=1):(d=0,h=o[2]);const f=.005;for(;h-d>f;){const p=o[2]=(d+h)/2;c===Gk(o,a,i)<u?d=p:h=p}o[2]=c?h:d}return RS(o,i),r=te.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),qk.set(t,r),r}function jD({html:n,dir:e,className:t},r){const s=document.createDocumentFragment();if(typeof n=="string"){const i=document.createElement("p");i.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let a=0,c=o.length;a<c;++a){const u=o[a];i.append(document.createTextNode(u)),a<c-1&&i.append(document.createElement("br"))}s.append(i)}else FD.render({xfaHtml:n,div:s,intent:"richText"});s.firstElementChild.classList.add("richText",t),r.append(s)}function BD(n){const e=new Path2D;if(!n)return e;for(let t=0,r=n.length;t<r;)switch(n[t++]){case dp.moveTo:e.moveTo(n[t++],n[t++]);break;case dp.lineTo:e.lineTo(n[t++],n[t++]);break;case dp.curveTo:e.bezierCurveTo(n[t++],n[t++],n[t++],n[t++],n[t++],n[t++]);break;case dp.quadraticCurveTo:e.quadraticCurveTo(n[t++],n[t++],n[t++],n[t++]);break;case dp.closePath:e.closePath();break;default:le(`Unrecognized drawing path operator: ${n[t-1]}`);break}return e}var _a,Sa,Qr,Jr,Um,Ea,ih,oh,zm,R0,$D,mn,UD,zD,fd,Ap;const Qi=class Qi{constructor(e){S(this,mn);S(this,_a,null);S(this,Sa,null);S(this,Qr);S(this,Jr,null);S(this,Um,null);S(this,Ea,null);S(this,ih,null);S(this,oh,null);x(this,Qr,e),l(Qi,zm)||x(Qi,zm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=x(this,_a,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,Qr)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",ys,{signal:t}),e.addEventListener("pointerdown",C(Qi,R0,$D),{signal:t}));const r=x(this,Jr,document.createElement("div"));r.className="buttons",e.append(r);const s=l(this,Qr).toolbarPosition;if(s){const{style:i}=e,o=l(this,Qr)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return l(this,_a)}hide(){var e;l(this,_a).classList.add("hidden"),(e=l(this,Sa))==null||e.hideDropdown()}show(){var e,t;l(this,_a).classList.remove("hidden"),(e=l(this,Um))==null||e.shown(),(t=l(this,Ea))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=l(this,Qr),r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",l(Qi,zm)[e]),C(this,mn,fd).call(this,r)&&r.addEventListener("click",s=>{t.delete()},{signal:t._signal}),l(this,Jr).append(r)}async addAltText(e){const t=await e.render();C(this,mn,fd).call(this,t),l(this,Jr).append(t,l(this,mn,Ap)),x(this,Um,e)}addComment(e,t=null){if(l(this,Ea))return;const r=e.renderForToolbar();if(!r)return;C(this,mn,fd).call(this,r);const s=x(this,ih,l(this,mn,Ap));t?(l(this,Jr).insertBefore(r,t),l(this,Jr).insertBefore(s,t)):l(this,Jr).append(r,s),x(this,Ea,e),e.toolbar=this}addColorPicker(e){if(l(this,Sa))return;x(this,Sa,e);const t=e.renderButton();C(this,mn,fd).call(this,t),l(this,Jr).append(t,l(this,mn,Ap))}async addEditSignatureButton(e){const t=x(this,oh,await e.renderEditButton(l(this,Qr)));C(this,mn,fd).call(this,t),l(this,Jr).append(t,l(this,mn,Ap))}removeButton(e){var t,r;switch(e){case"comment":(t=l(this,Ea))==null||t.removeToolbarCommentButton(),x(this,Ea,null),(r=l(this,ih))==null||r.remove(),x(this,ih,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,r){if(!t&&e==="comment")return;const s=l(this,Jr).querySelector(r);s&&e==="comment"&&this.addComment(t,s)}updateEditSignatureButton(e){l(this,oh)&&(l(this,oh).title=e)}remove(){var e;l(this,_a).remove(),(e=l(this,Sa))==null||e.destroy(),x(this,Sa,null)}};_a=new WeakMap,Sa=new WeakMap,Qr=new WeakMap,Jr=new WeakMap,Um=new WeakMap,Ea=new WeakMap,ih=new WeakMap,oh=new WeakMap,zm=new WeakMap,R0=new WeakSet,$D=function(e){e.stopPropagation()},mn=new WeakSet,UD=function(e){l(this,Qr)._focusEventsAllowed=!1,kt(e)},zD=function(e){l(this,Qr)._focusEventsAllowed=!0,kt(e)},fd=function(e){const t=l(this,Qr)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",C(this,mn,UD).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",C(this,mn,zD).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ys,{signal:t}),!0)},Ap=function(){const e=document.createElement("div");return e.className="divider",e},S(Qi,R0),S(Qi,zm,null);let NS=Qi;var Hm,hc,to,Xo,HD,VD,IS;class yG{constructor(e){S(this,Xo);S(this,Hm,null);S(this,hc,null);S(this,to);x(this,to,e)}show(e,t,r){const[s,i]=C(this,Xo,VD).call(this,t,r),{style:o}=l(this,hc)||x(this,hc,C(this,Xo,HD).call(this));e.append(l(this,hc)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,hc).remove()}}Hm=new WeakMap,hc=new WeakMap,to=new WeakMap,Xo=new WeakSet,HD=function(){const e=x(this,hc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=l(this,to)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",ys,{signal:t});const r=x(this,Hm,document.createElement("div"));return r.className="buttons",e.append(r),l(this,to).hasCommentManager()&&C(this,Xo,IS).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{l(this,to).commentSelection("floating_button")}),C(this,Xo,IS).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{l(this,to).highlightSelection("floating_button")}),e},VD=function(e,t){let r=0,s=0;for(const i of e){const o=i.y+i.height;if(o<r)continue;const a=i.x+(t?i.width:0);if(o>r){s=a,r=o;continue}t?a>s&&(s=a):a<s&&(s=a)}return[t?1-s:s,r]},IS=function(e,t,r,s){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const o=document.createElement("span");i.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",r);const a=l(this,to)._signal;a instanceof AbortSignal&&!a.aborted&&(i.addEventListener("contextmenu",ys,{signal:a}),i.addEventListener("click",s,{signal:a})),l(this,Hm).append(i)};function WD(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var fc,pc,ah,mc;const $e=class $e{static initializeAndAddPointerId(e){(l($e,pc)||x($e,pc,new Set)).add(e)}static setPointer(e,t){l($e,fc)||x($e,fc,t),l($e,mc)??x($e,mc,e)}static setTimeStamp(e){x($e,ah,e)}static isSamePointerId(e){return l($e,fc)===e}static isSamePointerIdOrRemove(e){var t;return l($e,fc)===e?!0:((t=l($e,pc))==null||t.delete(e),!1)}static isSamePointerType(e){return l($e,mc)===e}static isInitializedAndDifferentPointerType(e){return l($e,mc)!==null&&!$e.isSamePointerType(e)}static isSameTimeStamp(e){return l($e,ah)===e}static isUsingMultiplePointers(){var e;return((e=l($e,pc))==null?void 0:e.size)>=1}static clearPointerType(){x($e,mc,null)}static clearPointerIds(){x($e,fc,NaN),x($e,pc,null)}static clearTimeStamp(){x($e,ah,NaN)}};fc=new WeakMap,pc=new WeakMap,ah=new WeakMap,mc=new WeakMap,S($e,fc,NaN),S($e,pc,null),S($e,ah,NaN),S($e,mc,null);let Sn=$e;var N0;class wG{constructor(){S(this,N0,0)}get id(){return`${Om}${wt(this,N0)._++}`}}N0=new WeakMap;var lh,Vm,An,ch,nw;const V1=class V1{constructor(){S(this,ch);S(this,lh,DD());S(this,Vm,0);S(this,An,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return ce(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return C(this,ch,nw).call(this,`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return C(this,ch,nw).call(this,e,e)}async getFromBlob(e,t){const r=await t;return C(this,ch,nw).call(this,e,r)}async getFromId(e){l(this,An)||x(this,An,new Map);const t=l(this,An).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,An)||x(this,An,new Map);let r=l(this,An).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),r={bitmap:s.transferToImageBitmap(),id:`image_${l(this,lh)}_${wt(this,Vm)._++}`,refCounter:1,isSvg:!1},l(this,An).set(e,r),l(this,An).set(r.id,r),r}getSvgUrl(e){const t=l(this,An).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;l(this,An)||x(this,An,new Map);const t=l(this,An).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}(s=r.close)==null||s.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,lh)}_`)}};lh=new WeakMap,Vm=new WeakMap,An=new WeakMap,ch=new WeakSet,nw=async function(e,t){l(this,An)||x(this,An,new Map);let r=l(this,An).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${l(this,lh)}_${wt(this,Vm)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(r.url=t,s=await Vv(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=V1._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((u,d)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,u()},o.onload=async()=>{const h=r.svgUrl=o.result;a.src=await i?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=o.onerror=d});o.readAsDataURL(s),await c}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){le(s),r=null}return l(this,An).set(e,r),r&&l(this,An).set(r.id,r),r};let OS=V1;var Pt,Aa,Wm,ht;class bG{constructor(e=128){S(this,Pt,[]);S(this,Aa,!1);S(this,Wm);S(this,ht,-1);x(this,Wm,e)}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&e(),l(this,Aa))return;const c={cmd:e,undo:t,post:r,type:i};if(l(this,ht)===-1){l(this,Pt).length>0&&(l(this,Pt).length=0),x(this,ht,0),l(this,Pt).push(c);return}if(o&&l(this,Pt)[l(this,ht)].type===i){a&&(c.undo=l(this,Pt)[l(this,ht)].undo),l(this,Pt)[l(this,ht)]=c;return}const u=l(this,ht)+1;u===l(this,Wm)?l(this,Pt).splice(0,1):(x(this,ht,u),u<l(this,Pt).length&&l(this,Pt).splice(u)),l(this,Pt).push(c)}undo(){if(l(this,ht)===-1)return;x(this,Aa,!0);const{undo:e,post:t}=l(this,Pt)[l(this,ht)];e(),t==null||t(),x(this,Aa,!1),x(this,ht,l(this,ht)-1)}redo(){if(l(this,ht)<l(this,Pt).length-1){x(this,ht,l(this,ht)+1),x(this,Aa,!0);const{cmd:e,post:t}=l(this,Pt)[l(this,ht)];e(),t==null||t(),x(this,Aa,!1)}}hasSomethingToUndo(){return l(this,ht)!==-1}hasSomethingToRedo(){return l(this,ht)<l(this,Pt).length-1}cleanType(e){if(l(this,ht)!==-1){for(let t=l(this,ht);t>=0;t--)if(l(this,Pt)[t].type!==e){l(this,Pt).splice(t+1,l(this,ht)-t),x(this,ht,t);return}l(this,Pt).length=0,x(this,ht,-1)}}destroy(){x(this,Pt,null)}}Pt=new WeakMap,Aa=new WeakMap,Wm=new WeakMap,ht=new WeakMap;var I0,GD;class qv{constructor(e){S(this,I0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=vn.platform;for(const[r,s,i={}]of e)for(const o of r){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(C(this,I0,GD).call(this,t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:o=[],checker:a=null}}=r;a&&!a(e,t)||(s.bind(e,...o,t)(),i||kt(t))}}I0=new WeakSet,GD=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const O0=class O0{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return fG(e),ce(this,"_colors",e)}convert(e){const t=Gv(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,o)=>i===t[o]))return O0._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?te.makeHexColor(...t):e}};V(O0,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let MS=O0;var uh,mr,dh,xt,Ht,hh,Zr,fh,es,Cn,Ca,Ta,ph,ka,ci,ts,gc,Gm,qm,mh,Km,ui,Pa,gh,Ra,di,M0,Na,vh,Xm,Ia,vc,yh,Oa,Ym,Mt,Le,no,Ma,Da,Qm,wh,Jm,La,hi,ro,Zm,eg,ns,K,rw,DS,qD,KD,Cp,XD,YD,QD,LS,JD,ZD,eL,tL,In,qi,nL,rL,FS,sL,Tp,jS;const Dd=class Dd{constructor(e,t,r,s,i,o,a,c,u,d,h,f,p,v,m,w){S(this,K);S(this,uh,new AbortController);S(this,mr,null);S(this,dh,null);S(this,xt,new Map);S(this,Ht,new Map);S(this,hh,null);S(this,Zr,null);S(this,fh,null);S(this,es,new bG);S(this,Cn,null);S(this,Ca,null);S(this,Ta,null);S(this,ph,0);S(this,ka,new Set);S(this,ci,null);S(this,ts,null);S(this,gc,new Set);V(this,"_editorUndoBar",null);S(this,Gm,!1);S(this,qm,!1);S(this,mh,!1);S(this,Km,null);S(this,ui,null);S(this,Pa,null);S(this,gh,null);S(this,Ra,!1);S(this,di,null);S(this,M0,new wG);S(this,Na,!1);S(this,vh,!1);S(this,Xm,!1);S(this,Ia,null);S(this,vc,null);S(this,yh,null);S(this,Oa,null);S(this,Ym,null);S(this,Mt,fe.NONE);S(this,Le,new Set);S(this,no,null);S(this,Ma,null);S(this,Da,null);S(this,Qm,null);S(this,wh,null);S(this,Jm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});S(this,La,[0,0]);S(this,hi,null);S(this,ro,null);S(this,Zm,null);S(this,eg,null);S(this,ns,null);const g=this._signal=l(this,uh).signal;x(this,ro,e),x(this,Zm,t),x(this,eg,r),x(this,hh,s),x(this,Cn,i),x(this,Ma,o),x(this,wh,c),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:g}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),a._on("setpreference",this.onSetPreference.bind(this),{signal:g}),a._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:g}),window.addEventListener("pointerdown",()=>{x(this,vh,!0)},{capture:!0,signal:g}),window.addEventListener("pointerup",()=>{x(this,vh,!1)},{capture:!0,signal:g}),C(this,K,XD).call(this),C(this,K,tL).call(this),C(this,K,LS).call(this),x(this,Zr,c.annotationStorage),x(this,Km,c.filterFactory),x(this,Da,u),x(this,gh,d||null),x(this,Gm,h),x(this,qm,f),x(this,mh,p),x(this,Ym,v||null),this.viewParameters={realScale:Pl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=w!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=Dd.prototype,t=o=>l(o,ro).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return ce(this,"_keyboardManager",new qv([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,ro).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,ro).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,r,s,i,o,a,c,u;(e=l(this,ns))==null||e.resolve(),x(this,ns,null),(t=l(this,uh))==null||t.abort(),x(this,uh,null),this._signal=null;for(const d of l(this,Ht).values())d.destroy();l(this,Ht).clear(),l(this,xt).clear(),l(this,gc).clear(),(r=l(this,Oa))==null||r.clear(),x(this,mr,null),l(this,Le).clear(),l(this,es).destroy(),(s=l(this,hh))==null||s.destroy(),(i=l(this,Cn))==null||i.destroy(),(o=l(this,Ma))==null||o.destroy(),(a=l(this,di))==null||a.hide(),x(this,di,null),(c=l(this,yh))==null||c.destroy(),x(this,yh,null),x(this,dh,null),l(this,ui)&&(clearTimeout(l(this,ui)),x(this,ui,null)),l(this,hi)&&(clearTimeout(l(this,hi)),x(this,hi,null)),(u=this._editorUndoBar)==null||u.destroy(),x(this,wh,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Ym)}get useNewAltTextFlow(){return l(this,qm)}get useNewAltTextWhenAddingImage(){return l(this,mh)}get hcmFilter(){return ce(this,"hcmFilter",l(this,Da)?l(this,Km).addHCMFilter(l(this,Da).foreground,l(this,Da).background):"none")}get direction(){return ce(this,"direction",getComputedStyle(l(this,ro)).direction)}get _highlightColors(){return ce(this,"_highlightColors",l(this,gh)?new Map(l(this,gh).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return ce(this,"highlightColors",null);const t=new Map,r=!!l(this,Da);for(const[s,i]of e){const o=s.endsWith("_HCM");if(r&&o){t.set(s.replace("_HCM",""),i);continue}!r&&!o&&t.set(s,i)}return ce(this,"highlightColors",t)}get highlightColorNames(){return ce(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),x(this,Ta,e)}setMainHighlightColorPicker(e){x(this,yh,e)}editAltText(e,t=!1){var r;(r=l(this,hh))==null||r.editAltText(this,e,t)}hasCommentManager(){return!!l(this,Cn)}editComment(e,t,r,s){var i;(i=l(this,Cn))==null||i.showDialog(this,e,t,r,s)}selectComment(e,t){const r=l(this,Ht).get(e),s=r==null?void 0:r.getEditorByUID(t);s==null||s.toggleComment(!0,!0)}updateComment(e){var t;(t=l(this,Cn))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=l(this,Cn))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=l(this,Cn))==null||t.removeComments([e.uid])}toggleComment(e,t,r=void 0){var s;(s=l(this,Cn))==null||s.toggleCommentPopup(e,t,r)}makeCommentColor(e,t){var r;return e&&((r=l(this,Cn))==null?void 0:r.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=l(this,Cn))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(l(this,Ht).has(e-1))return;const{resolve:t,promise:r}=Promise.withResolvers(),s=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",s),t())};this._eventBus.on("editorsrendered",s),await r}getSignature(e){var t;(t=l(this,Ma))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return l(this,Ma)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":x(this,mh,t);break}}onPageChanging({pageNumber:e}){x(this,ph,e-1)}focusMainContainer(){l(this,ro).focus()}findParent(e,t){for(const r of l(this,Ht).values()){const{x:s,y:i,width:o,height:a}=r.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=i&&t<=i+a)return r}return null}disableUserSelect(e=!1){l(this,Zm).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,gc).add(e)}removeShouldRescale(e){l(this,gc).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Pl.PDF_TO_CSS_UNITS;for(const r of l(this,gc))r.onScaleChanging();(t=l(this,Ta))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:o,focusOffset:a}=r,c=r.toString(),d=C(this,K,rw).call(this,r).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;r.empty();const f=C(this,K,DS).call(this,d),p=l(this,Mt)===fe.NONE,v=()=>{const m=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:s,anchorOffset:i,focusNode:o,focusOffset:a,text:c});p&&this.showAllEditors("highlight",!0,!0),t&&(m==null||m.editComment())};if(p){this.switchToMode(fe.HIGHLIGHT,v);return}v()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!l(this,Zr))return null;const t=`${Om}${e}`,r=l(this,Zr).getRawValue(t);return r&&l(this,Zr).remove(t),r}addToAnnotationStorage(e){!e.isEmpty()&&l(this,Zr)&&!l(this,Zr).has(e.id)&&l(this,Zr).setValue(e.id,e)}a11yAlert(e,t=null){const r=l(this,eg);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,Ra)&&(x(this,Ra,!1),C(this,K,Cp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,Le))if(t.div.contains(e)){x(this,vc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,vc))return;const[e,t]=l(this,vc);x(this,vc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){C(this,K,LS).call(this),this.setEditingState(!0)}removeEditListeners(){C(this,K,JD).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of l(this,ts))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of l(this,ts))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=l(this,mr))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of l(this,Le)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of l(this,ts))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){le(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const c of r){const u=await s.deserialize(c);if(!u)return;i.push(u)}const o=()=>{for(const c of i)C(this,K,FS).call(this,c);C(this,K,jS).call(this,i)},a=()=>{for(const c of i)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){le(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Mt)!==fe.NONE&&!this.isEditorHandlingKeyboard&&Dd._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Ra)&&(x(this,Ra,!1),C(this,K,Cp).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(C(this,K,YD).call(this),C(this,K,ZD).call(this),C(this,K,In).call(this,{isEditing:l(this,Mt)!==fe.NONE,isEmpty:C(this,K,Tp).call(this),hasSomethingToUndo:l(this,es).hasSomethingToUndo(),hasSomethingToRedo:l(this,es).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,K,QD).call(this),C(this,K,eL).call(this),C(this,K,In).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,ts)){x(this,ts,e);for(const t of l(this,ts))C(this,K,qi).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,M0).id}get currentLayer(){return l(this,Ht).get(l(this,ph))}getLayer(e){return l(this,Ht).get(e)}get currentPageIndex(){return l(this,ph)}addLayer(e){l(this,Ht).set(e.pageIndex,e),l(this,Na)?e.enable():e.disable()}removeLayer(e){l(this,Ht).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,s=!1,i=!1){var o,a,c,u,d,h;if(l(this,Mt)!==e&&!(l(this,ns)&&(await l(this,ns).promise,!l(this,ns)))){if(x(this,ns,Promise.withResolvers()),(o=l(this,Ta))==null||o.commitOrRemove(),l(this,Mt)===fe.POPUP&&((a=l(this,Cn))==null||a.hideSidebar()),(c=l(this,Cn))==null||c.destroyPopup(),x(this,Mt,e),e===fe.NONE){this.setEditingState(!1),C(this,K,rL).call(this);for(const f of l(this,xt).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),l(this,ns).resolve();return}for(const f of l(this,xt).values())f.addStandaloneCommentButton();e===fe.SIGNATURE&&await((d=l(this,Ma))==null?void 0:d.loadSignatures()),this.setEditingState(!0),await C(this,K,nL).call(this),this.unselectAll();for(const f of l(this,Ht).values())f.updateMode(e);if(e===fe.POPUP){l(this,dh)||x(this,dh,await l(this,wh).getAnnotationsByType(new Set(l(this,ts).map(v=>v._editorType))));const f=new Set,p=[];for(const v of l(this,xt).values()){const{annotationElementId:m,hasComment:w,deleted:g}=v;m&&f.add(m),w&&!g&&p.push(v.getData())}for(const v of l(this,dh)){const{id:m,popupRef:w,contentsObj:g}=v;w&&(g!=null&&g.str)&&!f.has(m)&&!l(this,ka).has(m)&&p.push(v)}(h=l(this,Cn))==null||h.showSidebar(p)}if(!t){r&&this.addNewEditorFromKeyboard(),l(this,ns).resolve();return}for(const f of l(this,xt).values())f.uid===t?(this.setSelected(f),i?f.editComment():s?f.enterInEditMode():f.focus()):f.unselect();l(this,ns).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==l(this,Mt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(l(this,ts)){switch(e){case Pe.CREATE:this.currentLayer.addNewEditor(t);return;case Pe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Qm)||x(this,Qm,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const r of l(this,Le))r.updateParams(e,t);else for(const r of l(this,ts))r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var i;for(const o of l(this,xt).values())o.editorType===e&&o.show(t);(((i=l(this,Qm))==null?void 0:i.get(Pe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&C(this,K,qi).call(this,[[Pe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Xm)!==e){x(this,Xm,e);for(const t of l(this,Ht).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of l(this,xt).values())t.pageIndex===e&&(yield t)}getEditor(e){return l(this,xt).get(e)}addEditor(e){l(this,xt).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(l(this,ui)&&clearTimeout(l(this,ui)),x(this,ui,setTimeout(()=>{this.focusMainContainer(),x(this,ui,null)},0))),l(this,xt).delete(e.id),e.annotationElementId&&((t=l(this,Oa))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!l(this,ka).has(e.annotationElementId))&&((r=l(this,Zr))==null||r.remove(e.id))}addDeletedAnnotationElement(e){l(this,ka).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,ka).has(e)}removeDeletedAnnotationElement(e){l(this,ka).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,mr)!==e&&(x(this,mr,e),e&&C(this,K,qi).call(this,e.propertiesToUpdate))}updateUI(e){l(this,K,sL)===e&&C(this,K,qi).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){C(this,K,qi).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(l(this,Le).has(e)){l(this,Le).delete(e),e.unselect(),C(this,K,In).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Le).add(e),e.select(),C(this,K,qi).call(this,e.propertiesToUpdate),C(this,K,In).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=l(this,Ta))==null||t.commitOrRemove();for(const r of l(this,Le))r!==e&&r.unselect();l(this,Le).clear(),l(this,Le).add(e),e.select(),C(this,K,qi).call(this,e.propertiesToUpdate),C(this,K,In).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,Le).has(e)}get firstSelectedEditor(){return l(this,Le).values().next().value}unselect(e){e.unselect(),l(this,Le).delete(e),C(this,K,In).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Le).size!==0}get isEnterHandled(){return l(this,Le).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;l(this,es).undo(),C(this,K,In).call(this,{hasSomethingToUndo:l(this,es).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,K,Tp).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){l(this,es).redo(),C(this,K,In).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,es).hasSomethingToRedo(),isEmpty:C(this,K,Tp).call(this)})}addCommands(e){l(this,es).add(e),C(this,K,In).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,K,Tp).call(this)})}cleanUndoStack(e){l(this,es).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...l(this,Le)],r=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},s=()=>{for(const o of t)C(this,K,FS).call(this,o)};this.addCommands({cmd:r,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=l(this,mr))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,mr)||this.hasSelection}selectAll(){for(const e of l(this,Le))e.commit();C(this,K,jS).call(this,l(this,xt).values())}unselectAll(){var e;if(!(l(this,mr)&&(l(this,mr).commitOrRemove(),l(this,Mt)!==fe.NONE))&&!((e=l(this,Ta))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of l(this,Le))t.unselect();l(this,Le).clear(),C(this,K,In).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;l(this,La)[0]+=e,l(this,La)[1]+=t;const[s,i]=l(this,La),o=[...l(this,Le)],a=1e3;l(this,hi)&&clearTimeout(l(this,hi)),x(this,hi,setTimeout(()=>{x(this,hi,null),l(this,La)[0]=l(this,La)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,xt).has(c.id)&&(c.translateInPage(s,i),c.translationDone())},undo:()=>{for(const c of o)l(this,xt).has(c.id)&&(c.translateInPage(-s,-i),c.translationDone())},mustExec:!1})},a));for(const c of o)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,ci,new Map);for(const e of l(this,Le))l(this,ci).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,ci))return!1;this.disableUserSelect(!1);const e=l(this,ci);x(this,ci,null);let t=!1;for(const[{x:s,y:i,pageIndex:o},a]of e)a.newX=s,a.newY=i,a.newPageIndex=o,t||(t=s!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const r=(s,i,o,a)=>{if(l(this,xt).has(s.id)){const c=l(this,Ht).get(a);c?s._setParentAndPosition(c,i,o):(s.pageIndex=a,s.x=i,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:o,newPageIndex:a}]of e)r(s,i,o,a)},undo:()=>{for(const[s,{savedX:i,savedY:o,savedPageIndex:a}]of e)r(s,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,ci))for(const r of l(this,ci).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,Le).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,mr)===e}getActive(){return l(this,mr)}getMode(){return l(this,Mt)}isEditingMode(){return l(this,Mt)!==fe.NONE}get imageManager(){return ce(this,"imageManager",new OS)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,d=t.rangeCount;u<d;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,d,h,f)=>({x:(d-s)/o,y:1-(u+h-r)/i,width:f/o,height:h/i});break;case"180":a=(u,d,h,f)=>({x:1-(u+h-r)/i,y:1-(d+f-s)/o,width:h/i,height:f/o});break;case"270":a=(u,d,h,f)=>({x:1-(d+f-s)/o,y:(u-r)/i,width:f/o,height:h/i});break;default:a=(u,d,h,f)=>({x:(u-r)/i,y:(d-s)/o,width:h/i,height:f/o});break}const c=[];for(let u=0,d=t.rangeCount;u<d;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:p,width:v,height:m}of h.getClientRects())v===0||m===0||c.push(a(f,p,v,m))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,fh)||x(this,fh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,fh))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=l(this,fh))==null?void 0:s.get(e.data.id);if(!t)return;const r=l(this,Zr).getRawValue(t);r&&(l(this,Mt)===fe.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var i;const s=(i=l(this,Oa))==null?void 0:i.get(e);s&&(s.setCanvas(t,r),l(this,Oa).delete(e))}addMissingCanvas(e,t){(l(this,Oa)||x(this,Oa,new Map)).set(e,t)}};uh=new WeakMap,mr=new WeakMap,dh=new WeakMap,xt=new WeakMap,Ht=new WeakMap,hh=new WeakMap,Zr=new WeakMap,fh=new WeakMap,es=new WeakMap,Cn=new WeakMap,Ca=new WeakMap,Ta=new WeakMap,ph=new WeakMap,ka=new WeakMap,ci=new WeakMap,ts=new WeakMap,gc=new WeakMap,Gm=new WeakMap,qm=new WeakMap,mh=new WeakMap,Km=new WeakMap,ui=new WeakMap,Pa=new WeakMap,gh=new WeakMap,Ra=new WeakMap,di=new WeakMap,M0=new WeakMap,Na=new WeakMap,vh=new WeakMap,Xm=new WeakMap,Ia=new WeakMap,vc=new WeakMap,yh=new WeakMap,Oa=new WeakMap,Ym=new WeakMap,Mt=new WeakMap,Le=new WeakMap,no=new WeakMap,Ma=new WeakMap,Da=new WeakMap,Qm=new WeakMap,wh=new WeakMap,Jm=new WeakMap,La=new WeakMap,hi=new WeakMap,ro=new WeakMap,Zm=new WeakMap,eg=new WeakMap,ns=new WeakMap,K=new WeakSet,rw=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},DS=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of l(this,Ht).values())if(r.hasTextLayer(e))return r;return null},qD=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=C(this,K,rw).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(l(this,di)||x(this,di,new yG(this)),l(this,di).show(r,s,this.direction==="ltr"))},KD=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){l(this,no)&&((i=l(this,di))==null||i.hide(),x(this,no,null),C(this,K,In).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,no))return;const s=C(this,K,rw).call(this,e).closest(".textLayer");if(!s){l(this,no)&&((o=l(this,di))==null||o.hide(),x(this,no,null),C(this,K,In).call(this,{hasSelectedText:!1}));return}if((a=l(this,di))==null||a.hide(),x(this,no,t),C(this,K,In).call(this,{hasSelectedText:!0}),!(l(this,Mt)!==fe.HIGHLIGHT&&l(this,Mt)!==fe.NONE)&&(l(this,Mt)===fe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,Ra,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,Mt)===fe.HIGHLIGHT?C(this,K,DS).call(this,s):null;if(c==null||c.toggleDrawing(),l(this,vh)){const u=new AbortController,d=this.combinedSignal(u),h=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&C(this,K,Cp).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}else c==null||c.toggleDrawing(!0),C(this,K,Cp).call(this,"main_toolbar")}},Cp=function(e=""){l(this,Mt)===fe.HIGHLIGHT?this.highlightSelection(e):l(this,Gm)&&C(this,K,qD).call(this)},XD=function(){document.addEventListener("selectionchange",C(this,K,KD).bind(this),{signal:this._signal})},YD=function(){if(l(this,Pa))return;x(this,Pa,new AbortController);const e=this.combinedSignal(l(this,Pa));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},QD=function(){var e;(e=l(this,Pa))==null||e.abort(),x(this,Pa,null)},LS=function(){if(l(this,Ia))return;x(this,Ia,new AbortController);const e=this.combinedSignal(l(this,Ia));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},JD=function(){var e;(e=l(this,Ia))==null||e.abort(),x(this,Ia,null)},ZD=function(){if(l(this,Ca))return;x(this,Ca,new AbortController);const e=this.combinedSignal(l(this,Ca));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},eL=function(){var e;(e=l(this,Ca))==null||e.abort(),x(this,Ca,null)},tL=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},In=function(e){Object.entries(e).some(([r,s])=>l(this,Jm)[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Jm),e)}),l(this,Mt)===fe.HIGHLIGHT&&e.hasSelectedEditor===!1&&C(this,K,qi).call(this,[[Pe.HIGHLIGHT_FREE,!0]]))},qi=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},nL=async function(){if(!l(this,Na)){x(this,Na,!0);const e=[];for(const t of l(this,Ht).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,xt).values())t.enable()}},rL=function(){if(this.unselectAll(),l(this,Na)){x(this,Na,!1);for(const e of l(this,Ht).values())e.disable();for(const e of l(this,xt).values())e.disable()}},FS=function(e){const t=l(this,Ht).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},sL=function(){let e=null;for(e of l(this,Le));return e},Tp=function(){if(l(this,xt).size===0)return!0;if(l(this,xt).size===1)for(const e of l(this,xt).values())return e.isEmpty();return!1},jS=function(e){for(const t of l(this,Le))t.unselect();l(this,Le).clear();for(const t of e)t.isEmpty()||(l(this,Le).add(t),t.select());C(this,K,In).call(this,{hasSelectedEditor:this.hasSelection})},V(Dd,"TRANSLATE_SMALL",1),V(Dd,"TRANSLATE_BIG",10);let ju=Dd;var Kt,fi,Os,bh,pi,gr,xh,mi,Qn,so,yc,gi,Fa,Ks,kp,sw;const On=class On{constructor(e){S(this,Ks);S(this,Kt,null);S(this,fi,!1);S(this,Os,null);S(this,bh,null);S(this,pi,null);S(this,gr,null);S(this,xh,!1);S(this,mi,null);S(this,Qn,null);S(this,so,null);S(this,yc,null);S(this,gi,!1);x(this,Qn,e),x(this,gi,e._uiManager.useNewAltTextFlow),l(On,Fa)||x(On,Fa,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){On._l10n??(On._l10n=e)}async render(){const e=x(this,Os,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=x(this,bh,document.createElement("span"));e.append(t),l(this,gi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(On,Fa).missing),t.setAttribute("data-l10n-id",l(On,Fa)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=l(this,Qn)._uiManager._signal;e.addEventListener("contextmenu",ys,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),l(this,Qn)._uiManager.editAltText(l(this,Qn)),l(this,gi)&&l(this,Qn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Ks,kp)}})};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(x(this,xh,!0),s(i))},{signal:r}),await C(this,Ks,sw).call(this),e}finish(){l(this,Os)&&(l(this,Os).focus({focusVisible:l(this,xh)}),x(this,xh,!1))}isEmpty(){return l(this,gi)?l(this,Kt)===null:!l(this,Kt)&&!l(this,fi)}hasData(){return l(this,gi)?l(this,Kt)!==null||!!l(this,so):this.isEmpty()}get guessedText(){return l(this,so)}async setGuessedText(e){l(this,Kt)===null&&(x(this,so,e),x(this,yc,await On._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),C(this,Ks,sw).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,gi)||l(this,Kt)){(t=l(this,mi))==null||t.remove(),x(this,mi,null);return}if(!l(this,mi)){const r=x(this,mi,document.createElement("div"));r.className="noAltTextBadge",l(this,Qn).div.append(r)}l(this,mi).classList.toggle("hidden",!e)}serialize(e){let t=l(this,Kt);return!e&&l(this,so)===t&&(t=l(this,yc)),{altText:t,decorative:l(this,fi),guessedText:l(this,so),textWithDisclaimer:l(this,yc)}}get data(){return{altText:l(this,Kt),decorative:l(this,fi)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:s,cancel:i=!1}){r&&(x(this,so,r),x(this,yc,s)),!(l(this,Kt)===e&&l(this,fi)===t)&&(i||(x(this,Kt,e),x(this,fi,t)),C(this,Ks,sw).call(this))}toggle(e=!1){l(this,Os)&&(!e&&l(this,gr)&&(clearTimeout(l(this,gr)),x(this,gr,null)),l(this,Os).disabled=!e)}shown(){l(this,Qn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Ks,kp)}})}destroy(){var e,t;(e=l(this,Os))==null||e.remove(),x(this,Os,null),x(this,bh,null),x(this,pi,null),(t=l(this,mi))==null||t.remove(),x(this,mi,null)}};Kt=new WeakMap,fi=new WeakMap,Os=new WeakMap,bh=new WeakMap,pi=new WeakMap,gr=new WeakMap,xh=new WeakMap,mi=new WeakMap,Qn=new WeakMap,so=new WeakMap,yc=new WeakMap,gi=new WeakMap,Fa=new WeakMap,Ks=new WeakSet,kp=function(){return l(this,Kt)&&"added"||l(this,Kt)===null&&this.guessedText&&"review"||"missing"},sw=async function(){var s,i,o;const e=l(this,Os);if(!e)return;if(l(this,gi)){if(e.classList.toggle("done",!!l(this,Kt)),e.setAttribute("data-l10n-id",l(On,Fa)[l(this,Ks,kp)]),(s=l(this,bh))==null||s.setAttribute("data-l10n-id",l(On,Fa)[`${l(this,Ks,kp)}-label`]),!l(this,Kt)){(i=l(this,pi))==null||i.remove();return}}else{if(!l(this,Kt)&&!l(this,fi)){e.classList.remove("done"),(o=l(this,pi))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,pi);if(!t){x(this,pi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,Qn).id}`;const a=100,c=l(this,Qn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,gr)),x(this,gr,null)},{once:!0}),e.addEventListener("mouseenter",()=>{x(this,gr,setTimeout(()=>{x(this,gr,null),l(this,pi).classList.add("show"),l(this,Qn)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;l(this,gr)&&(clearTimeout(l(this,gr)),x(this,gr,null)),(u=l(this,pi))==null||u.classList.remove("show")},{signal:c})}l(this,fi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,Kt)),t.parentNode||e.append(t);const r=l(this,Qn).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},S(On,Fa,null),V(On,"_l10n",null);let w0=On;var an,rs,wc,Ze,tg,bc,Ms,xc,_c,Sc,ng,BS;class Ty{constructor(e){S(this,ng);S(this,an,null);S(this,rs,null);S(this,wc,!1);S(this,Ze,null);S(this,tg,null);S(this,bc,null);S(this,Ms,null);S(this,xc,null);S(this,_c,!1);S(this,Sc,null);x(this,Ze,e)}renderForToolbar(){const e=x(this,rs,document.createElement("button"));return e.className="comment",C(this,ng,BS).call(this,e,!1)}renderForStandalone(){const e=x(this,an,document.createElement("button"));e.className="annotationCommentButton";const t=l(this,Ze).commentButtonPosition;if(t){const{style:r}=e;r.insetInlineEnd=`calc(${100*(l(this,Ze)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const s=l(this,Ze).commentButtonColor;s&&(r.backgroundColor=s)}return C(this,ng,BS).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=l(this,an)??l(this,rs))==null||e.focus()},0)}onUpdatedColor(){if(!l(this,an))return;const e=l(this,Ze).commentButtonColor;e&&(l(this,an).style.backgroundColor=e),l(this,Ze)._uiManager.updatePopupColor(l(this,Ze))}get commentButtonWidth(){var e;return(((e=l(this,an))==null?void 0:e.getBoundingClientRect().width)??0)/l(this,Ze).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(l(this,Sc))return l(this,Sc);if(!l(this,an))return null;const{x:e,y:t,height:r}=l(this,an).getBoundingClientRect(),{x:s,y:i,width:o,height:a}=l(this,Ze).parent.boundingClientRect;return[(e-s)/o,(t+r-i)/a]}set commentPopupPositionInLayer(e){x(this,Sc,e)}hasDefaultPopupPosition(){return l(this,Sc)===null}removeStandaloneCommentButton(){var e;(e=l(this,an))==null||e.remove(),x(this,an,null)}removeToolbarCommentButton(){var e;(e=l(this,rs))==null||e.remove(),x(this,rs,null)}setCommentButtonStates({selected:e,hasPopup:t}){l(this,an)&&(l(this,an).classList.toggle("selected",e),l(this,an).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let r,s;if(t)[r,s]=t;else{[r,s]=l(this,Ze).commentButtonPosition;const{width:d,height:h,x:f,y:p}=l(this,Ze);r=f+r*d,s=p+s*h}const i=l(this,Ze).parent.boundingClientRect,{x:o,y:a,width:c,height:u}=i;l(this,Ze)._uiManager.editComment(l(this,Ze),o+r*c,a+s*u,{...e,parentDimensions:i})}finish(){l(this,rs)&&(l(this,rs).focus({focusVisible:l(this,wc)}),x(this,wc,!1))}isDeleted(){return l(this,_c)||l(this,Ms)===""}isEmpty(){return l(this,Ms)===null}hasBeenEdited(){return this.isDeleted()||l(this,Ms)!==l(this,tg)}serialize(){return this.data}get data(){return{text:l(this,Ms),richText:l(this,bc),date:l(this,xc),deleted:this.isDeleted()}}set data(e){if(e!==l(this,Ms)&&x(this,bc,null),e===null){x(this,Ms,""),x(this,_c,!0);return}x(this,Ms,e),x(this,xc,new Date),x(this,_c,!1)}setInitialText(e,t=null){x(this,tg,e),this.data=e,x(this,xc,null),x(this,bc,t)}shown(){}destroy(){var e,t;(e=l(this,rs))==null||e.remove(),x(this,rs,null),(t=l(this,an))==null||t.remove(),x(this,an,null),x(this,Ms,""),x(this,bc,null),x(this,xc,null),x(this,Ze,null),x(this,wc,!1),x(this,_c,!1)}}an=new WeakMap,rs=new WeakMap,wc=new WeakMap,Ze=new WeakMap,tg=new WeakMap,bc=new WeakMap,Ms=new WeakMap,xc=new WeakMap,_c=new WeakMap,Sc=new WeakMap,ng=new WeakSet,BS=function(e,t){if(!l(this,Ze)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[l(this,Ze)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const r=l(this,Ze)._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",ys,{signal:r}),t&&(e.addEventListener("focusin",i=>{l(this,Ze)._focusEventsAllowed=!1,kt(i)},{capture:!0,signal:r}),e.addEventListener("focusout",i=>{l(this,Ze)._focusEventsAllowed=!0,kt(i)},{capture:!0,signal:r})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),e===l(this,rs)?this.edit():l(this,Ze).toggleComment(!0)};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(x(this,wc,!0),s(i))},{signal:r}),e.addEventListener("pointerenter",()=>{l(this,Ze).toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{l(this,Ze).toggleComment(!1,!1)},{signal:r}),e};var _h,Ec,rg,sg,ig,og,ag,io,Ac,oo,Cc,ao,Rl,iL,oL,aL;const W1=class W1{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:s=null,onPinching:i=null,onPinchEnd:o=null,signal:a}){S(this,Rl);S(this,_h);S(this,Ec,!1);S(this,rg,null);S(this,sg);S(this,ig);S(this,og);S(this,ag);S(this,io,null);S(this,Ac);S(this,oo,null);S(this,Cc);S(this,ao,null);x(this,_h,e),x(this,rg,r),x(this,sg,t),x(this,ig,s),x(this,og,i),x(this,ag,o),x(this,Cc,new AbortController),x(this,Ac,AbortSignal.any([a,l(this,Cc).signal])),e.addEventListener("touchstart",C(this,Rl,iL).bind(this),{passive:!1,signal:l(this,Ac)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ui.pixelRatio}destroy(){var e,t;(e=l(this,Cc))==null||e.abort(),x(this,Cc,null),(t=l(this,io))==null||t.abort(),x(this,io,null)}};_h=new WeakMap,Ec=new WeakMap,rg=new WeakMap,sg=new WeakMap,ig=new WeakMap,og=new WeakMap,ag=new WeakMap,io=new WeakMap,Ac=new WeakMap,oo=new WeakMap,Cc=new WeakMap,ao=new WeakMap,Rl=new WeakSet,iL=function(e){var s,i,o;if((s=l(this,sg))!=null&&s.call(this))return;if(e.touches.length===1){if(l(this,io))return;const a=x(this,io,new AbortController),c=AbortSignal.any([l(this,Ac),a.signal]),u=l(this,_h),d={capture:!0,signal:c,passive:!1},h=f=>{var p;f.pointerType==="touch"&&((p=l(this,io))==null||p.abort(),x(this,io,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(kt(f),h(f))},d),u.addEventListener("pointerup",h,d),u.addEventListener("pointercancel",h,d);return}if(!l(this,ao)){x(this,ao,new AbortController);const a=AbortSignal.any([l(this,Ac),l(this,ao).signal]),c=l(this,_h),u={signal:a,capture:!1,passive:!1};c.addEventListener("touchmove",C(this,Rl,oL).bind(this),u);const d=C(this,Rl,aL).bind(this);c.addEventListener("touchend",d,u),c.addEventListener("touchcancel",d,u),u.capture=!0,c.addEventListener("pointerdown",kt,u),c.addEventListener("pointermove",kt,u),c.addEventListener("pointercancel",kt,u),c.addEventListener("pointerup",kt,u),(i=l(this,ig))==null||i.call(this)}if(kt(e),e.touches.length!==2||(o=l(this,rg))!=null&&o.call(this)){x(this,oo,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),x(this,oo,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},oL=function(e){var E;if(!l(this,oo)||e.touches.length!==2)return;kt(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:s,screenY:i}=t,{screenX:o,screenY:a}=r,c=l(this,oo),{touch0X:u,touch0Y:d,touch1X:h,touch1Y:f}=c,p=h-u,v=f-d,m=o-s,w=a-i,g=Math.hypot(m,w)||1,b=Math.hypot(p,v)||1;if(!l(this,Ec)&&Math.abs(b-g)<=W1.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=i,c.touch1X=o,c.touch1Y=a,!l(this,Ec)){x(this,Ec,!0);return}const y=[(s+o)/2,(i+a)/2];(E=l(this,og))==null||E.call(this,y,b,g)},aL=function(e){var t;e.touches.length>=2||(l(this,ao)&&(l(this,ao).abort(),x(this,ao,null),(t=l(this,ag))==null||t.call(this)),l(this,oo)&&(kt(e),x(this,oo,null),x(this,Ec,!1)))};let b0=W1;var Tc,Ds,ct,qe,lo,Sh,ja,lg,ln,kc,co,ss,Ba,cg,Pc,vr,ug,Rc,uo,vi,Eh,Ah,is,Nc,dg,D0,ie,$S,hg,US,iw,lL,cL,zS,ow,HS,uL,dL,hL,VS,fL,WS,pL,mL,gL,GS,Pp;const he=class he{constructor(e){S(this,ie);S(this,Tc,null);S(this,Ds,null);S(this,ct,null);S(this,qe,null);S(this,lo,null);S(this,Sh,!1);S(this,ja,null);S(this,lg,"");S(this,ln,null);S(this,kc,null);S(this,co,null);S(this,ss,null);S(this,Ba,null);S(this,cg,"");S(this,Pc,!1);S(this,vr,null);S(this,ug,!1);S(this,Rc,!1);S(this,uo,!1);S(this,vi,null);S(this,Eh,0);S(this,Ah,0);S(this,is,null);S(this,Nc,null);V(this,"isSelected",!1);V(this,"_isCopy",!1);V(this,"_editToolbar",null);V(this,"_initialOptions",Object.create(null));V(this,"_initialData",null);V(this,"_isVisible",!0);V(this,"_uiManager",null);V(this,"_focusEventsAllowed",!0);S(this,dg,!1);S(this,D0,he._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,o];const[a,c]=this.parentDimensions;this.x=e.x/a,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=he.prototype._resizeWithKeyboard,t=ju.TRANSLATE_SMALL,r=ju.TRANSLATE_BIG;return ce(this,"_resizerKeyboardManager",new qv([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],he.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ce(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new xG({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(he._l10n??(he._l10n=e),he._l10nResizer||(he._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),he._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);he._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ye("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,dg)}set _isDraggable(e){var t;x(this,dg,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,D0)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(C(this,ie,Pp).call(this),(t=l(this,ss))==null||t.remove(),x(this,ss,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Pc)?x(this,Pc,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,o]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,s]=this.parentDimensions;this.setAt(e*r,t*s,this.width*r,this.height*s),this._onTranslated()}translate(e,t){C(this,ie,$S).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,vr)||x(this,vr,[this.x,this.y,this.width,this.height]),C(this,ie,$S).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){l(this,vr)||x(this,vr,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[s,i]}=this;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[c,u]=this.getBaseTranslation();o+=c,a+=u;const{style:d}=r;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!l(this,vr)&&(l(this,vr)[0]!==this.x||l(this,vr)[1]!==this.y)}get _hasBeenResized(){return!!l(this,vr)&&(l(this,vr)[2]!==this.width||l(this,vr)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=he,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,s]}=this;let{x:i,y:o,width:a,height:c}=this;if(a*=r,c*=s,i*=r,o*=s,this._mustFixPosition)switch(e){case 0:i=Bn(i,0,r-a),o=Bn(o,0,s-c);break;case 90:i=Bn(i,0,r-c),o=Bn(o,a,s);break;case 180:i=Bn(i,a,r),o=Bn(o,c,s);break;case 270:i=Bn(i,c,r),o=Bn(o,0,s-a);break}this.x=i/=r,this.y=o/=s;const[u,d]=this.getBaseTranslation();i+=u,o+=d,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return C(r=he,hg,US).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return C(r=he,hg,US).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(){const{div:{style:e},width:t,height:r}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=l(this,ct))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,Rc))return this._editToolbar;this._editToolbar=new NS(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=l(this,ct))==null||t.destroy()}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,ct)||(w0.initialize(he._l10n),x(this,ct,new w0(this)),l(this,Tc)&&(l(this,ct).data=l(this,Tc),x(this,Tc,null))),l(this,ct)}get altTextData(){var e;return(e=l(this,ct))==null?void 0:e.data}set altTextData(e){l(this,ct)&&(l(this,ct).data=e)}get guessedAltText(){var e;return(e=l(this,ct))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,ct))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,ct))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,ct)&&!l(this,ct).isEmpty()}hasAltTextData(){var e;return((e=l(this,ct))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=l(this,qe))==null||e.focusButton()}addCommentButton(){return this.canAddComment?l(this,qe)||x(this,qe,new Ty(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(l(this,lo)){this._uiManager.isEditingMode()&&l(this,lo).classList.remove("hidden");return}this.hasComment&&(x(this,lo,l(this,qe).renderForStandalone()),this.div.append(l(this,lo)))}}removeStandaloneCommentButton(){l(this,qe).removeStandaloneCommentButton(),x(this,lo,null)}hideStandaloneCommentButton(){var e;(e=l(this,lo))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:r,deleted:s}}=l(this,qe);return{text:t,richText:e,date:r,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){l(this,qe)||x(this,qe,new Ty(this)),l(this,qe).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:r}){if(!t||(l(this,qe)||x(this,qe,new Ty(this)),l(this,qe).setInitialText(e,r),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var e;return(e=l(this,qe))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=l(this,qe))==null?void 0:e.isDeleted()}get hasComment(){return!!l(this,qe)&&!l(this,qe).isEmpty()&&!l(this,qe).isDeleted()}async editComment(e){l(this,qe)||x(this,qe,new Ty(this)),l(this,qe).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){l(this,qe).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,s]=e.rect,[i]=this.pageDimensions,[o]=this.pageTranslation,a=o+i+1,c=s-100,u=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,c,u,s]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){l(this,qe).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=l(this,Sh)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),C(this,ie,WS).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),WD(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,Nc)||x(this,Nc,new b0({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,ie,uL).bind(this),onPinching:C(this,ie,dL).bind(this),onPinchEnd:C(this,ie,hL).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=vn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(x(this,Pc,!0),this._isDraggable){C(this,ie,fL).call(this,e);return}C(this,ie,VS).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,vi)&&clearTimeout(l(this,vi)),x(this,vi,setTimeout(()=>{var e;x(this,vi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,o]=this.pageDimensions,[a,c]=this.pageTranslation,u=e/s,d=t/s,h=this.x*i,f=this.y*o,p=this.width*i,v=this.height*o;switch(r){case 0:return[h+u+a,o-f-d-v+c,h+u+p+a,o-f-d+c];case 90:return[h+d+a,o-f+u+c,h+d+v+a,o-f+u+p+c];case 180:return[h-u-p+a,o-f+d+c,h-u+a,o-f+d+v+c];case 270:return[h-d-v+a,o-f-u-p+c,h-d+a,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,o]=e,a=i-r,c=o-s;switch(this.rotation){case 0:return[r,t-o,a,c];case 90:return[r,t-s,c,a];case 180:return[i,t-s,a,c];case 270:return[i,t-o,c,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&he._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=l(this,qe))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:r,opacity:s,deleted:i,richText:o},uid:a,pageIndex:c,creationDate:u,modificationDate:d}=this;return{id:a,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:u,modificationDate:r||d,popupRef:!i,color:t,opacity:s}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),x(this,Rc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),x(this,Rc,!1),!0):!1}isInEditMode(){return l(this,Rc)}shouldGetKeyboardEvents(){return l(this,uo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:s}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&s>0&&e<i&&r>0}rebuild(){C(this,ie,WS).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var r;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((r=this._initialData)==null?void 0:r.popupRef)||""}}static async deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});s.rotation=e.rotation,x(s,Tc,e.accessibilityData),s._isCopy=e.isCopy||!1;const[i,o]=s.pageDimensions,[a,c,u,d]=s.getRectInCurrentCoords(e.rect,o);return s.x=a/i,s.y=c/o,s.width=u/i,s.height=d/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,r;if((e=l(this,Ba))==null||e.abort(),x(this,Ba,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),l(this,vi)&&(clearTimeout(l(this,vi)),x(this,vi,null)),C(this,ie,Pp).call(this),this.removeEditToolbar(),l(this,is)){for(const s of l(this,is).values())clearTimeout(s);x(this,is,null)}this.parent=null,(t=l(this,Nc))==null||t.destroy(),x(this,Nc,null),(r=l(this,ss))==null||r.remove(),x(this,ss,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,ie,lL).call(this),l(this,ln).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[r,s,i,o]=this.getPDFRect();return[he._round(r+(i-r)*e),he._round(s+(o-s)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return l(this,qe).commentPopupPositionInLayer}set commentPopupPosition(e){l(this,qe).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return l(this,qe).hasDefaultPopupPosition()}get commentButtonWidth(){return l(this,qe).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=l(this,qe))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),x(this,co,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,ln).children;if(!l(this,Ds)){x(this,Ds,Array.from(t));const o=C(this,ie,pL).bind(this),a=C(this,ie,mL).bind(this),c=this._uiManager._signal;for(const u of l(this,Ds)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",C(this,ie,gL).bind(this,d),{signal:c}),u.setAttribute("data-l10n-id",he._l10nResizer[d])}}const r=l(this,Ds)[0];let s=0;for(const o of t){if(o===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(l(this,Ds).length/4);if(i!==s){if(i<s)for(let a=0;a<s-i;a++)l(this,ln).append(l(this,ln).firstElementChild);else if(i>s)for(let a=0;a<i-s;a++)l(this,ln).firstElementChild.before(l(this,ln).lastElementChild);let o=0;for(const a of t){const u=l(this,Ds)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",he._l10nResizer[u])}}C(this,ie,GS).call(this,0),x(this,uo,!0),l(this,ln).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,uo)&&C(this,ie,HS).call(this,l(this,cg),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,ie,Pp).call(this),this.div.focus()}select(){var e,t,r;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,i;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(r=l(this,ct))==null||r.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,r,s,i;this.isSelected&&(this.isSelected=!1,(e=l(this,ln))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(i=l(this,ct))==null||i.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,ug)}set isEditing(e){x(this,ug,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,is)||x(this,is,new Map);const{action:r}=e;let s=l(this,is).get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),l(this,is).delete(r),l(this,is).size===0&&x(this,is,null)},he._telemetryTimeout),l(this,is).set(r,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),x(this,Sh,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,Sh,!0)}updateFakeAnnotationElement(e){if(!l(this,ss)&&!this.deleted){x(this,ss,e.addFakeAnnotation(this));return}if(this.deleted){l(this,ss).remove(),x(this,ss,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&l(this,ss).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Tc=new WeakMap,Ds=new WeakMap,ct=new WeakMap,qe=new WeakMap,lo=new WeakMap,Sh=new WeakMap,ja=new WeakMap,lg=new WeakMap,ln=new WeakMap,kc=new WeakMap,co=new WeakMap,ss=new WeakMap,Ba=new WeakMap,cg=new WeakMap,Pc=new WeakMap,vr=new WeakMap,ug=new WeakMap,Rc=new WeakMap,uo=new WeakMap,vi=new WeakMap,Eh=new WeakMap,Ah=new WeakMap,is=new WeakMap,Nc=new WeakMap,dg=new WeakMap,D0=new WeakMap,ie=new WeakSet,$S=function([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},hg=new WeakSet,US=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},iw=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},lL=function(){if(l(this,ln))return;x(this,ln,document.createElement("div")),l(this,ln).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");l(this,ln).append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",C(this,ie,cL).bind(this,r),{signal:t}),s.addEventListener("contextmenu",ys,{signal:t}),s.tabIndex=-1}this.div.prepend(l(this,ln))},cL=function(e,t){var d;t.preventDefault();const{isMac:r}=vn.platform;if(t.button!==0||t.ctrlKey&&r)return;(d=l(this,ct))==null||d.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,x(this,kc,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,ie,HS).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",kt,{passive:!1,signal:o}),window.addEventListener("contextmenu",ys,{signal:o}),x(this,co,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var h;i.abort(),this.parent.togglePointerEvents(!0),(h=l(this,ct))==null||h.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=a,this.div.style.cursor=c,C(this,ie,ow).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},zS=function(e,t,r,s){this.width=r,this.height=s,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},ow=function(){if(!l(this,co))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=l(this,co);x(this,co,null);const i=this.x,o=this.y,a=this.width,c=this.height;i===e&&o===t&&a===r&&c===s||this.addCommands({cmd:C(this,ie,zS).bind(this,i,o,a,c),undo:C(this,ie,zS).bind(this,e,t,r,s),mustExec:!0})},HS=function(e,t){const[r,s]=this.parentDimensions,i=this.x,o=this.y,a=this.width,c=this.height,u=he.MIN_SIZE/r,d=he.MIN_SIZE/s,h=C(this,ie,iw).call(this,this.rotation),f=(j,$)=>[h[0]*j+h[2]*$,h[1]*j+h[3]*$],p=C(this,ie,iw).call(this,360-this.rotation),v=(j,$)=>[p[0]*j+p[2]*$,p[1]*j+p[3]*$];let m,w,g=!1,b=!1;switch(e){case"topLeft":g=!0,m=(j,$)=>[0,0],w=(j,$)=>[j,$];break;case"topMiddle":m=(j,$)=>[j/2,0],w=(j,$)=>[j/2,$];break;case"topRight":g=!0,m=(j,$)=>[j,0],w=(j,$)=>[0,$];break;case"middleRight":b=!0,m=(j,$)=>[j,$/2],w=(j,$)=>[0,$/2];break;case"bottomRight":g=!0,m=(j,$)=>[j,$],w=(j,$)=>[0,0];break;case"bottomMiddle":m=(j,$)=>[j/2,$],w=(j,$)=>[j/2,0];break;case"bottomLeft":g=!0,m=(j,$)=>[0,$],w=(j,$)=>[j,0];break;case"middleLeft":b=!0,m=(j,$)=>[0,$/2],w=(j,$)=>[j,$/2];break}const y=m(a,c),E=w(a,c);let T=f(...E);const P=he._round(i+T[0]),k=he._round(o+T[1]);let R=1,N=1,I,M;if(t.fromKeyboard)({deltaX:I,deltaY:M}=t);else{const{screenX:j,screenY:$}=t,[D,O]=l(this,kc);[I,M]=this.screenToPageTranslation(j-D,$-O),l(this,kc)[0]=j,l(this,kc)[1]=$}if([I,M]=v(I/r,M/s),g){const j=Math.hypot(a,c);R=N=Math.max(Math.min(Math.hypot(E[0]-y[0]-I,E[1]-y[1]-M)/j,1/a,1/c),u/a,d/c)}else b?R=Bn(Math.abs(E[0]-y[0]-I),u,1)/a:N=Bn(Math.abs(E[1]-y[1]-M),d,1)/c;const L=he._round(a*R),z=he._round(c*N);T=f(...w(L,z));const F=P-T[0],B=k-T[1];l(this,vr)||x(this,vr,[this.x,this.y,this.width,this.height]),this.width=L,this.height=z,this.x=F,this.y=B,this.setDims(),this.fixAndSetPosition(),this._onResizing()},uL=function(){var e;x(this,co,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=l(this,ct))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},dL=function(e,t,r){let i=.7*(r/t)+1-.7;if(i===1)return;const o=C(this,ie,iw).call(this,this.rotation),a=(P,k)=>[o[0]*P+o[2]*k,o[1]*P+o[3]*k],[c,u]=this.parentDimensions,d=this.x,h=this.y,f=this.width,p=this.height,v=he.MIN_SIZE/c,m=he.MIN_SIZE/u;i=Math.max(Math.min(i,1/f,1/p),v/f,m/p);const w=he._round(f*i),g=he._round(p*i);if(w===f&&g===p)return;l(this,vr)||x(this,vr,[d,h,f,p]);const b=a(f/2,p/2),y=he._round(d+b[0]),E=he._round(h+b[1]),T=a(w/2,g/2);this.x=y-T[0],this.y=E-T[1],this.width=w,this.height=g,this.setDims(),this.fixAndSetPosition(),this._onResizing()},hL=function(){var e;(e=l(this,ct))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),C(this,ie,ow).call(this)},VS=function(e){const{isMac:t}=vn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},fL=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const s=new AbortController,i=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:i},a=u=>{s.abort(),x(this,ja,null),x(this,Pc,!1),this._uiManager.endDragSession()||C(this,ie,VS).call(this,u),r&&this._onStopDragging()};t&&(x(this,Eh,e.clientX),x(this,Ah,e.clientY),x(this,ja,e.pointerId),x(this,lg,e.pointerType),window.addEventListener("pointermove",u=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=u;if(f!==l(this,ja)){kt(u);return}const[p,v]=this.screenToPageTranslation(d-l(this,Eh),h-l(this,Ah));x(this,Eh,d),x(this,Ah,h),this._uiManager.dragSelectedEditors(p,v)},o),window.addEventListener("touchmove",kt,o),window.addEventListener("pointerdown",u=>{u.pointerType===l(this,lg)&&(l(this,Nc)||u.isPrimary)&&a(u),kt(u)},o));const c=u=>{if(!l(this,ja)||l(this,ja)===u.pointerId){a(u);return}kt(u)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},WS=function(){if(l(this,Ba)||!this.div)return;x(this,Ba,new AbortController);const e=this._uiManager.combinedSignal(l(this,Ba));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},pL=function(e){he._resizerKeyboardManager.exec(this,e)},mL=function(e){var t;l(this,uo)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,ln)&&C(this,ie,Pp).call(this)},gL=function(e){x(this,cg,l(this,uo)?e:"")},GS=function(e){if(l(this,Ds))for(const t of l(this,Ds))t.tabIndex=e},Pp=function(){x(this,uo,!1),C(this,ie,GS).call(this,-1),C(this,ie,ow).call(this)},S(he,hg),V(he,"_l10n",null),V(he,"_l10nResizer",null),V(he,"_borderLineWidth",-1),V(he,"_colorManager",new MS),V(he,"_zIndex",1),V(he,"_telemetryTimeout",1e3);let tt=he;class xG extends tt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Kk=3285377520,Kr=4294901760,ri=65535;class vL{constructor(e){this.h1=e?e&4294967295:Kk,this.h2=e?e&4294967295:Kk}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let m=0,w=e.length;m<w;m++){const g=e.charCodeAt(m);g<=255?t[r++]=g:(t[r++]=g>>>8,t[r++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,o=new Uint32Array(t.buffer,0,s);let a=0,c=0,u=this.h1,d=this.h2;const h=3432918353,f=461845907,p=h&ri,v=f&ri;for(let m=0;m<s;m++)m&1?(a=o[m],a=a*h&Kr|a*p&ri,a=a<<15|a>>>17,a=a*f&Kr|a*v&ri,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[m],c=c*h&Kr|c*p&ri,c=c<<15|c>>>17,c=c*f&Kr|c*v&ri,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,i){case 3:a^=t[s*4+2]<<16;case 2:a^=t[s*4+1]<<8;case 1:a^=t[s*4],a=a*h&Kr|a*p&ri,a=a<<15|a>>>17,a=a*f&Kr|a*v&ri,s&1?u^=a:d^=a}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Kr|e*36045&ri,t=t*4283543511&Kr|((t<<16|e>>>16)*2950163797&Kr)>>>16,e^=t>>>1,e=e*444984403&Kr|e*60499&ri,t=t*3301882366&Kr|((t<<16|e>>>16)*3120437893&Kr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const qS=Object.freeze({map:null,hash:"",transfer:void 0});var Ic,Oc,ho,cn,L0,yL;class F1{constructor(){S(this,L0);S(this,Ic,!1);S(this,Oc,null);S(this,ho,null);S(this,cn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=l(this,cn).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return l(this,cn).get(e)}remove(e){const t=l(this,cn).get(e);if(t!==void 0&&(t instanceof tt&&l(this,ho).delete(t.annotationElementId),l(this,cn).delete(e),l(this,cn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of l(this,cn).values())if(r instanceof tt)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=l(this,cn).get(e);let s=!1;if(r!==void 0)for(const[i,o]of Object.entries(t))r[i]!==o&&(s=!0,r[i]=o);else s=!0,l(this,cn).set(e,t);s&&C(this,L0,yL).call(this),t instanceof tt&&((l(this,ho)||x(this,ho,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return l(this,cn).has(e)}get size(){return l(this,cn).size}resetModified(){l(this,Ic)&&(x(this,Ic,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new wL(this)}get serializable(){if(l(this,cn).size===0)return qS;const e=new Map,t=new vL,r=[],s=Object.create(null);let i=!1;for(const[o,a]of l(this,cn)){const c=a instanceof tt?a.serialize(!1,s):a;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:qS}get editorStats(){let e=null;const t=new Map;let r=0,s=0;for(const i of l(this,cn).values()){if(!(i instanceof tt)){i.popup&&(i.popup.deleted?s+=1:r+=1);continue}i.isCommentDeleted?s+=1:i.hasEditedComment&&(r+=1);const o=i.telemetryFinalData;if(!o)continue;const{type:a}=o;t.has(a)||t.set(a,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const c=e[a]||(e[a]=new Map);for(const[u,d]of Object.entries(o)){if(u==="type")continue;let h=c.get(u);h||(h=new Map,c.set(u,h));const f=h.get(d)??0;h.set(d,f+1)}}if((s>0||r>0)&&(e||(e=Object.create(null)),e.comments={deleted:s,edited:r}),!e)return null;for(const[i,o]of t)e[i]=o.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){x(this,Oc,null)}updateEditor(e,t){var s;const r=(s=l(this,ho))==null?void 0:s.get(e);return r?(r.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=l(this,ho))==null?void 0:t.get(e))||null}get modifiedIds(){if(l(this,Oc))return l(this,Oc);const e=[];if(l(this,ho))for(const t of l(this,ho).values())t.serialize()&&e.push(t.annotationElementId);return x(this,Oc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return l(this,cn).entries()}}Ic=new WeakMap,Oc=new WeakMap,ho=new WeakMap,cn=new WeakMap,L0=new WeakSet,yL=function(){l(this,Ic)||(x(this,Ic,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var fg;class wL extends F1{constructor(t){super();S(this,fg);const{map:r,hash:s,transfer:i}=t.serializable,o=structuredClone(r,i?{transfer:i}:null);x(this,fg,{map:o,hash:s,transfer:i})}get print(){Ye("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,fg)}get modifiedIds(){return ce(this,"modifiedIds",{ids:new Set,hash:""})}}fg=new WeakMap;var Ch;class _G{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){S(this,Ch,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,Ch).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||l(this,Ch).has(e.loadedName))){if(Re(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:o}=e,a=new FontFace(s,i,o);this.addNativeFontFace(a);try{await a.load(),l(this,Ch).add(s),r==null||r(e)}catch{le(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Ye("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw le(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ce(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return ce(this,"isSyncFontLoadingSupported",jn||vn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Re(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ce(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(E,T){return E.charCodeAt(T)<<24|E.charCodeAt(T+1)<<16|E.charCodeAt(T+2)<<8|E.charCodeAt(T+3)&255}function s(E,T,P,k){const R=E.substring(0,T),N=E.substring(T+P);return R+k+N}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let u=0;function d(E,T){if(++u>30){le("Load test font never loaded."),T();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(d.bind(null,E,T))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,h.length,h);const v=16,m=1482184792;let w=r(f,v);for(i=0,o=h.length-3;i<o;i+=4)w=w-m+r(h,i)|0;i<h.length&&(w=w-m+r(h+"XXX",i)|0),f=s(f,v,4,nG(w));const g=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${h}";src:${g}}`;this.insertRule(b);const y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(const E of[e.loadedName,h]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=E,y.append(T)}this._document.body.append(y),d(h,()=>{y.remove(),t.complete()})}}Ch=new WeakMap;var Ue;class SG{constructor(e,t=null,r,s){S(this,Ue);this.compiledGlyphs=Object.create(null),x(this,Ue,e),this._inspectFont=t,r&&Object.assign(this,r),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${LD(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let s;try{s=e.get(r)}catch(o){le(`getPathGenerator - ignoring character: "${o}".`)}const i=BD(s);return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=i}get black(){return l(this,Ue).black}get bold(){return l(this,Ue).bold}get disableFontFace(){return l(this,Ue).disableFontFace??!1}set disableFontFace(e){ce(this,"disableFontFace",!!e)}get fontExtraProperties(){return l(this,Ue).fontExtraProperties??!1}get isInvalidPDFjsFont(){return l(this,Ue).isInvalidPDFjsFont}get isType3Font(){return l(this,Ue).isType3Font}get italic(){return l(this,Ue).italic}get missingFile(){return l(this,Ue).missingFile}get remeasure(){return l(this,Ue).remeasure}get vertical(){return l(this,Ue).vertical}get ascent(){return l(this,Ue).ascent}get defaultWidth(){return l(this,Ue).defaultWidth}get descent(){return l(this,Ue).descent}get bbox(){return l(this,Ue).bbox}set bbox(e){ce(this,"bbox",e)}get fontMatrix(){return l(this,Ue).fontMatrix}get fallbackName(){return l(this,Ue).fallbackName}get loadedName(){return l(this,Ue).loadedName}get mimetype(){return l(this,Ue).mimetype}get name(){return l(this,Ue).name}get data(){return l(this,Ue).data}clearData(){l(this,Ue).clearData()}get cssFontInfo(){return l(this,Ue).cssFontInfo}get systemFontInfo(){return l(this,Ue).systemFontInfo}get defaultVMetrics(){return l(this,Ue).defaultVMetrics}}Ue=new WeakMap;var Th,kh,pg,Ph,aw;const Ld=class Ld{constructor(e){S(this,Ph);S(this,Th);S(this,kh);S(this,pg);x(this,Th,e),x(this,kh,new DataView(l(this,Th))),x(this,pg,new TextDecoder)}static write(e){const t=new TextEncoder,r={};let s=0;for(const u of Ld.strings){const d=t.encode(e[u]);r[u]=d,s+=4+d.length}const i=new ArrayBuffer(s),o=new Uint8Array(i),a=new DataView(i);let c=0;for(const u of Ld.strings){const d=r[u],h=d.length;a.setUint32(c,h),o.set(d,c+4),c+=4+h}return Re(c===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return C(this,Ph,aw).call(this,0)}get fontWeight(){return C(this,Ph,aw).call(this,1)}get italicAngle(){return C(this,Ph,aw).call(this,2)}};Th=new WeakMap,kh=new WeakMap,pg=new WeakMap,Ph=new WeakSet,aw=function(e){Re(e<Ld.strings.length,"Invalid string index");let t=0;for(let s=0;s<e;s++)t+=l(this,kh).getUint32(t)+4;const r=l(this,kh).getUint32(t);return l(this,pg).decode(new Uint8Array(l(this,Th),t+4,r))},V(Ld,"strings",["fontFamily","fontWeight","italicAngle"]);let x0=Ld;var $a,yi,Mc,Dc,Rp;const Fd=class Fd{constructor(e){S(this,Dc);S(this,$a);S(this,yi);S(this,Mc);x(this,$a,e),x(this,yi,new DataView(l(this,$a))),x(this,Mc,new TextDecoder)}static write(e){const t=new TextEncoder,r={};let s=0;for(const f of Fd.strings){const p=t.encode(e[f]);r[f]=p,s+=4+p.length}s+=4;let i,o,a=1+s;e.style&&(i=t.encode(e.style.style),o=t.encode(e.style.weight),a+=4+i.length+4+o.length);const c=new ArrayBuffer(a),u=new Uint8Array(c),d=new DataView(c);let h=0;d.setUint8(h++,e.guessFallback?1:0),d.setUint32(h,0),h+=4,s=0;for(const f of Fd.strings){const p=r[f],v=p.length;s+=4+v,d.setUint32(h,v),u.set(p,h+4),h+=4+v}return d.setUint32(h-s-4,s),e.style&&(d.setUint32(h,i.length),u.set(i,h+4),h+=4+i.length,d.setUint32(h,o.length),u.set(o,h+4),h+=4+o.length),Re(h<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(h)}get guessFallback(){return l(this,yi).getUint8(0)!==0}get css(){return C(this,Dc,Rp).call(this,0)}get loadedName(){return C(this,Dc,Rp).call(this,1)}get baseFontName(){return C(this,Dc,Rp).call(this,2)}get src(){return C(this,Dc,Rp).call(this,3)}get style(){let e=1;e+=4+l(this,yi).getUint32(e);const t=l(this,yi).getUint32(e),r=l(this,Mc).decode(new Uint8Array(l(this,$a),e+4,t));e+=4+t;const s=l(this,yi).getUint32(e),i=l(this,Mc).decode(new Uint8Array(l(this,$a),e+4,s));return{style:r,weight:i}}};$a=new WeakMap,yi=new WeakMap,Mc=new WeakMap,Dc=new WeakSet,Rp=function(e){Re(e<Fd.strings.length,"Invalid string index");let t=5;for(let s=0;s<e;s++)t+=l(this,yi).getUint32(t)+4;const r=l(this,yi).getUint32(t);return l(this,Mc).decode(new Uint8Array(l(this,$a),t+4,r))},V(Fd,"strings",["css","loadedName","baseFontName","src"]);let _0=Fd;var Rh,Nh,Ih,Oh,yr,wi,mg,ze,Ct,As,lw,Np;const me=class me{constructor({data:e,extra:t}){S(this,Ct);S(this,wi);S(this,mg);S(this,ze);x(this,wi,e),x(this,mg,new TextDecoder),x(this,ze,new DataView(l(this,wi))),t&&Object.assign(this,t)}get black(){return C(this,Ct,As).call(this,0)}get bold(){return C(this,Ct,As).call(this,1)}get disableFontFace(){return C(this,Ct,As).call(this,2)}get fontExtraProperties(){return C(this,Ct,As).call(this,3)}get isInvalidPDFjsFont(){return C(this,Ct,As).call(this,4)}get isType3Font(){return C(this,Ct,As).call(this,5)}get italic(){return C(this,Ct,As).call(this,6)}get missingFile(){return C(this,Ct,As).call(this,7)}get remeasure(){return C(this,Ct,As).call(this,8)}get vertical(){return C(this,Ct,As).call(this,9)}get ascent(){return C(this,Ct,lw).call(this,0)}get defaultWidth(){return C(this,Ct,lw).call(this,1)}get descent(){return C(this,Ct,lw).call(this,2)}get bbox(){let e=l(me,Nh);if(l(this,ze).getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<4;s++)r.push(l(this,ze).getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=l(me,Ih);if(l(this,ze).getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<6;s++)r.push(l(this,ze).getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=l(me,Oh);if(l(this,ze).getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<3;s++)r.push(l(this,ze).getInt16(e,!0)),e+=2;return r}get fallbackName(){return C(this,Ct,Np).call(this,0)}get loadedName(){return C(this,Ct,Np).call(this,1)}get mimetype(){return C(this,Ct,Np).call(this,2)}get name(){return C(this,Ct,Np).call(this,3)}get data(){let e=l(me,yr);const t=l(this,ze).getUint32(e);e+=4+t;const r=l(this,ze).getUint32(e);e+=4+r;const s=l(this,ze).getUint32(e);e+=4+s;const i=l(this,ze).getUint32(e);if(i!==0)return new Uint8Array(l(this,wi),e+4,i)}clearData(){let e=l(me,yr);const t=l(this,ze).getUint32(e);e+=4+t;const r=l(this,ze).getUint32(e);e+=4+r;const s=l(this,ze).getUint32(e);e+=4+s;const i=l(this,ze).getUint32(e);new Uint8Array(l(this,wi),e+4,i).fill(0),l(this,ze).setUint32(e,0)}get cssFontInfo(){let e=l(me,yr);const t=l(this,ze).getUint32(e);e+=4+t;const r=l(this,ze).getUint32(e);e+=4+r;const s=l(this,ze).getUint32(e);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(l(this,wi),e+4,s)),new x0(i.buffer)}get systemFontInfo(){let e=l(me,yr);const t=l(this,ze).getUint32(e);e+=4+t;const r=l(this,ze).getUint32(e);if(r===0)return null;const s=new Uint8Array(r);return s.set(new Uint8Array(l(this,wi),e+4,r)),new _0(s.buffer)}static write(e){const t=e.systemFontInfo?_0.write(e.systemFontInfo):null,r=e.cssFontInfo?x0.write(e.cssFontInfo):null,s=new TextEncoder,i={};let o=0;for(const m of me.strings)i[m]=s.encode(e[m]),o+=4+i[m].length;const a=l(me,yr)+4+o+4+(t?t.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(a),u=new Uint8Array(c),d=new DataView(c);let h=0;const f=me.bools.length;let p=0,v=0;for(let m=0;m<f;m++){const w=e[me.bools[m]];p|=(w===void 0?0:w?2:1)<<v,v+=2,(v===8||m===f-1)&&(d.setUint8(h++,p),p=0,v=0)}Re(h===l(me,Rh),"FontInfo.write: Boolean properties offset mismatch");for(const m of me.numbers)d.setFloat64(h,e[m]),h+=8;if(Re(h===l(me,Nh),"FontInfo.write: Number properties offset mismatch"),e.bbox){d.setUint8(h++,4);for(const m of e.bbox)d.setInt16(h,m,!0),h+=2}else d.setUint8(h++,0),h+=2*4;if(Re(h===l(me,Ih),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){d.setUint8(h++,6);for(const m of e.fontMatrix)d.setFloat64(h,m,!0),h+=8}else d.setUint8(h++,0),h+=8*6;if(Re(h===l(me,Oh),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){d.setUint8(h++,1);for(const m of e.defaultVMetrics)d.setInt16(h,m,!0),h+=2}else d.setUint8(h++,0),h+=3*2;Re(h===l(me,yr),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(l(me,yr),0),h+=4;for(const m of me.strings){const w=i[m],g=w.length;d.setUint32(h,g),u.set(w,h+4),h+=4+g}if(d.setUint32(l(me,yr),h-l(me,yr)-4),!t)d.setUint32(h,0),h+=4;else{const m=t.byteLength;d.setUint32(h,m),Re(h+4+m<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),h+4),h+=4+m}if(!r)d.setUint32(h,0),h+=4;else{const m=r.byteLength;d.setUint32(h,m),Re(h+4+m<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(r),h+4),h+=4+m}return e.data===void 0?(d.setUint32(h,0),h+=4):(d.setUint32(h,e.data.length),u.set(e.data,h+4),h+=4+e.data.length),Re(h<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(h)}};Rh=new WeakMap,Nh=new WeakMap,Ih=new WeakMap,Oh=new WeakMap,yr=new WeakMap,wi=new WeakMap,mg=new WeakMap,ze=new WeakMap,Ct=new WeakSet,As=function(e){Re(e<me.bools.length,"Invalid boolean index");const t=Math.floor(e/4),r=e*2%8,s=l(this,ze).getUint8(t)>>r&3;return s===0?void 0:s===2},lw=function(e){return Re(e<me.numbers.length,"Invalid number index"),l(this,ze).getFloat64(l(me,Rh)+e*8)},Np=function(e){Re(e<me.strings.length,"Invalid string index");let t=l(me,yr)+4;for(let i=0;i<e;i++)t+=l(this,ze).getUint32(t)+4;const r=l(this,ze).getUint32(t),s=new Uint8Array(r);return s.set(new Uint8Array(l(this,wi),t+4,r)),l(this,mg).decode(s)},V(me,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),V(me,"numbers",["ascent","defaultWidth","descent"]),V(me,"strings",["fallbackName","loadedName","mimetype","name"]),S(me,Rh,Math.ceil(me.bools.length*2/8)),S(me,Nh,l(me,Rh)+me.numbers.length*8),S(me,Ih,l(me,Nh)+1+2*4),S(me,Oh,l(me,Ih)+1+8*6),S(me,yr,l(me,Oh)+1+2*3);let KS=me;var gg,vg,yg,wg,bg,xg,_g,Sg;const Je=class Je{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,r=null,s=[],i=[],o=[],a=[],c=null,u=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,r=e[2],o=e[3],t===1?s.push(...e[4],...e[5]):s.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,c=e[1],s=e[2],i=e[3],a=e[4]||[],r=e[6],u=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const d=Math.floor(s.length/2),h=Math.floor(i.length/3),f=o.length,p=a.length;let v=0;for(const T of a)v+=1,v=Math.ceil(v/4)*4,v+=4+T.coords.length*4,v+=4+T.colors.length*4,T.verticesPerRow!==void 0&&(v+=4);const m=20+d*8+h*3+f*8+(r?16:0)+(u?3:0)+v,w=new ArrayBuffer(m),g=new DataView(w),b=new Uint8Array(w);g.setUint8(l(Je,gg),t),g.setUint8(l(Je,vg),r?1:0),g.setUint8(l(Je,yg),u?1:0),g.setUint8(l(Je,wg),c),g.setUint32(l(Je,bg),d,!0),g.setUint32(l(Je,xg),h,!0),g.setUint32(l(Je,_g),f,!0),g.setUint32(l(Je,Sg),p,!0);let y=20;new Float32Array(w,y,d*2).set(s),y+=d*8,b.set(i,y),y+=h*3;for(const[T,P]of o)g.setFloat32(y,T,!0),y+=4,g.setUint32(y,parseInt(P.slice(1),16),!0),y+=4;if(r)for(const T of r)g.setFloat32(y,T,!0),y+=4;u&&(b.set(u,y),y+=3);for(let T=0;T<a.length;T++){const P=a[T];g.setUint8(y,P.type),y+=1,y=Math.ceil(y/4)*4,g.setUint32(y,P.coords.length,!0),y+=4,new Int32Array(w,y,P.coords.length).set(P.coords),y+=P.coords.length*4,g.setUint32(y,P.colors.length,!0),y+=4,new Int32Array(w,y,P.colors.length).set(P.colors),y+=P.colors.length*4,P.verticesPerRow!==void 0&&(g.setUint32(y,P.verticesPerRow,!0),y+=4)}return w}getIR(){const e=this.view,t=this.data[l(Je,gg)],r=!!this.data[l(Je,vg)],s=!!this.data[l(Je,yg)],i=e.getUint32(l(Je,bg),!0),o=e.getUint32(l(Je,xg),!0),a=e.getUint32(l(Je,_g),!0),c=e.getUint32(l(Je,Sg),!0);let u=20;const d=new Float32Array(this.buffer,u,i*2);u+=i*8;const h=new Uint8Array(this.buffer,u,o*3);u+=o*3;const f=[];for(let w=0;w<a;++w){const g=e.getFloat32(u,!0);u+=4;const b=e.getUint32(u,!0);u+=4,f.push([g,`#${b.toString(16).padStart(6,"0")}`])}let p=null;if(r){p=[];for(let w=0;w<4;++w)p.push(e.getFloat32(u,!0)),u+=4}let v=null;s&&(v=new Uint8Array(this.buffer,u,3),u+=3);const m=[];for(let w=0;w<c;++w){const g=e.getUint8(u);u+=1,u=Math.ceil(u/4)*4;const b=e.getUint32(u,!0);u+=4;const y=new Int32Array(this.buffer,u,b);u+=b*4;const E=e.getUint32(u,!0);u+=4;const T=new Int32Array(this.buffer,u,E);u+=E*4;const P={type:g,coords:y,colors:T};g===CS.LATTICE&&(P.verticesPerRow=e.getUint32(u,!0),u+=4),m.push(P)}if(t===1)return["RadialAxial","axial",p,f,Array.from(d.slice(0,2)),Array.from(d.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",p,f,[d[0],d[1]],[d[3],d[4]],d[2],d[5]];if(t===3){const w=this.data[l(Je,wg)];let g=null;if(d.length>0){let b=d[0],y=d[0],E=d[1],T=d[1];for(let P=0;P<d.length;P+=2){const k=d[P],R=d[P+1];b=b>k?k:b,E=E>R?R:E,y=y<k?k:y,T=T<R?R:T}g=[b,E,y,T]}return["Mesh",w,d,h,m,g,p,v]}throw new Error(`Unsupported pattern kind: ${t}`)}};gg=new WeakMap,vg=new WeakMap,yg=new WeakMap,wg=new WeakMap,bg=new WeakMap,xg=new WeakMap,_g=new WeakMap,Sg=new WeakMap,S(Je,gg,0),S(Je,vg,1),S(Je,yg,2),S(Je,wg,3),S(Je,bg,4),S(Je,xg,8),S(Je,_g,12),S(Je,Sg,16);let XS=Je;function EG(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(jn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function AG(n){if(jn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Hv(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ky(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const YS=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,CG=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",TG=aG.bind(null,YS,CG);var fo,F0;class kG{constructor(){S(this,fo,new Map);S(this,F0,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};l(this,F0).then(()=>{for(const[s]of l(this,fo))s.call(this,r)})}addEventListener(e,t,r=null){let s=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:i}=r;if(i.aborted){le("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}l(this,fo).set(t,s)}removeEventListener(e,t){const r=l(this,fo).get(t);r==null||r(),l(this,fo).delete(t)}terminate(){for(const[,e]of l(this,fo))e==null||e();l(this,fo).clear()}}fo=new WeakMap,F0=new WeakMap;const Py={DATA:1,ERROR:2},It={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Xk(){}function Xn(n){if(n instanceof kl||n instanceof TS||n instanceof Uk||n instanceof v0||n instanceof $x)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Ye('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new kl(n.message);case"InvalidPDFException":return new TS(n.message);case"PasswordException":return new Uk(n.message,n.code);case"ResponseException":return new v0(n.message,n.status,n.missing);case"UnknownErrorException":return new $x(n.message,n.details)}return new $x(n.message,n.toString())}var Mh,ms,bL,xL,_L,cw;class Ip{constructor(e,t,r){S(this,ms);S(this,Mh,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",C(this,ms,bL).bind(this),{signal:l(this,Mh).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[i]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:t,desiredSize:u.desiredSize},s),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[i].pullCall=d,c.postMessage({sourceName:o,targetName:a,stream:It.PULL,streamId:i,desiredSize:u.desiredSize}),d.promise},cancel:u=>{Re(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[i].cancelCall=d,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:It.CANCEL,streamId:i,reason:Xn(u)}),d.promise}},r)}destroy(){var e;(e=l(this,Mh))==null||e.abort(),x(this,Mh,null)}}Mh=new WeakMap,ms=new WeakSet,bL=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){C(this,ms,_L).call(this,e);return}if(e.callback){const r=e.callbackId,s=this.callbackCapabilities[r];if(!s)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===Py.DATA)s.resolve(e.data);else if(e.callback===Py.ERROR)s.reject(Xn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,s=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:r,targetName:s,callback:Py.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:r,targetName:s,callback:Py.ERROR,callbackId:e.callbackId,reason:Xn(o)})});return}if(e.streamId){C(this,ms,xL).call(this,e);return}t(e.data)},xL=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],c={enqueue(u,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:It.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:It.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){Re(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:It.ERROR,streamId:t,reason:Xn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(a,e.data,c).then(function(){i.postMessage({sourceName:r,targetName:s,stream:It.START_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:It.START_COMPLETE,streamId:t,reason:Xn(u)})})},_L=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case It.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Xn(e.reason));break;case It.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Xn(e.reason));break;case It.PULL:if(!a){i.postMessage({sourceName:r,targetName:s,stream:It.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||Xk).then(function(){i.postMessage({sourceName:r,targetName:s,stream:It.PULL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:It.PULL_COMPLETE,streamId:t,reason:Xn(u)})});break;case It.ENQUEUE:if(Re(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case It.CLOSE:if(Re(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),C(this,ms,cw).call(this,o,t);break;case It.ERROR:Re(o,"error should have stream controller"),o.controller.error(Xn(e.reason)),C(this,ms,cw).call(this,o,t);break;case It.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Xn(e.reason)),C(this,ms,cw).call(this,o,t);break;case It.CANCEL:if(!a)break;const c=Xn(e.reason);Promise.try(a.onCancel||Xk,c).then(function(){i.postMessage({sourceName:r,targetName:s,stream:It.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:It.CANCEL_COMPLETE,streamId:t,reason:Xn(u)})}),a.sinkCapability.reject(c),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},cw=async function(e,t){var r,s,i;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var Eg;class SL{constructor({enableHWA:e=!1}){S(this,Eg,!1);x(this,Eg,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!l(this,Eg)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ye("Abstract method `_createCanvas` called.")}}Eg=new WeakMap;class PG extends SL{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class EL{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ye("Abstract method `_fetch` called.")}}class Yk extends EL{async _fetch(e){const t=await Vv(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Hv(t)}}class AL{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}var Lc,Dh,po,mo,Tn,Fc,jc,Q,_n,Op,pd,uw,md,CL,QS,gd,Mp,Dp,JS,Lp;class RG extends AL{constructor({docId:t,ownerDocument:r=globalThis.document}){super();S(this,Q);S(this,Lc);S(this,Dh);S(this,po);S(this,mo);S(this,Tn);S(this,Fc);S(this,jc,0);x(this,mo,t),x(this,Tn,r)}addFilter(t){if(!t)return"none";let r=l(this,Q,_n).get(t);if(r)return r;const[s,i,o]=C(this,Q,uw).call(this,t),a=t.length===1?s:`${s}${i}${o}`;if(r=l(this,Q,_n).get(a),r)return l(this,Q,_n).set(t,r),r;const c=`g_${l(this,mo)}_transfer_map_${wt(this,jc)._++}`,u=C(this,Q,md).call(this,c);l(this,Q,_n).set(t,u),l(this,Q,_n).set(a,u);const d=C(this,Q,gd).call(this,c);return C(this,Q,Dp).call(this,s,i,o,d),u}addHCMFilter(t,r){var v;const s=`${t}-${r}`,i="base";let o=l(this,Q,Op).get(i);if((o==null?void 0:o.key)===s||(o?((v=o.filter)==null||v.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},l(this,Q,Op).set(i,o)),!t||!r))return o.url;const a=C(this,Q,Lp).call(this,t);t=te.makeHexColor(...a);const c=C(this,Q,Lp).call(this,r);if(r=te.makeHexColor(...c),l(this,Q,pd).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return o.url;const u=new Array(256);for(let m=0;m<=255;m++){const w=m/255;u[m]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const d=u.join(","),h=`g_${l(this,mo)}_hcm_filter`,f=o.filter=C(this,Q,gd).call(this,h);C(this,Q,Dp).call(this,d,d,d,f),C(this,Q,QS).call(this,f);const p=(m,w)=>{const g=a[m]/255,b=c[m]/255,y=new Array(w+1);for(let E=0;E<=w;E++)y[E]=g+E/w*(b-g);return y.join(",")};return C(this,Q,Dp).call(this,p(0,5),p(1,5),p(2,5),f),o.url=C(this,Q,md).call(this,h),o.url}addAlphaFilter(t){let r=l(this,Q,_n).get(t);if(r)return r;const[s]=C(this,Q,uw).call(this,[t]),i=`alpha_${s}`;if(r=l(this,Q,_n).get(i),r)return l(this,Q,_n).set(t,r),r;const o=`g_${l(this,mo)}_alpha_map_${wt(this,jc)._++}`,a=C(this,Q,md).call(this,o);l(this,Q,_n).set(t,a),l(this,Q,_n).set(i,a);const c=C(this,Q,gd).call(this,o);return C(this,Q,JS).call(this,s,c),a}addLuminosityFilter(t){let r=l(this,Q,_n).get(t||"luminosity");if(r)return r;let s,i;if(t?([s]=C(this,Q,uw).call(this,[t]),i=`luminosity_${s}`):i="luminosity",r=l(this,Q,_n).get(i),r)return l(this,Q,_n).set(t,r),r;const o=`g_${l(this,mo)}_luminosity_map_${wt(this,jc)._++}`,a=C(this,Q,md).call(this,o);l(this,Q,_n).set(t,a),l(this,Q,_n).set(i,a);const c=C(this,Q,gd).call(this,o);return C(this,Q,CL).call(this,c),t&&C(this,Q,JS).call(this,s,c),a}addHighlightHCMFilter(t,r,s,i,o){var b;const a=`${r}-${s}-${i}-${o}`;let c=l(this,Q,Op).get(t);if((c==null?void 0:c.key)===a||(c?((b=c.filter)==null||b.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,Q,Op).set(t,c)),!r||!s))return c.url;const[u,d]=[r,s].map(C(this,Q,Lp).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,v]=[i,o].map(C(this,Q,Lp).bind(this));f<h&&([h,f,p,v]=[f,h,v,p]),l(this,Q,pd).style.color="";const m=(y,E,T)=>{const P=new Array(256),k=(f-h)/T,R=y/255,N=(E-y)/(255*T);let I=0;for(let M=0;M<=T;M++){const L=Math.round(h+M*k),z=R+M*N;for(let F=I;F<=L;F++)P[F]=z;I=L+1}for(let M=I;M<256;M++)P[M]=P[I-1];return P.join(",")},w=`g_${l(this,mo)}_hcm_${t}_filter`,g=c.filter=C(this,Q,gd).call(this,w);return C(this,Q,QS).call(this,g),C(this,Q,Dp).call(this,m(p[0],v[0],5),m(p[1],v[1],5),m(p[2],v[2],5),g),c.url=C(this,Q,md).call(this,w),c.url}destroy(t=!1){var r,s,i,o;t&&((r=l(this,Fc))!=null&&r.size)||((s=l(this,po))==null||s.parentNode.parentNode.remove(),x(this,po,null),(i=l(this,Dh))==null||i.clear(),x(this,Dh,null),(o=l(this,Fc))==null||o.clear(),x(this,Fc,null),x(this,jc,0))}}Lc=new WeakMap,Dh=new WeakMap,po=new WeakMap,mo=new WeakMap,Tn=new WeakMap,Fc=new WeakMap,jc=new WeakMap,Q=new WeakSet,_n=function(){return l(this,Dh)||x(this,Dh,new Map)},Op=function(){return l(this,Fc)||x(this,Fc,new Map)},pd=function(){if(!l(this,po)){const t=l(this,Tn).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const s=l(this,Tn).createElementNS(Gi,"svg");s.setAttribute("width",0),s.setAttribute("height",0),x(this,po,l(this,Tn).createElementNS(Gi,"defs")),t.append(s),s.append(l(this,po)),l(this,Tn).body.append(t)}return l(this,po)},uw=function(t){if(t.length===1){const u=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=u[f]/255;const h=d.join(",");return[h,h,h]}const[r,s,i]=t,o=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=r[u]/255,a[u]=s[u]/255,c[u]=i[u]/255;return[o.join(","),a.join(","),c.join(",")]},md=function(t){if(l(this,Lc)===void 0){x(this,Lc,"");const r=l(this,Tn).URL;r!==l(this,Tn).baseURI&&(Fb(r)?le('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,Lc,OD(r,"")))}return`url(${l(this,Lc)}#${t})`},CL=function(t){const r=l(this,Tn).createElementNS(Gi,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},QS=function(t){const r=l(this,Tn).createElementNS(Gi,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},gd=function(t){const r=l(this,Tn).createElementNS(Gi,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),l(this,Q,pd).append(r),r},Mp=function(t,r,s){const i=l(this,Tn).createElementNS(Gi,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},Dp=function(t,r,s,i){const o=l(this,Tn).createElementNS(Gi,"feComponentTransfer");i.append(o),C(this,Q,Mp).call(this,o,"feFuncR",t),C(this,Q,Mp).call(this,o,"feFuncG",r),C(this,Q,Mp).call(this,o,"feFuncB",s)},JS=function(t,r){const s=l(this,Tn).createElementNS(Gi,"feComponentTransfer");r.append(s),C(this,Q,Mp).call(this,s,"feFuncA",t)},Lp=function(t){return l(this,Q,pd).style.color=t,Gv(getComputedStyle(l(this,Q,pd)).getPropertyValue("color"))};class TL{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ye("Abstract method `_fetch` called.")}}class Qk extends TL{async _fetch(e){const t=await Vv(e,"arraybuffer");return new Uint8Array(t)}}class kL{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Ye("Abstract method `_fetch` called.")}}class Jk extends kL{async _fetch(e){const t=await Vv(e,"arraybuffer");return new Uint8Array(t)}}jn&&le("Please use the `legacy` build in Node.js environments.");async function j1(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class NG extends AL{}class IG extends SL{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class OG extends EL{async _fetch(e){return j1(e)}}class MG extends TL{async _fetch(e){return j1(e)}}class DG extends kL{async _fetch(e){return j1(e)}}const ld="__forcedDependency",{floor:Zk,ceil:eP}=Math;function Ry(n,e,t,r,s,i){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],r),n[e*4+2]=Math.max(n[e*4+2],s),n[e*4+3]=Math.max(n[e*4+3],i)}const ZS=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Lh,Ua;class LG{constructor(e,t){S(this,Lh);S(this,Ua);x(this,Lh,e),x(this,Ua,t)}get length(){return l(this,Lh).length}isEmpty(e){return l(this,Lh)[e]===ZS}minX(e){return l(this,Ua)[e*4+0]/256}minY(e){return l(this,Ua)[e*4+1]/256}maxX(e){return(l(this,Ua)[e*4+2]+1)/256}maxY(e){return(l(this,Ua)[e*4+3]+1)/256}}Lh=new WeakMap,Ua=new WeakMap;const Ny=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var Jn,Zn,Bc,Ls,$c,go,Fe,He,vo,er,Ag,Fh,Uc,zc,yo,kn,bi,Cg,eE;class FG{constructor(e,t,r=!1){S(this,Cg);S(this,Jn,{__proto__:null});S(this,Zn,{__proto__:null,transform:[],moveText:[],sameLineText:[],[ld]:[]});S(this,Bc,new Map);S(this,Ls,[]);S(this,$c,[]);S(this,go,[[1,0,0,1,0,0]]);S(this,Fe,[-1/0,-1/0,1/0,1/0]);S(this,He,new Float64Array([1/0,1/0,-1/0,-1/0]));S(this,vo,-1);S(this,er,new Set);S(this,Ag,new Map);S(this,Fh,new Map);S(this,Uc);S(this,zc);S(this,yo);S(this,kn);S(this,bi);x(this,Uc,e.width),x(this,zc,e.height),C(this,Cg,eE).call(this,t),r&&x(this,bi,new Map)}growOperationsCount(e){e>=l(this,kn).length&&C(this,Cg,eE).call(this,e,l(this,kn))}save(e){return x(this,Jn,{__proto__:l(this,Jn)}),x(this,Zn,{__proto__:l(this,Zn),transform:{__proto__:l(this,Zn).transform},moveText:{__proto__:l(this,Zn).moveText},sameLineText:{__proto__:l(this,Zn).sameLineText},[ld]:{__proto__:l(this,Zn)[ld]}}),x(this,Fe,{__proto__:l(this,Fe)}),l(this,Ls).push(e),this}restore(e){var s;const t=Object.getPrototypeOf(l(this,Jn));if(t===null)return this;x(this,Jn,t),x(this,Zn,Object.getPrototypeOf(l(this,Zn))),x(this,Fe,Object.getPrototypeOf(l(this,Fe)));const r=l(this,Ls).pop();return r!==void 0&&((s=Ny(l(this,bi),e))==null||s.dependencies.add(r),l(this,kn)[e]=l(this,kn)[r]),this}recordOpenMarker(e){return l(this,Ls).push(e),this}getOpenMarker(){return l(this,Ls).length===0?null:l(this,Ls).at(-1)}recordCloseMarker(e){var r;const t=l(this,Ls).pop();return t!==void 0&&((r=Ny(l(this,bi),e))==null||r.dependencies.add(t),l(this,kn)[e]=l(this,kn)[t]),this}beginMarkedContent(e){return l(this,$c).push(e),this}endMarkedContent(e){var r;const t=l(this,$c).pop();return t!==void 0&&((r=Ny(l(this,bi),e))==null||r.dependencies.add(t),l(this,kn)[e]=l(this,kn)[t]),this}pushBaseTransform(e){return l(this,go).push(te.multiplyByDOMMatrix(l(this,go).at(-1),e.getTransform())),this}popBaseTransform(){return l(this,go).length>1&&l(this,go).pop(),this}recordSimpleData(e,t){return l(this,Jn)[e]=t,this}recordIncrementalData(e,t){return l(this,Zn)[e].push(t),this}resetIncrementalData(e,t){return l(this,Zn)[e].length=0,this}recordNamedData(e,t){return l(this,Bc).set(e,t),this}recordSimpleDataFromNamed(e,t,r){l(this,Jn)[e]=l(this,Bc).get(t)??r}recordFutureForcedDependency(e,t){return this.recordIncrementalData(ld,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in l(this,Jn)&&this.recordFutureForcedDependency(t,l(this,Jn)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of l(this,er))this.recordFutureForcedDependency(ld,e);return this}resetBBox(e){return l(this,vo)!==e&&(x(this,vo,e),l(this,He)[0]=1/0,l(this,He)[1]=1/0,l(this,He)[2]=-1/0,l(this,He)[3]=-1/0),this}recordClipBox(e,t,r,s,i,o){const a=te.multiplyByDOMMatrix(l(this,go).at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];te.axialAlignedBoundingBox([r,i,s,o],a,c);const u=te.intersect(l(this,Fe),c);return u?(l(this,Fe)[0]=u[0],l(this,Fe)[1]=u[1],l(this,Fe)[2]=u[2],l(this,Fe)[3]=u[3]):(l(this,Fe)[0]=l(this,Fe)[1]=1/0,l(this,Fe)[2]=l(this,Fe)[3]=-1/0),this}recordBBox(e,t,r,s,i,o){const a=l(this,Fe);if(a[0]===1/0)return this;const c=te.multiplyByDOMMatrix(l(this,go).at(-1),t.getTransform());if(a[0]===-1/0)return te.axialAlignedBoundingBox([r,i,s,o],c,l(this,He)),this;const u=[1/0,1/0,-1/0,-1/0];return te.axialAlignedBoundingBox([r,i,s,o],c,u),l(this,He)[0]=Math.min(l(this,He)[0],Math.max(u[0],a[0])),l(this,He)[1]=Math.min(l(this,He)[1],Math.max(u[1],a[1])),l(this,He)[2]=Math.max(l(this,He)[2],Math.min(u[2],a[2])),l(this,He)[3]=Math.max(l(this,He)[3],Math.min(u[3],a[3])),this}recordCharacterBBox(e,t,r,s=1,i=0,o=0,a){const c=r.bbox;let u,d;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&l(this,Fh).get(r),u!==!1&&(d=[0,0,0,0],te.axialAlignedBoundingBox(c,r.fontMatrix,d),(s!==1||i!==0||o!==0)&&te.scaleMinMax([s,0,0,-s,i,o],d),u)))return this.recordBBox(e,t,d[0],d[2],d[1],d[3]);if(!a)return this.recordFullPageBBox(e);const h=a();return c&&d&&u===void 0&&(u=d[0]<=i-h.actualBoundingBoxLeft&&d[2]>=i+h.actualBoundingBoxRight&&d[1]<=o-h.actualBoundingBoxAscent&&d[3]>=o+h.actualBoundingBoxDescent,l(this,Fh).set(r,u),u)?this.recordBBox(e,t,d[0],d[2],d[1],d[3]):this.recordBBox(e,t,i-h.actualBoundingBoxLeft,i+h.actualBoundingBoxRight,o-h.actualBoundingBoxAscent,o+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return l(this,He)[0]=Math.max(0,l(this,Fe)[0]),l(this,He)[1]=Math.max(0,l(this,Fe)[1]),l(this,He)[2]=Math.min(l(this,Uc),l(this,Fe)[2]),l(this,He)[3]=Math.min(l(this,zc),l(this,Fe)[3]),this}getSimpleIndex(e){return l(this,Jn)[e]}recordDependencies(e,t){const r=l(this,er),s=l(this,Jn),i=l(this,Zn);for(const o of t)o in l(this,Jn)?r.add(s[o]):o in i&&i[o].forEach(r.add,r);return this}recordNamedDependency(e,t){return l(this,Bc).has(t)&&l(this,er).add(l(this,Bc).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[ld]),l(this,bi)){const r=Ny(l(this,bi),e),{dependencies:s}=r;l(this,er).forEach(s.add,s),l(this,Ls).forEach(s.add,s),l(this,$c).forEach(s.add,s),s.delete(e),r.isRenderingOperation=!0}if(l(this,vo)===e){const r=Zk(l(this,He)[0]*256/l(this,Uc)),s=Zk(l(this,He)[1]*256/l(this,zc)),i=eP(l(this,He)[2]*256/l(this,Uc)),o=eP(l(this,He)[3]*256/l(this,zc));Ry(l(this,yo),e,r,s,i,o);for(const a of l(this,er))a!==e&&Ry(l(this,yo),a,r,s,i,o);for(const a of l(this,Ls))a!==e&&Ry(l(this,yo),a,r,s,i,o);for(const a of l(this,$c))a!==e&&Ry(l(this,yo),a,r,s,i,o);t||(l(this,er).clear(),x(this,vo,-1))}return this}recordShowTextOperation(e,t=!1){const r=Array.from(l(this,er));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const s of r)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(e,t=!1){return l(this,vo)===e&&(x(this,vo,-1),l(this,Fe)[0]=Math.max(l(this,Fe)[0],l(this,He)[0]),l(this,Fe)[1]=Math.max(l(this,Fe)[1],l(this,He)[1]),l(this,Fe)[2]=Math.min(l(this,Fe)[2],l(this,He)[2]),l(this,Fe)[3]=Math.min(l(this,Fe)[3],l(this,He)[3]),t||l(this,er).clear()),this}_takePendingDependencies(){const e=l(this,er);return x(this,er,new Set),e}_extractOperation(e){const t=l(this,Ag).get(e);return l(this,Ag).delete(e),t}_pushPendingDependencies(e){for(const t of e)l(this,er).add(t)}take(){return l(this,Fh).clear(),new LG(l(this,kn),l(this,yo))}takeDebugMetadata(){return l(this,bi)}}Jn=new WeakMap,Zn=new WeakMap,Bc=new WeakMap,Ls=new WeakMap,$c=new WeakMap,go=new WeakMap,Fe=new WeakMap,He=new WeakMap,vo=new WeakMap,er=new WeakMap,Ag=new WeakMap,Fh=new WeakMap,Uc=new WeakMap,zc=new WeakMap,yo=new WeakMap,kn=new WeakMap,bi=new WeakMap,Cg=new WeakSet,eE=function(e,t){const r=new ArrayBuffer(e*4);x(this,yo,new Uint8ClampedArray(r)),x(this,kn,new Uint32Array(r)),t&&t.length>0?(l(this,kn).set(t),l(this,kn).fill(ZS,t.length)):l(this,kn).fill(ZS)};var Ke,_t,Fs,jh,Bh;const G1=class G1{constructor(e,t,r){S(this,Ke);S(this,_t);S(this,Fs);S(this,jh,0);S(this,Bh,0);if(e instanceof G1&&l(e,Fs)===!!r)return e;x(this,Ke,e),x(this,_t,t),x(this,Fs,!!r)}growOperationsCount(){throw new Error("Unreachable")}save(e){return wt(this,Bh)._++,l(this,Ke).save(l(this,_t)),this}restore(e){return l(this,Bh)>0&&(l(this,Ke).restore(l(this,_t)),wt(this,Bh)._--),this}recordOpenMarker(e){return wt(this,jh)._++,this}getOpenMarker(){return l(this,jh)>0?l(this,_t):l(this,Ke).getOpenMarker()}recordCloseMarker(e){return wt(this,jh)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return l(this,Ke).pushBaseTransform(e),this}popBaseTransform(){return l(this,Ke).popBaseTransform(),this}recordSimpleData(e,t){return l(this,Ke).recordSimpleData(e,l(this,_t)),this}recordIncrementalData(e,t){return l(this,Ke).recordIncrementalData(e,l(this,_t)),this}resetIncrementalData(e,t){return l(this,Ke).resetIncrementalData(e,l(this,_t)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,r){return l(this,Ke).recordSimpleDataFromNamed(e,t,l(this,_t)),this}recordFutureForcedDependency(e,t){return l(this,Ke).recordFutureForcedDependency(e,l(this,_t)),this}inheritSimpleDataAsFutureForcedDependencies(e){return l(this,Ke).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return l(this,Ke).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return l(this,Fs)||l(this,Ke).resetBBox(l(this,_t)),this}recordClipBox(e,t,r,s,i,o){return l(this,Fs)||l(this,Ke).recordClipBox(l(this,_t),t,r,s,i,o),this}recordBBox(e,t,r,s,i,o){return l(this,Fs)||l(this,Ke).recordBBox(l(this,_t),t,r,s,i,o),this}recordCharacterBBox(e,t,r,s,i,o,a){return l(this,Fs)||l(this,Ke).recordCharacterBBox(l(this,_t),t,r,s,i,o,a),this}recordFullPageBBox(e){return l(this,Fs)||l(this,Ke).recordFullPageBBox(l(this,_t)),this}getSimpleIndex(e){return l(this,Ke).getSimpleIndex(e)}recordDependencies(e,t){return l(this,Ke).recordDependencies(l(this,_t),t),this}recordNamedDependency(e,t){return l(this,Ke).recordNamedDependency(l(this,_t),t),this}recordOperation(e){return l(this,Ke).recordOperation(l(this,_t),!0),this}recordShowTextOperation(e){return l(this,Ke).recordShowTextOperation(l(this,_t),!0),this}bboxToClipBoxDropOperation(e){return l(this,Fs)||l(this,Ke).bboxToClipBoxDropOperation(l(this,_t),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Ke=new WeakMap,_t=new WeakMap,Fs=new WeakMap,jh=new WeakMap,Bh=new WeakMap;let S0=G1;const Xr={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},fn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function tE(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class B1{isModifyingCurrentTransform(){return!1}getPattern(){Ye("Abstract method `getPattern` called.")}}class jG extends B1{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===fn.STROKE||s===fn.FILL){const o=t.current.getClippedPathBoundingBox(s,ft(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,c),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),r=te.transform(r,[1,0,0,1,o[0],o[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),tE(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),i=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(r);i.setTransform(h)}else tE(e,this._bbox),i=this._createGradient(e);return i}}function Hx(n,e,t,r,s,i,o,a){const c=e.coords,u=e.colors,d=n.data,h=n.width*4;let f;c[t+1]>c[r+1]&&(f=t,t=r,r=f,f=i,i=o,o=f),c[r+1]>c[s+1]&&(f=r,r=s,s=f,f=o,o=a,a=f),c[t+1]>c[r+1]&&(f=t,t=r,r=f,f=i,i=o,o=f);const p=(c[t]+e.offsetX)*e.scaleX,v=(c[t+1]+e.offsetY)*e.scaleY,m=(c[r]+e.offsetX)*e.scaleX,w=(c[r+1]+e.offsetY)*e.scaleY,g=(c[s]+e.offsetX)*e.scaleX,b=(c[s+1]+e.offsetY)*e.scaleY;if(v>=b)return;const y=u[i],E=u[i+1],T=u[i+2],P=u[o],k=u[o+1],R=u[o+2],N=u[a],I=u[a+1],M=u[a+2],L=Math.round(v),z=Math.round(b);let F,B,j,$,D,O,H,Y;for(let W=L;W<=z;W++){if(W<w){const U=W<v?0:(v-W)/(v-w);F=p-(p-m)*U,B=y-(y-P)*U,j=E-(E-k)*U,$=T-(T-R)*U}else{let U;W>b?U=1:w===b?U=0:U=(w-W)/(w-b),F=m-(m-g)*U,B=P-(P-N)*U,j=k-(k-I)*U,$=R-(R-M)*U}let X;W<v?X=0:W>b?X=1:X=(v-W)/(v-b),D=p-(p-g)*X,O=y-(y-N)*X,H=E-(E-I)*X,Y=T-(T-M)*X;const re=Math.round(Math.min(F,D)),we=Math.round(Math.max(F,D));let xe=h*W+re*4;for(let U=re;U<=we;U++)X=(F-U)/(F-D),X<0?X=0:X>1&&(X=1),d[xe++]=B-(B-O)*X|0,d[xe++]=j-(j-H)*X|0,d[xe++]=$-($-Y)*X|0,d[xe++]=255}}function BG(n,e,t){const r=e.coords,s=e.colors;let i,o;switch(e.type){case CS.LATTICE:const a=e.verticesPerRow,c=Math.floor(r.length/a)-1,u=a-1;for(i=0;i<c;i++){let d=i*a;for(let h=0;h<u;h++,d++)Hx(n,t,r[d],r[d+1],r[d+a],s[d],s[d+1],s[d+a]),Hx(n,t,r[d+a+1],r[d+1],r[d+a],s[d+a+1],s[d+1],s[d+a])}break;case CS.TRIANGLES:for(i=0,o=r.length;i<o;i+=3)Hx(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class $G extends B1{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),p=u/h,v=d/f,m={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/p,scaleY:1/v},w=h+2*2,g=f+2*2,b=r.getCanvas("mesh",w,g),y=b.context,E=y.createImageData(h,f);if(t){const P=E.data;for(let k=0,R=P.length;k<R;k+=4)P[k]=t[0],P[k+1]=t[1],P[k+2]=t[2],P[k+3]=255}for(const P of this._figures)BG(E,P,m);return y.putImageData(E,2,2),{canvas:b.canvas,offsetX:a-2*p,offsetY:c-2*v,scaleX:p,scaleY:v}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,s){tE(e,this._bbox);const i=new Float32Array(2);if(s===fn.SHADING)te.singularValueDecompose2dScale(ft(e),i);else if(this.matrix){te.singularValueDecompose2dScale(this.matrix,i);const[a,c]=i;te.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=a,i[1]*=c}else te.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,s===fn.SHADING?null:this._background,t.cachedCanvases);return s!==fn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class UG extends B1{getPattern(){return"hotpink"}}function zG(n){switch(n[0]){case"RadialAxial":return new jG(n);case"Mesh":return new $G(n);case"Dummy":return new UG}throw new Error(`Unknown IR type: ${n[0]}`)}const tP={COLORED:1,UNCOLORED:2},j0=class j0{constructor(e,t,r,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e,t){var O,H;const{bbox:r,operatorList:s,paintType:i,tilingType:o,color:a,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),Lb("TilingType: "+o);const h=r[0],f=r[1],p=r[2],v=r[3],m=p-h,w=v-f,g=new Float32Array(2);te.singularValueDecompose2dScale(this.matrix,g);const[b,y]=g;te.singularValueDecompose2dScale(this.baseTransform,g);const E=b*g[0],T=y*g[1];let P=m,k=w,R=!1,N=!1;const I=Math.ceil(u*E),M=Math.ceil(d*T),L=Math.ceil(m*E),z=Math.ceil(w*T);I>=L?P=u:R=!0,M>=z?k=d:N=!0;const F=this.getSizeAndScale(P,this.ctx.canvas.width,E),B=this.getSizeAndScale(k,this.ctx.canvas.height,T),j=e.cachedCanvases.getCanvas("pattern",F.size,B.size),$=j.context,D=c.createCanvasGraphics($,t);if(D.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(D,i,a),$.translate(-F.scale*h,-B.scale*f),D.transform(0,F.scale,0,0,B.scale,0,0),$.save(),(O=D.dependencyTracker)==null||O.save(),this.clipBbox(D,h,f,p,v),D.baseTransform=ft(D.ctx),D.executeOperatorList(s),D.endDrawing(),(H=D.dependencyTracker)==null||H.restore(),$.restore(),R||N){const Y=j.canvas;R&&(P=u),N&&(k=d);const W=this.getSizeAndScale(P,this.ctx.canvas.width,E),X=this.getSizeAndScale(k,this.ctx.canvas.height,T),re=W.size,we=X.size,xe=e.cachedCanvases.getCanvas("pattern-workaround",re,we),U=xe.context,Ae=R?Math.floor(m/u):0,Ce=N?Math.floor(w/d):0;for(let be=0;be<=Ae;be++)for(let pe=0;pe<=Ce;pe++)U.drawImage(Y,re*be,we*pe,re,we,0,0,re,we);return{canvas:xe.canvas,scaleX:W.scale,scaleY:X.scale,offsetX:h,offsetY:f}}return{canvas:j.canvas,scaleX:F.scale,scaleY:B.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,r){const s=Math.max(j0.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const o=s-t,a=i-r;e.ctx.rect(t,r,o,a),te.axialAlignedBoundingBox([t,r,s,i],ft(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case tP.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;s.fillStyle=i.fillColor=o,s.strokeStyle=i.strokeColor=a;break;case tP.UNCOLORED:s.fillStyle=s.strokeStyle=r,i.fillColor=i.strokeColor=r;break;default:throw new tG(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,s,i){let o=r;s!==fn.SHADING&&(o=te.transform(o,t.baseTransform),this.matrix&&(o=te.transform(o,this.matrix)));const a=this.createPatternCanvas(t,i);let c=new DOMMatrix(o);c=c.translate(a.offsetX,a.offsetY),c=c.scale(1/a.scaleX,1/a.scaleY);const u=e.createPattern(a.canvas,"repeat");return u.setTransform(c),u}};V(j0,"MAX_PATTERN_SIZE",3e3);let nE=j0;function HG({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=vn.isLittleEndian?4278190080:255,[c,u]=o?[i,a]:[a,i],d=r>>3,h=r&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let v=0;v<s;v++){for(const w=e+d;e<w;e++){const g=e<f?n[e]:255;t[p++]=g&128?u:c,t[p++]=g&64?u:c,t[p++]=g&32?u:c,t[p++]=g&16?u:c,t[p++]=g&8?u:c,t[p++]=g&4?u:c,t[p++]=g&2?u:c,t[p++]=g&1?u:c}if(h===0)continue;const m=e<f?n[e++]:255;for(let w=0;w<h;w++)t[p++]=m&1<<7-w?u:c}return{srcPos:e,destPos:p}}const nP=16,rP=100,VG=15,sP=10,ir=16,Vx=new DOMMatrix,Dr=new Float32Array(2),Md=new Float32Array([1/0,1/0,-1/0,-1/0]);function WG(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,s,i,o,a){e.transform(t,r,s,i,o,a),this.__originalTransform(t,r,s,i,o,a)},n.setTransform=function(t,r,s,i,o,a){e.setTransform(t,r,s,i,o,a),this.__originalSetTransform(t,r,s,i,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,o,a){e.bezierCurveTo(t,r,s,i,o,a),this.__originalBezierCurveTo(t,r,s,i,o,a)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class GG{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Iy(n,e,t,r,s,i,o,a,c,u){const[d,h,f,p,v,m]=ft(n);if(h===0&&f===0){const b=o*d+v,y=Math.round(b),E=a*p+m,T=Math.round(E),P=(o+c)*d+v,k=Math.abs(Math.round(P)-y)||1,R=(a+u)*p+m,N=Math.abs(Math.round(R)-T)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(p),y,T),n.drawImage(e,t,r,s,i,0,0,k,N),n.setTransform(d,h,f,p,v,m),[k,N]}if(d===0&&p===0){const b=a*f+v,y=Math.round(b),E=o*h+m,T=Math.round(E),P=(a+u)*f+v,k=Math.abs(Math.round(P)-y)||1,R=(o+c)*h+m,N=Math.abs(Math.round(R)-T)||1;return n.setTransform(0,Math.sign(h),Math.sign(f),0,y,T),n.drawImage(e,t,r,s,i,0,0,N,k),n.setTransform(d,h,f,p,v,m),[N,k]}n.drawImage(e,t,r,s,i,o,a,c,u);const w=Math.hypot(d,h),g=Math.hypot(f,p);return[w*c,g*u]}class iP{constructor(e,t,r){V(this,"alphaIsShape",!1);V(this,"fontSize",0);V(this,"fontSizeScale",1);V(this,"textMatrix",null);V(this,"textMatrixScale",1);V(this,"fontMatrix",AS);V(this,"leading",0);V(this,"x",0);V(this,"y",0);V(this,"lineX",0);V(this,"lineY",0);V(this,"charSpacing",0);V(this,"wordSpacing",0);V(this,"textHScale",1);V(this,"textRenderingMode",sn.FILL);V(this,"textRise",0);V(this,"fillColor","#000000");V(this,"strokeColor","#000000");V(this,"patternFill",!1);V(this,"patternStroke",!1);V(this,"fillAlpha",1);V(this,"strokeAlpha",1);V(this,"lineWidth",1);V(this,"activeSMask",null);V(this,"transferMaps","none");r==null||r(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Md.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=fn.FILL,t=null){const r=this.minMax.slice();if(e===fn.STROKE){t||Ye("Stroke bounding box must include transform."),te.singularValueDecompose2dScale(t,Dr);const s=Dr[0]*this.lineWidth/2,i=Dr[1]*this.lineWidth/2;r[0]-=s,r[1]-=i,r[2]+=s,r[3]+=i}return r}updateClipFromPath(){const e=te.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Md,0)}getClippedPathBoundingBox(e=fn.FILL,t=null){return te.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function oP(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%ir,i=(t-s)/ir,o=s===0?i:i+1,a=n.createImageData(r,ir);let c=0,u;const d=e.data,h=a.data;let f,p,v,m;if(e.kind===ew.GRAYSCALE_1BPP){const w=d.byteLength,g=new Uint32Array(h.buffer,0,h.byteLength>>2),b=g.length,y=r+7>>3,E=4294967295,T=vn.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(v=f<i?ir:s,u=0,p=0;p<v;p++){const P=w-c;let k=0;const R=P>y?r:P*8-7,N=R&-8;let I=0,M=0;for(;k<N;k+=8)M=d[c++],g[u++]=M&128?E:T,g[u++]=M&64?E:T,g[u++]=M&32?E:T,g[u++]=M&16?E:T,g[u++]=M&8?E:T,g[u++]=M&4?E:T,g[u++]=M&2?E:T,g[u++]=M&1?E:T;for(;k<R;k++)I===0&&(M=d[c++],I=128),g[u++]=M&I?E:T,I>>=1}for(;u<b;)g[u++]=0;n.putImageData(a,0,f*ir)}}else if(e.kind===ew.RGBA_32BPP){for(p=0,m=r*ir*4,f=0;f<i;f++)h.set(d.subarray(c,c+m)),c+=m,n.putImageData(a,0,p),p+=ir;f<o&&(m=r*s*4,h.set(d.subarray(c,c+m)),n.putImageData(a,0,p))}else if(e.kind===ew.RGB_24BPP)for(v=ir,m=r*v,f=0;f<o;f++){for(f>=i&&(v=s,m=r*v),u=0,p=m;p--;)h[u++]=d[c++],h[u++]=d[c++],h[u++]=d[c++],h[u++]=255;n.putImageData(a,0,f*ir)}else throw new Error(`bad image kind: ${e.kind}`)}function aP(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%ir,i=(t-s)/ir,o=s===0?i:i+1,a=n.createImageData(r,ir);let c=0;const u=e.data,d=a.data;for(let h=0;h<o;h++){const f=h<i?ir:s;({srcPos:c}=HG({src:u,srcPos:c,dest:d,width:r,height:f,nonBlackColor:0})),n.putImageData(a,0,h*ir)}}function hp(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Oy(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function lP(n,e){if(e)return!0;te.singularValueDecompose2dScale(n,Dr);const t=Math.fround(Ui.pixelRatio*Pl.PDF_TO_CSS_UNITS);return Dr[0]<=t&&Dr[1]<=t}const qG=["butt","round","square"],KG=["miter","round","bevel"],XG={},cP={};var ei,rE,sE,iE;const q1=class q1{constructor(e,t,r,s,i,{optionalContentConfig:o,markedContentStack:a=null},c,u,d){S(this,ei);this.ctx=e,this.current=new iP(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new GG(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,t,r=null){var s;return typeof t=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):r}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,r){const c=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...ft(this.compositeCtx))}this.ctx.save(),Oy(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ft(this.ctx)}executeOperatorList(e,t,r,s,i){var g;const o=e.argsArray,a=e.fnArray;let c=t||0;const u=o.length;if(u===c)return c;const d=u-c>sP&&typeof r=="function",h=d?Date.now()+VG:0;let f=0;const p=this.commonObjs,v=this.objs;let m,w;for(;;){if(s!==void 0&&c===s.nextBreakPoint)return s.breakIt(c,r),c;if(!i||i(c))if(m=a[c],w=o[c]??null,m!==Mm.dependency)w===null?this[m](c):this[m](c,...w);else for(const b of w){(g=this.dependencyTracker)==null||g.recordNamedData(b,c);const y=b.startsWith("g_")?p:v;if(!y.has(b))return y.get(b,r),c}if(c++,c===u)return c;if(d&&++f>sP){if(Date.now()>h)return r(),c;f=0}}}endDrawing(){C(this,ei,rE).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),C(this,ei,sE).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=r,c=s,u="prescale1",d,h;for(;i>2&&a>1||o>2&&c>1;){let f=a,p=c;i>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),d=this.cachedCanvases.getCanvas(u,f,p),h=d.context,h.clearRect(0,0,f,p),h.drawImage(e,0,0,a,c,0,0,f,p),e=d.canvas,a=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:c}}_createMaskCanvas(e,t){var I,M;const r=this.ctx,{width:s,height:i}=t,o=this.current.fillColor,a=this.current.patternFill,c=ft(r);let u,d,h,f;if((t.bitmap||t.data)&&t.count>1){const L=t.bitmap||t.data.buffer;d=JSON.stringify(a?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(L),u||(u=new Map,this._cachedBitmapsMap.set(L,u));const z=u.get(d);if(z&&!a){const F=Math.round(Math.min(c[0],c[2])+c[4]),B=Math.round(Math.min(c[1],c[3])+c[5]);return(I=this.dependencyTracker)==null||I.recordDependencies(e,Xr.transformAndFill),{canvas:z,offsetX:F,offsetY:B}}h=z}h||(f=this.cachedCanvases.getCanvas("maskCanvas",s,i),aP(f.context,t));let p=te.transform(c,[1/s,0,0,-1/i,0,0]);p=te.transform(p,[1,0,0,1,0,-i]);const v=Md.slice();te.axialAlignedBoundingBox([0,0,s,i],p,v);const[m,w,g,b]=v,y=Math.round(g-m)||1,E=Math.round(b-w)||1,T=this.cachedCanvases.getCanvas("fillCanvas",y,E),P=T.context,k=m,R=w;P.translate(-k,-R),P.transform(...p),h||(h=this._scaleImage(f.canvas,ni(P)),h=h.img,u&&a&&u.set(d,h)),P.imageSmoothingEnabled=lP(ft(P),t.interpolate),Iy(P,h,0,0,h.width,h.height,0,0,s,i),P.globalCompositeOperation="source-in";const N=te.transform(ni(P),[1,0,0,1,-k,-R]);return P.fillStyle=a?o.getPattern(r,this,N,fn.FILL,e):o,P.fillRect(0,0,s,i),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(d,T.canvas)),(M=this.dependencyTracker)==null||M.recordDependencies(e,Xr.transformAndFill),{canvas:T.canvas,offsetX:Math.round(k),offsetY:Math.round(R)}}setLineWidth(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineCap",e),this.ctx.lineCap=qG[t]}setLineJoin(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineJoin",e),this.ctx.lineJoin=KG[t]}setMiterLimit(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,r){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=r)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var r,s,i,o,a;for(const[c,u]of t)switch(c){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(r=this.dependencyTracker)==null||r.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(a=this.dependencyTracker)==null||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,r=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,t,r);this.suspendedCtx=this.ctx;const o=this.ctx=i.context;o.setTransform(this.suspendedCtx.getTransform()),hp(this.suspendedCtx,o),WG(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],o=s[1],a=s[2]-i,c=s[3]-o;a===0||c===0||(this.genericComposeSMask(t.context,r,a,c,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,o,a,c,u,d,h){let f=e.canvas,p=c-d,v=u-h;if(o)if(p<0||v<0||p+r>f.width||v+s>f.height){const w=this.cachedCanvases.getCanvas("maskExtension",r,s),g=w.context;g.drawImage(f,-p,-v),g.globalCompositeOperation="destination-atop",g.fillStyle=o,g.fillRect(0,0,r,s),g.globalCompositeOperation="source-over",f=w.canvas,p=v=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(p,v,r,s),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(p,v,r,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const m=new Path2D;m.rect(c,u,r,s),t.clip(m),t.globalCompositeOperation="destination-in",t.drawImage(f,p,v,r,s,c,u,r,s),t.restore()}save(e){var r;this.inSMaskMode&&hp(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(r=this.dependencyTracker)==null||r.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&hp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,s,i,o,a){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(t,r,s,i,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r,s){let[i]=r;if(!s){i||(i=r[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const o=t===Mm.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,s[0]-o,s[2]+o,s[1]-o,s[3]+o).recordDependencies(e,["transform"])}i instanceof Path2D||(i=r[0]=BD(i)),te.axialAlignedBoundingBox(s,ft(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,r=!0){var o;const s=this.ctx,i=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const a=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=i.getPattern(s,this,ni(s),fn.STROKE,e),a){const c=new Path2D;c.addPath(t,s.getTransform().invertSelf().multiplySelf(a)),t=c}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,Xr.stroke),r&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(fn.STROKE,ft(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,r=!0){var u,d,h;const s=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const f=i.isModifyingCurrentTransform()?s.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),s.save(),s.fillStyle=i.getPattern(s,this,ni(s),fn.FILL,e),f){const p=new Path2D;p.addPath(t,s.getTransform().invertSelf().multiplySelf(f)),t=p}a=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),(d=this.dependencyTracker)==null||d.recordDependencies(e,Xr.fill),a&&(s.restore(),(h=this.dependencyTracker)==null||h.restore(e)),r&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var r;this.ctx.fill(t),(r=this.dependencyTracker)==null||r.recordDependencies(e,Xr.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=XG}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=cP}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;t!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",e),s.recordCloseMarker(e)}if(t!==void 0){const s=new Path2D,i=r.getTransform().invertSelf();for(const{transform:o,x:a,y:c,fontSize:u,path:d}of t)d&&s.addPath(d,new DOMMatrix(o).preMultiplySelf(i).translate(a,c).scale(u,-u));r.clip(s)}delete this.pendingTextPaths}setCharSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,r){var h,f;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),i=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=s.fontMatrix||AS,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&le("Invalid font matrix for font "+t),r<0?(r=-r,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=r,s.isType3Font)return;const o=s.loadedName||"sans-serif",a=((f=s.systemFontInfo)==null?void 0:f.css)||`"${o}", ${s.fallbackName}`;let c="normal";s.black?c="900":s.bold&&(c="bold");const u=s.italic?"italic":"normal";let d=r;r<nP?d=nP:r>rP&&(d=rP),this.current.fontSizeScale=r/d,this.ctx.font=`${u} ${c} ${d}px ${a}`}setTextRenderingMode(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,r){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,t,r){this.setLeading(e,-r),this.moveText(e,t,r)}setTextMatrix(e,t){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=t,r.textMatrixScale=Math.hypot(t[0],t[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,r,s,i,o){var g,b,y,E;const a=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,f=d&sn.FILL_STROKE_MASK,p=!!(d&sn.ADD_TO_PATH_FLAG),v=c.patternFill&&!u.missingFile,m=c.patternStroke&&!u.missingFile;let w;if((u.disableFontFace||p||v||m)&&!u.missingFile&&(w=u.getPathGenerator(this.commonObjs,t)),w&&(u.disableFontFace||v||m)){a.save(),a.translate(r,s),a.scale(h,-h),(g=this.dependencyTracker)==null||g.recordCharacterBBox(e,a,u);let T;if(f===sn.FILL||f===sn.FILL_STROKE)if(i){T=a.getTransform(),a.setTransform(...i);const P=C(this,ei,iE).call(this,w,T,i);a.fill(P)}else a.fill(w);if(f===sn.STROKE||f===sn.FILL_STROKE)if(o){T||(T=a.getTransform()),a.setTransform(...o);const{a:P,b:k,c:R,d:N}=T,I=te.inverseTransform(o),M=te.transform([P,k,R,N,0,0],I);te.singularValueDecompose2dScale(M,Dr),a.lineWidth*=Math.max(Dr[0],Dr[1])/h,a.stroke(C(this,ei,iE).call(this,w,T,o))}else a.lineWidth/=h,a.stroke(w);a.restore()}else(f===sn.FILL||f===sn.FILL_STROKE)&&(a.fillText(t,r,s),(b=this.dependencyTracker)==null||b.recordCharacterBBox(e,a,u,h,r,s,()=>a.measureText(t))),(f===sn.STROKE||f===sn.FILL_STROKE)&&(this.dependencyTracker&&((y=this.dependencyTracker)==null||y.recordCharacterBBox(e,a,u,h,r,s,()=>a.measureText(t)).recordDependencies(e,Xr.stroke)),a.strokeText(t,r,s));p&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ft(a),x:r,y:s,fontSize:h,path:w}),(E=this.dependencyTracker)==null||E.recordCharacterBBox(e,a,u,h,r,s))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return ce(this,"isFontSubpixelAAEnabled",r)}showText(e,t){var R,N,I,M;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Xr.showText).resetBBox(e),this.current.textRenderingMode&sn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,s=r.font;if(s.isType3Font){this.showType3Text(e,t),(R=this.dependencyTracker)==null||R.recordShowTextOperation(e);return}const i=r.fontSize;if(i===0){(N=this.dependencyTracker)==null||N.recordOperation(e);return}const o=this.ctx,a=r.fontSizeScale,c=r.charSpacing,u=r.wordSpacing,d=r.fontDirection,h=r.textHScale*d,f=t.length,p=s.vertical,v=p?1:-1,m=s.defaultVMetrics,w=i*r.fontMatrix[0],g=r.textRenderingMode===sn.FILL&&!s.disableFontFace&&!r.patternFill;o.save(),r.textMatrix&&o.transform(...r.textMatrix),o.translate(r.x,r.y+r.textRise),d>0?o.scale(h,-1):o.scale(h,1);let b,y;if(r.patternFill){o.save();const L=r.fillColor.getPattern(o,this,ni(o),fn.FILL,e);b=ft(o),o.restore(),o.fillStyle=L}if(r.patternStroke){o.save();const L=r.strokeColor.getPattern(o,this,ni(o),fn.STROKE,e);y=ft(o),o.restore(),o.strokeStyle=L}let E=r.lineWidth;const T=r.textMatrixScale;if(T===0||E===0){const L=r.textRenderingMode&sn.FILL_STROKE_MASK;(L===sn.STROKE||L===sn.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=T;if(a!==1&&(o.scale(a,a),E/=a),o.lineWidth=E,s.isInvalidPDFjsFont){const L=[];let z=0;for(const B of t)L.push(B.unicode),z+=B.width;const F=L.join("");if(o.fillText(F,0,0),this.dependencyTracker!==null){const B=o.measureText(F);this.dependencyTracker.recordBBox(e,this.ctx,-B.actualBoundingBoxLeft,B.actualBoundingBoxRight,-B.actualBoundingBoxAscent,B.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=z*w*h,o.restore(),this.compose();return}let P=0,k;for(k=0;k<f;++k){const L=t[k];if(typeof L=="number"){P+=v*L*i/1e3;continue}let z=!1;const F=(L.isSpace?u:0)+c,B=L.fontChar,j=L.accent;let $,D,O=L.width;if(p){const W=L.vmetric||m,X=-(L.vmetric?W[1]:O*.5)*w,re=W[2]*w;O=W?-W[0]:O,$=X/a,D=(P+re)/a}else $=P/a,D=0;let H;if(s.remeasure&&O>0){H=o.measureText(B);const W=H.width*1e3/i*a;if(O<W&&this.isFontSubpixelAAEnabled){const X=O/W;z=!0,o.save(),o.scale(X,1),$/=X}else O!==W&&($+=(O-W)/2e3*i/a)}if(this.contentVisible&&(L.isInFont||s.missingFile)){if(g&&!j)o.fillText(B,$,D),(I=this.dependencyTracker)==null||I.recordCharacterBBox(e,o,H?{bbox:null}:s,i/a,$,D,()=>H??o.measureText(B));else if(this.paintChar(e,B,$,D,b,y),j){const W=$+i*j.offset.x/a,X=D-i*j.offset.y/a;this.paintChar(e,j.fontChar,W,X,b,y)}}const Y=p?O*w-F*d:O*w+F*d;P+=Y,z&&o.restore()}p?r.y-=P:r.x+=P*h,o.restore(),this.compose(),(M=this.dependencyTracker)==null||M.recordShowTextOperation(e)}showType3Text(e,t){const r=this.ctx,s=this.current,i=s.font,o=s.fontSize,a=s.fontDirection,c=i.vertical?1:-1,u=s.charSpacing,d=s.wordSpacing,h=s.textHScale*a,f=s.fontMatrix||AS,p=t.length,v=s.textRenderingMode===sn.INVISIBLE;let m,w,g,b;if(v||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),s.textMatrix&&r.transform(...s.textMatrix),r.translate(s.x,s.y+s.textRise),r.scale(h,a);const y=this.dependencyTracker;for(this.dependencyTracker=y?new S0(y,e):null,m=0;m<p;++m){if(w=t[m],typeof w=="number"){b=c*w*o/1e3,this.ctx.translate(b,0),s.x+=b*h;continue}const E=(w.isSpace?d:0)+u,T=i.charProcOperatorList[w.operatorListId];T?this.contentVisible&&(this.save(),r.scale(o,o),r.transform(...f),this.executeOperatorList(T),this.restore()):le(`Type3 character "${w.operatorListId}" is not available.`);const P=[w.width,0];te.applyTransform(P,f),g=P[0]*o+E,r.translate(g,0),s.x+=g*h}r.restore(),y&&(this.dependencyTracker=y)}setCharWidth(e,t,r){}setCharWidthAndBounds(e,t,r,s,i,o,a){var u;const c=new Path2D;c.rect(s,i,o-s,a-i),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,s,o,i,a).recordClipBox(e,this.ctx,s,o,i,a),this.endPath(e)}getColorN_Pattern(e,t){let r;if(t[0]==="TilingPattern"){const s=this.baseTransform||ft(this.ctx),i={createCanvasGraphics:(o,a)=>new q1(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new S0(this.dependencyTracker,a,!0):null)};r=new nE(t,this.ctx,i,s)}else r=this._getPattern(e,t[1],t[2]);return r}setStrokeColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,r=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=zG(this.getObject(e,t)),this.cachedPatterns.set(t,s)),r&&(s.matrix=r),s}shadingFill(e,t){var o;if(!this.contentVisible)return;const r=this.ctx;this.save(e);const s=this._getPattern(e,t);r.fillStyle=s.getPattern(r,this,ni(r),fn.SHADING,e);const i=ni(r);if(i){const{width:a,height:c}=r.canvas,u=Md.slice();te.axialAlignedBoundingBox([0,0,a,c],i,u);const[d,h,f,p]=u;this.ctx.fillRect(d,h,f-d,p-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Xr.transform).recordDependencies(e,Xr.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Ye("Should not call beginInlineImage")}beginImageData(){Ye("Should not call beginImageData")}paintFormXObjectBegin(e,t,r){var s;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=ft(this.ctx),r)){te.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[i,o,a,c]=r,u=new Path2D;u.rect(i,o,a-i,c-o),this.ctx.clip(u),(s=this.dependencyTracker)==null||s.recordClipBox(e,this.ctx,i,a,o,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var y;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;t.isolated||Lb("TODO: Support non-isolated groups."),t.knockout&&le("Knockout groups not supported.");const s=ft(r);if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Md.slice();te.axialAlignedBoundingBox(t.bbox,ft(r),i);const o=[0,0,r.canvas.width,r.canvas.height];i=te.intersect(i,o)||[0,0,0,0];const a=Math.floor(i[0]),c=Math.floor(i[1]),u=Math.max(Math.ceil(i[2])-a,1),d=Math.max(Math.ceil(i[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,d]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,u,d),p=f.context;p.translate(-a,-c),p.transform(...s);let v=new Path2D;const[m,w,g,b]=t.bbox;if(v.rect(m,w,g-m,b-w),t.matrix){const E=new Path2D;E.addPath(v,new DOMMatrix(t.matrix)),v=E}p.clip(v),t.smask&&this.smaskStack.push({canvas:f.canvas,context:p,offsetX:a,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(a,c),r.save()),hp(r,p),this.ctx=p,(y=this.dependencyTracker)==null||y.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=ft(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const a=Md.slice();te.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],o,a),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,r,s,i,o){if(C(this,ei,rE).call(this),Oy(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const a=r[2]-r[0],c=r[3]-r[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=r[0],s[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=a,r[3]=c,te.singularValueDecompose2dScale(ft(this.ctx),Dr);const{viewportScale:u}=this,d=Math.ceil(a*this.outputScaleX*u),h=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(Dr[0],0,0,-Dr[1],0,c*Dr[1]),Oy(this.ctx)}else{Oy(this.ctx),this.endPath(e);const u=new Path2D;u.rect(r[0],r[1],a,c),this.ctx.clip(u)}}this.current=new iP(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...s),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),C(this,ei,sE).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var a;if(!this.contentVisible)return;const r=t.count;t=this.getObject(e,t.data,t),t.count=r;const s=this.ctx,i=this._createMaskCanvas(e,t),o=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,i.offsetX,i.offsetY),(a=this.dependencyTracker)==null||a.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+o.width,i.offsetY,i.offsetY+o.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r,s=0,i=0,o,a){var h,f,p;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const u=ft(c);c.transform(r,s,i,o,0,0);const d=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,d.offsetX-u[4],d.offsetY-u[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let v=0,m=a.length;v<m;v+=2){const w=te.transform(u,[r,s,i,o,a[v],a[v+1]]);c.drawImage(d.canvas,w[4],w[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,w[4],w[4]+d.canvas.width,w[5],w[5]+d.canvas.height)}c.restore(),this.compose(),(p=this.dependencyTracker)==null||p.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,a,c;if(!this.contentVisible)return;const r=this.ctx,s=this.current.fillColor,i=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,Xr.transformAndFill);for(const u of t){const{data:d,width:h,height:f,transform:p}=u,v=this.cachedCanvases.getCanvas("maskCanvas",h,f),m=v.context;m.save();const w=this.getObject(e,d,u);aP(m,w),m.globalCompositeOperation="source-in",m.fillStyle=i?s.getPattern(m,this,ni(r),fn.FILL,e):s,m.fillRect(0,0,h,f),m.restore(),r.save(),r.transform(...p),r.scale(1,-1),Iy(r,v.canvas,0,0,h,f,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,r,0,h,0,f),r.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const r=this.getObject(e,t);if(!r){le("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,t,r,s,i){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){le("Dependent image isn't ready yet");return}const a=o.width,c=o.height,u=[];for(let d=0,h=i.length;d<h;d+=2)u.push({transform:[r,0,0,s,i[d],i[d+1]],x:0,y:0,w:a,h:c});this.paintInlineImageXObjectGroup(e,o,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const r=t.width,s=t.height,i=this.ctx;this.save(e);const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none"),i.scale(1/r,-1/s);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",r,s).context;oP(h,t),a=this.applyTransferMapsToCanvas(h)}const c=this._scaleImage(a,ni(i));i.imageSmoothingEnabled=lP(ft(i),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,i,0,r,-s,0).recordDependencies(e,Xr.imageXObject).recordOperation(e),Iy(i,c.img,0,0,c.paintWidth,c.paintHeight,0,-s,r,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,r){var o,a,c;if(!this.contentVisible)return;const s=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const u=t.width,d=t.height,f=this.cachedCanvases.getCanvas("inlineImage",u,d).context;oP(f,t),i=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const u of r)s.save(),s.transform(...u.transform),s.scale(1,-1),Iy(s,i,u.x,u.y,u.w,u.h,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,s,0,1,-1,0),s.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Xr.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,r){}beginMarkedContent(e,t){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,r){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,r){var o,a;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const i=this.ctx;this.pendingClip?(s||(this.pendingClip===cP?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(a=this.dependencyTracker)==null||a.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ft(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let o,a;if(r===0&&s===0){const c=Math.abs(t),u=Math.abs(i);if(c===u)if(e===0)o=a=1/c;else{const d=c*e;o=a=d<1?1/d:1}else if(e===0)o=1/c,a=1/u;else{const d=c*e,h=u*e;o=d<1?1/d:1,a=h<1?1/h:1}}else{const c=Math.abs(t*i-r*s),u=Math.hypot(t,r),d=Math.hypot(s,i);if(e===0)o=d/c,a=u/c;else{const h=e*c;o=d>h?d/h:1,a=u>h?u/h:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:s}}=this,[i,o]=this.getScaleForStroking();if(i===o){r.lineWidth=(s||1)*i,r.stroke(e);return}const a=r.getLineDash();t&&r.save(),r.scale(i,o),Vx.a=1/i,Vx.d=1/o;const c=new Path2D;if(c.addPath(e,Vx),a.length>0){const u=Math.max(i,o);r.setLineDash(a.map(d=>d/u)),r.lineDashOffset/=u}r.lineWidth=s||1,r.stroke(c),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ei=new WeakSet,rE=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},sE=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},iE=function(e,t,r){const s=new Path2D;return s.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),s};let Yd=q1;for(const n in Mm)Yd.prototype[n]!==void 0&&(Yd.prototype[Mm[n]]=Yd.prototype[n]);var Tg,kg;class Oi{static get workerPort(){return l(this,Tg)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");x(this,Tg,e)}static get workerSrc(){return l(this,kg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");x(this,kg,e)}}Tg=new WeakMap,kg=new WeakMap,S(Oi,Tg,null),S(Oi,kg,"");var $h,Pg;class YG{constructor({parsedData:e,rawData:t}){S(this,$h);S(this,Pg);x(this,$h,e),x(this,Pg,t)}getRaw(){return l(this,Pg)}get(e){return l(this,$h).get(e)??null}[Symbol.iterator](){return l(this,$h).entries()}}$h=new WeakMap,Pg=new WeakMap;const vd=Symbol("INTERNAL");var Rg,Ng,Ig,Uh;class QG{constructor(e,{name:t,intent:r,usage:s,rbGroups:i}){S(this,Rg,!1);S(this,Ng,!1);S(this,Ig,!1);S(this,Uh,!0);x(this,Rg,!!(e&Or.DISPLAY)),x(this,Ng,!!(e&Or.PRINT)),this.name=t,this.intent=r,this.usage=s,this.rbGroups=i}get visible(){if(l(this,Ig))return l(this,Uh);if(!l(this,Uh))return!1;const{print:e,view:t}=this.usage;return l(this,Rg)?(t==null?void 0:t.viewState)!=="OFF":l(this,Ng)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==vd&&Ye("Internal method `_setVisible` called."),x(this,Ig,r),x(this,Uh,t)}}Rg=new WeakMap,Ng=new WeakMap,Ig=new WeakMap,Uh=new WeakMap;var za,Ve,zh,Hh,Og,oE;class JG{constructor(e,t=Or.DISPLAY){S(this,Og);S(this,za,null);S(this,Ve,new Map);S(this,zh,null);S(this,Hh,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,x(this,Hh,e.order);for(const r of e.groups)l(this,Ve).set(r.id,new QG(t,r));if(e.baseState==="OFF")for(const r of l(this,Ve).values())r._setVisible(vd,!1);for(const r of e.on)l(this,Ve).get(r)._setVisible(vd,!0);for(const r of e.off)l(this,Ve).get(r)._setVisible(vd,!1);x(this,zh,this.getHash())}}isVisible(e){if(l(this,Ve).size===0)return!0;if(!e)return Lb("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,Ve).has(e.id)?l(this,Ve).get(e.id).visible:(le(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return C(this,Og,oE).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,Ve).has(t))return le(`Optional content group not found: ${t}`),!0;if(l(this,Ve).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,Ve).has(t))return le(`Optional content group not found: ${t}`),!0;if(!l(this,Ve).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,Ve).has(t))return le(`Optional content group not found: ${t}`),!0;if(!l(this,Ve).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,Ve).has(t))return le(`Optional content group not found: ${t}`),!0;if(l(this,Ve).get(t).visible)return!1}return!0}return le(`Unknown optional content policy ${e.policy}.`),!0}return le(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var i;const s=l(this,Ve).get(e);if(!s){le(`Optional content group not found: ${e}`);return}if(r&&t&&s.rbGroups.length)for(const o of s.rbGroups)for(const a of o)a!==e&&((i=l(this,Ve).get(a))==null||i._setVisible(vd,!1,!0));s._setVisible(vd,!!t,!0),x(this,za,null)}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=l(this,Ve).get(s);if(i)switch(r){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}x(this,za,null)}get hasInitialVisibility(){return l(this,zh)===null||this.getHash()===l(this,zh)}getOrder(){return l(this,Ve).size?l(this,Hh)?l(this,Hh).slice():[...l(this,Ve).keys()]:null}getGroup(e){return l(this,Ve).get(e)||null}getHash(){if(l(this,za)!==null)return l(this,za);const e=new vL;for(const[t,r]of l(this,Ve))e.update(`${t}:${r.visible}`);return x(this,za,e.hexdigest())}[Symbol.iterator](){return l(this,Ve).entries()}}za=new WeakMap,Ve=new WeakMap,zh=new WeakMap,Hh=new WeakMap,Og=new WeakSet,oE=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let o;if(Array.isArray(i))o=C(this,Og,oE).call(this,i);else if(l(this,Ve).has(i))o=l(this,Ve).get(i).visible;else return le(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};class ZG{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Re(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});Re(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,s,i;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Re(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new eq(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new tq(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class eq{constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=L1(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class tq{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function nq(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let d=a(t);return d=unescape(d),d=c(d),d=u(d),i(d)}if(t=o(n),t){const d=u(t);return i(d)}if(t=r("filename","i").exec(n),t){t=t[1];let d=a(t);return d=u(d),i(d)}function r(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function s(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),p=Hv(h);h=f.decode(p),e=!1}catch{}}return h}function i(d){return e&&/[\x80-\xff]/.test(d)&&(d=s("utf-8",d),e&&(d=s("iso-8859-1",d))),d}function o(d){const h=[];let f;const p=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(d))!==null;){let[,m,w,g]=f;if(m=parseInt(m,10),m in h){if(m===0)break;continue}h[m]=[w,g]}const v=[];for(let m=0;m<h.length&&m in h;++m){let[w,g]=h[m];g=a(g),w&&(g=unescape(g),m===0&&(g=c(g))),v.push(g)}return v.join("")}function a(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const p=h[f].indexOf('"');p!==-1&&(h[f]=h[f].slice(0,p),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function c(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),v=d.slice(h+1).replace(/^[^']*'/,"");return s(f,v)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,p,v){if(p==="q"||p==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,w){return String.fromCharCode(parseInt(w,16))}),s(f,v);try{v=atob(v)}catch{}return s(f,v)})}return""}function PL(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const s=e[r];s!==void 0&&t.append(r,s)}return t}function jb(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function RL({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function NL(n){const e=n.get("Content-Disposition");if(e){let t=nq(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(L1(t))return t}return null}function Kv(n,e){return new v0(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function IL(n){return n===200||n===206}function OL(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function ML(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(le(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class rq{constructor(e){V(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=PL(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Re(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new sq(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new iq(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class sq{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),s=t.url;fetch(s,OL(r,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=jb(i.url),!IL(i.status))throw Kv(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:a,suggestedLength:c}=RL({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=NL(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new kl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ML(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class iq{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${r-1}`);const o=s.url;fetch(o,OL(i,this._withCredentials,this._abortController)).then(a=>{const c=jb(a.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!IL(a.status))throw Kv(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:ML(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Wx=200,Gx=206;function oq(n){const e=n.response;return typeof e!="string"?e:Hv(e).buffer}class aq{constructor({url:e,httpHeaders:t,withCredentials:r}){V(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=PL(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=Gx):s.expectedStatus=Wx,t.responseType="arraybuffer",Re(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var s;const r=this.pendingRequests[e];r&&((s=r.onProgress)==null||s.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){r.onError(s.status);return}const i=s.status||Wx;if(!(i===Wx&&r.expectedStatus===Gx)&&i!==r.expectedStatus){r.onError(s.status);return}const a=oq(s);if(i===Gx){const c=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?r.onDone({begin:parseInt(u[1],10),chunk:a}):(le('Missing or invalid "Content-Range" header.'),r.onError(0))}else a?r.onDone({begin:0,chunk:a}):r.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class lq{constructor(e){this._source=e,this._manager=new aq(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Re(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new cq(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new uq(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class cq{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=jb(t.responseURL);const r=t.getAllResponseHeaders(),s=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[c,...u]=a.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=RL({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=NL(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Kv(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class uq{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=jb((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Kv(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const dq=/^[a-z][a-z0-9\-+.]+:/i;function hq(n){if(dq.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class fq{constructor(e){this.source=e,this.url=hq(e.url),Re(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Re(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new pq(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new mq(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class pq{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Kv(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new kl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class mq{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const fp=Symbol("INITIAL_DATA");var wr,Mg,aE;class DL{constructor(){S(this,Mg);S(this,wr,Object.create(null))}get(e,t=null){if(t){const s=C(this,Mg,aE).call(this,e);return s.promise.then(()=>t(s.data)),null}const r=l(this,wr)[e];if(!r||r.data===fp)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=l(this,wr)[e];return!!t&&t.data!==fp}delete(e){const t=l(this,wr)[e];return!t||t.data===fp?!1:(delete l(this,wr)[e],!0)}resolve(e,t=null){const r=C(this,Mg,aE).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in l(this,wr)){const{data:r}=l(this,wr)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}x(this,wr,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,wr)){const{data:t}=l(this,wr)[e];t!==fp&&(yield[e,t])}}}wr=new WeakMap,Mg=new WeakSet,aE=function(e){var t;return(t=l(this,wr))[e]||(t[e]={...Promise.withResolvers(),data:fp})};const gq=1e5,uP=30;var xP,Ha,tr,Dg,Lg,Hc,wo,Fg,jg,Vc,Vh,Wh,Va,Gh,Bg,qh,Wc,$g,Ug,Kh,Gc,zg,Wa,Xh,Yo,LL,FL,lE,Hr,dw,cE,jL,BL;const Ut=class Ut{constructor({textContentSource:e,container:t,viewport:r}){S(this,Yo);S(this,Ha,Promise.withResolvers());S(this,tr,null);S(this,Dg,!1);S(this,Lg,!!((xP=globalThis.FontInspector)!=null&&xP.enabled));S(this,Hc,null);S(this,wo,null);S(this,Fg,0);S(this,jg,0);S(this,Vc,null);S(this,Vh,null);S(this,Wh,0);S(this,Va,0);S(this,Gh,Object.create(null));S(this,Bg,[]);S(this,qh,null);S(this,Wc,[]);S(this,$g,new WeakMap);S(this,Ug,null);var c;if(e instanceof ReadableStream)x(this,qh,e);else if(typeof e=="object")x(this,qh,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,tr,x(this,Vh,t)),x(this,Va,r.scale*Ui.pixelRatio),x(this,Wh,r.rotation),x(this,wo,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:o,pageY:a}=r.rawDims;x(this,Ug,[1,0,0,-1,-o,a+i]),x(this,jg,s),x(this,Fg,i),C(c=Ut,Hr,jL).call(c),Fu(t,r),l(this,Ha).promise.finally(()=>{l(Ut,Xh).delete(this),x(this,wo,null),x(this,Gh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=vn.platform;return ce(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,Vc).read().then(({value:t,done:r})=>{if(r){l(this,Ha).resolve();return}l(this,Hc)??x(this,Hc,t.lang),Object.assign(l(this,Gh),t.styles),C(this,Yo,LL).call(this,t.items),e()},l(this,Ha).reject)};return x(this,Vc,l(this,qh).getReader()),l(Ut,Xh).add(this),e(),l(this,Ha).promise}update({viewport:e,onBefore:t=null}){var i;const r=e.scale*Ui.pixelRatio,s=e.rotation;if(s!==l(this,Wh)&&(t==null||t(),x(this,Wh,s),Fu(l(this,Vh),{rotation:s})),r!==l(this,Va)){t==null||t(),x(this,Va,r);const o={div:null,properties:null,ctx:C(i=Ut,Hr,dw).call(i,l(this,Hc))};for(const a of l(this,Wc))o.properties=l(this,$g).get(a),o.div=a,C(this,Yo,lE).call(this,o)}}cancel(){var t;const e=new kl("TextLayer task cancelled.");(t=l(this,Vc))==null||t.cancel(e).catch(()=>{}),x(this,Vc,null),l(this,Ha).reject(e)}get textDivs(){return l(this,Wc)}get textContentItemsStr(){return l(this,Bg)}static cleanup(){if(!(l(this,Xh).size>0)){l(this,Kh).clear();for(const{canvas:e}of l(this,Gc).values())e.remove();l(this,Gc).clear()}}};Ha=new WeakMap,tr=new WeakMap,Dg=new WeakMap,Lg=new WeakMap,Hc=new WeakMap,wo=new WeakMap,Fg=new WeakMap,jg=new WeakMap,Vc=new WeakMap,Vh=new WeakMap,Wh=new WeakMap,Va=new WeakMap,Gh=new WeakMap,Bg=new WeakMap,qh=new WeakMap,Wc=new WeakMap,$g=new WeakMap,Ug=new WeakMap,Kh=new WeakMap,Gc=new WeakMap,zg=new WeakMap,Wa=new WeakMap,Xh=new WeakMap,Yo=new WeakSet,LL=function(e){var s,i;if(l(this,Dg))return;(i=l(this,wo)).ctx??(i.ctx=C(s=Ut,Hr,dw).call(s,l(this,Hc)));const t=l(this,Wc),r=l(this,Bg);for(const o of e){if(t.length>gq){le("Ignoring additional textDivs for performance reasons."),x(this,Dg,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,tr);x(this,tr,document.createElement("span")),l(this,tr).classList.add("markedContent"),o.id&&l(this,tr).setAttribute("id",`${o.id}`),a.append(l(this,tr))}else o.type==="endMarkedContent"&&x(this,tr,l(this,tr).parentNode);continue}r.push(o.str),C(this,Yo,FL).call(this,o)}},FL=function(e){var m;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Wc).push(t);const s=te.transform(l(this,Ug),e.transform);let i=Math.atan2(s[1],s[0]);const o=l(this,Gh)[e.fontName];o.vertical&&(i+=Math.PI/2);let a=l(this,Lg)&&o.fontSubstitution||o.fontFamily;a=Ut.fontFamilyMap.get(a)||a;const c=Math.hypot(s[2],s[3]),u=c*C(m=Ut,Hr,BL).call(m,a,o,l(this,Hc));let d,h;i===0?(d=s[4],h=s[5]-u):(d=s[4]+u*Math.sin(i),h=s[5]-u*Math.cos(i));const f="calc(var(--total-scale-factor) *",p=t.style;l(this,tr)===l(this,Vh)?(p.left=`${(100*d/l(this,jg)).toFixed(2)}%`,p.top=`${(100*h/l(this,Fg)).toFixed(2)}%`):(p.left=`${f}${d.toFixed(2)}px)`,p.top=`${f}${h.toFixed(2)}px)`),p.fontSize=`${f}${(l(Ut,Wa)*c).toFixed(2)}px)`,p.fontFamily=a,r.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,Lg)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let v=!1;if(e.str.length>1)v=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);w!==g&&Math.max(w,g)/Math.min(w,g)>1.5&&(v=!0)}if(v&&(r.canvasWidth=o.vertical?e.height:e.width),l(this,$g).set(t,r),l(this,wo).div=t,l(this,wo).properties=r,C(this,Yo,lE).call(this,l(this,wo)),r.hasText&&l(this,tr).append(t),r.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),l(this,tr).append(w)}},lE=function(e){var a;const{div:t,properties:r,ctx:s}=e,{style:i}=t;let o="";if(l(Ut,Wa)>1&&(o=`scale(${1/l(Ut,Wa)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:c}=i,{canvasWidth:u,fontSize:d}=r;C(a=Ut,Hr,cE).call(a,s,d*l(this,Va),c);const{width:h}=s.measureText(t.textContent);h>0&&(o=`scaleX(${u*l(this,Va)/h}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(i.transform=o)},Hr=new WeakSet,dw=function(e=null){let t=l(this,Gc).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Gc).set(e,t),l(this,zg).set(t,{size:0,family:""})}return t},cE=function(e,t,r){const s=l(this,zg).get(e);t===s.size&&r===s.family||(e.font=`${t}px ${r}`,s.size=t,s.family=r)},jL=function(){if(l(this,Wa)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),x(this,Wa,e.getBoundingClientRect().height),e.remove()},BL=function(e,t,r){const s=l(this,Kh).get(e);if(s)return s;const i=C(this,Hr,dw).call(this,r);i.canvas.width=i.canvas.height=uP,C(this,Hr,cE).call(this,i,uP,e);const o=i.measureText(""),a=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let u=.8;return a?u=a/(a+c):(vn.platform.isFirefox&&le("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),l(this,Kh).set(e,u),u},S(Ut,Hr),S(Ut,Kh,new Map),S(Ut,Gc,new Map),S(Ut,zg,new WeakMap),S(Ut,Wa,null),S(Ut,Xh,new Set);let Lm=Ut;const vq=100;function $L(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new uE,{docId:t}=e,r=n.url?EG(n.url):null,s=n.data?AG(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,c=n.range instanceof UL?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof Fm?n.worker:null;const h=n.verbosity,f=typeof n.docBaseUrl=="string"&&!Fb(n.docBaseUrl)?n.docBaseUrl:null,p=ky(n.cMapUrl),v=n.cMapPacked!==!1,m=n.CMapReaderFactory||(jn?OG:Yk),w=ky(n.iccUrl),g=ky(n.standardFontDataUrl),b=n.StandardFontDataFactory||(jn?MG:Qk),y=ky(n.wasmUrl),E=n.WasmFactory||(jn?DG:Jk),T=n.stopAtErrors!==!0,P=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=n.isEvalSupported!==!1,R=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!jn,N=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!jn&&(vn.platform.isFirefox||!globalThis.chrome),I=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,M=typeof n.disableFontFace=="boolean"?n.disableFontFace:jn,L=n.fontExtraProperties===!0,z=n.enableXfa===!0,F=n.ownerDocument||globalThis.document,B=n.disableRange===!0,j=n.disableStream===!0,$=n.disableAutoFetch===!0,D=n.pdfBug===!0,O=n.CanvasFactory||(jn?IG:PG),H=n.FilterFactory||(jn?NG:RG),Y=n.enableHWA===!0,W=n.useWasm!==!1,X=c?c.length:n.length??NaN,re=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!jn&&!M,we=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(m===Yk&&b===Qk&&E===Jk&&p&&g&&y&&Ep(p,document.baseURI)&&Ep(g,document.baseURI)&&Ep(y,document.baseURI)),xe=null;J8(h);const U={canvasFactory:new O({ownerDocument:F,enableHWA:Y}),filterFactory:new H({docId:t,ownerDocument:F}),cMapReaderFactory:we?null:new m({baseUrl:p,isCompressed:v}),standardFontDataFactory:we?null:new b({baseUrl:g}),wasmFactory:we?null:new E({baseUrl:y})};d||(d=Fm.create({verbosity:h,port:Oi.workerPort}),e._worker=d);const Ae={docId:t,apiVersion:"5.4.449",data:s,password:a,disableAutoFetch:$,rangeChunkSize:u,length:X,docBaseUrl:f,enableXfa:z,evaluatorOptions:{maxImageSize:P,disableFontFace:M,ignoreErrors:T,isEvalSupported:k,isOffscreenCanvasSupported:R,isImageDecoderSupported:N,canvasMaxAreaInBytes:I,fontExtraProperties:L,useSystemFonts:re,useWasm:W,useWorkerFetch:we,cMapUrl:p,iccUrl:w,standardFontDataUrl:g,wasmUrl:y}},Ce={ownerDocument:F,pdfBug:D,styleElement:xe,loadingParams:{disableAutoFetch:$,enableXfa:z}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const be=d.messageHandler.sendWithPromise("GetDocRequest",Ae,s?[s.buffer]:null);let pe;if(c)pe=new ZG(c,{disableRange:B,disableStream:j});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");const Te=Ep(r)?rq:jn?fq:lq;pe=new Te({url:r,length:X,httpHeaders:i,withCredentials:o,rangeChunkSize:u,disableRange:B,disableStream:j})}return be.then(Te=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Bt=new Ip(t,Te,d.port),Kn=new bq(Bt,e,pe,Ce,U,Y);e._transport=Kn,Bt.send("Ready",null)})}).catch(e._capability.reject),e}var B0;const $0=class $0{constructor(){V(this,"_capability",Promise.withResolvers());V(this,"_transport",null);V(this,"_worker",null);V(this,"docId",`d${wt($0,B0)._++}`);V(this,"destroyed",!1);V(this,"onPassword",null);V(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,i}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};B0=new WeakMap,S($0,B0,0);let uE=$0;var qc,Hg,Vg,Wg,Gg;class UL{constructor(e,t,r=!1,s=null){S(this,qc,Promise.withResolvers());S(this,Hg,[]);S(this,Vg,[]);S(this,Wg,[]);S(this,Gg,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s}addRangeListener(e){l(this,Gg).push(e)}addProgressListener(e){l(this,Wg).push(e)}addProgressiveReadListener(e){l(this,Vg).push(e)}addProgressiveDoneListener(e){l(this,Hg).push(e)}onDataRange(e,t){for(const r of l(this,Gg))r(e,t)}onDataProgress(e,t){l(this,qc).promise.then(()=>{for(const r of l(this,Wg))r(e,t)})}onDataProgressiveRead(e){l(this,qc).promise.then(()=>{for(const t of l(this,Vg))t(e)})}onDataProgressiveDone(){l(this,qc).promise.then(()=>{for(const e of l(this,Hg))e()})}transportReady(){l(this,qc).resolve()}requestDataRange(e,t){Ye("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}qc=new WeakMap,Hg=new WeakMap,Vg=new WeakMap,Wg=new WeakMap,Gg=new WeakMap;class yq{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ce(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var bo,Kc,Fp;class wq{constructor(e,t,r,s=!1){S(this,Kc);S(this,bo,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new Hk:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new DL,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new Wv({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ce(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:s="display",annotationMode:i=ga.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1,recordOperations:p=!1,operationsFilter:v=null}){var N,I,M;(N=this._stats)==null||N.time("Overall");const m=this._transport.getRenderingIntent(s,i,h,f),{renderingIntent:w,cacheKey:g}=m;x(this,bo,!1),c||(c=this._transport.getOptionalContentConfig(w));let b=this._intentStates.get(g);b||(b=Object.create(null),this._intentStates.set(g,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const y=!!(w&Or.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(m));const E=!!(this._pdfBug&&((M=globalThis.StepperManager)!=null&&M.enabled)),T=!this.recordedBBoxes&&(p||E),P=L=>{var z,F;if(b.renderTasks.delete(k),T){const B=(z=k.gfx)==null?void 0:z.dependencyTracker.take();B&&(k.stepper&&k.stepper.setOperatorBBoxes(B,k.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=B))}y&&x(this,bo,!0),C(this,Kc,Fp).call(this),L?(k.capability.reject(L),this._abortOperatorList({intentState:b,reason:L instanceof Error?L:new Error(L)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(F=globalThis.Stats)!=null&&F.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new dE({callback:P,params:{canvas:t,canvasContext:e,dependencyTracker:T?new FG(t,b.operatorList.length,E):null,viewport:r,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:v});(b.renderTasks||(b.renderTasks=new Set)).add(k);const R=k.task;return Promise.all([b.displayReadyCapability.promise,c]).then(([L,z])=>{var F;if(this.destroyed){P();return}if((F=this._stats)==null||F.time("Rendering"),!(z.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:L,optionalContentConfig:z}),k.operatorListChanged()}).catch(P),R}getOperatorList({intent:e="display",annotationMode:t=ga.ENABLE,printAnnotationStorage:r=null,isEditing:s=!1}={}){var u;function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,r,s,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>Dm.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){o.read().then(function({value:c,done:u}){if(u){r(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),i()},s)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),x(this,bo,!1),Promise.all(e)}cleanup(e=!1){x(this,bo,!0);const t=C(this,Kc,Fp).call(this);return e&&t&&this._stats&&(this._stats=new Hk),t}_startRenderPage(e,t){var s,i;const r=this._intentStates.get(t);r&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&C(this,Kc,Fp).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:s}){const{map:i,transfer:o}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const d=()=>{c.read().then(({value:h,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),d())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();C(this,Kc,Fp).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof D1){let s=vq;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new kl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}bo=new WeakMap,Kc=new WeakSet,Fp=function(){if(!l(this,bo)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,bo,!1),!0};var Ga,js,xo,Xc,U0,Yc,Qc,zn,hw,zL,HL,jp,Yh,fw;const lt=class lt{constructor({name:e=null,port:t=null,verbosity:r=Z8()}={}){S(this,zn);S(this,Ga,Promise.withResolvers());S(this,js,null);S(this,xo,null);S(this,Xc,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(l(lt,Qc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");l(lt,Qc).set(t,this),C(this,zn,zL).call(this,t)}else C(this,zn,HL).call(this)}get promise(){return l(this,Ga).promise}get port(){return l(this,xo)}get messageHandler(){return l(this,js)}destroy(){var e,t;this.destroyed=!0,(e=l(this,Xc))==null||e.terminate(),x(this,Xc,null),l(lt,Qc).delete(l(this,xo)),x(this,xo,null),(t=l(this,js))==null||t.destroy(),x(this,js,null)}static create(e){const t=l(this,Qc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new lt(e)}static get workerSrc(){if(Oi.workerSrc)return Oi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ce(this,"_setupFakeWorkerGlobal",(async()=>l(this,Yh,fw)?l(this,Yh,fw):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ga=new WeakMap,js=new WeakMap,xo=new WeakMap,Xc=new WeakMap,U0=new WeakMap,Yc=new WeakMap,Qc=new WeakMap,zn=new WeakSet,hw=function(){l(this,Ga).resolve(),l(this,js).send("configure",{verbosity:this.verbosity})},zL=function(e){x(this,xo,e),x(this,js,new Ip("main","worker",e)),l(this,js).on("ready",()=>{}),C(this,zn,hw).call(this)},HL=function(){if(l(lt,Yc)||l(lt,Yh,fw)){C(this,zn,jp).call(this);return}let{workerSrc:e}=lt;try{lt._isSameOrigin(window.location,e)||(e=lt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Ip("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?l(this,Ga).reject(new Error("Worker was destroyed")):C(this,zn,jp).call(this)},i=new AbortController;t.addEventListener("error",()=>{l(this,Xc)||s()},{signal:i.signal}),r.on("test",a=>{if(i.abort(),this.destroyed||!a){s();return}x(this,js,r),x(this,xo,t),x(this,Xc,t),C(this,zn,hw).call(this)}),r.on("ready",a=>{if(i.abort(),this.destroyed){s();return}try{o()}catch{C(this,zn,jp).call(this)}});const o=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{Lb("The worker has been disabled.")}C(this,zn,jp).call(this)},jp=function(){l(lt,Yc)||(le("Setting up fake worker."),x(lt,Yc,!0)),lt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){l(this,Ga).reject(new Error("Worker was destroyed"));return}const t=new kG;x(this,xo,t);const r=`fake${wt(lt,U0)._++}`,s=new Ip(r+"_worker",r,t);e.setup(s,t),x(this,js,new Ip(r,r+"_worker",t)),C(this,zn,hw).call(this)}).catch(e=>{l(this,Ga).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Yh=new WeakSet,fw=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},S(lt,Yh),S(lt,U0,0),S(lt,Yc,!1),S(lt,Qc,new WeakMap),jn&&(x(lt,Yc,!0),Oi.workerSrc||(Oi.workerSrc="./pdf.worker.mjs")),lt._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const s=new URL(t,r);return r.origin===s.origin},lt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},lt.fromPort=e=>{if(dG("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return lt.create(e)};let Fm=lt;var _o,xi,Qh,Jh,So,Jc,Bp;class bq{constructor(e,t,r,s,i,o){S(this,Jc);S(this,_o,new Map);S(this,xi,new Map);S(this,Qh,new Map);S(this,Jh,new Map);S(this,So,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new DL,this.fontLoader=new _G({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return ce(this,"annotationStorage",new F1)}getRenderingIntent(e,t=ga.ENABLE,r=null,s=!1,i=!1){let o=Or.DISPLAY,a=qS;switch(e){case"any":o=Or.ANY;break;case"display":break;case"print":o=Or.PRINT;break;default:le(`getRenderingIntent - invalid intent: ${e}`)}const c=o&Or.PRINT&&r instanceof wL?r:this.annotationStorage;switch(t){case ga.DISABLE:o+=Or.ANNOTATIONS_DISABLE;break;case ga.ENABLE:break;case ga.ENABLE_FORMS:o+=Or.ANNOTATIONS_FORMS;break;case ga.ENABLE_STORAGE:o+=Or.ANNOTATIONS_STORAGE,a=c.serializable;break;default:le(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(o+=Or.IS_EDITING),i&&(o+=Or.OPLIST);const{ids:u,hash:d}=c.modifiedIds,h=[o,a.hash,d];return{renderingIntent:o,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=l(this,So))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of l(this,xi).values())e.push(s._destroy());l(this,xi).clear(),l(this,Qh).clear(),l(this,Jh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,i;this.commonObjs.clear(),this.fontLoader.clear(),l(this,_o).clear(),this.filterFactory.destroy(),Lm.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new kl("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{Re(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){s.close();return}Re(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:o}=this._fullReader;return(!s||!i)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(r,s)=>{Re(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){s.close();return}Re(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{i.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new yq(r,this))}),e.on("DocException",r=>{t._capability.reject(Xn(r))}),e.on("PasswordRequest",r=>{x(this,So,Promise.withResolvers());try{if(!t.onPassword)throw Xn(r);const s=i=>{i instanceof Error?l(this,So).reject(i):l(this,So).resolve({password:i})};t.onPassword(s,r.code)}catch(s){l(this,So).reject(s)}return l(this,So).promise}),e.on("DataLoaded",r=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;l(this,xi).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":if("error"in i){const f=i.error;le(`Error during font loading: ${f}`),this.commonObjs.resolve(r,f);break}const a=new KS(i),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,u=new SG(a,c,i.extra,i.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(r,u)});break;case"CopyLocalImage":const{imageRef:d}=i;Re(d,"The imageRef must be defined.");for(const f of l(this,xi).values())for(const[,p]of f.objs)if((p==null?void 0:p.ref)===d)return p.dataLen?(this.commonObjs.resolve(r,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(r,i);break;case"Pattern":const h=new XS(i);this.commonObjs.resolve(r,h.getIR());break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,o])=>{var c;if(this.destroyed)return;const a=l(this,xi).get(s);if(!a.objs.has(r)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(i){case"Image":case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[r.type];if(!s)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&le("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=l(this,Qh).get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&l(this,Jh).set(i.refStr,e);const o=new wq(t,i,this,this._params.pdfBug);return l(this,xi).set(t,o),o});return l(this,Qh).set(t,s),s}getPageIndex(e){return YS(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return C(this,Jc,Bp).call(this,"GetFieldObjects")}hasJSActions(){return C(this,Jc,Bp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return C(this,Jc,Bp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return C(this,Jc,Bp).call(this,"GetOptionalContentConfig").then(t=>new JG(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,_o).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,o;return{info:s[0],metadata:s[1]?new YG(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null,hasStructTree:s[2]}});return l(this,_o).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,xi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,_o).clear(),this.filterFactory.destroy(!0),Lm.cleanup()}}cachedPageNumber(e){if(!YS(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,Jh).get(t)??null}}_o=new WeakMap,xi=new WeakMap,Qh=new WeakMap,Jh=new WeakMap,So=new WeakMap,Jc=new WeakSet,Bp=function(e,t=null){const r=l(this,_o).get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return l(this,_o).set(e,s),s};var qa;class xq{constructor(e){S(this,qa,null);V(this,"onContinue",null);V(this,"onError",null);x(this,qa,e)}get promise(){return l(this,qa).capability.promise}cancel(e=0){l(this,qa).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,qa).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,qa);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}qa=new WeakMap;var Ka,Zc;const Jl=class Jl{constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null,enableHWA:p=!1,operationsFilter:v=null}){S(this,Ka,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new xq(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=p,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=v}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,u;if(this.cancelled)return;if(this._canvas){if(l(Jl,Zc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Jl,Zc).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:s,background:i,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Yd(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var r,s,i;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),l(this,Ka)&&(window.cancelAnimationFrame(l(this,Ka)),x(this,Ka,null)),l(Jl,Zc).delete(this._canvas),e||(e=new D1(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(s=this.task).onError)==null||i.call(s,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,Ka,window.requestAnimationFrame(()=>{x(this,Ka,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Jl,Zc).delete(this._canvas),this.callback())))}};Ka=new WeakMap,Zc=new WeakMap,S(Jl,Zc,new WeakSet);let dE=Jl;const _q="5.4.449",Sq="f44e5f0e6";var br,eu,Zh,Vt,qg,ef,Eo,Kg,Xa,Bs,Xg,We,hE,fE,pE,Gl,VL,ca;const Yn=class Yn{constructor({editor:e=null,uiManager:t=null}){S(this,We);S(this,br,null);S(this,eu,null);S(this,Zh);S(this,Vt,null);S(this,qg,!1);S(this,ef,!1);S(this,Eo,null);S(this,Kg);S(this,Xa,null);S(this,Bs,null);var r,s;e?(x(this,ef,!1),x(this,Eo,e)):x(this,ef,!0),x(this,Bs,(e==null?void 0:e._uiManager)||t),x(this,Kg,l(this,Bs)._eventBus),x(this,Zh,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((s=l(this,Bs))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),l(Yn,Xg)||x(Yn,Xg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ce(this,"_keyboardManager",new qv([[["Escape","mac+Escape"],Yn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Yn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Yn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Yn.prototype._moveToPrevious],[["Home","mac+Home"],Yn.prototype._moveToBeginning],[["End","mac+End"],Yn.prototype._moveToEnd]]))}renderButton(){const e=x(this,br,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",l(this,Eo)&&(e.ariaControls=`${l(this,Eo).id}_colorpicker_dropdown`);const t=l(this,Bs)._signal;e.addEventListener("click",C(this,We,Gl).bind(this),{signal:t}),e.addEventListener("keydown",C(this,We,pE).bind(this),{signal:t});const r=x(this,eu,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=l(this,Zh),e.append(r),e}renderMainDropdown(){const e=x(this,Vt,C(this,We,hE).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===l(this,br)){C(this,We,Gl).call(this,e);return}const t=e.target.getAttribute("data-color");t&&C(this,We,fE).call(this,t,e)}_moveToNext(e){var t,r;if(!l(this,We,ca)){C(this,We,Gl).call(this,e);return}if(e.target===l(this,br)){(t=l(this,Vt).firstElementChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=l(this,Vt))==null?void 0:t.firstElementChild)||e.target===l(this,br)){l(this,We,ca)&&this._hideDropdownFromKeyboard();return}l(this,We,ca)||C(this,We,Gl).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!l(this,We,ca)){C(this,We,Gl).call(this,e);return}(t=l(this,Vt).firstElementChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,We,ca)){C(this,We,Gl).call(this,e);return}(t=l(this,Vt).lastElementChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,Vt))==null||e.classList.add("hidden"),l(this,br).ariaExpanded="false",(t=l(this,Xa))==null||t.abort(),x(this,Xa,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,ef)){if(!l(this,We,ca)){(e=l(this,Eo))==null||e.unselect();return}this.hideDropdown(),l(this,br).focus({preventScroll:!0,focusVisible:l(this,qg)})}}updateColor(e){if(l(this,eu)&&(l(this,eu).style.backgroundColor=e),!l(this,Vt))return;const t=l(this,Bs).highlightColors.values();for(const r of l(this,Vt).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=l(this,br))==null||e.remove(),x(this,br,null),x(this,eu,null),(t=l(this,Vt))==null||t.remove(),x(this,Vt,null)}};br=new WeakMap,eu=new WeakMap,Zh=new WeakMap,Vt=new WeakMap,qg=new WeakMap,ef=new WeakMap,Eo=new WeakMap,Kg=new WeakMap,Xa=new WeakMap,Bs=new WeakMap,Xg=new WeakMap,We=new WeakSet,hE=function(){const e=document.createElement("div"),t=l(this,Bs)._signal;e.addEventListener("contextmenu",ys,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,Eo)&&(e.id=`${l(this,Eo).id}_colorpicker_dropdown`);for(const[r,s]of l(this,Bs).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",l(Yn,Xg)[r]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=s,i.ariaSelected=s===l(this,Zh),i.addEventListener("click",C(this,We,fE).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",C(this,We,pE).bind(this),{signal:t}),e},fE=function(e,t){t.stopPropagation(),l(this,Kg).dispatch("switchannotationeditorparams",{source:this,type:Pe.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},pE=function(e){Yn._keyboardManager.exec(this,e)},Gl=function(e){if(l(this,We,ca)){this.hideDropdown();return}if(x(this,qg,e.detail===0),l(this,Xa)||(x(this,Xa,new AbortController),window.addEventListener("pointerdown",C(this,We,VL).bind(this),{signal:l(this,Bs).combinedSignal(l(this,Xa))})),l(this,br).ariaExpanded="true",l(this,Vt)){l(this,Vt).classList.remove("hidden");return}const t=x(this,Vt,C(this,We,hE).call(this));l(this,br).append(t)},VL=function(e){var t;(t=l(this,Vt))!=null&&t.contains(e.target)||this.hideDropdown()},ca=function(){return l(this,Vt)&&!l(this,Vt).classList.contains("hidden")},S(Yn,Xg,null);let E0=Yn;var _i,Yg,tf,Qg;const Zl=class Zl{constructor(e){S(this,_i,null);S(this,Yg,null);S(this,tf,null);x(this,Yg,e),x(this,tf,e._uiManager),l(Zl,Qg)||x(Zl,Qg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(l(this,_i))return l(this,_i);const{editorType:e,colorType:t,color:r}=l(this,Yg),s=x(this,_i,document.createElement("input"));return s.type="color",s.value=r||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",l(Zl,Qg)[e]),s.addEventListener("input",()=>{l(this,tf).updateParams(t,s.value)},{signal:l(this,tf)._signal}),s}update(e){l(this,_i)&&(l(this,_i).value=e)}destroy(){var e;(e=l(this,_i))==null||e.remove(),x(this,_i,null)}hideDropdown(){}};_i=new WeakMap,Yg=new WeakMap,tf=new WeakMap,Qg=new WeakMap,S(Zl,Qg,null);let A0=Zl;function dP(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function pp(n){return Math.max(0,Math.min(255,255*n))}class hP{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=pp(e),[e,e,e]}static G_HTML([e]){const t=dP(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(pp)}static RGB_HTML(e){return`#${e.map(dP).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[pp(1-Math.min(1,e+s)),pp(1-Math.min(1,r+s)),pp(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,o=1-r,a=Math.min(s,i,o);return["CMYK",s,i,o,a]}}class Eq{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ye("Abstract method `_createSVG` called.")}}class C0 extends Eq{_createSVG(e){return document.createElementNS(Gi,e)}}const Aq=9,Bu=new WeakSet,Cq=new Date().getTimezoneOffset()*60*1e3;class qx{static create(e){switch(e.data.annotationType){case Ot.LINK:return new $1(e);case Ot.TEXT:return new kq(e);case Ot.WIDGET:switch(e.data.fieldType){case"Tx":return new Pq(e);case"Btn":return e.data.radioButton?new qL(e):e.data.checkBox?new Nq(e):new Iq(e);case"Ch":return new Oq(e);case"Sig":return new Rq(e)}return new qu(e);case Ot.POPUP:return new gE(e);case Ot.FREETEXT:return new JL(e);case Ot.LINE:return new Dq(e);case Ot.SQUARE:return new Lq(e);case Ot.CIRCLE:return new Fq(e);case Ot.POLYLINE:return new ZL(e);case Ot.CARET:return new Bq(e);case Ot.INK:return new U1(e);case Ot.POLYGON:return new jq(e);case Ot.HIGHLIGHT:return new e2(e);case Ot.UNDERLINE:return new $q(e);case Ot.SQUIGGLY:return new Uq(e);case Ot.STRIKEOUT:return new zq(e);case Ot.STAMP:return new t2(e);case Ot.FILEATTACHMENT:return new Hq(e);default:return new vt(e)}}}var tu,nf,os,Jg,mE;const K1=class K1{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){S(this,Jg);S(this,tu,null);S(this,nf,!1);S(this,os,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return K1._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var r;const{data:e}=this,t=(r=this.annotationStorage)==null?void 0:r.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var a;const e=(a=this.annotationStorage)==null?void 0:a.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:r,rect:s}=this.data;let i=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let c=0;c<t.length;c+=8)t[c+1]>o?(o=t[c+1],i=t[c+2]):t[c+1]===o&&(i=Math.max(i,t[c+2]));return[i,o]}if((r==null?void 0:r.length)>=1){for(const c of r)for(let u=0,d=c.length;u<d;u+=2)c[u+1]>o?(o=c[u+1],i=c[u]):c[u+1]===o&&(i=Math.max(i,c[u]));if(i!==1/0)return[i,o]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/r,e[1]=100*(e[1]-o)/s,e}get commentText(){var t,r,s;const{data:e}=this;return((r=(t=this.annotationStorage.getRawValue(`${Om}${e.id}`))==null?void 0:t.popup)==null?void 0:r.contents)||((s=e.contentsObj)==null?void 0:s.str)||""}set commentText(e){const{data:t}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:r})||this.annotationStorage.setValue(`${Om}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=l(this,os))==null?void 0:e.popup)||this.popup)==null||t.remove(),x(this,os,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(l(this,tu)||x(this,tu,{rect:this.data.rect.slice(0)}));const{rect:t,popup:r}=e;t&&C(this,Jg,mE).call(this,t);let s=((i=l(this,os))==null?void 0:i.popup)||this.popup;!s&&(r!=null&&r.text)&&(this._createPopup(r),s=l(this,os).popup),s&&(s.updateEdited(e),r!=null&&r.deleted&&(s.remove(),x(this,os,null),this.popup=null))}resetEdited(){var e;l(this,tu)&&(C(this,Jg,mE).call(this,l(this,tu).rect),(e=l(this,os))==null||e.popup.resetEdited(),x(this,tu,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof qu)&&!(this instanceof $1)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof gE){const{rotation:m}=t;return!t.hasOwnCanvas&&m!==0&&this.setRotation(m,i),i}const{width:a,height:c}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const m=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(m>0||w>0){const b=`calc(${m}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;o.borderRadius=b}else if(this instanceof qL){const b=`calc(${a}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=b}switch(t.borderStyle.style){case hd.SOLID:o.borderStyle="solid";break;case hd.DASHED:o.borderStyle="dashed";break;case hd.BEVELED:le("Unimplemented border style: beveled");break;case hd.INSET:le("Unimplemented border style: inset");break;case hd.UNDERLINE:o.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(x(this,nf,!0),o.borderColor=te.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):o.borderWidth=0}const u=te.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:p}=s.rawDims;o.left=`${100*(u[0]-f)/d}%`,o.top=`${100*(u[1]-p)/h}%`;const{rotation:v}=t;return t.hasOwnCanvas||v===0?(o.width=`${100*a/d}%`,o.height=`${100*c/h}%`):this.setRotation(v,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/r}%`,t.style.height=`${100*o/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],o=i[0],a=i.slice(1);s.target.style[r]=hP[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:hP[`${o}_rgb`](a)})};return ce(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||r[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const o=r[s];if(o){const a={detail:{[s]:i},target:e};o(a),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(m=>Math.fround(m));if(e.length===8){const[m,w,g,b]=e.subarray(2,6);if(s===m&&i===w&&t===g&&r===b)return}const{style:o}=this.container;let a;if(l(this,nf)){const{borderColor:m,borderWidth:w}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const c=s-t,u=i-r,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=d.createElement("defs");h.append(f);const p=d.createElement("clipPath"),v=`clippath_${this.data.id}`;p.setAttribute("id",v),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let m=2,w=e.length;m<w;m+=8){const g=e[m],b=e[m+1],y=e[m+2],E=e[m+3],T=d.createElement("rect"),P=(y-t)/c,k=(i-b)/u,R=(g-y)/c,N=(b-E)/u;T.setAttribute("x",P),T.setAttribute("y",k),T.setAttribute("width",R),T.setAttribute("height",N),p.append(T),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${k}" width="${R}" height="${N}"/>`)}l(this,nf)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${v})`}_createPopup(e=null){const{data:t}=this;let r,s;e?(r={str:e.text},s=e.date):(r=t.contentsObj,s=t.modificationDate),x(this,os,new gE({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(l(this,os)||this.popup||this.data.popupRef)}get extraPopupElement(){return l(this,os)}render(){Ye("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:o,exportValues:a}of s){if(i===-1||o===t)continue;const c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Bu.has(u)){le(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:c,domElement:u})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,o=s.getAttribute("data-element-id");o!==t&&Bu.has(s)&&r.push({id:o,exportValue:i,domElement:s})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};tu=new WeakMap,nf=new WeakMap,os=new WeakMap,Jg=new WeakSet,mE=function(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:c}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(o-e[3]+c)/o}%`,s===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(s)};let vt=K1;class Tq extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var Fr,ql,WL,GL;class $1 extends vt{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});S(this,Fr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(r.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),i=!0):t.attachment?(C(this,Fr,WL).call(this,s,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(C(this,Fr,GL).call(this,s,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=s,this.container.append(s)),this.container}_bindLink(t,r,s=""){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&C(this,Fr,ql).call(this),s&&(t.title=s)}_bindNamedAction(t,r,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),s&&(t.title=s),C(this,Fr,ql).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const o=s.get(i);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1})}r.overlaidText&&(t.title=r.overlaidText),t.onclick||(t.onclick=()=>!1),C(this,Fr,ql).call(this)}_bindResetFormAction(t,r){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),C(this,Fr,ql).call(this),!this._fieldObjects){le('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var h;s==null||s();const{fields:i,refs:o,include:a}=r,c=[];if(i.length!==0||o.length!==0){const f=new Set(o);for(const p of i){const v=this._fieldObjects[p]||[];for(const{id:m}of v)f.add(m)}for(const p of Object.values(this._fieldObjects))for(const v of p)f.has(v.id)===a&&c.push(v)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,d=[];for(const f of c){const{id:p}=f;switch(d.push(p),f.type){case"text":{const m=f.defaultValue||"";u.setValue(p,{value:m});break}case"checkbox":case"radiobutton":{const m=f.defaultValue===f.exportValues;u.setValue(p,{value:m});break}case"combobox":case"listbox":{const m=f.defaultValue||"";u.setValue(p,{value:m});break}default:continue}const v=document.querySelector(`[data-element-id="${p}"]`);if(v){if(!Bu.has(v)){le(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Fr=new WeakSet,ql=function(){this.container.setAttribute("data-internal-link","")},WL=function(t,r,s="",i=null){t.href=this.linkService.getAnchorUrl(""),r.description?t.title=r.description:s&&(t.title=s),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(r.content,r.filename,i),!1},C(this,Fr,ql).call(this)},GL=function(t,r,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),s&&(t.title=s),C(this,Fr,ql).call(this)};class kq extends vt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class qu extends vt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return vn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var a;if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o)}}))})}_setEventListeners(e,t,r,s){var i,o,a;for(const[c,u]of r)(u==="Action"||(i=this.data.actions)!=null&&i[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,s),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":te.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||Aq,i=e.style;let o;const a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(u/(Bx*s))||1,h=u/d;o=Math.min(s,c(h/Bx))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,c(u/Bx))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=te.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Pq extends qu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),i.setValue(o.id,{[s]:r})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let u=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=u??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",u??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Bu.add(r),this.contentElement=r,r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:p}=this.data,v=!!f&&this.enableScripting;h&&(r.title=h),this._setRequired(r,this.data.required),c&&(r.maxLength=c),r.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(r,"value",w.target.value,"value"),d.formattedValue=null}),r.addEventListener("resetform",w=>{const g=this.data.defaultFieldValue??"";r.value=d.userValue=g,d.formattedValue=null});let m=w=>{const{formattedValue:g}=d;g!=null&&(w.target.value=g),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",g=>{var y;if(d.focused)return;const{target:b}=g;if(v&&(b.type=f,p&&(b.step=p)),d.userValue){const E=d.userValue;if(v)if(f==="time"){const T=new Date(E),P=[T.getHours(),T.getMinutes(),T.getSeconds()];b.value=P.map(k=>k.toString().padStart(2,"0")).join(":")}else b.value=new Date(E-Cq).toISOString().split(f==="date"?"T":".",1)[0];else b.value=E}d.lastCommittedValue=b.value,d.commitKey=1,(y=this.data.actions)!=null&&y.Focus||(d.focused=!0)}),r.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const b={value(y){d.userValue=y.detail.value??"",v||e.setValue(t,{value:d.userValue.toString()}),y.target.value=d.userValue},formattedValue(y){const{formattedValue:E}=y.detail;d.formattedValue=E,E!=null&&y.target!==document.activeElement&&(y.target.value=E);const T={formattedValue:E};v&&(T.value=E),e.setValue(t,T)},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{var k;const{charLimit:E}=y.detail,{target:T}=y;if(E===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",E);let P=d.userValue;!P||P.length<=E||(P=P.slice(0,E),T.value=d.userValue=P,e.setValue(t,{value:P}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(b,g)}),r.addEventListener("keydown",g=>{var E;d.commitKey=1;let b=-1;if(g.key==="Escape"?b=0:g.key==="Enter"&&!this.data.multiLine?b=2:g.key==="Tab"&&(d.commitKey=3),b===-1)return;const{value:y}=g.target;d.lastCommittedValue!==y&&(d.lastCommittedValue=y,d.userValue=y,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:b,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const w=m;m=null,r.addEventListener("blur",g=>{var E,T;if(!d.focused||!g.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(d.focused=!1);const{target:b}=g;let{value:y}=b;if(v){if(y&&f==="time"){const P=y.split(":").map(k=>parseInt(k,10));y=new Date(2e3,0,1,P[0],P[1],P[2]||0).valueOf(),b.step=""}else y.includes("T")||(y=`${y}T00:00`),y=new Date(y).valueOf();b.type="text"}d.userValue=y,d.lastCommittedValue!==y&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:d.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),w(g)}),(i=this.data.actions)!=null&&i.Keystroke&&r.addEventListener("beforeinput",g=>{var N;d.lastCommittedValue=null;const{data:b,target:y}=g,{value:E,selectionStart:T,selectionEnd:P}=y;let k=T,R=P;switch(g.inputType){case"deleteWordBackward":{const I=E.substring(0,T).match(/\w*[^\w]*$/);I&&(k-=I[0].length);break}case"deleteWordForward":{const I=E.substring(T).match(/^[^\w]*\w*/);I&&(R+=I[0].length);break}case"deleteContentBackward":T===P&&(k-=1);break;case"deleteContentForward":T===P&&(R+=1);break}g.preventDefault(),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:b||"",willCommit:!1,selStart:k,selEnd:R}})}),this._setEventListeners(r,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(m&&r.addEventListener("blur",m),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;r.classList.add("comb"),r.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Rq extends qu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Nq extends qu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Bu.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,r)){const d=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(r,{value:c})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(r,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class qL extends qu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(Bu.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,r))e.setValue(u.id,{value:!1});e.setValue(r,{value:c})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const c={value:u=>{const d=o===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const f=d&&h.id===r;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Iq extends $1{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class Oq extends qu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Bu.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,r.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),i=!1),s.append(h)}let o=null;if(i){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),s.prepend(d),o=()=>{d.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=d=>{const h=d?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,v=>v.selected).map(v=>v[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let c=a(!1);const u=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",d=>{const h={value(f){o==null||o();const p=f.detail.value,v=new Set(Array.isArray(p)?p:[p]);for(const m of s.options)m.selected=v.has(m.value);e.setValue(t,{value:a(!0)}),c=a(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,v=f.detail.remove;p[v].selected=!1,s.remove(v),p.length>0&&Array.prototype.findIndex.call(p,w=>w.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=a(!1)},insert(f){const{index:p,displayValue:v,exportValue:m}=f.detail.insert,w=s.children[p],g=document.createElement("option");g.textContent=v,g.value=m,w?w.before(g):s.append(g),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const v of p){const{displayValue:m,exportValue:w}=v,g=document.createElement("option");g.textContent=m,g.value=w,s.append(g)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const v of f.target.options)v.selected=p.has(v.index);e.setValue(t,{value:a(!0)}),c=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),s.addEventListener("input",d=>{var p;const h=a(!0),f=a(!1);e.setValue(t,{value:h}),d.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):s.addEventListener("input",function(d){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var Zg,vE;class gE extends vt{constructor(t){const{data:r,elements:s,parent:i}=t,o=!!i._commentManager;super(t,{isRenderable:!o&&vt._hasPopupData(r)});S(this,Zg);if(this.elements=s,o&&vt._hasPopupData(r)){const a=this.popup=C(this,Zg,vE).call(this);for(const c of s)c.popup=a}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const r=this.popup=C(this,Zg,vE).call(this),s=[];for(const i of this.elements)i.popup=r,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${Od}${i}`).join(",")),this.container}}Zg=new WeakSet,vE=function(){return new Mq({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var xr,Ya,z0,H0,rf,sf,St,Si,Qa,nu,of,af,Ei,_r,Ao,Co,Et,To,Ja,ev,ko,lf,ru,Za,Xt,el,ye,pw,yE,wE,bE,mw,xE,KL,XL,YL,QL,gw,vw,_E;class Mq{constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:o,richText:a,parent:c,rect:u,parentRect:d,open:h,commentManager:f=null}){S(this,ye);S(this,xr,null);S(this,Ya,C(this,ye,YL).bind(this));S(this,z0,C(this,ye,_E).bind(this));S(this,H0,C(this,ye,vw).bind(this));S(this,rf,C(this,ye,gw).bind(this));S(this,sf,null);S(this,St,null);S(this,Si,null);S(this,Qa,null);S(this,nu,null);S(this,of,null);S(this,af,null);S(this,Ei,!1);S(this,_r,null);S(this,Ao,null);S(this,Co,null);S(this,Et,null);S(this,To,null);S(this,Ja,null);S(this,ev,null);S(this,ko,null);S(this,lf,null);S(this,ru,null);S(this,Za,!1);S(this,Xt,null);S(this,el,null);x(this,St,e),x(this,lf,s),x(this,Si,o),x(this,ko,a),x(this,of,c),x(this,sf,t),x(this,ev,u),x(this,af,d),x(this,nu,r),x(this,xr,f),x(this,Xt,r[0]),x(this,Qa,y0.toDateObject(i)),this.trigger=r.flatMap(p=>p.getElementsToTriggerPopup()),f||(C(this,ye,pw).call(this),l(this,St).hidden=!0,h&&C(this,ye,gw).call(this))}renderCommentButton(){if(l(this,Et)){l(this,Et).parentNode||l(this,Xt).container.after(l(this,Et));return}if(l(this,To)||C(this,ye,yE).call(this),!l(this,To))return;const{signal:e}=x(this,Ao,new AbortController),t=l(this,Xt).hasOwnCommentButton,r=()=>{l(this,xr).toggleCommentPopup(this,!0,void 0,!t)},s=()=>{l(this,xr).toggleCommentPopup(this,!1,!0,!t)},i=()=>{l(this,xr).toggleCommentPopup(this,!1,!1)};if(t){x(this,Et,l(this,Xt).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",l(this,Ya),{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",s,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=x(this,Et,document.createElement("button"));o.className="annotationCommentButton";const a=l(this,Xt).container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),C(this,ye,bE).call(this),C(this,ye,wE).call(this),o.addEventListener("keydown",l(this,Ya),{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",s,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),a.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=l(this,Xt).commentData;return e?l(this,of)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=l(this,Et))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:r,creationDate:s,modificationDate:i}=l(this,Xt).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:r,creationDate:s,modificationDate:i}}get elementBeforePopup(){return l(this,Et)}get comment(){return l(this,el)||x(this,el,l(this,Xt).commentText),l(this,el)}set comment(e){e!==this.comment&&(l(this,Xt).commentText=x(this,el,e))}focus(){var e;(e=l(this,Xt).container)==null||e.focus()}get parentBoundingClientRect(){return l(this,Xt).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){l(this,Et)&&(l(this,Et).classList.toggle("selected",e),l(this,Et).ariaExpanded=t)}setSelectedCommentButton(e){l(this,Et).classList.toggle("selected",e)}get commentPopupPosition(){if(l(this,Ja))return l(this,Ja);const{x:e,y:t,height:r}=l(this,Et).getBoundingClientRect(),{x:s,y:i,width:o,height:a}=l(this,Xt).layer.getBoundingClientRect();return[(e-s)/o,(t+r-i)/a]}set commentPopupPosition(e){x(this,Ja,e)}hasDefaultPopupPosition(){return l(this,Ja)===null}get commentButtonPosition(){return l(this,To)}get commentButtonWidth(){return l(this,Et).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,r]=l(this,Ja)||this.commentButtonPosition.map(u=>u/100),s=this.parentBoundingClientRect,{x:i,y:o,width:a,height:c}=s;l(this,xr).showDialog(null,this,i+t*a,o+r*c,{...e,parentDimensions:s})}render(){var r,s;if(l(this,_r))return;const e=x(this,_r,document.createElement("div"));if(e.className="popup",l(this,sf)){const i=e.style.outlineColor=te.makeHexColor(...l(this,sf));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(r=l(this,lf))!=null&&r.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=l(this,lf)}if(e.append(t),l(this,Qa)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Qa).valueOf()})),i.dateTime=l(this,Qa).toISOString(),t.append(i)}jD({html:l(this,ye,mw)||l(this,Si).str,dir:(s=l(this,Si))==null?void 0:s.dir,className:"popupContent"},e),l(this,St).append(e)}updateEdited({rect:e,popup:t,deleted:r}){var s;if(l(this,xr)){r?(this.remove(),x(this,el,null)):t&&(t.deleted?this.remove():(C(this,ye,bE).call(this),x(this,el,t.text))),e&&(x(this,To,null),C(this,ye,yE).call(this),C(this,ye,wE).call(this));return}if(r||t!=null&&t.deleted){this.remove();return}C(this,ye,pw).call(this),l(this,ru)||x(this,ru,{contentsObj:l(this,Si),richText:l(this,ko)}),e&&x(this,Co,null),t&&t.text&&(x(this,ko,C(this,ye,XL).call(this,t.text)),x(this,Qa,y0.toDateObject(t.date)),x(this,Si,null)),(s=l(this,_r))==null||s.remove(),x(this,_r,null)}resetEdited(){var e;l(this,ru)&&({contentsObj:wt(this,Si)._,richText:wt(this,ko)._}=l(this,ru),x(this,ru,null),(e=l(this,_r))==null||e.remove(),x(this,_r,null),x(this,Co,null))}remove(){var e,t,r;if((e=l(this,Ao))==null||e.abort(),x(this,Ao,null),(t=l(this,_r))==null||t.remove(),x(this,_r,null),x(this,Za,!1),x(this,Ei,!1),(r=l(this,Et))==null||r.remove(),x(this,Et,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){x(this,Za,this.isVisible),l(this,Za)&&(l(this,St).hidden=!0)}maybeShow(){l(this,xr)||(C(this,ye,pw).call(this),l(this,Za)&&(l(this,_r)||C(this,ye,vw).call(this),x(this,Za,!1),l(this,St).hidden=!1))}get isVisible(){return l(this,xr)?!1:l(this,St).hidden===!1}}xr=new WeakMap,Ya=new WeakMap,z0=new WeakMap,H0=new WeakMap,rf=new WeakMap,sf=new WeakMap,St=new WeakMap,Si=new WeakMap,Qa=new WeakMap,nu=new WeakMap,of=new WeakMap,af=new WeakMap,Ei=new WeakMap,_r=new WeakMap,Ao=new WeakMap,Co=new WeakMap,Et=new WeakMap,To=new WeakMap,Ja=new WeakMap,ev=new WeakMap,ko=new WeakMap,lf=new WeakMap,ru=new WeakMap,Za=new WeakMap,Xt=new WeakMap,el=new WeakMap,ye=new WeakSet,pw=function(){var t;if(l(this,Ao))return;x(this,Ao,new AbortController);const{signal:e}=l(this,Ao);for(const r of this.trigger)r.addEventListener("click",l(this,rf),{signal:e}),r.addEventListener("pointerenter",l(this,H0),{signal:e}),r.addEventListener("pointerleave",l(this,z0),{signal:e}),r.classList.add("popupTriggerArea");for(const r of l(this,nu))(t=r.container)==null||t.addEventListener("keydown",l(this,Ya),{signal:e})},yE=function(){const e=l(this,nu).find(t=>t.hasCommentButton);e&&x(this,To,e._normalizePoint(e.commentButtonPosition))},wE=function(){if(l(this,Xt).extraPopupElement&&!l(this,Xt).editor)return;l(this,Et)||this.renderCommentButton();const[e,t]=l(this,To),{style:r}=l(this,Et);r.left=`calc(${e}%)`,r.top=`calc(${t}% - var(--comment-button-dim))`},bE=function(){l(this,Xt).extraPopupElement||(l(this,Et)||this.renderCommentButton(),l(this,Et).style.backgroundColor=this.commentButtonColor||"")},mw=function(){const e=l(this,ko),t=l(this,Si);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,ko).html||null},xE=function(){var e,t,r;return((r=(t=(e=l(this,ye,mw))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},KL=function(){var e,t,r;return((r=(t=(e=l(this,ye,mw))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},XL=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:l(this,ye,KL),fontSize:l(this,ye,xE)?`calc(${l(this,ye,xE)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r},YL=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Ei))&&C(this,ye,gw).call(this)},QL=function(){if(l(this,Co)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=l(this,of);let o=!!l(this,af),a=o?l(this,af):l(this,ev);for(const v of l(this,nu))if(!a||te.intersect(v.data.rect,a)!==null){a=v.data.rect,o=!0;break}const c=te.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),d=o?a[2]-a[0]+5:0,h=c[0]+d,f=c[1];x(this,Co,[100*(h-s)/t,100*(f-i)/r]);const{style:p}=l(this,St);p.left=`${l(this,Co)[0]}%`,p.top=`${l(this,Co)[1]}%`},gw=function(){if(l(this,xr)){l(this,xr).toggleCommentPopup(this,!1);return}x(this,Ei,!l(this,Ei)),l(this,Ei)?(C(this,ye,vw).call(this),l(this,St).addEventListener("click",l(this,rf)),l(this,St).addEventListener("keydown",l(this,Ya))):(C(this,ye,_E).call(this),l(this,St).removeEventListener("click",l(this,rf)),l(this,St).removeEventListener("keydown",l(this,Ya)))},vw=function(){l(this,_r)||this.render(),this.isVisible?l(this,Ei)&&l(this,St).classList.add("focused"):(C(this,ye,QL).call(this),l(this,St).hidden=!1,l(this,St).style.zIndex=parseInt(l(this,St).style.zIndex)+1e3)},_E=function(){l(this,St).classList.remove("focused"),!(l(this,Ei)||!this.isVisible)&&(l(this,St).hidden=!0,l(this,St).style.zIndex=parseInt(l(this,St).style.zIndex)-1e3)};class JL extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=fe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var tv;class Dq extends vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,tv,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=x(this,tv,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,tv)}addHighlightArea(){this.container.classList.add("highlightArea")}}tv=new WeakMap;var nv;class Lq extends vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,nv,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,a=x(this,nv,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",r-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,nv)}addHighlightArea(){this.container.classList.add("highlightArea")}}nv=new WeakMap;var rv;class Fq extends vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,rv,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,a=x(this,rv,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",r/2),a.setAttribute("cy",s/2),a.setAttribute("rx",r/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,rv)}addHighlightArea(){this.container.classList.add("highlightArea")}}rv=new WeakMap;var sv;class ZL extends vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,sv,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:s,popupRef:i},width:o,height:a}=this;if(!r)return this.container;const c=this.svgFactory.create(o,a,!0);let u=[];for(let h=0,f=r.length;h<f;h+=2){const p=r[h]-t[0],v=t[3]-r[h+1];u.push(`${p},${v}`)}u=u.join(" ");const d=x(this,sv,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,sv)}addHighlightArea(){this.container.classList.add("highlightArea")}}sv=new WeakMap;class jq extends ZL{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Bq extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var iv,su,ov,SE;class U1 extends vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,ov);S(this,iv,null);S(this,su,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?fe.HIGHLIGHT:fe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:s,borderStyle:i,popupRef:o}}=this,{transform:a,width:c,height:u}=C(this,ov,SE).call(this,r,t),d=this.svgFactory.create(c,u,!0),h=x(this,iv,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let f=0,p=s.length;f<p;f++){const v=this.svgFactory.createElement(this.svgElementName);l(this,su).push(v),v.setAttribute("points",s[f].join(",")),h.append(v)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:s,rect:i}=t,o=l(this,iv);if(r>=0&&o.setAttribute("stroke-width",r||1),s)for(let a=0,c=l(this,su).length;a<c;a++)l(this,su)[a].setAttribute("points",s[a].join(","));if(i){const{transform:a,width:c,height:u}=C(this,ov,SE).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,su)}addHighlightArea(){this.container.classList.add("highlightArea")}}iv=new WeakMap,su=new WeakMap,ov=new WeakSet,SE=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class e2 extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=fe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class $q extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Uq extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class zq extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class t2 extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=fe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var av,lv,EE;class Hq extends vt{constructor(t){var s;super(t,{isRenderable:!0});S(this,lv);S(this,av,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let s;r.hasAppearance||r.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),s.addEventListener("dblclick",C(this,lv,EE).bind(this)),x(this,av,s);const{isMac:i}=vn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&C(this,lv,EE).call(this)}),!r.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return l(this,av)}addHighlightArea(){this.container.classList.add("highlightArea")}}av=new WeakMap,lv=new WeakSet,EE=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var iu,ou,cf,tl,cv,au,Sr,uv,Uo,yw,CE;const X1=class X1{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:o,structTreeLayer:a,commentManager:c,linkService:u,annotationStorage:d}){S(this,Uo);S(this,iu,null);S(this,ou,null);S(this,cf,null);S(this,tl,new Map);S(this,cv,null);S(this,au,null);S(this,Sr,[]);S(this,uv,!1);this.div=e,x(this,iu,t),x(this,ou,r),x(this,cv,a||null),x(this,au,u||null),x(this,cf,d||new F1),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=c||null}hasEditableAnnotations(){return l(this,tl).size>0}async render(e){var a;const{annotations:t}=e,r=this.div;Fu(r,this.viewport);const s=new Map,i=[],o={data:null,layer:r,linkService:l(this,au),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new C0,annotationStorage:l(this,cf),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const u=c.annotationType===Ot.POPUP;if(u){const f=s.get(c.id);if(!f)continue;if(!this._commentManager){i.push(c);continue}o.elements=f}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;o.data=c;const d=qx.create(o);if(!d.isRenderable)continue;if(!u&&(l(this,Sr).push(d),c.popupRef)){const f=s.get(c.popupRef);f?f.push(d):s.set(c.popupRef,[d])}const h=d.render();c.hidden&&(h.style.visibility="hidden"),d._isEditable&&(l(this,tl).set(d.data.id,d),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(d))}await C(this,Uo,yw).call(this);for(const c of i){const u=o.elements=s.get(c.id);o.data=c;const d=qx.create(o);if(!d.isRenderable)continue;const h=d.render();d.contentElement.id=`${Od}${c.id}`,c.hidden&&(h.style.visibility="hidden"),u.at(-1).container.after(h)}C(this,Uo,CE).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:l(this,au),svgFactory:new C0,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=X1._defaultBorderStyle),t.data=r;const s=qx.create(t);s.isRenderable&&(s.render(),s.contentElement.id=`${Od}${r.id}`,l(this,Sr).push(s))}await C(this,Uo,yw).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Fu(t,{rotation:e.rotation}),C(this,Uo,CE).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,tl).values())}getEditableAnnotation(e){return l(this,tl).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:r,rotation:s}=e,i=new Tq({data:{id:r,rect:e.getPDFRect(),rotation:s},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:l(this,au),annotationStorage:l(this,cf)});return i.render(),i.contentElement.id=`${Od}${r}`,i.createOrUpdatePopup(),l(this,Sr).push(i),i}removeAnnotation(e){var s;const t=l(this,Sr).findIndex(i=>i.data.id===e);if(t<0)return;const[r]=l(this,Sr).splice(t,1);(s=l(this,iu))==null||s.removePointerInTextLayer(r.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);C(this,Uo,yw).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return ce(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:hd.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};iu=new WeakMap,ou=new WeakMap,cf=new WeakMap,tl=new WeakMap,cv=new WeakMap,au=new WeakMap,Sr=new WeakMap,uv=new WeakMap,Uo=new WeakSet,yw=async function(){var r,s,i;if(l(this,Sr).length===0)return;this.div.replaceChildren();const e=[];if(!l(this,uv)){x(this,uv,!0);for(const{contentElement:o,data:{id:a}}of l(this,Sr)){const c=o.id=`${Od}${a}`;e.push((r=l(this,cv))==null?void 0:r.getAriaAttributes(c).then(u=>{if(u)for(const[d,h]of u)o.setAttribute(d,h)}))}}l(this,Sr).sort(({data:{rect:[o,a,c,u]}},{data:{rect:[d,h,f,p]}})=>{if(o===c&&a===u)return 1;if(d===f&&h===p)return-1;const v=u,m=a,w=(a+u)/2,g=p,b=h,y=(h+p)/2;if(w>=g&&y<=m)return-1;if(y>=v&&w<=b)return 1;const E=(o+c)/2,T=(d+f)/2;return E-T});const t=document.createDocumentFragment();for(const o of l(this,Sr))t.append(o.container),this._commentManager?(i=((s=o.extraPopupElement)==null?void 0:s.popup)||o.popup)==null||i.renderCommentButton():o.extraPopupElement&&t.append(o.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),l(this,iu))for(const o of l(this,Sr))l(this,iu).addPointerInTextLayer(o.contentElement,!1)},CE=function(){var t;if(!l(this,ou))return;const e=this.div;for(const[r,s]of l(this,ou)){const i=e.querySelector(`[data-annotation-id="${r}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):i.append(s);const a=l(this,tl).get(r);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,i.id,s),a._hasNoCanvas=!1):a.canvas=s)}l(this,ou).clear()};let AE=X1;const My=/\r\n?|\n/g;var Er,dv,lu,Ar,jt,n2,r2,s2,ww,zo,bw,xw,i2,kE,o2;const st=class st extends tt{constructor(t){super({...t,name:"freeTextEditor"});S(this,jt);S(this,Er,"");S(this,dv,`${this.id}-editor`);S(this,lu,null);S(this,Ar);V(this,"_colorPicker",null);this.color=t.color||st._defaultColor||tt._defaultLineColor,x(this,Ar,t.fontSize||st._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=st.prototype,r=o=>o.isEmpty(),s=ju.TRANSLATE_SMALL,i=ju.TRANSLATE_BIG;return ce(this,"_keyboardManager",new qv([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}]]))}static initialize(t,r){tt.initialize(t,r);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case Pe.FREETEXT_SIZE:st._defaultFontSize=r;break;case Pe.FREETEXT_COLOR:st._defaultColor=r;break}}updateParams(t,r){switch(t){case Pe.FREETEXT_SIZE:C(this,jt,n2).call(this,r);break;case Pe.FREETEXT_COLOR:C(this,jt,r2).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Pe.FREETEXT_SIZE,st._defaultFontSize],[Pe.FREETEXT_COLOR,st._defaultColor||tt._defaultLineColor]]}get propertiesToUpdate(){return[[Pe.FREETEXT_SIZE,l(this,Ar)],[Pe.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new A0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Pe.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-st._internalPadding*t,-(st._internalPadding+l(this,Ar))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,lu,new AbortController);const t=this._uiManager.combinedSignal(l(this,lu));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,dv)),this._isDraggable=!0,(t=l(this,lu))==null||t.abort(),x(this,lu,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,Er),r=x(this,Er,C(this,jt,s2).call(this).trimEnd());if(t===r)return;const s=i=>{if(x(this,Er,i),!i){this.remove();return}C(this,jt,xw).call(this),this._uiManager.rebuild(this),C(this,jt,ww).call(this)};this.addCommands({cmd:()=>{s(r)},undo:()=>{s(t)},mustExec:!1}),C(this,jt,ww).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){st._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,dv)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${l(this,Ar)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[d,h]=this.pageDimensions,[f,p]=this.pageTranslation;let v,m;switch(this.rotation){case 0:v=t+(a[0]-f)/d,m=r+this.height-(a[1]-p)/h;break;case 90:v=t+(a[0]-f)/d,m=r-(a[1]-p)/h,[c,u]=[u,-c];break;case 180:v=t-this.width+(a[0]-f)/d,m=r-(a[1]-p)/h,[c,u]=[-c,-u];break;case 270:v=t+(a[0]-f-this.height*h)/d,m=r+(a[1]-p-this.width*d)/h,[c,u]=[-u,c];break}this.setAt(v*i,m*o,c,u)}else this._moveAfterPaste(t,r);C(this,jt,xw).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var v,m,w;const r=t.clipboardData||window.clipboardData,{types:s}=r;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=C(v=st,zo,kE).call(v,r.getData("text")||"").replaceAll(My,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=a,d=[],h=[];if(c.nodeType===Node.TEXT_NODE){const g=c.parentElement;if(h.push(c.nodeValue.slice(u).replaceAll(My,"")),g!==this.editorDiv){let b=d;for(const y of this.editorDiv.childNodes){if(y===g){b=h;continue}b.push(C(m=st,zo,bw).call(m,y))}}d.push(c.nodeValue.slice(0,u).replaceAll(My,""))}else if(c===this.editorDiv){let g=d,b=0;for(const y of this.editorDiv.childNodes)b++===u&&(g=h),g.push(C(w=st,zo,bw).call(w,y))}x(this,Er,`${d.join(`
`)}${i}${h.join(`
`)}`),C(this,jt,xw).call(this);const f=new Range;let p=Math.sumPrecise(d.map(g=>g.length));for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const b=g.nodeValue.length;if(p<=b){f.setStart(g,p),f.setEnd(g,p);break}p-=b}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=st._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,r,s){var a;let i=null;if(t instanceof JL){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:h,id:f,popupRef:p,richText:v,contentsObj:m,creationDate:w,modificationDate:g},textContent:b,textPosition:y,parent:{page:{pageNumber:E}}}=t;if(!b||b.length===0)return null;i=t={annotationType:fe.FREETEXT,color:Array.from(u),fontSize:c,value:b.join(`
`),position:y,pageIndex:E-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:(m==null?void 0:m.str)||null,richText:v,creationDate:w,modificationDate:g}}const o=await super.deserialize(t,r,s);return x(o,Ar,t.fontSize),o.color=te.makeHexColor(...t.color),x(o,Er,C(a=st,zo,kE).call(a,t.value)),o._initialData=i,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=tt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:r,fontSize:l(this,Ar),value:C(this,jt,i2).call(this)});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!C(this,jt,o2).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(!r)return null;const{style:s}=r;s.fontSize=`calc(${l(this,Ar)}px * var(--total-scale-factor))`,s.color=this.color,r.replaceChildren();for(const i of l(this,Er).split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),r.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:l(this,Er)}}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Er=new WeakMap,dv=new WeakMap,lu=new WeakMap,Ar=new WeakMap,jt=new WeakSet,n2=function(t){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-l(this,Ar))*this.parentScale),x(this,Ar,i),C(this,jt,ww).call(this)},s=l(this,Ar);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},r2=function(t){const r=i=>{this.color=i,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},s2=function(){var s;const t=[];this.editorDiv.normalize();let r=null;for(const i of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(C(s=st,zo,bw).call(s,i)),r=i);return t.join(`
`)},ww=function(){const[t,r]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/r):(this.width=s.height/t,this.height=s.width/r),this.fixAndSetPosition()},zo=new WeakSet,bw=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(My,"")},xw=function(){if(this.editorDiv.replaceChildren(),!!l(this,Er))for(const t of l(this,Er).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},i2=function(){return l(this,Er).replaceAll(""," ")},kE=function(t){return t.replaceAll(" ","")},o2=function(t){const{value:r,fontSize:s,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==r||t.fontSize!==s||t.color.some((a,c)=>a!==i[c])||t.pageIndex!==o},S(st,zo),V(st,"_freeTextDefaultContent",""),V(st,"_internalPadding",0),V(st,"_defaultColor",null),V(st,"_defaultFontSize",10),V(st,"_type","freetext"),V(st,"_editorType",fe.FREETEXT);let TE=st;class J{toSVGPath(){Ye("Abstract method `toSVGPath` must be implemented.")}get box(){Ye("Abstract getter `box` must be implemented.")}serialize(e,t){Ye("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,s,i,o){o||(o=new Float32Array(e.length));for(let a=0,c=e.length;a<c;a+=2)o[a]=t+e[a]*s,o[a+1]=r+e[a+1]*i;return o}static _rescaleAndSwap(e,t,r,s,i,o){o||(o=new Float32Array(e.length));for(let a=0,c=e.length;a<c;a+=2)o[a]=t+e[a+1]*s,o[a+1]=r+e[a]*i;return o}static _translate(e,t,r,s){s||(s=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)s[i]=t+e[i],s[i+1]=r+e[i+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,s,i){switch(i){case 90:return[1-t/r,e/s];case 180:return[1-e/r,1-t/s];case 270:return[t/r,1-e/s];default:return[e/r,t/s]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,s,i,o){return[(e+5*r)/6,(t+5*s)/6,(5*r+i)/6,(5*s+o)/6,(r+i)/2,(s+o)/2]}}V(J,"PRECISION",1e-4);var Cr,$s,uf,df,Ai,_e,cu,uu,hv,fv,hf,ff,nl,pv,V0,W0,qt,$p,a2,l2,c2,u2,d2,h2;const Ji=class Ji{constructor({x:e,y:t},r,s,i,o,a=0){S(this,qt);S(this,Cr);S(this,$s,[]);S(this,uf);S(this,df);S(this,Ai,[]);S(this,_e,new Float32Array(18));S(this,cu);S(this,uu);S(this,hv);S(this,fv);S(this,hf);S(this,ff);S(this,nl,[]);x(this,Cr,r),x(this,ff,i*s),x(this,df,o),l(this,_e).set([NaN,NaN,NaN,NaN,e,t],6),x(this,uf,a),x(this,fv,l(Ji,pv)*s),x(this,hv,l(Ji,W0)*s),x(this,hf,s),l(this,nl).push(e,t)}isEmpty(){return isNaN(l(this,_e)[8])}add({x:e,y:t}){var N;x(this,cu,e),x(this,uu,t);const[r,s,i,o]=l(this,Cr);let[a,c,u,d]=l(this,_e).subarray(8,12);const h=e-u,f=t-d,p=Math.hypot(h,f);if(p<l(this,hv))return!1;const v=p-l(this,fv),m=v/p,w=m*h,g=m*f;let b=a,y=c;a=u,c=d,u+=w,d+=g,(N=l(this,nl))==null||N.push(e,t);const E=-g/v,T=w/v,P=E*l(this,ff),k=T*l(this,ff);return l(this,_e).set(l(this,_e).subarray(2,8),0),l(this,_e).set([u+P,d+k],4),l(this,_e).set(l(this,_e).subarray(14,18),12),l(this,_e).set([u-P,d-k],16),isNaN(l(this,_e)[6])?(l(this,Ai).length===0&&(l(this,_e).set([a+P,c+k],2),l(this,Ai).push(NaN,NaN,NaN,NaN,(a+P-r)/i,(c+k-s)/o),l(this,_e).set([a-P,c-k],14),l(this,$s).push(NaN,NaN,NaN,NaN,(a-P-r)/i,(c-k-s)/o)),l(this,_e).set([b,y,a,c,u,d],6),!this.isEmpty()):(l(this,_e).set([b,y,a,c,u,d],6),Math.abs(Math.atan2(y-c,b-a)-Math.atan2(g,w))<Math.PI/2?([a,c,u,d]=l(this,_e).subarray(2,6),l(this,Ai).push(NaN,NaN,NaN,NaN,((a+u)/2-r)/i,((c+d)/2-s)/o),[a,c,b,y]=l(this,_e).subarray(14,18),l(this,$s).push(NaN,NaN,NaN,NaN,((b+a)/2-r)/i,((y+c)/2-s)/o),!0):([b,y,a,c,u,d]=l(this,_e).subarray(0,6),l(this,Ai).push(((b+5*a)/6-r)/i,((y+5*c)/6-s)/o,((5*a+u)/6-r)/i,((5*c+d)/6-s)/o,((a+u)/2-r)/i,((c+d)/2-s)/o),[u,d,a,c,b,y]=l(this,_e).subarray(12,18),l(this,$s).push(((b+5*a)/6-r)/i,((y+5*c)/6-s)/o,((5*a+u)/6-r)/i,((5*c+d)/6-s)/o,((a+u)/2-r)/i,((c+d)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,Ai),t=l(this,$s);if(isNaN(l(this,_e)[6])&&!this.isEmpty())return C(this,qt,a2).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?r.push(`L${e[s+4]} ${e[s+5]}`):r.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);C(this,qt,c2).call(this,r);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?r.push(`L${t[s+4]} ${t[s+5]}`):r.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return C(this,qt,l2).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,s,i,o){return new f2(e,t,r,s,i,o)}getOutlines(){var h;const e=l(this,Ai),t=l(this,$s),r=l(this,_e),[s,i,o,a]=l(this,Cr),c=new Float32Array((((h=l(this,nl))==null?void 0:h.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(l(this,nl)[f]-s)/o,c[f+1]=(l(this,nl)[f+1]-i)/a;if(c[c.length-2]=(l(this,cu)-s)/o,c[c.length-1]=(l(this,uu)-i)/a,isNaN(r[6])&&!this.isEmpty())return C(this,qt,u2).call(this,c);const u=new Float32Array(l(this,Ai).length+24+l(this,$s).length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}d=C(this,qt,h2).call(this,u,d);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=t[f+p],u[d+1]=t[f+p+1],d+=2}return C(this,qt,d2).call(this,u,d),this.newFreeDrawOutline(u,c,l(this,Cr),l(this,hf),l(this,uf),l(this,df))}};Cr=new WeakMap,$s=new WeakMap,uf=new WeakMap,df=new WeakMap,Ai=new WeakMap,_e=new WeakMap,cu=new WeakMap,uu=new WeakMap,hv=new WeakMap,fv=new WeakMap,hf=new WeakMap,ff=new WeakMap,nl=new WeakMap,pv=new WeakMap,V0=new WeakMap,W0=new WeakMap,qt=new WeakSet,$p=function(){const e=l(this,_e).subarray(4,6),t=l(this,_e).subarray(16,18),[r,s,i,o]=l(this,Cr);return[(l(this,cu)+(e[0]-t[0])/2-r)/i,(l(this,uu)+(e[1]-t[1])/2-s)/o,(l(this,cu)+(t[0]-e[0])/2-r)/i,(l(this,uu)+(t[1]-e[1])/2-s)/o]},a2=function(){const[e,t,r,s]=l(this,Cr),[i,o,a,c]=C(this,qt,$p).call(this);return`M${(l(this,_e)[2]-e)/r} ${(l(this,_e)[3]-t)/s} L${(l(this,_e)[4]-e)/r} ${(l(this,_e)[5]-t)/s} L${i} ${o} L${a} ${c} L${(l(this,_e)[16]-e)/r} ${(l(this,_e)[17]-t)/s} L${(l(this,_e)[14]-e)/r} ${(l(this,_e)[15]-t)/s} Z`},l2=function(e){const t=l(this,$s);e.push(`L${t[4]} ${t[5]} Z`)},c2=function(e){const[t,r,s,i]=l(this,Cr),o=l(this,_e).subarray(4,6),a=l(this,_e).subarray(16,18),[c,u,d,h]=C(this,qt,$p).call(this);e.push(`L${(o[0]-t)/s} ${(o[1]-r)/i} L${c} ${u} L${d} ${h} L${(a[0]-t)/s} ${(a[1]-r)/i}`)},u2=function(e){const t=l(this,_e),[r,s,i,o]=l(this,Cr),[a,c,u,d]=C(this,qt,$p).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-r)/i,(t[3]-s)/o,NaN,NaN,NaN,NaN,(t[4]-r)/i,(t[5]-s)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(t[16]-r)/i,(t[17]-s)/o,NaN,NaN,NaN,NaN,(t[14]-r)/i,(t[15]-s)/o],0),this.newFreeDrawOutline(h,e,l(this,Cr),l(this,hf),l(this,uf),l(this,df))},d2=function(e,t){const r=l(this,$s);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},h2=function(e,t){const r=l(this,_e).subarray(4,6),s=l(this,_e).subarray(16,18),[i,o,a,c]=l(this,Cr),[u,d,h,f]=C(this,qt,$p).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/a,(r[1]-o)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(s[0]-i)/a,(s[1]-o)/c],t),t+=24},S(Ji,pv,8),S(Ji,V0,2),S(Ji,W0,l(Ji,pv)+l(Ji,V0));let T0=Ji;var pf,du,Po,mv,Tr,gv,Rt,G0,p2;class f2 extends J{constructor(t,r,s,i,o,a){super();S(this,G0);S(this,pf);S(this,du,new Float32Array(4));S(this,Po);S(this,mv);S(this,Tr);S(this,gv);S(this,Rt);x(this,Rt,t),x(this,Tr,r),x(this,pf,s),x(this,gv,i),x(this,Po,o),x(this,mv,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],C(this,G0,p2).call(this,a);const[c,u,d,h]=l(this,du);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-c)/d,t[f+1]=(t[f+1]-u)/h;for(let f=0,p=r.length;f<p;f+=2)r[f]=(r[f]-c)/d,r[f+1]=(r[f+1]-u)/h}toSVGPath(){const t=[`M${l(this,Rt)[4]} ${l(this,Rt)[5]}`];for(let r=6,s=l(this,Rt).length;r<s;r+=6){if(isNaN(l(this,Rt)[r])){t.push(`L${l(this,Rt)[r+4]} ${l(this,Rt)[r+5]}`);continue}t.push(`C${l(this,Rt)[r]} ${l(this,Rt)[r+1]} ${l(this,Rt)[r+2]} ${l(this,Rt)[r+3]} ${l(this,Rt)[r+4]} ${l(this,Rt)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,s,i],o){const a=s-t,c=i-r;let u,d;switch(o){case 0:u=J._rescale(l(this,Rt),t,i,a,-c),d=J._rescale(l(this,Tr),t,i,a,-c);break;case 90:u=J._rescaleAndSwap(l(this,Rt),t,r,a,c),d=J._rescaleAndSwap(l(this,Tr),t,r,a,c);break;case 180:u=J._rescale(l(this,Rt),s,r,-a,c),d=J._rescale(l(this,Tr),s,r,-a,c);break;case 270:u=J._rescaleAndSwap(l(this,Rt),s,i,-a,-c),d=J._rescaleAndSwap(l(this,Tr),s,i,-a,-c);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return l(this,du)}newOutliner(t,r,s,i,o,a=0){return new T0(t,r,s,i,o,a)}getNewOutline(t,r){const[s,i,o,a]=l(this,du),[c,u,d,h]=l(this,pf),f=o*d,p=a*h,v=s*d+c,m=i*h+u,w=this.newOutliner({x:l(this,Tr)[0]*f+v,y:l(this,Tr)[1]*p+m},l(this,pf),l(this,gv),t,l(this,mv),r??l(this,Po));for(let g=2;g<l(this,Tr).length;g+=2)w.add({x:l(this,Tr)[g]*f+v,y:l(this,Tr)[g+1]*p+m});return w.getOutlines()}}pf=new WeakMap,du=new WeakMap,Po=new WeakMap,mv=new WeakMap,Tr=new WeakMap,gv=new WeakMap,Rt=new WeakMap,G0=new WeakSet,p2=function(t){const r=l(this,Rt);let s=r[4],i=r[5];const o=[s,i,s,i];let a=s,c=i,u=s,d=i;const h=t?Math.max:Math.min,f=new Float32Array(4);for(let v=6,m=r.length;v<m;v+=6){const w=r[v+4],g=r[v+5];isNaN(r[v])?(te.pointBoundingBox(w,g,o),c>g?(a=w,c=g):c===g&&(a=h(a,w)),d<g?(u=w,d=g):d===g&&(u=h(u,w))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,te.bezierBoundingBox(s,i,...r.slice(v,v+6),f),te.rectBoundingBox(f[0],f[1],f[2],f[3],o),c>f[1]?(a=f[0],c=f[1]):c===f[1]&&(a=h(a,f[0])),d<f[3]?(u=f[2],d=f[3]):d===f[3]&&(u=h(u,f[2]))),s=w,i=g}const p=l(this,du);p[0]=o[0]-l(this,Po),p[1]=o[1]-l(this,Po),p[2]=o[2]-o[0]+2*l(this,Po),p[3]=o[3]-o[1]+2*l(this,Po),this.firstPoint=[a,c],this.lastPoint=[u,d]};var vv,yv,wv,rl,Us,Vn,m2,_w,g2,v2,RE;class PE{constructor(e,t=0,r=0,s=!0){S(this,Vn);S(this,vv);S(this,yv);S(this,wv);S(this,rl,[]);S(this,Us,[]);const i=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:w,y:g,width:b,height:y}of e){const E=Math.floor((w-t)/a)*a,T=Math.ceil((w+b+t)/a)*a,P=Math.floor((g-t)/a)*a,k=Math.ceil((g+y+t)/a)*a,R=[E,P,k,!0],N=[T,P,k,!1];l(this,rl).push(R,N),te.rectBoundingBox(E,P,T,k,i)}const c=i[2]-i[0]+2*r,u=i[3]-i[1]+2*r,d=i[0]-r,h=i[1]-r;let f=s?-1/0:1/0,p=1/0;const v=l(this,rl).at(s?-1:-2),m=[v[0],v[2]];for(const w of l(this,rl)){const[g,b,y,E]=w;!E&&s?b<p?(p=b,f=g):b===p&&(f=Math.max(f,g)):E&&!s&&(b<p?(p=b,f=g):b===p&&(f=Math.min(f,g))),w[0]=(g-d)/c,w[1]=(b-h)/u,w[2]=(y-h)/u}x(this,vv,new Float32Array([d,h,c,u])),x(this,yv,[f,p]),x(this,wv,m)}getOutlines(){l(this,rl).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of l(this,rl))t[3]?(e.push(...C(this,Vn,RE).call(this,t)),C(this,Vn,g2).call(this,t)):(C(this,Vn,v2).call(this,t),e.push(...C(this,Vn,RE).call(this,t)));return C(this,Vn,m2).call(this,e)}}vv=new WeakMap,yv=new WeakMap,wv=new WeakMap,rl=new WeakMap,Us=new WeakMap,Vn=new WeakSet,m2=function(e){const t=[],r=new Set;for(const o of e){const[a,c,u]=o;t.push([a,c,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),r.add(c),r.add(u)}const s=[];let i;for(;r.size>0;){const o=r.values().next().value;let[a,c,u,d,h]=o;r.delete(o);let f=a,p=c;for(i=[a,u],s.push(i);;){let v;if(r.has(d))v=d;else if(r.has(h))v=h;else break;r.delete(v),[a,c,u,d,h]=v,f!==a&&(i.push(f,p,a,p===c?c:u),f=a),p=p===c?u:c}i.push(f,p)}return new Vq(s,l(this,vv),l(this,yv),l(this,wv))},_w=function(e){const t=l(this,Us);let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,o=t[i][0];if(o===e)return i;o<e?r=i+1:s=i-1}return s+1},g2=function([,e,t]){const r=C(this,Vn,_w).call(this,e);l(this,Us).splice(r,0,[e,t])},v2=function([,e,t]){const r=C(this,Vn,_w).call(this,e);for(let s=r;s<l(this,Us).length;s++){const[i,o]=l(this,Us)[s];if(i!==e)break;if(i===e&&o===t){l(this,Us).splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,o]=l(this,Us)[s];if(i!==e)break;if(i===e&&o===t){l(this,Us).splice(s,1);return}}},RE=function(e){const[t,r,s]=e,i=[[t,r,s]],o=C(this,Vn,_w).call(this,s);for(let a=0;a<o;a++){const[c,u]=l(this,Us)[a];for(let d=0,h=i.length;d<h;d++){const[,f,p]=i[d];if(!(u<=f||p<=c)){if(f>=c){if(p>u)i[d][1]=u;else{if(h===1)return[];i.splice(d,1),d--,h--}continue}i[d][2]=c,p>u&&i.push([t,u,p])}}}return i};var bv,mf;class Vq extends J{constructor(t,r,s,i){super();S(this,bv);S(this,mf);x(this,mf,t),x(this,bv,r),this.firstPoint=s,this.lastPoint=i}toSVGPath(){const t=[];for(const r of l(this,mf)){let[s,i]=r;t.push(`M${s} ${i}`);for(let o=2;o<r.length;o+=2){const a=r[o],c=r[o+1];a===s?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${a}`),s=a)}t.push("Z")}return t.join(" ")}serialize([t,r,s,i],o){const a=[],c=s-t,u=i-r;for(const d of l(this,mf)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=t+d[f]*c,h[f+1]=i-d[f+1]*u;a.push(h)}return a}get box(){return l(this,bv)}get classNamesForOutlining(){return["highlightOutline"]}}bv=new WeakMap,mf=new WeakMap;class NE extends T0{newFreeDrawOutline(e,t,r,s,i,o){return new Wq(e,t,r,s,i,o)}}class Wq extends f2{newOutliner(e,t,r,s,i,o=0){return new NE(e,t,r,s,i,o)}}var gf,xv,Ro,hu,_v,nr,Sv,Ev,fu,kr,Pr,un,vf,yf,Pn,wf,as,Av,ve,IE,Sw,y2,w2,b2,OE,Kl,ds,yd,x2,Ew,Aw,_2,S2,E2,A2,C2;const Me=class Me extends tt{constructor(t){super({...t,name:"highlightEditor"});S(this,ve);S(this,gf,null);S(this,xv,0);S(this,Ro);S(this,hu,null);S(this,_v,null);S(this,nr,null);S(this,Sv,null);S(this,Ev,0);S(this,fu,null);S(this,kr,null);S(this,Pr,null);S(this,un,!1);S(this,vf,null);S(this,yf,null);S(this,Pn,null);S(this,wf,"");S(this,as);S(this,Av,"");this.color=t.color||Me._defaultColor,x(this,as,t.thickness||Me._defaultThickness),this.opacity=t.opacity||Me._defaultOpacity,x(this,Ro,t.boxes||null),x(this,Av,t.methodOfCreation||""),x(this,wf,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(x(this,un,!0),C(this,ve,Sw).call(this,t),C(this,ve,Kl).call(this)):l(this,Ro)&&(x(this,gf,t.anchorNode),x(this,xv,t.anchorOffset),x(this,Sv,t.focusNode),x(this,Ev,t.focusOffset),C(this,ve,IE).call(this),C(this,ve,Kl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Me.prototype;return ce(this,"_keyboardManager",new qv([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,un)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:l(this,as),methodOfCreation:l(this,Av)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var s;tt.initialize(t,r),Me._defaultColor||(Me._defaultColor=((s=r.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case Pe.HIGHLIGHT_COLOR:Me._defaultColor=r;break;case Pe.HIGHLIGHT_THICKNESS:Me._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return l(this,yf)}get commentButtonPosition(){return l(this,vf)}updateParams(t,r){switch(t){case Pe.HIGHLIGHT_COLOR:C(this,ve,y2).call(this,r);break;case Pe.HIGHLIGHT_THICKNESS:C(this,ve,w2).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Pe.HIGHLIGHT_COLOR,Me._defaultColor],[Pe.HIGHLIGHT_THICKNESS,Me._defaultThickness]]}get propertiesToUpdate(){return[[Pe.HIGHLIGHT_COLOR,this.color||Me._defaultColor],[Pe.HIGHLIGHT_THICKNESS,l(this,as)||Me._defaultThickness],[Pe.HIGHLIGHT_FREE,l(this,un)]]}onUpdatedColor(){var t,r;(t=this.parent)==null||t.drawLayer.updateProperties(l(this,Pr),{root:{fill:this.color,"fill-opacity":this.opacity}}),(r=l(this,_v))==null||r.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",x(this,_v,new E0({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,ve,Aw).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,C(this,ve,Aw).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){C(this,ve,OE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,ve,Kl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?C(this,ve,OE).call(this):t&&(C(this,ve,Kl).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var i,o,a;const{drawLayer:r}=this.parent;let s;l(this,un)?(t=(t-this.rotation+360)%360,s=C(i=Me,ds,yd).call(i,l(this,kr).box,t)):s=C(o=Me,ds,yd).call(o,[this.x,this.y,this.width,this.height],t),r.updateProperties(l(this,Pr),{bbox:s,root:{"data-main-rotation":t}}),r.updateProperties(l(this,Pn),{bbox:C(a=Me,ds,yd).call(a,l(this,nr).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();l(this,wf)&&(t.setAttribute("aria-label",l(this,wf)),t.setAttribute("role","mark")),l(this,un)?t.classList.add("free"):this.div.addEventListener("keydown",C(this,ve,x2).bind(this),{signal:this._uiManager._signal});const r=x(this,fu,document.createElement("div"));return t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=l(this,hu),this.setDims(),WD(this,l(this,fu),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,Pn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,Pn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:C(this,ve,Ew).call(this,!0);break;case 1:case 3:C(this,ve,Ew).call(this,!1);break}}select(){var t;super.select(),l(this,Pn)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,Pn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),l(this,Pn)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,Pn),{rootClass:{selected:!1}}),l(this,un)||C(this,ve,Ew).call(this,!1))}get _mustFixPosition(){return!l(this,un)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(l(this,Pr),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(l(this,Pn),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:s,x:i,y:o}){const{x:a,y:c,width:u,height:d}=s.getBoundingClientRect(),h=new AbortController,f=t.combinedSignal(h),p=v=>{h.abort(),C(this,ds,A2).call(this,t,v)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",kt,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",ys,{signal:f}),s.addEventListener("pointermove",C(this,ds,E2).bind(this,t),{signal:f}),this._freeHighlight=new NE({x:i,y:o},[a,c,u,d],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,s){var m,w,g,b;let i=null;if(t instanceof e2){const{data:{quadPoints:y,rect:E,rotation:T,id:P,color:k,opacity:R,popupRef:N,richText:I,contentsObj:M,creationDate:L,modificationDate:z},parent:{page:{pageNumber:F}}}=t;i=t={annotationType:fe.HIGHLIGHT,color:Array.from(k),opacity:R,quadPoints:y,boxes:null,pageIndex:F-1,rect:E.slice(0),rotation:T,annotationElementId:P,id:P,deleted:!1,popupRef:N,richText:I,comment:(M==null?void 0:M.str)||null,creationDate:L,modificationDate:z}}else if(t instanceof U1){const{data:{inkLists:y,rect:E,rotation:T,id:P,color:k,borderStyle:{rawWidth:R},popupRef:N,richText:I,contentsObj:M,creationDate:L,modificationDate:z},parent:{page:{pageNumber:F}}}=t;i=t={annotationType:fe.HIGHLIGHT,color:Array.from(k),thickness:R,inkLists:y,boxes:null,pageIndex:F-1,rect:E.slice(0),rotation:T,annotationElementId:P,id:P,deleted:!1,popupRef:N,richText:I,comment:(M==null?void 0:M.str)||null,creationDate:L,modificationDate:z}}const{color:o,quadPoints:a,inkLists:c,opacity:u}=t,d=await super.deserialize(t,r,s);d.color=te.makeHexColor(...o),d.opacity=u||1,c&&x(d,as,t.thickness),d._initialData=i,t.comment&&d.setCommentData(t);const[h,f]=d.pageDimensions,[p,v]=d.pageTranslation;if(a){const y=x(d,Ro,[]);for(let E=0;E<a.length;E+=8)y.push({x:(a[E]-p)/h,y:1-(a[E+1]-v)/f,width:(a[E+2]-a[E])/h,height:(a[E+1]-a[E+5])/f});C(m=d,ve,IE).call(m),C(w=d,ve,Kl).call(w),d.rotate(d.rotation)}else if(c){x(d,un,!0);const y=c[0],E={x:y[0]-p,y:f-(y[1]-v)},T=new NE(E,[0,0,h,f],1,l(d,as)/2,!0,.001);for(let R=0,N=y.length;R<N;R+=2)E.x=y[R]-p,E.y=f-(y[R+1]-v),T.add(E);const{id:P,clipPathId:k}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);C(g=d,ve,Sw).call(g,{highlightOutlines:T.getOutlines(),highlightId:P,clipPathId:k}),C(b=d,ve,Kl).call(b),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=tt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:r,opacity:this.opacity,thickness:l(this,as),quadPoints:C(this,ve,_2).call(this),outlines:C(this,ve,S2).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!C(this,ve,C2).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};gf=new WeakMap,xv=new WeakMap,Ro=new WeakMap,hu=new WeakMap,_v=new WeakMap,nr=new WeakMap,Sv=new WeakMap,Ev=new WeakMap,fu=new WeakMap,kr=new WeakMap,Pr=new WeakMap,un=new WeakMap,vf=new WeakMap,yf=new WeakMap,Pn=new WeakMap,wf=new WeakMap,as=new WeakMap,Av=new WeakMap,ve=new WeakSet,IE=function(){const t=new PE(l(this,Ro),.001);x(this,kr,t.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,kr).box;const r=new PE(l(this,Ro),.0025,.001,this._uiManager.direction==="ltr");x(this,nr,r.getOutlines());const{firstPoint:s}=l(this,kr);x(this,vf,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:i}=l(this,nr);x(this,yf,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Sw=function({highlightOutlines:t,highlightId:r,clipPathId:s}){var f,p;if(x(this,kr,t),x(this,nr,t.getNewOutline(l(this,as)/2+1.5,.0025)),r>=0)x(this,Pr,r),x(this,hu,s),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),x(this,Pn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,nr).box,path:{d:l(this,nr).toSVGPath()}},!0));else if(this.parent){const v=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,Pr),{bbox:C(f=Me,ds,yd).call(f,l(this,kr).box,(v-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,Pn),{bbox:C(p=Me,ds,yd).call(p,l(this,nr).box,v),path:{d:l(this,nr).toSVGPath()}})}const[o,a,c,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=u;break;case 90:{const[v,m]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*m/v,this.height=u*v/m;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=u;break;case 270:{const[v,m]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*m/v,this.height=u*v/m;break}}const{firstPoint:d}=t;x(this,vf,[(d[0]-o)/c,(d[1]-a)/u]);const{lastPoint:h}=l(this,nr);x(this,yf,[(h[0]-o)/c,(h[1]-a)/u])},y2=function(t){const r=(o,a)=>{this.color=o,this.opacity=a,this.onUpdatedColor()},s=this.color,i=this.opacity;this.addCommands({cmd:r.bind(this,t,Me._defaultOpacity),undo:r.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},w2=function(t){const r=l(this,as),s=i=>{x(this,as,i),C(this,ve,b2).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},b2=function(t){l(this,un)&&(C(this,ve,Sw).call(this,{highlightOutlines:l(this,kr).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},OE=function(){l(this,Pr)===null||!this.parent||(this.parent.drawLayer.remove(l(this,Pr)),x(this,Pr,null),this.parent.drawLayer.remove(l(this,Pn)),x(this,Pn,null))},Kl=function(t=this.parent){l(this,Pr)===null&&({id:wt(this,Pr)._,clipPathId:wt(this,hu)._}=t.drawLayer.draw({bbox:l(this,kr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:l(this,un)},path:{d:l(this,kr).toSVGPath()}},!1,!0),x(this,Pn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,un)},bbox:l(this,nr).box,path:{d:l(this,nr).toSVGPath()}},l(this,un))),l(this,fu)&&(l(this,fu).style.clipPath=l(this,hu)))},ds=new WeakSet,yd=function([t,r,s,i],o){switch(o){case 90:return[1-r-i,t,i,s];case 180:return[1-t-s,1-r-i,s,i];case 270:return[r,1-t-s,i,s]}return[t,r,s,i]},x2=function(t){Me._keyboardManager.exec(this,t)},Ew=function(t){if(!l(this,gf))return;const r=window.getSelection();t?r.setPosition(l(this,gf),l(this,xv)):r.setPosition(l(this,Sv),l(this,Ev))},Aw=function(){return l(this,un)?this.rotation:0},_2=function(){if(l(this,un))return null;const[t,r]=this.pageDimensions,[s,i]=this.pageTranslation,o=l(this,Ro),a=new Float32Array(o.length*8);let c=0;for(const{x:u,y:d,width:h,height:f}of o){const p=u*t+s,v=(1-d)*r+i;a[c]=a[c+4]=p,a[c+1]=a[c+3]=v,a[c+2]=a[c+6]=p+h*t,a[c+5]=a[c+7]=v-f*r,c+=8}return a},S2=function(t){return l(this,kr).serialize(t,C(this,ve,Aw).call(this))},E2=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},A2=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},C2=function(t){const{color:r}=this._initialData;return this.hasEditedComment||t.color.some((s,i)=>s!==r[i])},S(Me,ds),V(Me,"_defaultColor",null),V(Me,"_defaultOpacity",1),V(Me,"_defaultThickness",12),V(Me,"_type","highlight"),V(Me,"_editorType",fe.HIGHLIGHT),V(Me,"_freeHighlightId",-1),V(Me,"_freeHighlight",null),V(Me,"_freeHighlightClipId","");let k0=Me;var pu;class T2{constructor(){S(this,pu,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){l(this,pu)[e]=t}toSVGProperties(){const e=l(this,pu);return x(this,pu,Object.create(null)),{root:e}}reset(){x(this,pu,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Ye("Not implemented")}}pu=new WeakMap;var Rr,bf,Yt,mu,gu,Ie,ME,DE,LE,Up,k2,Cw,zp,wd;const ke=class ke extends tt{constructor(t){super(t);S(this,Ie);S(this,Rr,null);S(this,bf);V(this,"_colorPicker",null);V(this,"_drawId",null);x(this,bf,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(C(this,Ie,ME).call(this,t),C(this,Ie,Up).call(this))}static _mergeSVGProperties(t,r){const s=new Set(Object.keys(t));for(const[i,o]of Object.entries(r))s.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){Ye("Not implemented")}static get typesMap(){Ye("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,r),this._currentParent&&(l(ke,Yt).updateProperty(s,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)t.push([s,r[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[s,i]of this.constructor.typesMap)t.push([s,r[i]]);return t}_updateProperty(t,r,s){const i=this._drawingOptions,o=i[r],a=c=>{var d;i.updateProperty(r,c);const u=l(this,Rr).updateProperty(r,c);u&&C(this,Ie,zp).call(this,u),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,s),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ke._mergeSVGProperties(l(this,Rr).getPathResizingSVGProperties(C(this,Ie,Cw).call(this)),{bbox:C(this,Ie,wd).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ke._mergeSVGProperties(l(this,Rr).getPathResizedSVGProperties(C(this,Ie,Cw).call(this)),{bbox:C(this,Ie,wd).call(this)}))}_onTranslating(t,r){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:C(this,Ie,wd).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ke._mergeSVGProperties(l(this,Rr).getPathTranslatedSVGProperties(C(this,Ie,Cw).call(this),this.parentDimensions),{bbox:C(this,Ie,wd).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,bf)&&(x(this,bf,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){C(this,Ie,LE).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Ie,Up).call(this),C(this,Ie,zp).call(this,l(this,Rr).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),C(this,Ie,LE).call(this)):t&&(this._uiManager.addShouldRescale(this),C(this,Ie,Up).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ke._mergeSVGProperties({bbox:C(this,Ie,wd).call(this)},l(this,Rr).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,Ie,zp).call(this,l(this,Rr).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");return s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),s}static createDrawerInstance(t,r,s,i,o){Ye("Not implemented")}static startDrawing(t,r,s,i){var w;const{target:o,offsetX:a,offsetY:c,pointerId:u,pointerType:d}=i;if(Sn.isInitializedAndDifferentPointerType(d))return;const{viewport:{rotation:h}}=t,{width:f,height:p}=o.getBoundingClientRect(),v=x(ke,mu,new AbortController),m=t.combinedSignal(v);if(Sn.setPointer(d,u),window.addEventListener("pointerup",g=>{Sn.isSamePointerIdOrRemove(g.pointerId)&&this._endDraw(g)},{signal:m}),window.addEventListener("pointercancel",g=>{Sn.isSamePointerIdOrRemove(g.pointerId)&&this._currentParent.endDrawingSession()},{signal:m}),window.addEventListener("pointerdown",g=>{Sn.isSamePointerType(g.pointerType)&&(Sn.initializeAndAddPointerId(g.pointerId),l(ke,Yt).isCancellable()&&(l(ke,Yt).removeLastElement(),l(ke,Yt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",ys,{signal:m}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),o.addEventListener("touchmove",g=>{Sn.isSameTimeStamp(g.timeStamp)&&kt(g)},{signal:m}),t.toggleDrawing(),(w=r._editorUndoBar)==null||w.hide(),l(ke,Yt)){t.drawLayer.updateProperties(this._currentDrawId,l(ke,Yt).startNew(a,c,f,p,h));return}r.updateUIForDefaultProperties(this),x(ke,Yt,this.createDrawerInstance(a,c,f,p,h)),x(ke,gu,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(l(ke,gu).toSVGProperties(),l(ke,Yt).defaultSVGProperties),!0,!1)}static _drawMove(t){if(Sn.isSameTimeStamp(t.timeStamp),!l(ke,Yt))return;const{offsetX:r,offsetY:s,pointerId:i}=t;if(Sn.isSamePointerId(i)){if(Sn.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(ke,Yt).add(r,s)),Sn.setTimeStamp(t.timeStamp),kt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,x(ke,Yt,null),x(ke,gu,null),Sn.clearPointerType(),Sn.clearTimeStamp()),l(ke,mu)&&(l(ke,mu).abort(),x(ke,mu,null),Sn.clearPointerIds())}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,l(ke,Yt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=l(ke,Yt),i=this._currentDrawId,o=s.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(i,s.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:Pe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(Pe.DRAW_STEP),!l(ke,Yt).isEmpty()){const{pageDimensions:[s,i],scale:o}=r,a=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(ke,Yt).getOutlines(s*o,i*o,o,this._INNER_MARGIN),drawingOptions:l(ke,gu),mustBeCommitted:!t});return this._cleanup(!0),a}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,s,i,o,a){Ye("Not implemented")}static async deserialize(t,r,s){var h,f;const{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:c}}=r.viewport,u=this.deserializeDraw(a,c,i,o,this._INNER_MARGIN,t),d=await super.deserialize(t,r,s);return d.createDrawingOptions(t),C(h=d,Ie,ME).call(h,{drawOutlines:u}),C(f=d,Ie,Up).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[r,s]=this.pageTranslation,[i,o]=this.pageDimensions;return l(this,Rr).serialize([r,s,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Rr=new WeakMap,bf=new WeakMap,Yt=new WeakMap,mu=new WeakMap,gu=new WeakMap,Ie=new WeakSet,ME=function({drawOutlines:t,drawId:r,drawingOptions:s}){x(this,Rr,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=C(this,Ie,DE).call(this,t,this.parent),C(this,Ie,zp).call(this,t.box)},DE=function(t,r){const{id:s}=r.drawLayer.draw(ke._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},LE=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Up=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,Ie,DE).call(this,l(this,Rr),t)}},k2=function([t,r,s,i]){const{parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[r,1-t,s*(a/o),i*(o/a)];case 180:return[1-t,1-r,s,i];case 270:return[1-r,t,s*(a/o),i*(o/a)];default:return[t,r,s,i]}},Cw=function(){const{x:t,y:r,width:s,height:i,parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[1-r,t,s*(o/a),i*(a/o)];case 180:return[1-t,1-r,s,i];case 270:return[r,1-t,s*(o/a),i*(a/o)];default:return[t,r,s,i]}},zp=function(t){[this.x,this.y,this.width,this.height]=C(this,Ie,k2).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},wd=function(){const{x:t,y:r,width:s,height:i,rotation:o,parentRotation:a,parentDimensions:[c,u]}=this;switch((o*4+a)/90){case 1:return[1-r-i,t,i,s];case 2:return[1-t-s,1-r-i,s,i];case 3:return[r,1-t-s,i,s];case 4:return[t,r-s*(c/u),i*(u/c),s*(c/u)];case 5:return[1-r,t,s*(c/u),i*(u/c)];case 6:return[1-t-i*(u/c),1-r,i*(u/c),s*(c/u)];case 7:return[r-s*(c/u),1-t-i*(u/c),s*(c/u),i*(u/c)];case 8:return[t-s,r-i,s,i];case 9:return[1-r,t-s,i,s];case 10:return[1-t,1-r,s,i];case 11:return[r-i,1-t,i,s];case 12:return[t-i*(u/c),r,i*(u/c),s*(c/u)];case 13:return[1-r-s*(c/u),t-i*(u/c),s*(c/u),i*(u/c)];case 14:return[1-t,1-r-s*(c/u),i*(u/c),s*(c/u)];case 15:return[r,1-t,s*(c/u),i*(u/c)];default:return[t,r,s,i]}},V(ke,"_currentDrawId",-1),V(ke,"_currentParent",null),S(ke,Yt,null),S(ke,mu,null),S(ke,gu,null),V(ke,"_INNER_MARGIN",3);let P0=ke;var Ci,Qt,Jt,vu,xf,Dn,dn,ls,yu,wu,bu,_f,Tw;class Gq{constructor(e,t,r,s,i,o){S(this,_f);S(this,Ci,new Float64Array(6));S(this,Qt);S(this,Jt);S(this,vu);S(this,xf);S(this,Dn);S(this,dn,"");S(this,ls,0);S(this,yu,new Xv);S(this,wu);S(this,bu);x(this,wu,r),x(this,bu,s),x(this,vu,i),x(this,xf,o),[e,t]=C(this,_f,Tw).call(this,e,t);const a=x(this,Qt,[NaN,NaN,NaN,NaN,e,t]);x(this,Dn,[e,t]),x(this,Jt,[{line:a,points:l(this,Dn)}]),l(this,Ci).set(a,0)}updateProperty(e,t){e==="stroke-width"&&x(this,xf,t)}isEmpty(){return!l(this,Jt)||l(this,Jt).length===0}isCancellable(){return l(this,Dn).length<=10}add(e,t){[e,t]=C(this,_f,Tw).call(this,e,t);const[r,s,i,o]=l(this,Ci).subarray(2,6),a=e-i,c=t-o;return Math.hypot(l(this,wu)*a,l(this,bu)*c)<=2?null:(l(this,Dn).push(e,t),isNaN(r)?(l(this,Ci).set([i,o,e,t],2),l(this,Qt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(l(this,Ci)[0])&&l(this,Qt).splice(6,6),l(this,Ci).set([r,s,i,o,e,t],0),l(this,Qt).push(...J.createBezierPoints(r,s,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(l(this,Dn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,s,i){x(this,wu,r),x(this,bu,s),x(this,vu,i),[e,t]=C(this,_f,Tw).call(this,e,t);const o=x(this,Qt,[NaN,NaN,NaN,NaN,e,t]);x(this,Dn,[e,t]);const a=l(this,Jt).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,Jt).push({line:o,points:l(this,Dn)}),l(this,Ci).set(o,0),x(this,ls,0),this.toSVGPath(),null}getLastElement(){return l(this,Jt).at(-1)}setLastElement(e){return l(this,Jt)?(l(this,Jt).push(e),x(this,Qt,e.line),x(this,Dn,e.points),x(this,ls,0),{path:{d:this.toSVGPath()}}):l(this,yu).setLastElement(e)}removeLastElement(){if(!l(this,Jt))return l(this,yu).removeLastElement();l(this,Jt).pop(),x(this,dn,"");for(let e=0,t=l(this,Jt).length;e<t;e++){const{line:r,points:s}=l(this,Jt)[e];x(this,Qt,r),x(this,Dn,s),x(this,ls,0),this.toSVGPath()}return{path:{d:l(this,dn)}}}toSVGPath(){const e=J.svgRound(l(this,Qt)[4]),t=J.svgRound(l(this,Qt)[5]);if(l(this,Dn).length===2)return x(this,dn,`${l(this,dn)} M ${e} ${t} Z`),l(this,dn);if(l(this,Dn).length<=6){const s=l(this,dn).lastIndexOf("M");x(this,dn,`${l(this,dn).slice(0,s)} M ${e} ${t}`),x(this,ls,6)}if(l(this,Dn).length===4){const s=J.svgRound(l(this,Qt)[10]),i=J.svgRound(l(this,Qt)[11]);return x(this,dn,`${l(this,dn)} L ${s} ${i}`),x(this,ls,12),l(this,dn)}const r=[];l(this,ls)===0&&(r.push(`M ${e} ${t}`),x(this,ls,6));for(let s=l(this,ls),i=l(this,Qt).length;s<i;s+=6){const[o,a,c,u,d,h]=l(this,Qt).slice(s,s+6).map(J.svgRound);r.push(`C${o} ${a} ${c} ${u} ${d} ${h}`)}return x(this,dn,l(this,dn)+r.join(" ")),x(this,ls,l(this,Qt).length),l(this,dn)}getOutlines(e,t,r,s){const i=l(this,Jt).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),l(this,yu).build(l(this,Jt),e,t,r,l(this,vu),l(this,xf),s),x(this,Ci,null),x(this,Qt,null),x(this,Jt,null),x(this,dn,null),l(this,yu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ci=new WeakMap,Qt=new WeakMap,Jt=new WeakMap,vu=new WeakMap,xf=new WeakMap,Dn=new WeakMap,dn=new WeakMap,ls=new WeakMap,yu=new WeakMap,wu=new WeakMap,bu=new WeakMap,_f=new WeakSet,Tw=function(e,t){return J._normalizePoint(e,t,l(this,wu),l(this,bu),l(this,vu))};var Ln,Cv,Tv,Nr,Ti,ki,Sf,Ef,xu,pn,Ki,P2,R2,N2;class Xv extends J{constructor(){super(...arguments);S(this,pn);S(this,Ln);S(this,Cv,0);S(this,Tv);S(this,Nr);S(this,Ti);S(this,ki);S(this,Sf);S(this,Ef);S(this,xu)}build(t,r,s,i,o,a,c){x(this,Ti,r),x(this,ki,s),x(this,Sf,i),x(this,Ef,o),x(this,xu,a),x(this,Tv,c??0),x(this,Nr,t),C(this,pn,R2).call(this)}get thickness(){return l(this,xu)}setLastElement(t){return l(this,Nr).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,Nr).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of l(this,Nr)){if(t.push(`M${J.svgRound(r[4])} ${J.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${J.svgRound(r[10])} ${J.svgRound(r[11])}`);continue}for(let s=6,i=r.length;s<i;s+=6){const[o,a,c,u,d,h]=r.subarray(s,s+6).map(J.svgRound);t.push(`C${o} ${a} ${c} ${u} ${d} ${h}`)}}return t.join("")}serialize([t,r,s,i],o){const a=[],c=[],[u,d,h,f]=C(this,pn,P2).call(this);let p,v,m,w,g,b,y,E,T;switch(l(this,Ef)){case 0:T=J._rescale,p=t,v=r+i,m=s,w=-i,g=t+u*s,b=r+(1-d-f)*i,y=t+(u+h)*s,E=r+(1-d)*i;break;case 90:T=J._rescaleAndSwap,p=t,v=r,m=s,w=i,g=t+d*s,b=r+u*i,y=t+(d+f)*s,E=r+(u+h)*i;break;case 180:T=J._rescale,p=t+s,v=r,m=-s,w=i,g=t+(1-u-h)*s,b=r+d*i,y=t+(1-u)*s,E=r+(d+f)*i;break;case 270:T=J._rescaleAndSwap,p=t+s,v=r+i,m=-s,w=-i,g=t+(1-d-f)*s,b=r+(1-u-h)*i,y=t+(1-d)*s,E=r+(1-u)*i;break}for(const{line:P,points:k}of l(this,Nr))a.push(T(P,p,v,m,w,o?new Array(P.length):null)),c.push(T(k,p,v,m,w,o?new Array(k.length):null));return{lines:a,points:c,rect:[g,b,y,E]}}static deserialize(t,r,s,i,o,{paths:{lines:a,points:c},rotation:u,thickness:d}){const h=[];let f,p,v,m,w;switch(u){case 0:w=J._rescale,f=-t/s,p=r/i+1,v=1/s,m=-1/i;break;case 90:w=J._rescaleAndSwap,f=-r/i,p=-t/s,v=1/i,m=1/s;break;case 180:w=J._rescale,f=t/s+1,p=-r/i,v=-1/s,m=1/i;break;case 270:w=J._rescaleAndSwap,f=r/i+1,p=t/s+1,v=-1/i,m=-1/s;break}if(!a){a=[];for(const b of c){const y=b.length;if(y===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(y===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const E=new Float32Array(3*(y-2));a.push(E);let[T,P,k,R]=b.subarray(0,4);E.set([NaN,NaN,NaN,NaN,T,P],0);for(let N=4;N<y;N+=2){const I=b[N],M=b[N+1];E.set(J.createBezierPoints(T,P,k,R,I,M),(N-2)*3),[T,P,k,R]=[k,R,I,M]}}}for(let b=0,y=a.length;b<y;b++)h.push({line:w(a[b].map(E=>E??NaN),f,p,v,m),points:w(c[b].map(E=>E??NaN),f,p,v,m)});const g=new this.prototype.constructor;return g.build(h,s,i,1,u,d,o),g}get box(){return l(this,Ln)}updateProperty(t,r){return t==="stroke-width"?C(this,pn,N2).call(this,r):null}updateParentDimensions([t,r],s){const[i,o]=C(this,pn,Ki).call(this);x(this,Ti,t),x(this,ki,r),x(this,Sf,s);const[a,c]=C(this,pn,Ki).call(this),u=a-i,d=c-o,h=l(this,Ln);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h}updateRotation(t){return x(this,Cv,t),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,Ln).map(J.svgRound).join(" ")}get defaultProperties(){const[t,r]=l(this,Ln);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=l(this,Ln);let s=0,i=0,o=0,a=0,c=0,u=0;switch(l(this,Cv)){case 90:i=r/t,o=-t/r,c=t;break;case 180:s=-1,a=-1,c=t,u=r;break;case 270:i=-r/t,o=t/r,u=r;break;default:return""}return`matrix(${s} ${i} ${o} ${a} ${J.svgRound(c)} ${J.svgRound(u)})`}getPathResizingSVGProperties([t,r,s,i]){const[o,a]=C(this,pn,Ki).call(this),[c,u,d,h]=l(this,Ln);if(Math.abs(d-o)<=J.PRECISION||Math.abs(h-a)<=J.PRECISION){const w=t+s/2-(c+d/2),g=r+i/2-(u+h/2);return{path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(r)}`,transform:`${this.rotationTransform} translate(${w} ${g})`}}}const f=(s-2*o)/(d-2*o),p=(i-2*a)/(h-2*a),v=d/s,m=h/i;return{path:{"transform-origin":`${J.svgRound(c)} ${J.svgRound(u)}`,transform:`${this.rotationTransform} scale(${v} ${m}) translate(${J.svgRound(o)} ${J.svgRound(a)}) scale(${f} ${p}) translate(${J.svgRound(-o)} ${J.svgRound(-a)})`}}}getPathResizedSVGProperties([t,r,s,i]){const[o,a]=C(this,pn,Ki).call(this),c=l(this,Ln),[u,d,h,f]=c;if(c[0]=t,c[1]=r,c[2]=s,c[3]=i,Math.abs(h-o)<=J.PRECISION||Math.abs(f-a)<=J.PRECISION){const g=t+s/2-(u+h/2),b=r+i/2-(d+f/2);for(const{line:y,points:E}of l(this,Nr))J._translate(y,g,b,y),J._translate(E,g,b,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(s-2*o)/(h-2*o),v=(i-2*a)/(f-2*a),m=-p*(u+o)+t+o,w=-v*(d+a)+r+a;if(p!==1||v!==1||m!==0||w!==0)for(const{line:g,points:b}of l(this,Nr))J._rescale(g,m,w,p,v,g),J._rescale(b,m,w,p,v,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],s){const[i,o]=s,a=l(this,Ln),c=t-a[0],u=r-a[1];if(l(this,Ti)===i&&l(this,ki)===o)for(const{line:d,points:h}of l(this,Nr))J._translate(d,c,u,d),J._translate(h,c,u,h);else{const d=l(this,Ti)/i,h=l(this,ki)/o;x(this,Ti,i),x(this,ki,o);for(const{line:f,points:p}of l(this,Nr))J._rescale(f,c,u,d,h,f),J._rescale(p,c,u,d,h,p);a[2]*=d,a[3]*=h}return a[0]=t,a[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${J.svgRound(t)} ${J.svgRound(r)}`}}}get defaultSVGProperties(){const t=l(this,Ln);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${J.svgRound(t[0])} ${J.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Ln=new WeakMap,Cv=new WeakMap,Tv=new WeakMap,Nr=new WeakMap,Ti=new WeakMap,ki=new WeakMap,Sf=new WeakMap,Ef=new WeakMap,xu=new WeakMap,pn=new WeakSet,Ki=function(t=l(this,xu)){const r=l(this,Tv)+t/2*l(this,Sf);return l(this,Ef)%180===0?[r/l(this,Ti),r/l(this,ki)]:[r/l(this,ki),r/l(this,Ti)]},P2=function(){const[t,r,s,i]=l(this,Ln),[o,a]=C(this,pn,Ki).call(this,0);return[t+o,r+a,s-2*o,i-2*a]},R2=function(){const t=x(this,Ln,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of l(this,Nr)){if(i.length<=12){for(let c=4,u=i.length;c<u;c+=6)te.pointBoundingBox(i[c],i[c+1],t);continue}let o=i[4],a=i[5];for(let c=6,u=i.length;c<u;c+=6){const[d,h,f,p,v,m]=i.subarray(c,c+6);te.bezierBoundingBox(o,a,d,h,f,p,v,m,t),o=v,a=m}}const[r,s]=C(this,pn,Ki).call(this);t[0]=Bn(t[0]-r,0,1),t[1]=Bn(t[1]-s,0,1),t[2]=Bn(t[2]+r,0,1),t[3]=Bn(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},N2=function(t){const[r,s]=C(this,pn,Ki).call(this);x(this,xu,t);const[i,o]=C(this,pn,Ki).call(this),[a,c]=[i-r,o-s],u=l(this,Ln);return u[0]-=a,u[1]-=c,u[2]+=2*a,u[3]+=2*c,u};class Bb extends T2{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:tt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Bb(this._viewParameters);return e.updateAll(this),e}}var q0,I2;const jd=class jd extends P0{constructor(t){super({...t,name:"inkEditor"});S(this,q0);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){tt.initialize(t,r),this._defaultDrawingOptions=new Bb(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return ce(this,"typesMap",new Map([[Pe.INK_THICKNESS,"stroke-width"],[Pe.INK_COLOR,"stroke"],[Pe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,s,i,o){return new Gq(t,r,s,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,s,i,o,a){return Xv.deserialize(t,r,s,i,o,a)}static async deserialize(t,r,s){let i=null;if(t instanceof U1){const{data:{inkLists:a,rect:c,rotation:u,id:d,color:h,opacity:f,borderStyle:{rawWidth:p},popupRef:v,richText:m,contentsObj:w,creationDate:g,modificationDate:b},parent:{page:{pageNumber:y}}}=t;i=t={annotationType:fe.INK,color:Array.from(h),thickness:p,opacity:f,paths:{points:a},boxes:null,pageIndex:y-1,rect:c.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:v,richText:m,comment:(w==null?void 0:w.str)||null,creationDate:g,modificationDate:b}}const o=await super.deserialize(t,r,s);return o._initialData=i,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new A0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Pe.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:s}=this;r.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:s}){this._drawingOptions=jd.getDefaultDrawingOptions({stroke:te.makeHexColor(...t),"stroke-width":r,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":a}}=this,c=Object.assign(super.serialize(t),{color:tt._colorManager.convert(i),opacity:o,thickness:a,paths:{lines:r,points:s}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!C(this,q0,I2).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:r,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:r,popup:this.comment}),null}};q0=new WeakSet,I2=function(t){const{color:r,thickness:s,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,c)=>a!==r[c])||t.thickness!==s||t.opacity!==i||t.pageIndex!==o},V(jd,"_type","ink"),V(jd,"_editorType",fe.INK),V(jd,"_defaultDrawingOptions",null);let FE=jd;class jE extends Xv{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Dy=8,mp=3;var _u,De,BE,zs,O2,M2,$E,kw,D2,L2,F2,UE,zE,j2;class Lo{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:s},i,o,a,c){let u=new OffscreenCanvas(1,1),d=u.getContext("2d",{alpha:!1});const h=200,f=d.font=`${r} ${s} ${h}px ${t}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:v,actualBoundingBoxAscent:m,actualBoundingBoxDescent:w,fontBoundingBoxAscent:g,fontBoundingBoxDescent:b,width:y}=d.measureText(e),E=1.5,T=Math.ceil(Math.max(Math.abs(p)+Math.abs(v)||0,y)*E),P=Math.ceil(Math.max(Math.abs(m)+Math.abs(w)||h,Math.abs(g)+Math.abs(b)||h)*E);u=new OffscreenCanvas(T,P),d=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,T,P),d.fillStyle="black",d.fillText(e,T*(E-1)/2,P*(3-E)/2);const k=C(this,De,UE).call(this,d.getImageData(0,0,T,P).data),R=C(this,De,F2).call(this,k),N=C(this,De,zE).call(this,R),I=C(this,De,$E).call(this,k,T,P,N);return this.processDrawnLines({lines:{curves:I,width:T,height:P},pageWidth:i,pageHeight:o,rotation:a,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,r,s,i){const[o,a,c]=C(this,De,j2).call(this,e),[u,d]=C(this,De,L2).call(this,o,a,c,Math.hypot(a,c)*l(this,_u).sigmaSFactor,l(this,_u).sigmaR,l(this,_u).kernelSize),h=C(this,De,zE).call(this,d),f=C(this,De,$E).call(this,u,a,c,h);return this.processDrawnLines({lines:{curves:f,width:a,height:c},pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:o,areContours:a}){s%180!==0&&([t,r]=[r,t]);const{curves:c,width:u,height:d}=e,h=e.thickness??0,f=[],p=Math.min(t/u,r/d),v=p/t,m=p/r,w=[];for(const{points:b}of c){const y=o?C(this,De,D2).call(this,b):b;if(!y)continue;w.push(y);const E=y.length,T=new Float32Array(E),P=new Float32Array(3*(E===2?2:E-2));if(f.push({line:P,points:T}),E===2){T[0]=y[0]*v,T[1]=y[1]*m,P.set([NaN,NaN,NaN,NaN,T[0],T[1]],0);continue}let[k,R,N,I]=y;k*=v,R*=m,N*=v,I*=m,T.set([k,R,N,I],0),P.set([NaN,NaN,NaN,NaN,k,R],0);for(let M=4;M<E;M+=2){const L=T[M]=y[M]*v,z=T[M+1]=y[M+1]*m;P.set(J.createBezierPoints(k,R,N,I,L,z),(M-2)*3),[k,R,N,I]=[N,I,L,z]}}if(f.length===0)return null;const g=a?new jE:new Xv;return g.build(f,t,r,1,s,a?0:h,i),{outline:g,newCurves:w,areContours:a,thickness:h,width:u,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:s,height:i}){let o=1/0,a=-1/0,c=0;for(const y of e){c+=y.length;for(let E=2,T=y.length;E<T;E++){const P=y[E]-y[E-2];o=Math.min(o,P),a=Math.max(a,P)}}let u;o>=-128&&a<=127?u=Int8Array:o>=-32768&&a<=32767?u=Int16Array:u=Int32Array;const d=e.length,h=Dy+mp*d,f=new Uint32Array(h);let p=0;f[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=s,f[p++]=i,f[p++]=t?0:1,f[p++]=Math.max(0,Math.floor(r??0)),f[p++]=d,f[p++]=u.BYTES_PER_ELEMENT;for(const y of e)f[p++]=y.length-2,f[p++]=y[0],f[p++]=y[1];const v=new CompressionStream("deflate-raw"),m=v.writable.getWriter();await m.ready,m.write(f);const w=u.prototype.constructor;for(const y of e){const E=new w(y.length-2);for(let T=2,P=y.length;T<P;T++)E[T-2]=y[T]-y[T-2];m.write(E)}m.close();const g=await new Response(v.readable).arrayBuffer(),b=new Uint8Array(g);return LD(b)}static async decompressSignature(e){try{const t=lG(e),{readable:r,writable:s}=new DecompressionStream("deflate-raw"),i=s.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,a=0;for await(const y of r)o||(o=new Uint8Array(new Uint32Array(y.buffer,0,4)[0])),o.set(y,a),a+=y.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const d=c[2],h=c[3],f=c[4]===0,p=c[5],v=c[6],m=c[7],w=[],g=(Dy+mp*v)*Uint32Array.BYTES_PER_ELEMENT;let b;switch(m){case Int8Array.BYTES_PER_ELEMENT:b=new Int8Array(o.buffer,g);break;case Int16Array.BYTES_PER_ELEMENT:b=new Int16Array(o.buffer,g);break;case Int32Array.BYTES_PER_ELEMENT:b=new Int32Array(o.buffer,g);break}a=0;for(let y=0;y<v;y++){const E=c[mp*y+Dy],T=new Float32Array(E+2);w.push(T);for(let P=0;P<mp-1;P++)T[P]=c[mp*y+Dy+P+1];for(let P=0;P<E;P++)T[P+2]=T[P]+b[a++]}return{areContours:f,thickness:p,outlines:w,width:d,height:h}}catch(t){return le(`decompressSignature: ${t}`),null}}}_u=new WeakMap,De=new WeakSet,BE=function(e,t,r,s){return r-=e,s-=t,r===0?s>0?0:4:r===1?s+6:2-s},zs=new WeakMap,O2=function(e,t,r,s,i,o,a){const c=C(this,De,BE).call(this,r,s,i,o);for(let u=0;u<8;u++){const d=(-u+c-a+16)%8,h=l(this,zs)[2*d],f=l(this,zs)[2*d+1];if(e[(r+h)*t+(s+f)]!==0)return d}return-1},M2=function(e,t,r,s,i,o,a){const c=C(this,De,BE).call(this,r,s,i,o);for(let u=0;u<8;u++){const d=(u+c+a+16)%8,h=l(this,zs)[2*d],f=l(this,zs)[2*d+1];if(e[(r+h)*t+(s+f)]!==0)return d}return-1},$E=function(e,t,r,s){const i=e.length,o=new Int32Array(i);for(let d=0;d<i;d++)o[d]=e[d]<=s?1:0;for(let d=1;d<r-1;d++)o[d*t]=o[d*t+t-1]=0;for(let d=0;d<t;d++)o[d]=o[t*r-1-d]=0;let a=1,c;const u=[];for(let d=1;d<r-1;d++){c=1;for(let h=1;h<t-1;h++){const f=d*t+h,p=o[f];if(p===0)continue;let v=d,m=h;if(p===1&&o[f-1]===0)a+=1,m-=1;else if(p>=1&&o[f+1]===0)a+=1,m+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const w=[h,d],g=m===h+1,b={isHole:g,points:w,id:a,parent:0};u.push(b);let y;for(const M of u)if(M.id===c){y=M;break}y?y.isHole?b.parent=g?y.parent:c:b.parent=g?c:y.parent:b.parent=g?c:0;const E=C(this,De,O2).call(this,o,t,d,h,v,m,0);if(E===-1){o[f]=-a,o[f]!==1&&(c=Math.abs(o[f]));continue}let T=l(this,zs)[2*E],P=l(this,zs)[2*E+1];const k=d+T,R=h+P;v=k,m=R;let N=d,I=h;for(;;){const M=C(this,De,M2).call(this,o,t,N,I,v,m,1);T=l(this,zs)[2*M],P=l(this,zs)[2*M+1];const L=N+T,z=I+P;w.push(z,L);const F=N*t+I;if(o[F+1]===0?o[F]=-a:o[F]===1&&(o[F]=a),L===d&&z===h&&N===k&&I===R){o[f]!==1&&(c=Math.abs(o[f]));break}else v=N,m=I,N=L,I=z}}}return u},kw=function(e,t,r,s){if(r-t<=4){for(let k=t;k<r-2;k+=2)s.push(e[k],e[k+1]);return}const i=e[t],o=e[t+1],a=e[r-4]-i,c=e[r-3]-o,u=Math.hypot(a,c),d=a/u,h=c/u,f=d*o-h*i,p=c/a,v=1/u,m=Math.atan(p),w=Math.cos(m),g=Math.sin(m),b=v*(Math.abs(w)+Math.abs(g)),y=v*(1-b+b**2),E=Math.max(Math.atan(Math.abs(g+w)*y),Math.atan(Math.abs(g-w)*y));let T=0,P=t;for(let k=t+2;k<r-2;k+=2){const R=Math.abs(f-d*e[k+1]+h*e[k]);R>T&&(P=k,T=R)}T>(u*E)**2?(C(this,De,kw).call(this,e,t,P+2,s),C(this,De,kw).call(this,e,P,r,s)):s.push(i,o)},D2=function(e){const t=[],r=e.length;return C(this,De,kw).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},L2=function(e,t,r,s,i,o){const a=new Float32Array(o**2),c=-2*s**2,u=o>>1;for(let m=0;m<o;m++){const w=(m-u)**2;for(let g=0;g<o;g++)a[m*o+g]=Math.exp((w+(g-u)**2)/c)}const d=new Float32Array(256),h=-2*i**2;for(let m=0;m<256;m++)d[m]=Math.exp(m**2/h);const f=e.length,p=new Uint8Array(f),v=new Uint32Array(256);for(let m=0;m<r;m++)for(let w=0;w<t;w++){const g=m*t+w,b=e[g];let y=0,E=0;for(let P=0;P<o;P++){const k=m+P-u;if(!(k<0||k>=r))for(let R=0;R<o;R++){const N=w+R-u;if(N<0||N>=t)continue;const I=e[k*t+N],M=a[P*o+R]*d[Math.abs(I-b)];y+=I*M,E+=M}}const T=p[g]=Math.round(y/E);v[T]++}return[p,v]},F2=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},UE=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let s=-1/0,i=1/0;for(let a=0,c=r.length;a<c;a++){const u=r[a]=e[a<<2];s=Math.max(s,u),i=Math.min(i,u)}const o=255/(s-i);for(let a=0,c=r.length;a<c;a++)r[a]=(r[a]-i)*o;return r},zE=function(e){let t,r=-1/0,s=-1/0;const i=e.findIndex(c=>c!==0);let o=i,a=i;for(t=i;t<256;t++){const c=e[t];c>r&&(t-o>s&&(s=t-o,a=t-1),r=c,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},j2=function(e){const t=e,{width:r,height:s}=e,{maxDim:i}=l(this,_u);let o=r,a=s;if(r>i||s>i){let f=r,p=s,v=Math.log2(Math.max(r,s)/i);const m=Math.floor(v);v=v===m?m-1:m;for(let g=0;g<v;g++){o=Math.ceil(f/2),a=Math.ceil(p/2);const b=new OffscreenCanvas(o,a);b.getContext("2d").drawImage(e,0,0,f,p,0,0,o,a),f=o,p=a,e!==t&&e.close(),e=b.transferToImageBitmap()}const w=Math.min(i/o,i/a);o=Math.round(o*w),a=Math.round(a*w)}const u=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,a),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,a);const d=u.getImageData(0,0,o,a).data;return[C(this,De,UE).call(this,d),o,a]},S(Lo,De),S(Lo,_u,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),S(Lo,zs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class z1 extends T2{constructor(){super(),super.updateProperties({fill:tt._defaultLineColor,"stroke-width":0})}clone(){const e=new z1;return e.updateAll(this),e}}class H1 extends Bb{constructor(e){super(e),super.updateProperties({stroke:tt._defaultLineColor,"stroke-width":1})}clone(){const e=new H1(this._viewParameters);return e.updateAll(this),e}}var sl,Pi,il,Su;const pr=class pr extends P0{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});S(this,sl,!1);S(this,Pi,null);S(this,il,null);S(this,Su,null);this._willKeepAspectRatio=!0,x(this,il,t.signatureData||null),x(this,Pi,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){tt.initialize(t,r),this._defaultDrawingOptions=new z1,this._defaultDrawnSignatureOptions=new H1(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return ce(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,Pi)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(l(this,il)){const{lines:i,mustSmooth:o,areContours:a,description:c,uuid:u,heightInPage:d}=l(this,il),{rawDims:{pageWidth:h,pageHeight:f},rotation:p}=this.parent.viewport,v=Lo.processDrawnLines({lines:i,pageWidth:h,pageHeight:f,rotation:p,innerMargin:pr._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(v,d,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:l(this,Pi)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){x(this,Su,t),this.addEditToolbar()}getUuid(){return l(this,Su)}get description(){return l(this,Pi)}set description(t){x(this,Pi,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:s,width:i,height:o}=l(this,il),a=Math.max(i,o),c=Lo.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:s,width:i,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,s,i){const{x:o,y:a}=this,{outline:c}=x(this,il,t);x(this,sl,c instanceof jE),this.description=s;let u;l(this,sl)?u=pr.getDefaultDrawingOptions():(u=pr._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,d]=this.pageDimensions;let h=r/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return Lo.process(t,r,s,i,pr._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:s,pageHeight:i},rotation:o}=this.parent.viewport;return Lo.extractContoursFromText(t,r,s,i,o,pr._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return Lo.processDrawnLines({lines:t,pageWidth:r,pageHeight:s,rotation:i,innerMargin:pr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=pr.getDefaultDrawingOptions():(this._drawingOptions=pr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:l(this,sl),color:[0,0,0],thickness:l(this,sl)?0:i});return this.addComment(o),t?(o.paths={lines:r,points:s},o.uuid=l(this,Su),o.isCopy=!0):o.lines=r,l(this,Pi)&&(o.accessibilityData={type:"Figure",alt:l(this,Pi)}),o}static deserializeDraw(t,r,s,i,o,a){return a.areContours?jE.deserialize(t,r,s,i,o,a):Xv.deserialize(t,r,s,i,o,a)}static async deserialize(t,r,s){var o;const i=await super.deserialize(t,r,s);return x(i,sl,t.areContours),i.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",x(i,Su,t.uuid),i}};sl=new WeakMap,Pi=new WeakMap,il=new WeakMap,Su=new WeakMap,V(pr,"_type","signature"),V(pr,"_editorType",fe.SIGNATURE),V(pr,"_defaultDrawingOptions",null);let HE=pr;var ut,Zt,ol,No,al,Af,Io,Eu,Ri,Ir,Cf,Oe,Hp,Vp,Pw,Rw,Nw,WE,Iw,B2;class VE extends tt{constructor(t){super({...t,name:"stampEditor"});S(this,Oe);S(this,ut,null);S(this,Zt,null);S(this,ol,null);S(this,No,null);S(this,al,null);S(this,Af,"");S(this,Io,null);S(this,Eu,!1);S(this,Ri,null);S(this,Ir,!1);S(this,Cf,!1);x(this,No,t.bitmapUrl),x(this,al,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){tt.initialize(t,r)}static isHandlingMimeForPasting(t){return PS.includes(t)}static paste(t,r){r.pasteEditor({mode:fe.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:i,width:o,height:a,channels:i.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),r&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;l(this,Zt)&&(x(this,ut,null),this._uiManager.imageManager.deleteId(l(this,Zt)),(t=l(this,Io))==null||t.remove(),x(this,Io,null),l(this,Ri)&&(clearTimeout(l(this,Ri)),x(this,Ri,null))),super.remove()}rebuild(){if(!this.parent){l(this,Zt)&&C(this,Oe,Pw).call(this);return}super.rebuild(),this.div!==null&&(l(this,Zt)&&l(this,Io)===null&&C(this,Oe,Pw).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(l(this,ol)||l(this,ut)||l(this,No)||l(this,al)||l(this,Zt)||l(this,Eu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,Eu)||(l(this,ut)?C(this,Oe,Rw).call(this):C(this,Oe,Pw).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(x(this,Zt,s),i&&x(this,ut,i),x(this,Eu,!1),C(this,Oe,Rw).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,Ri)!==null&&clearTimeout(l(this,Ri)),x(this,Ri,setTimeout(()=>{x(this,Ri,null),C(this,Oe,WE).call(this)},200))}copyCanvas(t,r,s=!1){t||(t=224);const{width:i,height:o}=l(this,ut),a=new Ui;let c=l(this,ut),u=i,d=o,h=null;if(r){if(i>r||o>r){const k=Math.min(r/i,r/o);u=Math.floor(i*k),d=Math.floor(o*k)}h=document.createElement("canvas");const p=h.width=Math.ceil(u*a.sx),v=h.height=Math.ceil(d*a.sy);l(this,Ir)||(c=C(this,Oe,Nw).call(this,p,v));const m=h.getContext("2d");m.filter=this._uiManager.hcmFilter;let w="white",g="#cfcfd8";this._uiManager.hcmFilter!=="none"?g="black":pG.isDarkMode&&(w="#8f8f9d",g="#42414d");const b=15,y=b*a.sx,E=b*a.sy,T=new OffscreenCanvas(y*2,E*2),P=T.getContext("2d");P.fillStyle=w,P.fillRect(0,0,y*2,E*2),P.fillStyle=g,P.fillRect(0,0,y,E),P.fillRect(y,E,y,E),m.fillStyle=m.createPattern(T,"repeat"),m.fillRect(0,0,p,v),m.drawImage(c,0,0,c.width,c.height,0,0,p,v)}let f=null;if(s){let p,v;if(a.symmetric&&c.width<t&&c.height<t)p=c.width,v=c.height;else if(c=l(this,ut),i>t||o>t){const g=Math.min(t/i,t/o);p=Math.floor(i*g),v=Math.floor(o*g),l(this,Ir)||(c=C(this,Oe,Nw).call(this,p,v))}const w=new OffscreenCanvas(p,v).getContext("2d",{willReadFrequently:!0});w.drawImage(c,0,0,c.width,c.height,0,0,p,v),f={width:p,height:v,data:w.getImageData(0,0,p,v).data}}return{canvas:h,width:u,height:d,imageData:f}}static async deserialize(t,r,s){var w;let i=null,o=!1;if(t instanceof t2){const{data:{rect:g,rotation:b,id:y,structParent:E,popupRef:T,richText:P,contentsObj:k,creationDate:R,modificationDate:N},container:I,parent:{page:{pageNumber:M}},canvas:L}=t;let z,F;L?(delete t.canvas,{id:z,bitmap:F}=s.imageManager.getFromCanvas(I.id,L),L.remove()):(o=!0,t._hasNoCanvas=!0);const B=((w=await r._structTree.getAriaAttributes(`${Od}${y}`))==null?void 0:w.get("aria-label"))||"";i=t={annotationType:fe.STAMP,bitmapId:z,bitmap:F,pageIndex:M-1,rect:g.slice(0),rotation:b,annotationElementId:y,id:y,deleted:!1,accessibilityData:{decorative:!1,altText:B},isSvg:!1,structParent:E,popupRef:T,richText:P,comment:(k==null?void 0:k.str)||null,creationDate:R,modificationDate:N}}const a=await super.deserialize(t,r,s),{rect:c,bitmap:u,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:p}=t;o?(s.addMissingCanvas(t.id,a),x(a,Eu,!0)):h&&s.imageManager.isValidId(h)?(x(a,Zt,h),u&&x(a,ut,u)):x(a,No,d),x(a,Ir,f);const[v,m]=a.pageDimensions;return a.width=(c[2]-c[0])/v,a.height=(c[3]-c[1])/m,p&&(a.altTextData=p),a._initialData=i,t.comment&&a.setCommentData(t),x(a,Cf,!!i),a}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:l(this,Zt),isSvg:l(this,Ir)});if(this.addComment(s),t)return s.bitmapUrl=C(this,Oe,Iw).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=C(this,Oe,B2).call(this,s);return c.isSame?null:(c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(r===null)return s;r.stamps||(r.stamps=new Map);const a=l(this,Ir)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!r.stamps.has(l(this,Zt)))r.stamps.set(l(this,Zt),{area:a,serialized:s}),s.bitmap=C(this,Oe,Iw).call(this,!1);else if(l(this,Ir)){const c=r.stamps.get(l(this,Zt));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=C(this,Oe,Iw).call(this,!1))}return s}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}ut=new WeakMap,Zt=new WeakMap,ol=new WeakMap,No=new WeakMap,al=new WeakMap,Af=new WeakMap,Io=new WeakMap,Eu=new WeakMap,Ri=new WeakMap,Ir=new WeakMap,Cf=new WeakMap,Oe=new WeakSet,Hp=function(t,r=!1){if(!t){this.remove();return}x(this,ut,t.bitmap),r||(x(this,Zt,t.id),x(this,Ir,t.isSvg)),t.file&&x(this,Af,t.file.name),C(this,Oe,Rw).call(this)},Vp=function(){if(x(this,ol,null),this._uiManager.enableWaiting(!1),!!l(this,Io)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ut)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ut)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Pw=function(){if(l(this,Zt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,Zt)).then(s=>C(this,Oe,Hp).call(this,s,!0)).finally(()=>C(this,Oe,Vp).call(this));return}if(l(this,No)){const s=l(this,No);x(this,No,null),this._uiManager.enableWaiting(!0),x(this,ol,this._uiManager.imageManager.getFromUrl(s).then(i=>C(this,Oe,Hp).call(this,i)).finally(()=>C(this,Oe,Vp).call(this)));return}if(l(this,al)){const s=l(this,al);x(this,al,null),this._uiManager.enableWaiting(!0),x(this,ol,this._uiManager.imageManager.getFromFile(s).then(i=>C(this,Oe,Hp).call(this,i)).finally(()=>C(this,Oe,Vp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=PS.join(",");const r=this._uiManager._signal;x(this,ol,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,Oe,Hp).call(this,i)}s()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:r})}).finally(()=>C(this,Oe,Vp).call(this))),t.click()},Rw=function(){var u;const{div:t}=this;let{width:r,height:s}=l(this,ut);const[i,o]=this.pageDimensions,a=.75;if(this.width)r=this.width*i,s=this.height*o;else if(r>a*i||s>a*o){const d=Math.min(a*i/r,a*o/s);r*=d,s*=d}this._uiManager.enableWaiting(!1);const c=x(this,Io,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=r/i,this.height=s/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),C(this,Oe,WE).call(this),l(this,Cf)||(this.parent.addUndoableEditor(this),x(this,Cf,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,Af)&&this.div.setAttribute("aria-description",l(this,Af)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Nw=function(t,r){const{width:s,height:i}=l(this,ut);let o=s,a=i,c=l(this,ut);for(;o>2*t||a>2*r;){const u=o,d=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*r&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(o,a);h.getContext("2d").drawImage(c,0,0,u,d,0,0,o,a),c=h.transferToImageBitmap()}return c},WE=function(){const[t,r]=this.parentDimensions,{width:s,height:i}=this,o=new Ui,a=Math.ceil(s*t*o.sx),c=Math.ceil(i*r*o.sy),u=l(this,Io);if(!u||u.width===a&&u.height===c)return;u.width=a,u.height=c;const d=l(this,Ir)?l(this,ut):C(this,Oe,Nw).call(this,a,c),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,a,c)},Iw=function(t){if(t){if(l(this,Ir)){const i=this._uiManager.imageManager.getSvgUrl(l(this,Zt));if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=l(this,ut),r.getContext("2d").drawImage(l(this,ut),0,0),r.toDataURL()}if(l(this,Ir)){const[r,s]=this.pageDimensions,i=Math.round(this.width*r*Pl.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Pl.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(l(this,ut),0,0,l(this,ut).width,l(this,ut).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(l(this,ut))},B2=function(t){var a;const{pageIndex:r,accessibilityData:{altText:s}}=this._initialData,i=t.pageIndex===r,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},V(VE,"_type","stamp"),V(VE,"_editorType",fe.STAMP);var Au,Tf,ll,cl,Oo,rr,ul,kf,Pf,Hs,Mo,en,Do,dl,Rf,ne,hl,Xe,qE,$2,si,KE,XE,Ow;const Ts=class Ts{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:s,accessibilityManager:i,annotationLayer:o,drawLayer:a,textLayer:c,viewport:u,l10n:d}){S(this,Xe);S(this,Au);S(this,Tf,!1);S(this,ll,null);S(this,cl,null);S(this,Oo,null);S(this,rr,new Map);S(this,ul,!1);S(this,kf,!1);S(this,Pf,!1);S(this,Hs,null);S(this,Mo,null);S(this,en,null);S(this,Do,null);S(this,dl,null);S(this,Rf,-1);S(this,ne);const h=[...l(Ts,hl).values()];if(!Ts._initialized){Ts._initialized=!0;for(const f of h)f.initialize(d,e)}e.registerEditorTypes(h),x(this,ne,e),this.pageIndex=t,this.div=r,x(this,Au,i),x(this,ll,o),this.viewport=u,x(this,en,c),this.drawLayer=a,this._structTree=s,l(this,ne).addLayer(this)}get isEmpty(){return l(this,rr).size===0}get isInvisible(){return this.isEmpty&&l(this,ne).getMode()===fe.NONE}updateToolbar(e){l(this,ne).updateToolbar(e)}updateMode(e=l(this,ne).getMode()){switch(C(this,Xe,Ow).call(this),e){case fe.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case fe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case fe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===fe.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const r of l(Ts,hl).values())t.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,en))==null?void 0:t.div)}setEditingState(e){l(this,ne).setEditingState(e)}addCommands(e){l(this,ne).addCommands(e)}cleanUndoStack(e){l(this,ne).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,ll))==null||t.togglePointerEvents(e)}async enable(){var r;x(this,Pf,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(r=l(this,dl))==null||r.abort(),x(this,dl,null);const e=new Set;for(const s of l(this,Xe,qE))s.enableEditing(),s.show(!0),s.annotationElementId&&(l(this,ne).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=l(this,ll);if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),l(this,ne).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}x(this,Pf,!1),l(this,ne)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(x(this,kf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),l(this,en)&&!l(this,dl)){x(this,dl,new AbortController);const i=l(this,ne).combinedSignal(l(this,dl));l(this,en).div.addEventListener("pointerdown",o=>{const{clientX:c,clientY:u,timeStamp:d}=o,h=l(this,Rf);if(d-h>500){x(this,Rf,d);return}x(this,Rf,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(c,u);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let v;const m=new RegExp(`^${Om}[0-9]+$`);for(const g of p)if(m.test(g.id)){v=g.id;break}if(!v)return;const w=l(this,rr).get(v);(w==null?void 0:w.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),w.dblclick(o))},{signal:i,capture:!0})}const e=l(this,ll),t=[];if(e){const i=new Map,o=new Map;for(const c of l(this,Xe,qE)){if(c.disableEditing(),!c.annotationElementId){t.push(c);continue}if(c.serialize()!==null){i.set(c.annotationElementId,c);continue}else o.set(c.annotationElementId,c);(s=this.getEditableAnnotation(c.annotationElementId))==null||s.show(),c.remove()}const a=e.getEditableAnnotations();for(const c of a){const{id:u}=c.data;if(l(this,ne).isDeletedAnnotationElement(u)){c.updateEdited({deleted:!0});continue}let d=o.get(u);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=i.get(u),d&&(l(this,ne).addChangedExistingAnnotation(d),d.renderAnnotationElement(c)&&d.show(!1)),c.show()}}C(this,Xe,Ow).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of l(Ts,hl).values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),x(this,kf,!1)}getEditableAnnotation(e){var t;return((t=l(this,ll))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,ne).getActive()!==e&&l(this,ne).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,en))!=null&&e.div&&!l(this,Do)){x(this,Do,new AbortController);const t=l(this,ne).combinedSignal(l(this,Do));l(this,en).div.addEventListener("pointerdown",C(this,Xe,$2).bind(this),{signal:t}),l(this,en).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,en))!=null&&e.div&&l(this,Do)&&(l(this,Do).abort(),x(this,Do,null),l(this,en).div.classList.remove("highlighting"))}enableClick(){if(l(this,cl))return;x(this,cl,new AbortController);const e=l(this,ne).combinedSignal(l(this,cl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=l(this,cl))==null||e.abort(),x(this,cl,null)}attach(e){l(this,rr).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,ne).isDeletedAnnotationElement(t)&&l(this,ne).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,rr).delete(e.id),(t=l(this,Au))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,kf)&&e.annotationElementId&&l(this,ne).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,ne).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,ne).addDeletedAnnotationElement(e),tt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,ne).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!l(this,Pf)),l(this,ne).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,Oo)&&(e._focusEventsAllowed=!1,x(this,Oo,setTimeout(()=>{x(this,Oo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,ne)._signal}),t.focus())},0))),e._structTreeParentId=(r=l(this,Au))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getEditorByUID(e){for(const t of l(this,rr).values())if(t.uid===e)return t;return null}getNextId(){return l(this,ne).getId()}combinedSignal(e){return l(this,ne).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,Xe,si))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await l(this,ne).updateMode(e.mode);const{offsetX:r,offsetY:s}=C(this,Xe,XE).call(this),i=this.getNextId(),o=C(this,Xe,KE).call(this,{parent:this,id:i,x:r,y:s,uiManager:l(this,ne),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=l(Ts,hl).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,ne)))||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=C(this,Xe,KE).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:l(this,ne),isCentered:t,...r});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(C(this,Xe,XE).call(this),!0,e)}setSelected(e){l(this,ne).setSelected(e)}toggleSelected(e){l(this,ne).toggleSelected(e)}unselect(e){l(this,ne).unselect(e)}pointerup(e){var s;const{isMac:t}=vn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!l(this,ul)||(x(this,ul,!1),(s=l(this,Xe,si))!=null&&s.isDrawer&&l(this,Xe,si).supportMultipleDrawings))return;if(!l(this,Tf)){x(this,Tf,!0);return}const r=l(this,ne).getMode();if(r===fe.STAMP||r===fe.SIGNATURE){l(this,ne).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(l(this,ne).getMode()===fe.HIGHLIGHT&&this.enableTextSelection(),l(this,ul)){x(this,ul,!1);return}const{isMac:t}=vn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(x(this,ul,!0),(s=l(this,Xe,si))!=null&&s.isDrawer){this.startDrawingSession(e);return}const r=l(this,ne).getActive();x(this,Tf,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),l(this,Hs)){l(this,Xe,si).startDrawing(this,l(this,ne),!1,e);return}l(this,ne).setCurrentDrawingSession(this),x(this,Hs,new AbortController);const t=l(this,ne).combinedSignal(l(this,Hs));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(x(this,Mo,null),this.commitOrRemove())},{signal:t}),l(this,Xe,si).startDrawing(this,l(this,ne),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&x(this,Mo,t);return}l(this,Mo)&&setTimeout(()=>{var t;(t=l(this,Mo))==null||t.focus(),x(this,Mo,null)},0)}endDrawingSession(e=!1){return l(this,Hs)?(l(this,ne).setCurrentDrawingSession(null),l(this,Hs).abort(),x(this,Hs,null),x(this,Mo,null),l(this,Xe,si).endDrawing(e)):null}findNewParent(e,t,r){const s=l(this,ne).findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return l(this,Hs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,Hs)&&l(this,Xe,si).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=l(this,ne).getActive())==null?void 0:e.parent)===this&&(l(this,ne).commitOrRemove(),l(this,ne).setActiveEditor(null)),l(this,Oo)&&(clearTimeout(l(this,Oo)),x(this,Oo,null));for(const r of l(this,rr).values())(t=l(this,Au))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,l(this,rr).clear(),l(this,ne).removeLayer(this)}render({viewport:e}){this.viewport=e,Fu(this.div,e);for(const t of l(this,ne).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,ne).commitOrRemove(),C(this,Xe,Ow).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Fu(this.div,{rotation:r}),t!==r)for(const s of l(this,rr).values())s.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,ne).viewParameters.realScale}};Au=new WeakMap,Tf=new WeakMap,ll=new WeakMap,cl=new WeakMap,Oo=new WeakMap,rr=new WeakMap,ul=new WeakMap,kf=new WeakMap,Pf=new WeakMap,Hs=new WeakMap,Mo=new WeakMap,en=new WeakMap,Do=new WeakMap,dl=new WeakMap,Rf=new WeakMap,ne=new WeakMap,hl=new WeakMap,Xe=new WeakSet,qE=function(){return l(this,rr).size!==0?l(this,rr).values():l(this,ne).getEditors(this.pageIndex)},$2=function(e){l(this,ne).unselectAll();const{target:t}=e;if(t===l(this,en).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,en).div.contains(t)){const{isMac:r}=vn.platform;if(e.button!==0||e.ctrlKey&&r)return;l(this,ne).showAllEditors("highlight",!0,!0),l(this,en).div.classList.add("free"),this.toggleDrawing(),k0.startHighlighting(this,l(this,ne).direction==="ltr",{target:l(this,en).div,x:e.x,y:e.y}),l(this,en).div.addEventListener("pointerup",()=>{l(this,en).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,ne)._signal}),e.preventDefault()}},si=function(){return l(Ts,hl).get(l(this,ne).getMode())},KE=function(e){const t=l(this,Xe,si);return t?new t.prototype.constructor(e):null},XE=function(){const{x:e,y:t,width:r,height:s}=this.boundingClientRect,i=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+r),c=Math.min(window.innerHeight,t+s),u=(i+a)/2-e,d=(o+c)/2-t,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}},Ow=function(){for(const e of l(this,rr).values())e.isEmpty()&&e.remove()},V(Ts,"_initialized",!1),S(Ts,hl,new Map([TE,FE,VE,k0,HE].map(e=>[e._editorType,e])));let GE=Ts;var Vs,Fn,Cu,kv,K0,U2,zi,QE,z2,JE;const zt=class zt{constructor({pageIndex:e}){S(this,zi);S(this,Vs,null);S(this,Fn,new Map);S(this,Cu,new Map);this.pageIndex=e}setParent(e){if(!l(this,Vs)){x(this,Vs,e);return}if(l(this,Vs)!==e){if(l(this,Fn).size>0)for(const t of l(this,Fn).values())t.remove(),e.append(t);x(this,Vs,e)}}static get _svgFactory(){return ce(this,"_svgFactory",new C0)}draw(e,t=!1,r=!1){const s=wt(zt,kv)._++,i=C(this,zi,QE).call(this),o=zt._svgFactory.createElement("defs");i.append(o);const a=zt._svgFactory.createElement("path");o.append(a);const c=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",c),a.setAttribute("vector-effect","non-scaling-stroke"),t&&l(this,Cu).set(s,a);const u=r?C(this,zi,z2).call(this,o,c):null,d=zt._svgFactory.createElement("use");return i.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(i,e),l(this,Fn).set(s,i),{id:s,clipPathId:`url(#${u})`}}drawOutline(e,t){const r=wt(zt,kv)._++,s=C(this,zi,QE).call(this),i=zt._svgFactory.createElement("defs");s.append(i);const o=zt._svgFactory.createElement("path");i.append(o);const a=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const h=zt._svgFactory.createElement("mask");i.append(h),c=`mask_p${this.pageIndex}_${r}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const f=zt._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=zt._svgFactory.createElement("use");h.append(p),p.setAttribute("href",`#${a}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=zt._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${a}`),c&&u.setAttribute("mask",`url(#${c})`);const d=u.cloneNode();return s.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(s,e),l(this,Fn).set(r,s),r}finalizeDraw(e,t){l(this,Cu).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:r,bbox:s,rootClass:i,path:o}=t,a=typeof e=="number"?l(this,Fn).get(e):e;if(a){if(r&&C(this,zi,JE).call(this,a,r),s&&C(c=zt,K0,U2).call(c,a,s),i){const{classList:u}=a;for(const[d,h]of Object.entries(i))u.toggle(d,h)}if(o){const d=a.firstElementChild.firstElementChild;C(this,zi,JE).call(this,d,o)}}}updateParent(e,t){if(t===this)return;const r=l(this,Fn).get(e);r&&(l(t,Vs).append(r),l(this,Fn).delete(e),l(t,Fn).set(e,r))}remove(e){l(this,Cu).delete(e),l(this,Vs)!==null&&(l(this,Fn).get(e).remove(),l(this,Fn).delete(e))}destroy(){x(this,Vs,null);for(const e of l(this,Fn).values())e.remove();l(this,Fn).clear(),l(this,Cu).clear()}};Vs=new WeakMap,Fn=new WeakMap,Cu=new WeakMap,kv=new WeakMap,K0=new WeakSet,U2=function(e,[t,r,s,i]){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*i}%`},zi=new WeakSet,QE=function(){const e=zt._svgFactory.create(1,1,!0);return l(this,Vs).append(e),e.setAttribute("aria-hidden",!0),e},z2=function(e,t){const r=zt._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=zt._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},JE=function(e,t){for(const[r,s]of Object.entries(t))s===null?e.removeAttribute(r):e.setAttribute(r,s)},S(zt,K0),S(zt,kv,0);let YE=zt;globalThis._pdfjsTestingUtils={HighlightOutliner:PE};globalThis.pdfjsLib={AbortException:kl,AnnotationEditorLayer:GE,AnnotationEditorParamsType:Pe,AnnotationEditorType:fe,AnnotationEditorUIManager:ju,AnnotationLayer:AE,AnnotationMode:ga,AnnotationType:Ot,applyOpacity:gG,build:Sq,ColorPicker:E0,createValidAbsoluteUrl:ID,CSSConstants:mG,DOMSVGFactory:C0,DrawLayer:YE,FeatureTest:vn,fetchData:Vv,findContrastColor:vG,getDocument:$L,getFilenameFromUrl:cG,getPdfFilenameFromUrl:uG,getRGB:Gv,getUuid:DD,getXfaPageViewport:hG,GlobalWorkerOptions:Oi,ImageKind:ew,InvalidPDFException:TS,isDataScheme:Fb,isPdfFile:L1,isValidExplicitDest:TG,MathClamp:Bn,noContextMenu:ys,normalizeUnicode:oG,OPS:Mm,OutputScale:Ui,PasswordResponses:Q8,PDFDataRangeTransport:UL,PDFDateString:y0,PDFWorker:Fm,PermissionFlag:Y8,PixelsPerInch:Pl,RenderingCancelledException:D1,renderRichText:jD,ResponseException:v0,setLayerDimensions:Fu,shadow:ce,SignatureExtractor:Lo,stopEvent:kt,SupportedImageMimeTypes:PS,TextLayer:Lm,TouchManager:b0,updateUrlHash:OD,Util:te,VerbosityLevel:Mb,version:_q,XfaLayer:FD};Oi.workerSrc=new URL("/Seva-sahayak-project-Intel-Ai-/assets/pdf.worker.min-CXgfMxHN.mjs",import.meta.url).toString();function qq({url:n,className:e,page:t=1}){const r=A.useRef(null),s=A.useRef(null),[i,o]=A.useState(!0),[a,c]=A.useState(null),[u,d]=A.useState(0),h=A.useMemo(()=>t<1?1:t,[t]);return A.useEffect(()=>{if(!s.current)return;const f=s.current,p=new ResizeObserver(()=>{d(f.clientWidth)});return p.observe(f),d(f.clientWidth),()=>p.disconnect()},[]),A.useEffect(()=>{let f=!1;async function p(){try{o(!0),c(null);const v=await fetch(n);if(!v.ok)throw new Error(`Failed to load PDF (${v.status})`);const m=await v.arrayBuffer(),b=await(await $L({data:m}).promise).getPage(h);if(f)return;const y=r.current;if(!y)return;const E=b.getViewport({scale:1}),P=Math.max(1,u||E.width)/E.width,k=b.getViewport({scale:P}),R=y.getContext("2d");if(!R)throw new Error("Canvas context not available");y.width=Math.floor(k.width),y.height=Math.floor(k.height),R.clearRect(0,0,y.width,y.height),await b.render({canvas:y,canvasContext:R,viewport:k}).promise,f||o(!1)}catch(v){f||(o(!1),c(v instanceof Error?v.message:"Failed to render PDF"))}}return n&&p(),()=>{f=!0}},[n,h,u]),_.jsxs("div",{ref:s,className:e,children:[i&&_.jsx("div",{className:"w-full h-full flex items-center justify-center",children:_.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),a&&_.jsx("div",{className:"w-full h-full flex items-center justify-center p-6 text-center",children:_.jsxs("div",{className:"space-y-2",children:[_.jsx("p",{className:"text-sm font-medium text-foreground",children:"PDF preview unavailable"}),_.jsx("p",{className:"text-xs text-muted-foreground",children:a})]})}),_.jsx("canvas",{ref:r,className:i||a?"hidden":"w-full h-auto"})]})}const Kq=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Delhi","Jammu and Kashmir","Ladakh","Puducherry","Chandigarh"];function Xq({extractedData:n,formData:e,onFormChange:t,onSubmit:r,documents:s=[]}){const{t:i}=Jo(),[o,a]=A.useState(null),[c,u]=A.useState(null),[d,h]=A.useState(null),[f,p]=A.useState(null),[v,m]=A.useState(null),[w,g]=A.useState(null),b=s.find(k=>k.id===w),y=(k,R)=>{let N=R;if(k==="aadhaarNumber"&&(N=W8(R)),k==="panNumber"&&(N=G8(R)),k==="drivingLicenseNumber"&&(N=q8(R)),k==="pincode"&&(N=K8(R)),k==="voterIdNumber"&&(N=X8(R)),t({...e,[k]:N}),k==="aadhaarNumber")if(N){const I=ES(N);a(I.isValid?null:I.error||null)}else a(null);if(k==="panNumber")if(N){const I=Fk(N);u(I.isValid?null:I.error||null)}else u(null);if(k==="drivingLicenseNumber")if(N){const I=jk(N);h(I.isValid?null:I.error||null)}else h(null);if(k==="pincode")if(N){const I=Bk(N);p(I.isValid?null:I.error||null)}else p(null);if(k==="voterIdNumber")if(N){const I=$k(N);m(I.isValid?null:I.error||null)}else m(null)},E=k=>R=>{y(k,R)},T=k=>{k.preventDefault();let R={...e};if(e.aadhaarNumber){const N=ES(e.aadhaarNumber);if(!N.isValid){a(N.error||"Invalid Aadhaar number");return}N.cleanedNumber&&(R.aadhaarNumber=N.cleanedNumber)}if(e.panNumber){const N=Fk(e.panNumber);if(!N.isValid){u(N.error||"Invalid PAN number");return}N.cleanedNumber&&(R.panNumber=N.cleanedNumber)}if(e.drivingLicenseNumber){const N=jk(e.drivingLicenseNumber);if(!N.isValid){h(N.error||"Invalid Driving License number");return}N.cleanedNumber&&(R.drivingLicenseNumber=N.cleanedNumber)}if(e.pincode){const N=Bk(e.pincode);if(!N.isValid){p(N.error||"Invalid Pincode");return}N.cleanedNumber&&(R.pincode=N.cleanedNumber)}if(e.voterIdNumber){const N=$k(e.voterIdNumber);if(!N.isValid){m(N.error||"Invalid Voter ID number");return}N.cleanedNumber&&(R.voterIdNumber=N.cleanedNumber)}t(R),r()},P=(k,R,N="text",I,M)=>{const L=e[k]||"",z=n&&n[k];return _.jsxs("div",{className:"space-y-2",children:[_.jsxs(Zy,{htmlFor:k,className:"flex items-center gap-2",children:[R,z&&_.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-success/10 text-success",children:"Auto-filled"})]}),_.jsxs("div",{className:"relative",children:[N==="textarea"?_.jsx(NM,{id:k,value:L,onChange:F=>y(k,F.target.value),placeholder:I,className:`pr-20 ${M?"border-destructive":""}`}):_.jsx(kM,{id:k,type:N,value:L,onChange:F=>y(k,F.target.value),placeholder:I,className:`pr-20 ${M?"border-destructive":""}`}),_.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[L&&_.jsx(k1,{value:L}),N!=="date"&&_.jsx(lW,{onTranscript:E(k)})]})]}),M&&_.jsxs("div",{className:"flex items-center gap-1 text-destructive text-sm",children:[_.jsx(k$,{className:"h-4 w-4"}),_.jsx("span",{children:M})]})]})};return _.jsxs("div",{className:"space-y-6",children:[_.jsx("div",{children:_.jsxs("form",{onSubmit:T,className:"space-y-6",children:[_.jsxs(Di,{className:"animate-fade-in",children:[_.jsxs(rc,{children:[_.jsx(sc,{className:"text-lg",children:i("personalDetails")}),_.jsx(hS,{children:i("formDescription")})]}),_.jsxs(Li,{className:"space-y-4",children:[P("name",i("name"),"text","Enter full name"),P("fatherName",i("fatherName"),"text","Enter father's name"),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[P("dateOfBirth",i("dateOfBirth"),"date"),_.jsxs("div",{className:"space-y-2",children:[_.jsxs(Zy,{htmlFor:"gender",className:"flex items-center gap-2",children:[i("gender"),(n==null?void 0:n.gender)&&_.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-success/10 text-success",children:"Auto-filled"})]}),_.jsxs(uk,{value:e.gender||"",onValueChange:k=>y("gender",k),children:[_.jsx(uS,{children:_.jsx(dk,{placeholder:"Select gender"})}),_.jsxs(dS,{children:[_.jsx(_p,{value:"male",children:i("male")}),_.jsx(_p,{value:"female",children:i("female")}),_.jsx(_p,{value:"other",children:i("other")})]})]})]})]})]})]}),_.jsxs(Di,{className:"animate-fade-in",style:{animationDelay:"100ms"},children:[_.jsx(rc,{children:_.jsx(sc,{className:"text-lg",children:i("addressDetails")})}),_.jsxs(Li,{className:"space-y-4",children:[P("address",i("address"),"textarea","Enter full address"),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P("district",i("district"),"text","District"),_.jsxs("div",{className:"space-y-2",children:[_.jsxs(Zy,{htmlFor:"state",className:"flex items-center gap-2",children:[i("state"),(n==null?void 0:n.state)&&_.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-success/10 text-success",children:"Auto-filled"})]}),_.jsxs(uk,{value:e.state||"",onValueChange:k=>y("state",k),children:[_.jsx(uS,{children:_.jsx(dk,{placeholder:"Select state"})}),_.jsx(dS,{children:Kq.map(k=>_.jsx(_p,{value:k,children:k},k))})]})]}),P("pincode",i("pincode"),"text","6-digit PIN",f)]})]})]}),_.jsxs(Di,{className:"animate-fade-in",style:{animationDelay:"200ms"},children:[_.jsx(rc,{children:_.jsx(sc,{className:"text-lg",children:i("documentDetails")})}),_.jsxs(Li,{className:"space-y-4",children:[_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[P("aadhaarNumber",i("aadhaarNumber"),"text","XXXX XXXX XXXX (12 digits only)",o),P("panNumber",i("panNumber"),"text","ABCDE1234F (auto-uppercase)",c)]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[P("voterIdNumber",i("voterIdNumber"),"text","ABC1234567 (3 letters + 7 digits)",v),P("drivingLicenseNumber",i("drivingLicenseNumber"),"text","MH1234567890123 (2 letters + 13 digits)",d)]})]})]}),_.jsxs("div",{className:"flex justify-end gap-3",children:[_.jsx(Lt,{type:"button",variant:"outline",onClick:()=>t({}),children:i("clear")}),_.jsx(Lt,{type:"submit",variant:"hero",size:"lg",children:i("next")})]})]})}),_.jsxs(Di,{className:"animate-fade-in",children:[_.jsxs(rc,{className:"pb-3",children:[_.jsxs(sc,{className:"text-lg flex items-center gap-2",children:[_.jsx(O$,{className:"h-5 w-5"}),"Document Preview"]}),_.jsx(hS,{children:"Select a document to cross-check"})]}),_.jsx(Li,{className:"space-y-4",children:s.length>0?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(k=>_.jsxs(Lt,{type:"button",variant:w===k.id?"default":"outline",size:"sm",className:"gap-2",onClick:()=>g(w===k.id?null:k.id),children:[_.jsx(Lv,{className:"h-4 w-4"}),_.jsx("span",{className:"truncate max-w-[100px]",children:k.file.name.split(".")[0]})]},k.id))}),b&&_.jsx("div",{className:"mt-4 border rounded-lg overflow-hidden bg-muted/30",children:b.file.type==="application/pdf"?_.jsx(qq,{url:b.preview,className:"w-full"}):_.jsx("img",{src:b.preview,alt:"Document preview",className:"w-full h-auto object-contain"})}),!b&&_.jsx("div",{className:"flex items-center justify-center h-40 border-2 border-dashed rounded-lg text-muted-foreground",children:_.jsx("p",{className:"text-sm text-center",children:"Click a document above to preview"})})]}):_.jsx("div",{className:"flex items-center justify-center h-40 border-2 border-dashed rounded-lg text-muted-foreground",children:_.jsx("p",{className:"text-sm text-center",children:"No documents uploaded"})})})]})]})}function Yq({extractedData:n,formData:e,onEdit:t,onDownload:r}){const{t:s}=Jo(),[i,o]=A.useState(null),a=[{key:"name",label:s("name"),value:e.name},{key:"fatherName",label:s("fatherName"),value:e.fatherName},{key:"dateOfBirth",label:s("dateOfBirth"),value:e.dateOfBirth},{key:"gender",label:s("gender"),value:e.gender?s(e.gender):void 0},{key:"address",label:s("address"),value:e.address},{key:"district",label:s("district"),value:e.district},{key:"state",label:s("state"),value:e.state},{key:"pincode",label:s("pincode"),value:e.pincode},{key:"aadhaarNumber",label:s("aadhaarNumber"),value:e.aadhaarNumber},{key:"panNumber",label:s("panNumber"),value:e.panNumber},{key:"voterIdNumber",label:s("voterIdNumber"),value:e.voterIdNumber},{key:"drivingLicenseNumber",label:s("drivingLicenseNumber"),value:e.drivingLicenseNumber}].filter(u=>u.value),c=async u=>{let d="";switch(u){case"personal":d=[e.name&&`${s("name")}: ${e.name}`,e.fatherName&&`${s("fatherName")}: ${e.fatherName}`,e.dateOfBirth&&`${s("dateOfBirth")}: ${e.dateOfBirth}`,e.gender&&`${s("gender")}: ${s(e.gender)}`].filter(Boolean).join(`
`);break;case"address":d=[e.address&&`${s("address")}: ${e.address}`,e.district&&`${s("district")}: ${e.district}`,e.state&&`${s("state")}: ${e.state}`,e.pincode&&`${s("pincode")}: ${e.pincode}`].filter(Boolean).join(`
`);break;case"ids":d=[e.aadhaarNumber&&`${s("aadhaarNumber")}: ${e.aadhaarNumber}`,e.panNumber&&`${s("panNumber")}: ${e.panNumber}`,e.voterIdNumber&&`${s("voterIdNumber")}: ${e.voterIdNumber}`,e.drivingLicenseNumber&&`${s("drivingLicenseNumber")}: ${e.drivingLicenseNumber}`].filter(Boolean).join(`
`);break;case"all":d=a.map(h=>`${h.label}: ${h.value}`).join(`
`);break}d&&(await navigator.clipboard.writeText(d),o(u),setTimeout(()=>o(null),2e3))};return _.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"text-center",children:[_.jsx("h2",{className:"text-2xl font-bold text-foreground",children:s("reviewTitle")}),_.jsx("p",{className:"text-muted-foreground mt-1",children:s("reviewDescription")})]}),_.jsxs(Di,{className:"border-primary/20 bg-primary/5 animate-fade-in",children:[_.jsxs(rc,{className:"pb-3",children:[_.jsxs(sc,{className:"text-lg flex items-center gap-2",children:[_.jsx($f,{className:"h-5 w-5 text-primary"}),s("copyForForms")]}),_.jsx("p",{className:"text-sm text-muted-foreground",children:"Copy extracted data to paste into forms on other websites"})]}),_.jsx(Li,{children:_.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[_.jsxs(Lt,{variant:i==="personal"?"default":"outline",size:"sm",onClick:()=>c("personal"),className:"gap-2 h-auto py-3 flex-col",children:[_.jsx($$,{className:"h-4 w-4"}),_.jsx("span",{className:"text-xs",children:s(i==="personal"?"copied":"copyPersonal")})]}),_.jsxs(Lt,{variant:i==="address"?"default":"outline",size:"sm",onClick:()=>c("address"),className:"gap-2 h-auto py-3 flex-col",children:[_.jsx(D$,{className:"h-4 w-4"}),_.jsx("span",{className:"text-xs",children:s(i==="address"?"copied":"copyAddress")})]}),_.jsxs(Lt,{variant:i==="ids"?"default":"outline",size:"sm",onClick:()=>c("ids"),className:"gap-2 h-auto py-3 flex-col",children:[_.jsx(N$,{className:"h-4 w-4"}),_.jsx("span",{className:"text-xs",children:s(i==="ids"?"copied":"copyIds")})]}),_.jsxs(Lt,{variant:i==="all"?"default":"outline",size:"sm",onClick:()=>c("all"),className:"gap-2 h-auto py-3 flex-col",children:[_.jsx($f,{className:"h-4 w-4"}),_.jsx("span",{className:"text-xs",children:s(i==="all"?"copied":"copyEverything")})]})]})})]}),_.jsxs(Di,{className:"animate-fade-in",children:[_.jsxs(rc,{className:"flex flex-row items-center justify-between",children:[_.jsxs(sc,{className:"text-lg flex items-center gap-2",children:[_.jsx(Lv,{className:"h-5 w-5 text-primary"}),s("extractedInfo")]}),_.jsxs(Lt,{variant:"outline",size:"sm",onClick:t,className:"gap-2",children:[_.jsx(j$,{className:"h-4 w-4"}),s("edit")]})]}),_.jsx(Li,{children:_.jsx("div",{className:"space-y-3",children:a.map((u,d)=>_.jsxs("div",{className:"flex items-center p-3 rounded-lg bg-secondary/50 border border-border/50 animate-fade-in",style:{animationDelay:`${(d+2)*50}ms`},children:[_.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[_.jsxs("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[u.label,":"]}),_.jsx("span",{className:"text-sm font-medium text-foreground truncate",title:u.value,children:u.value})]}),_.jsx(k1,{value:u.value||""})]},u.key))})})]}),_.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center pt-4",children:[_.jsxs(Lt,{variant:"hero",size:"xl",onClick:r,className:"gap-3",children:[_.jsx(I$,{className:"h-5 w-5"}),s("downloadForm")]}),_.jsx(Lt,{variant:"outline",size:"lg",onClick:t,children:s("edit")})]})]})}function Qq(){const{t:n}=Jo(),{toast:e}=FN(),[t,r]=A.useState(1),[s,i]=A.useState([]),[o,a]=A.useState(null),[c,u]=A.useState({}),[d,h]=A.useState(!1),f=A.useCallback(E=>{const T=E.map(P=>({id:`doc-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,file:P,preview:URL.createObjectURL(P),type:Jq(P.name),status:"uploading"}));i(P=>[...P,...T]),T.forEach(P=>{setTimeout(()=>{i(k=>k.map(R=>R.id===P.id?{...R,status:"completed"}:R)),e({title:n("uploadSuccess"),description:`${P.file.name} has been uploaded`})},1e3)})},[n,e]),p=A.useCallback(E=>{i(T=>T.filter(P=>P.id!==E))},[]),v=A.useCallback(async()=>{if(s.length===0){e({title:"No documents",description:"Please upload at least one document first",variant:"destructive"});return}h(!0),r(2);try{const E=s.filter(N=>N.type==="aadhaar"),T=s.filter(N=>N.type!=="aadhaar"),P=E.length>0?[...E,...T]:s;let k={};for(let N=0;N<P.length;N++){const I=P[N],M=I.type==="aadhaar",L=N===0&&(M||E.length===0),z=M?"full":V8(I.type,L);console.log(`Processing document ${N+1}/${P.length}:`,{type:I.type,fileName:I.file.name,isPrimary:L,isAadhaar:M,extractionMode:z});const F=await Lk(I.file),B=await Dk(F,I.type,I.file.type,z);if(console.log(`Extraction result for ${I.type}:`,B),!B.success||!B.data){console.error(`Extraction failed for ${I.type}:`,B.error);continue}if(M)k={name:k.name||B.data.name,fatherName:k.fatherName||B.data.fatherName,dateOfBirth:k.dateOfBirth||B.data.dateOfBirth,gender:k.gender||B.data.gender,address:k.address||B.data.address,district:k.district||B.data.district,state:k.state||B.data.state,pincode:k.pincode||B.data.pincode,aadhaarNumber:k.aadhaarNumber||B.data.aadhaarNumber,confidence:B.data.confidence||k.confidence,panNumber:k.panNumber,voterIdNumber:k.voterIdNumber,drivingLicenseNumber:k.drivingLicenseNumber},console.log("Merged Aadhaar data so far:",k);else if(L&&!E.length)k={name:B.data.name,fatherName:B.data.fatherName,dateOfBirth:B.data.dateOfBirth,gender:B.data.gender,address:B.data.address,district:B.data.district,state:B.data.state,pincode:B.data.pincode,aadhaarNumber:B.data.aadhaarNumber,confidence:B.data.confidence};else switch(I.type){case"pan":if(B.data.panNumber&&(k.panNumber=B.data.panNumber),B.data.fatherName){const j=(k.fatherName||"").trim().split(/\s+/).filter(Boolean).length,$=B.data.fatherName.trim().split(/\s+/).filter(Boolean).length;$>=3&&$>j&&(k.fatherName=B.data.fatherName,console.log("Using PAN father name (more complete):",B.data.fatherName))}break;case"voterId":B.data.voterIdNumber&&(k.voterIdNumber=B.data.voterIdNumber);break;case"drivingLicense":B.data.drivingLicenseNumber&&(k.drivingLicenseNumber=B.data.drivingLicenseNumber);break;default:k.name||(k={...k,...B.data})}}if(E.length===0&&s.length>0&&!k.name){const N=s[0],I=await Lk(N.file),M=await Dk(I,N.type,N.file.type,"full");M.success&&M.data&&(k={name:M.data.name,fatherName:M.data.fatherName,dateOfBirth:M.data.dateOfBirth,gender:M.data.gender,address:M.data.address,district:M.data.district,state:M.data.state,pincode:M.data.pincode,aadhaarNumber:M.data.aadhaarNumber,panNumber:M.data.panNumber,voterIdNumber:M.data.voterIdNumber,confidence:M.data.confidence})}if(k.aadhaarNumber){const N=ES(k.aadhaarNumber);N.isValid&&N.cleanedNumber&&(k.aadhaarNumber=N.cleanedNumber)}a(k),u(k);const R=s.length;e({title:n("extractionComplete"),description:`Data extracted from ${R} document${R>1?"s":""} with smart merging`})}catch(E){console.error("Extraction error:",E),e({title:"Extraction Failed",description:E instanceof Error?E.message:"Failed to extract data",variant:"destructive"}),r(1)}finally{h(!1)}},[s,n,e]),m=A.useCallback(()=>{r(4)},[]),w=A.useCallback(()=>{const E=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Extracted Document Data</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 40px; max-width: 800px; margin: 0 auto; }
          h1 { color: #333; border-bottom: 2px solid #4f46e5; padding-bottom: 10px; }
          .field { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #eee; }
          .label { color: #666; font-weight: 500; }
          .value { color: #333; font-weight: 600; text-align: right; max-width: 60%; }
          .header { text-align: center; margin-bottom: 30px; }
          .date { color: #888; font-size: 12px; margin-top: 5px; }
          .footer { margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; text-align: center; color: #888; font-size: 12px; }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>Extracted Document Information</h1>
          <p class="date">Generated on: ${new Date().toLocaleDateString("en-IN",{dateStyle:"full"})}</p>
        </div>
        ${c.name?`<div class="field"><span class="label">${n("name")}</span><span class="value">${c.name}</span></div>`:""}
        ${c.fatherName?`<div class="field"><span class="label">${n("fatherName")}</span><span class="value">${c.fatherName}</span></div>`:""}
        ${c.dateOfBirth?`<div class="field"><span class="label">${n("dateOfBirth")}</span><span class="value">${c.dateOfBirth}</span></div>`:""}
        ${c.gender?`<div class="field"><span class="label">${n("gender")}</span><span class="value">${n(c.gender)}</span></div>`:""}
        ${c.address?`<div class="field"><span class="label">${n("address")}</span><span class="value">${c.address}</span></div>`:""}
        ${c.district?`<div class="field"><span class="label">${n("district")}</span><span class="value">${c.district}</span></div>`:""}
        ${c.state?`<div class="field"><span class="label">${n("state")}</span><span class="value">${c.state}</span></div>`:""}
        ${c.pincode?`<div class="field"><span class="label">${n("pincode")}</span><span class="value">${c.pincode}</span></div>`:""}
        ${c.aadhaarNumber?`<div class="field"><span class="label">${n("aadhaarNumber")}</span><span class="value">${c.aadhaarNumber}</span></div>`:""}
        ${c.panNumber?`<div class="field"><span class="label">${n("panNumber")}</span><span class="value">${c.panNumber}</span></div>`:""}
        ${c.voterIdNumber?`<div class="field"><span class="label">${n("voterIdNumber")}</span><span class="value">${c.voterIdNumber}</span></div>`:""}
        <div class="footer">
          <p>This document was generated by AI-Powered Form Filling Assistant</p>
        </div>
      </body>
      </html>
    `,T=window.open("","_blank");T?(T.document.write(E),T.document.close(),T.print(),e({title:n("downloadReady"),description:'Use "Save as PDF" in the print dialog to download'})):e({title:"Error",description:"Please allow popups to download the PDF",variant:"destructive"})},[n,e,c]),g=A.useCallback(()=>{r(3)},[]),b=()=>{t===1&&s.length>0?v():t===2&&o?r(3):t===3&&m()},y=()=>{t>1&&r(t-1)};return _.jsxs("div",{className:"min-h-screen bg-gradient-hero",children:[_.jsx(EV,{}),_.jsxs("main",{className:"container py-8",children:[t===1&&_.jsxs("section",{className:"text-center mb-12 animate-fade-in",children:[_.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-foreground mb-4",children:n("appTagline")}),_.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto mb-8",children:n("appDescription")}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-3xl mx-auto",children:[_.jsxs("div",{className:"flex items-center justify-center gap-2 p-4 rounded-xl bg-card border shadow-sm",children:[_.jsx(hI,{className:"h-5 w-5 text-success"}),_.jsx("span",{className:"text-sm font-medium",children:n("secureProcessing")})]}),_.jsxs("div",{className:"flex items-center justify-center gap-2 p-4 rounded-xl bg-card border shadow-sm",children:[_.jsx(pI,{className:"h-5 w-5 text-accent"}),_.jsx("span",{className:"text-sm font-medium",children:n("poweredBy")})]}),_.jsxs("div",{className:"flex items-center justify-center gap-2 p-4 rounded-xl bg-card border shadow-sm",children:[_.jsx(R$,{className:"h-5 w-5 text-primary"}),_.jsx("span",{className:"text-sm font-medium",children:"3-5 sec processing"})]})]})]}),_.jsx("div",{className:"mb-8",children:_.jsx(AV,{currentStep:t})}),_.jsxs("div",{className:"max-w-6xl mx-auto",children:[t===1&&_.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-fade-in",children:[_.jsx("div",{className:"lg:col-span-2",children:_.jsx(Di,{children:_.jsx(Li,{className:"p-6",children:_.jsx(TV,{documents:s,onUpload:f,onRemove:p})})})}),_.jsx("div",{children:_.jsx(Di,{className:"sticky top-24",children:_.jsx(Li,{className:"p-6",children:_.jsx(lk,{data:null})})})})]}),t===2&&_.jsx("div",{className:"max-w-2xl mx-auto animate-fade-in",children:_.jsx(Di,{children:_.jsx(Li,{className:"p-6",children:_.jsx(lk,{data:o,isLoading:d})})})}),t===3&&_.jsx("div",{className:"animate-fade-in",children:_.jsx(Xq,{extractedData:o,formData:c,onFormChange:u,onSubmit:m,documents:s})}),t===4&&_.jsx("div",{className:"animate-fade-in",children:_.jsx(Yq,{extractedData:o,formData:c,onEdit:g,onDownload:w})})]}),_.jsxs("div",{className:"flex justify-between items-center max-w-6xl mx-auto mt-8",children:[_.jsxs(Lt,{variant:"outline",onClick:y,disabled:t===1,className:"gap-2",children:[_.jsx(E$,{className:"h-4 w-4"}),n("previous")]}),t<4&&_.jsxs(Lt,{variant:"hero",onClick:b,disabled:t===1&&s.length===0||t===2&&d,className:"gap-2",children:[t===1?"Extract Data":n("next"),_.jsx(A$,{className:"h-4 w-4"})]})]})]}),_.jsx("footer",{className:"border-t mt-16",children:_.jsx("div",{className:"container py-6 text-center text-sm text-muted-foreground",children:_.jsxs("div",{className:"flex items-center justify-center gap-2",children:[_.jsx(ZA,{className:"h-4 w-4 text-success"}),_.jsx("span",{children:n("secureProcessing")})]})})})]})}function Jq(n){const e=n.toLowerCase();return e.includes("aadhaar")||e.includes("aadhar")||e.includes("addhar")||e.includes("adhar")||e.includes("aadhr")||e.includes("uidai")?"aadhaar":e.includes("pan")?"pan":e.includes("voter")||e.includes("epic")?"voterId":e.includes("license")||e.includes("dl")?"drivingLicense":"other"}const Zq=()=>{const n=mO();return A.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),_.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:_.jsxs("div",{className:"text-center",children:[_.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),_.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),_.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},eK=new cz,tK=()=>_.jsx(dz,{client:eK,children:_.jsx(Jz,{children:_.jsxs(B4,{children:[_.jsx(_U,{}),_.jsx(e3,{}),_.jsx(Yz,{children:_.jsxs(qz,{children:[_.jsx(eS,{path:"/",element:_.jsx(Qq,{})}),_.jsx(eS,{path:"*",element:_.jsx(Zq,{})})]})})]})})});LN(document.getElementById("root")).render(_.jsx(tK,{}));
